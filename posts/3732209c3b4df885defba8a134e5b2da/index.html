<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>postman使用教程 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="postman使用教程" />
<meta property="og:description" content="postman基础功能介绍
首先，看一下它的基础功能：
collection在postman里面相当于一个文件夹，可以把同一个项目的请求放在一个Collection里方便管理和分享，Collection里面也可以再建文件夹。这里我们做一个普通接口的简单的示例：
该请求是聚合数据提供的一个查询天气的接口，大概还有几百次的次数可以用：
http://v.juhe.cn/weather/index?format=2&amp;cityname=南京&amp;key=64aa04d276d1ed4fd5a147d97e16b87e
点击send，查询成功
这样就完成了一次简单的天气查询接口的请求
请求区域介绍
1 Authorization：身份验证，主要用来填写用户名密码，以及一些验签字段,postman有一个helpers可以帮助我们简化一些重复和复杂的任务。当前的一套helpers可以帮助你解决一些authentication protocols的问题。；
2 Headers：请求的头部信息
3 Body：post请求时必须要带的参数，里面放一些key-value键值对
4 Pre-requerst Script:可以让你在 请求之前自定义请求数据，这个运行在请求之前，语法使用JavaScript语句。
5 tests：tests标签功能比较强大，通常用来写测试，它是运行在请求之后。支持JavaScript语法。postman每次执行request的时候，会执行tests。测试结果会在tests的tab上面显示一个通过的数量以及对错情况。这个后面会进行详解，它也可以用来设计用例，比如要测试返回结果是否含有某一字符串
6 form-data：,它将表单数据处理为一条消息，以标签为单元，用分隔符分开。既可以单独上传键值对，也可以直接上传文件（当上传字段是文件时，会有Content-Type来说明文件类型,但该文件不会作为历史保存，只能在每次需要发送请求的时候，重新添加文件。）；post请求里较常用的一种
7 x-www-form-urlencoded：对应信息头-application/x-www-from-urlencoded，会将表单内的数据转换为键值对；
8 raw：可以上传任意类型的文本，比如text、json、xml等,所有填写的text都会随着请求发送；
9 binary：对应信息头-Content-Type:application/octet-stream，只能上传二进制文件，且没有键值对，一次只能上传一个文件, 也不能保存历史，每次选择文件，提交；
导出和导入接口集：
postman支持非常方便的导入和导出接口集，继续操作如下：
导出
ok，这样就是简单的导入导出collection集合
关于设置环境变量：
Global—全局
Enviroment — 环境变量
Local — 局部
Data ---- 数据
优先级从高到底 Data ---- &gt; Local ---- &gt; Enviroment ---- &gt; Global
postman支持很方便的设置环境变量以及全局变量，并可以一键切换不同环境
1：可以一键切换环境，选择No Environment则不使用环境变量，仅适用全局变量
2：可以查看当前环境中的变量和全局变量（Globals）的值
3.进入设置页面
如新建一套环境dome
选择我们刚才创建的环境，点击眼睛可以看到我们设置的变量值
创建环境变量能够很方便的调取我们所需的数据
将返回值的某个数据设置为环境变量
在某些时候，我们需要获取到一个变量，并保存下来，因为在后面我们会使用到。比如token，sign等信息
这时候就需要用到tests区域了，使用其强大的js语法
下面是一个简单的将返回值的某个数据设置为环境变量或者全局变量的介绍：
定义一个xxx，获取body中返回的所有参数,并转化为JSON格式 var xxx = JSON." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/3732209c3b4df885defba8a134e5b2da/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-10T09:18:17+08:00" />
<meta property="article:modified_time" content="2020-12-10T09:18:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">postman使用教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>postman基础功能介绍<br> 首先，看一下它的基础功能：<br> <img src="https://images2.imgbox.com/46/5a/oD1LsLQJ_o.png" alt="在这里插入图片描述"><br> collection在postman里面相当于一个文件夹，可以把同一个项目的请求放在一个Collection里方便管理和分享，Collection里面也可以再建文件夹。这里我们做一个普通接口的简单的示例：</p> 
<p><img src="https://images2.imgbox.com/bb/a6/PIqbaA00_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/62/bd/Azp2ikMH_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/48/ae/MUsGZpAo_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/38/7b/icA4QOXx_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/42/80/dIItXT3d_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c1/50/ZpjciDlX_o.png" alt="在这里插入图片描述"><br> 该请求是聚合数据提供的一个查询天气的接口，大概还有几百次的次数可以用：</p> 
<p>http://v.juhe.cn/weather/index?format=2&amp;cityname=南京&amp;key=64aa04d276d1ed4fd5a147d97e16b87e</p> 
<p>点击send，查询成功<br> <img src="https://images2.imgbox.com/c8/98/GTqEXBUG_o.png" alt="在这里插入图片描述"><br> 这样就完成了一次简单的天气查询接口的请求</p> 
<p>请求区域介绍</p> 
<p><img src="https://images2.imgbox.com/dc/e6/Xqz4yhQB_o.png" alt="在这里插入图片描述"><br> 1 Authorization：身份验证，主要用来填写用户名密码，以及一些验签字段,postman有一个helpers可以帮助我们简化一些重复和复杂的任务。当前的一套helpers可以帮助你解决一些authentication protocols的问题。；</p> 
<p>2 Headers：请求的头部信息</p> 
<p>3 Body：post请求时必须要带的参数，里面放一些key-value键值对</p> 
<p>4 Pre-requerst Script:可以让你在 请求之前自定义请求数据，这个运行在请求之前，语法使用JavaScript语句。</p> 
<p>5 tests：tests标签功能比较强大，通常用来写测试，它是运行在请求之后。支持JavaScript语法。postman每次执行request的时候，会执行tests。测试结果会在tests的tab上面显示一个通过的数量以及对错情况。这个后面会进行详解，它也可以用来设计用例，比如要测试返回结果是否含有某一字符串</p> 
<p>6 form-data：,它将表单数据处理为一条消息，以标签为单元，用分隔符分开。既可以单独上传键值对，也可以直接上传文件（当上传字段是文件时，会有Content-Type来说明文件类型,但该文件不会作为历史保存，只能在每次需要发送请求的时候，重新添加文件。）；post请求里较常用的一种</p> 
<p><img src="https://images2.imgbox.com/07/74/ORx9JuD4_o.png" alt="。"><br> 7 x-www-form-urlencoded：对应信息头-application/x-www-from-urlencoded，会将表单内的数据转换为键值对；</p> 
<p>8 raw：可以上传任意类型的文本，比如text、json、xml等,所有填写的text都会随着请求发送；</p> 
<p>9 binary：对应信息头-Content-Type:application/octet-stream，只能上传二进制文件，且没有键值对，一次只能上传一个文件, 也不能保存历史，每次选择文件，提交；</p> 
<p>导出和导入接口集：<br> postman支持非常方便的导入和导出接口集，继续操作如下：</p> 
<p>导出</p> 
<p><img src="https://images2.imgbox.com/e1/6b/KerF7sAZ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/49/f4/PXa0xPxG_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c3/8b/xUX30Mhl_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8c/11/qvOZUGKZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b2/77/qTSkL8LS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/04/2d/eueeE4CW_o.png" alt="在这里插入图片描述"><br> ok，这样就是简单的导入导出collection集合</p> 
<p>关于设置环境变量：</p> 
<ol><li> <p>Global—全局</p> </li><li> <p>Enviroment — 环境变量</p> </li><li> <p>Local — 局部</p> </li><li> <p>Data ---- 数据</p> </li></ol> 
<p>优先级从高到底 Data ---- &gt; Local ---- &gt; Enviroment ---- &gt; Global</p> 
<p>postman支持很方便的设置环境变量以及全局变量，并可以一键切换不同环境</p> 
<p><img src="https://images2.imgbox.com/aa/fc/utE2ZC8s_o.png" alt="在这里插入图片描述"><br> 1：可以一键切换环境，选择No Environment则不使用环境变量，仅适用全局变量</p> 
<p>2：可以查看当前环境中的变量和全局变量（Globals）的值</p> 
<p><img src="https://images2.imgbox.com/ac/f8/iQCTRyJg_o.png" alt="在这里插入图片描述"></p> 
<p>3.进入设置页面</p> 
<p><img src="https://images2.imgbox.com/ad/84/mZh9kkfA_o.png" alt="在这里插入图片描述"><br> 如新建一套环境dome</p> 
<p><img src="https://images2.imgbox.com/a6/af/N5KQ17wS_o.png" alt="在这里插入图片描述"><br> 选择我们刚才创建的环境，点击眼睛可以看到我们设置的变量值</p> 
<p><img src="https://images2.imgbox.com/2f/6a/wg0ElGPB_o.png" alt="在这里插入图片描述"></p> 
<p>创建环境变量能够很方便的调取我们所需的数据</p> 
<p>将返回值的某个数据设置为环境变量<br> 在某些时候，我们需要获取到一个变量，并保存下来，因为在后面我们会使用到。比如token，sign等信息</p> 
<p>这时候就需要用到tests区域了，使用其强大的js语法</p> 
<p>下面是一个简单的将返回值的某个数据设置为环境变量或者全局变量的介绍：</p> 
<p>定义一个xxx，获取body中返回的所有参数,并转化为JSON格式 var xxx = JSON.parse(responseBody);</p> 
<p>//把json字符串转化为对象。parse()会进行json格式的检查是一个安全的函数， 如：检查json中某个数组元素的个数(这里检测programs的长度)</p> 
<p>var data = JSON.parse(responseBody);tests[“program’s lenght”] = data.programs.length === 5;</p> 
<p>将返回中的值设置为一个环境变量 pm.environment.set(“key”,xxx.data.value);或者postman.setEnvironmentVariable(“key”, “value”);</p> 
<p>将返回中的值设置为一个全局变量， pm.globals.set(“key”,xxx.data.value);或者postman.setGlobalVariable(“key”, “value”);</p> 
<p>//注意：Global后面不能加S，value值一定要指定到某个具体节点</p> 
<p>实际操作一下：</p> 
<p>一个微信登录的接口token值获取</p> 
<p><img src="https://images2.imgbox.com/68/f1/VMS3Qg1o_o.png" alt="在这里插入图片描述"></p> 
<p>这是一个微信登录的接口，属于post方法，里面的必须参数是unionid，这里我已经把unionid填在body里了，点击send下面可以得到一个token</p> 
<p>该登录token每次请求的值都是不一样的，属于一个动态值。而后面我们的所有接口请求都需要这个token,现在就可以使用tests将它放置在环境变量里</p> 
<p><img src="https://images2.imgbox.com/73/39/uYL6qQLp_o.png" alt="在这里插入图片描述"></p> 
<p>var acquiretoken = JSON.parse(responseBody);</p> 
<p>//定义一个acquiretoken方法(获取token)，把responseBody转为json字符串</p> 
<p>pm.environment.set(“token”,acquiretoken.data.token);</p> 
<p>//将token变量放置到当前环境变量里去</p> 
<p>再次执行send后，点击右上角小眼睛</p> 
<p><img src="https://images2.imgbox.com/8a/43/ULrTvaSI_o.png" alt="在这里插入图片描述"></p> 
<p>发现变量就储存在了dome的环境变量里，每次点击send进行请求，发现环境变量里token都会随着结果变化而变化。</p> 
<p>同理，全局变量统一可以这样设置</p> 
<p>在设置过变量后，调用变量的时候，在postman里也比较方便，直接使用{<!-- -->{变量名}}就可以了，</p> 
<p>加入我们在body里需要一个token值，那么我们可以直接在引用在环境变量里储存的token，例如：</p> 
<p><img src="https://images2.imgbox.com/d6/8c/paZ5WpHh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ac/8b/Gy3Sg2aC_o.png" alt="在这里插入图片描述"></p> 
<p>引用变量的时候会有一定的提示</p> 
<p>变颜色代表引入变量成功<br> 上面的效果和下面这种把一点点输入的的效果是一样的！</p> 
<p><img src="https://images2.imgbox.com/29/85/5b498acw_o.png" alt="在这里插入图片描述"></p> 
<p>其他的常用tests方法：<br> 在postman里，内置了一些常用的方法：</p> 
<p><img src="https://images2.imgbox.com/e8/6f/rb282JLJ_o.png" alt="在这里插入图片描述"></p> 
<p>可以很方便的调用</p> 
<p>下面我也整理了一些常用的tests方法，分享给大家</p> 
<p>测试response Headers中的某个元素是否存在 tests[“元素Content-Type是否存在”] = postman.getResponseHeader(“Content-Type”);</p> 
<p>//getResponseHeader()方法会返回header的值；</p> 
<p>定义一个xxx，获取headers值 var.xxx = postman.getResponseHeader(“key”);</p> 
<p>将Headers中的值设置为一个环境变量 postman.setEnvironmentVariable(“key”,xxx);或者pm.environment.set(“key”,xxx);</p> 
<p>检查response的code值是否为200 tests[“Status code is 200”] = responseCode.code === 200;</p> 
<p>// tests[“Status code is 200”]中的tests是一个内置对象，</p> 
<p>tests[“Status code is 200”]是指为这个断言起个名称叫”Status code is 200”，这个名称可以自行修改。</p> 
<p>responseCode.code === 200中的responseCode是内置对象，responseCode对象中有个属性是code，是指HTTP状态码的code，判断code是否为200.</p> 
<p>综合起来，这句代码的意思是：名称为”Status code is 200”的断言中，判断responseCode对象的code属性值（HTTP状态码）是否为200。</p> 
<p>检查response的body中是否包含字符串 tests[“Body matches string”] = responseBody.has(“type”);</p> 
<p>// tests[“Body matches string”]中的tests是一个内置对象，</p> 
<p>tests[“Body matches string”]是指为这个断言起个名称叫”Body matches string”，这个名称可以自行修改。</p> 
<p>这句代码的意思是：名称为”Body matches string”的断言中判断响应正文中是否包含：type这个字段。type无论是key或者value，只要匹配就可以。多个类型可用“，”分割。</p> 
<p>检查Response Body是否等于字符串 tests[“测试点”] = responseBody === “Response Body返回的内容”;</p> 
<p>//这个可以用在接口返回内容为纯字符串时，直接检查整个返回结果的正确性</p> 
<p>检查Response time 是否小于200ms tests[“Response time 小于200毫秒”] = responseTime &lt; 200;</p> 
<p>检查Response time 是否大于200ms tests[“Response time 大于200毫秒”] = responseTime &gt; 200;</p> 
<p>postman.setNextRequest(‘Request 4’)</p> 
<p>// postman.setNextRequest()是一个带有一个参数的函数，它是接下来要运行的请求的名称或ID。往往用来跳转至某个接口，只在运行该集合时有用，单独运行无效</p> 
<p>var jsonObject = xml2Json(responseBody);</p> 
<p>//转换XML body为JSON对象</p> 
<p>设置一个随机数变量 pm.globals.set(“type”,parseInt(4*Math.random())+1);</p> 
<p>//针对不同类型的课程类型，设置一个1到4的随机整数，字段名是type,parselnt 是强制转换为整数</p> 
<p>校验接口返回是否有数据 tests[“获取第一个结果”] = xxx.content.jieguo[0];</p> 
<p>//我的程序设置的是如果当前没有数据，则只返回content[]，所以这句断言可以校验，如果content里还有数据，则视为返回不为空</p> 
<p>使用postman进行接口自动化测试<br> 没错，使用postman也可以进行接口自动化的，是不是很神奇</p> 
<p>首先，既然是自动化测试，那么我们肯定需要工具 (Postman) 或者代码能帮我们直接判断结果是否符合预期。那么在接口测试上，大体就两个思路：</p> 
<p>判断请求返回的 code 是否符合预期</p> 
<p>判断请求返回的内容中是否包含预期的内容（关键字）</p> 
<p>接下来我们看看如何利用 Postman 来解决上述的问题</p> 
<hr> 
<p>这是三个模拟天气的接口集合，点击扩展按钮，找到RUN，进入</p> 
<p><img src="https://images2.imgbox.com/21/11/gLStv7C9_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/07/e7/IyYGLM5F_o.png" alt="在这里插入图片描述"></p> 
<p>这里我们先简单运行一次：</p> 
<p><img src="https://images2.imgbox.com/04/44/xiHnVDVE_o.png" alt="在这里插入图片描述"></p> 
<p>发现，运行成功。里面我每个接口都写了两个tests进行校验字段，所以上面一共有6条tests测试点被测试到，并且是成功的</p> 
<p>每个接口里的tests数据如下：</p> 
<p>当然，如果想要每次运行不一样的数据，我们需要其他的方法，比如，使用pre-requestScprit功能，导入或者生成随机数据进行测试，这个后续我再进行讲解</p> 
<p><img src="https://images2.imgbox.com/ab/b1/rLQyfCRC_o.png" alt="在这里插入图片描述"></p> 
<p>转载https://www.jianshu.com/p/97ba64888894</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/56eb7b974cbc557f182933a6d252e48f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Sophos防火墙v18版本访问内部服务器或者电脑SNAT地址转换的问题解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cd88aeba491c20266eec83b4287b6821/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在同一台机器上安装多个MySQL8.0服务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>