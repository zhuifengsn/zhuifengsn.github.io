<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker 常用命令整合！！！带你一起理解和复习每个操作命令！！！带操作图，不会也能看懂的！！ - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker 常用命令整合！！！带你一起理解和复习每个操作命令！！！带操作图，不会也能看懂的！！" />
<meta property="og:description" content="本文整理出在Docker中常用的命令，一是可以做一个备忘录的作用，二是也可以作为一个复习的文章。
Docker镜像、容器、日志等等相关命令都涵盖在内，文内带有操作图，不难的哦。
很喜欢一句话：“八小时内谋生活，八小时外谋发展。”
共勉
地点：湖南邵阳
作者：博主
一、Docker 相关命令 查看Docker 版本号
docker --version 查看Docker 相关信息
docker info 查看Docker帮助命令
docker --help 可以查看到所有Docker 命令，不过对英语不太好的同学不太友善哈。🙃~~（我也是）~~
二、Docker镜像相关命令 2.1、镜像查看 列出本地镜像
1、查看全部镜像
docker images 2、查看全部镜像含中间映像层
docker images -a 3、其他
docker images -q #仅显示镜像id docker history -H imageserver #显示指定镜像的历史创建；参数：-H 镜像大小和日期 imageserver 我自己做的一个镜像 2.2、镜像搜索 搜索MySQL的镜像
docker search mysql #带上版本号搜索 docker search mysql:5.7 #docker search &lt;镜像名&gt;:&lt;版本号&gt; -**-filter=stars:**只显示 starts&gt;=600 的镜像
docker search --filter=stars=600 mysql –automated ：只列出 AUTOMATED=OK 的镜像
docker search --automated mysql 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/80ca80cff7c8cabec6a8edf23159ec70/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-03T22:42:32+08:00" />
<meta property="article:modified_time" content="2021-08-03T22:42:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker 常用命令整合！！！带你一起理解和复习每个操作命令！！！带操作图，不会也能看懂的！！</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>本文整理出在Docker中常用的命令，一是可以做一个备忘录的作用，二是也可以作为一个复习的文章。</p> 
 <p>Docker镜像、容器、日志等等相关命令都涵盖在内，文内带有操作图，不难的哦。</p> 
 <p>很喜欢一句话：“<strong>八小时内谋生活，八小时外谋发展。</strong>”</p> 
 <p><code>共勉</code></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/fd/14/Mmqot0ba_o.jpg" alt="在这里插入图片描述"><br> <code>地点</code>：湖南邵阳<br> <code>作者</code>：博主</p> 
<h3><a id="Docker__11"></a>一、Docker 相关命令</h3> 
<ol><li> <p>查看Docker 版本号</p> <pre><code class="prism language-bash">docker --version
</code></pre> <p><img src="https://images2.imgbox.com/f8/ad/exrmGRPD_o.png" alt="在这里插入图片描述"></p> </li><li> <p>查看Docker 相关信息</p> <pre><code class="prism language-bash">docker info
</code></pre> <p><img src="https://images2.imgbox.com/af/37/0o27mJRn_o.png" alt="在这里插入图片描述"></p> </li><li> <p>查看Docker帮助命令</p> <pre><code class="prism language-bash">docker --help
</code></pre> <p>可以查看到所有Docker 命令，不过对英语不太好的同学不太友善哈。🙃~~（我也是）~~</p> <p><img src="https://images2.imgbox.com/f1/59/aa7FAzyO_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h3><a id="Docker_42"></a>二、Docker镜像相关命令</h3> 
<h4><a id="21_44"></a>2.1、镜像查看</h4> 
<ul><li> <p>列出本地镜像</p> <p>1、查看全部镜像</p> <pre><code class="prism language-bash">docker images
</code></pre> <p><img src="https://images2.imgbox.com/38/70/Mwoni2Bw_o.png" alt="在这里插入图片描述"></p> <p>2、查看全部镜像含中间映像层</p> <pre><code class="prism language-bash">docker images -a
</code></pre> <p><img src="https://images2.imgbox.com/2d/ac/cs0vd2ok_o.png" alt="在这里插入图片描述"></p> <p>3、其他</p> <pre><code class="prism language-bash">docker images -q <span class="token comment">#仅显示镜像id</span>
docker <span class="token function">history</span> -H imageserver <span class="token comment">#显示指定镜像的历史创建；参数：-H 镜像大小和日期 imageserver 我自己做的一个镜像</span>
</code></pre> <p><img src="https://images2.imgbox.com/ed/c4/k4bYGBKE_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<h4><a id="22_76"></a>2.2、镜像搜索</h4> 
<ol><li> <p>搜索MySQL的镜像</p> <pre><code class="prism language-bash">docker search mysql 
<span class="token comment">#带上版本号搜索 docker search mysql:5.7 </span>
<span class="token comment">#docker search &lt;镜像名&gt;:&lt;版本号&gt;</span>
</code></pre> </li><li> <p>-**-filter=stars:**只显示 starts&gt;=600 的镜像</p> <pre><code class="prism language-bash">docker search --filter<span class="token operator">=</span>stars<span class="token operator">=</span><span class="token number">600</span> mysql
</code></pre> </li><li> <p><strong>–automated</strong> ：只列出 AUTOMATED=OK 的镜像</p> <pre><code class="prism language-bash">docker search  --automated mysql
</code></pre> </li></ol> 
<p><img src="https://images2.imgbox.com/53/27/M5DBVTkH_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="23_101"></a>2.3、镜像下载</h4> 
<ol><li> <p>下载最新官方镜像（此处以下载redis 做例子）</p> <pre><code class="prism language-bash">docker pull redis <span class="token comment">#不指定版本号时，默认拉取最新版本 即latest </span>
docker pull redis:5.0.7<span class="token comment"># 指定版本号 即加一个引号 后说明版本号即可。</span>
</code></pre> </li><li> <p>下载仓库所有Redis镜像</p> <pre><code class="prism language-bash">docker pull -a redis
</code></pre> </li><li> <p>下载网上公开的仓库镜像</p> <pre><code class="prism language-bash">docker pull bitnami/redis <span class="token comment">#即别人制作的公开放到网上的镜像</span>
</code></pre> <p><img src="https://images2.imgbox.com/1c/cd/RsDjPX2F_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h4><a id="24_125"></a>2.4、镜像删除</h4> 
<ol><li> <p>删除单个镜像</p> <p><code>注意：</code>(不强制删除，必须先删除此镜像相关的容器，才能删除此镜像)</p> <pre><code class="prism language-bash"><span class="token comment">##相当于：docker rmi redis:latest</span>
docker rmi redis
</code></pre> </li><li> <p>强制删除（即有运行的容器，也强行删除,但并不会删除正在运行的容器[已亲测]）</p> <pre><code class="prism language-bash"><span class="token comment">##强制删除(针对基于镜像有运行的容器进程)</span>
docker rmi -f redis
</code></pre> </li><li> <p>批量删除（不同镜像之间用空格间隔）</p> <pre><code class="prism language-bash">docker rmi -f redis mysql nginx
</code></pre> </li><li> <p>删除本地全部镜像</p> <pre><code class="prism language-bash">docker rmi -f <span class="token variable"><span class="token variable">$(</span>docker images -q<span class="token variable">)</span></span> <span class="token comment">#$() 可以简单理解为sql 语句中嵌套语句</span>
</code></pre> <p><img src="https://images2.imgbox.com/98/1f/CRuyPAkK_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h4><a id="25_158"></a>2.5、镜像构建</h4> 
<p>此处只做一个最简单的例子，一句两句说不清。牵扯Dockerfile文件书写。</p> 
<p>(1) 编写我们的Dockerfile文件</p> 
<pre><code class="prism language-Dockerfile">from centos:latest

ENV mypath /usr
WORKDIR $mypath

RUN yum -y install vim
RUN yum -y install net-tools

EXPOSE 80

CMD /bin/bash
</code></pre> 
<p>(2) 构建镜像</p> 
<pre><code class="prism language-bash">docker build -f /myDocker/Dockerfile2 -t mycentos:1.3 
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#如果 dockerfile文件在当前目录 命令可简写为</span>
docker build -t mycentos:1.3 <span class="token builtin class-name">.</span>
</code></pre> 
<p><strong>解释：</strong></p> 
<p>1、docker build 为docker中镜像构建命令</p> 
<p>2、-f ：指明dockerfile文件的路径</p> 
<p>3、-t ：指定镜像生成名字 版本号为可选。</p> 
<p>4、<code>.</code> 最后的小数点意思是在当前目录下, 即Dockerfile所在目录</p> 
<h3><a id="Docker__199"></a>三、Docker 容器相关命令</h3> 
<h4><a id="31_201"></a>3.1、查看容器</h4> 
<p>1、查看正在运行的容器</p> 
<pre><code class="prism language-bash">docker <span class="token function">ps</span>
</code></pre> 
<p>2、查看正在运行的容器的ID</p> 
<pre><code class="prism language-bash"> docker <span class="token function">ps</span> -q
</code></pre> 
<p>3、查看正在运行+历史运行过的容器</p> 
<pre><code class="prism language-bash">docker <span class="token function">ps</span> -a
</code></pre> 
<p><img src="https://images2.imgbox.com/91/66/r29K9o66_o.png" alt="在这里插入图片描述"></p> 
<p>4、获取正在运行的容器redis的 IP</p> 
<pre><code class="prism language-bash">docker inspect --format<span class="token operator">=</span><span class="token string">'{<!-- -->{range .NetworkSettings.Networks}}{<!-- -->{.IPAddress}}{<!-- -->{end}}'</span> redis
</code></pre> 
<p><img src="https://images2.imgbox.com/d4/ff/GHmnmD7P_o.png" alt="在这里插入图片描述"></p> 
<p>5、查看容器元信息（此处以redis举例）</p> 
<pre><code class="prism language-bash">docker inspect myredis <span class="token comment">#myredis 是我的redis 容器名</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/75/fd/184B0WnP_o.png" alt="在这里插入图片描述"></p> 
<p>在启动集群的时候比较有效，单机的话就~~。</p> 
<h4><a id="32_244"></a>3.2、启动容器</h4> 
<p><strong>启动暂停的容器</strong></p> 
<pre><code class="prism language-bash">docker start <span class="token operator">&lt;</span>容器名<span class="token operator">||</span>容器id<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>重启容器</strong></p> 
<pre><code class="prism language-bash">docker restart redis  <span class="token comment">#&lt;容器名||容器id&gt;</span>
</code></pre> 
<p><strong>此处以启动redis容器举例</strong></p> 
<pre><code class="prism language-bash">docker run --restart<span class="token operator">=</span>always --log-opt max-size<span class="token operator">=</span>100m --log-opt max-file<span class="token operator">=</span><span class="token number">2</span> -p <span class="token number">6379</span>:6379 --name myredis -v /home/redis/myredis/myredis.conf:/etc/redis/redis.conf -v /home/redis/myredis/data:/data -d redis redis-server /etc/redis/redis.conf  --appendonly <span class="token function">yes</span>  --requirepass 000415
</code></pre> 
<ol><li> <p><strong>–restart=always</strong> 总是开机启动</p> </li><li> <p><strong>–log</strong>是日志方面的</p> </li><li> <p><strong>-p 6379:6379</strong> 将6379端口挂载出去</p> <p><img src="https://images2.imgbox.com/78/7b/DTgycu6G_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>–name</strong>:给这个容器取一个名字</p> </li><li> <p><strong>-v 数据卷挂载</strong></p> 
  <ul><li>/home/redis/myredis/myredis.conf:/etc/redis/redis.conf 这里是将 liunx 路径下的myredis.conf 和redis下的redis.conf 挂载在一起。</li><li>/home/redis/myredis/data:/data 这个同上</li></ul> </li><li> <p><strong>-d redis</strong> 表示后台启动redis</p> </li><li> <p><strong>redis-server /etc/redis/redis.conf 以配置文件启动redis</strong>，加载容器内的conf文件，最终找到的是挂载的目录 /etc/redis/redis.conf 也<strong>就是liunx下的/home/redis/myredis/myredis.conf</strong></p> </li><li> <p><strong>–appendonly yes 开启redis 持久化</strong></p> </li><li> <p><mark>–requirepass 000415 设置密码</mark> （如果你是通过docker 容器内部连接的话，就随意，可设可不设。但是如果想向外开放的话，一定要设置，我被搞过，可以看这篇文章“<a href="https://editor.csdn.net/md/?articleId=118061056" rel="nofollow">阿里云服务器中毒‘Kirito666’经历</a>”）</p> </li><li> <p>成功界面</p> <p><img src="https://images2.imgbox.com/79/d6/ZTUrrdU7_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h4><a id="33_295"></a>3.3、容器进程</h4> 
<pre><code class="prism language-bash"><span class="token comment">##top支持 ps 命令参数，格式：</span>
docker <span class="token function">top</span> <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER <span class="token punctuation">[</span>ps OPTIONS<span class="token punctuation">]</span> 
<span class="token comment">##列出redis容器中运行进程 </span>
docker <span class="token function">top</span> redis <span class="token comment">##查看所有运行容器的进程信息 </span>
</code></pre> 
<p><img src="https://images2.imgbox.com/dc/3f/O2zzezjJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="34_309"></a>3.4、容器的停止和删除</h4> 
<ol><li> <p>停止一个运行中的容器</p> <pre><code class="prism language-bash">docker stop myredis <span class="token comment">#stop 后 跟容器名或容器id 都可以</span>
</code></pre> </li><li> <p>杀掉一个运行中的容器</p> <pre><code class="prism language-bash">docker <span class="token function">kill</span> myredis <span class="token comment">#同上</span>
</code></pre> </li></ol> 
<p><img src="https://images2.imgbox.com/92/20/7QvKao05_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li> <p>删除一个已停止的容器</p> <pre><code class="prism language-bash">docker <span class="token function">rm</span> myreis <span class="token comment">#同上</span>
</code></pre> </li><li> <p>删除一个运行时的容器</p> <pre><code class="prism language-bash">docker <span class="token function">rm</span> -f myredis <span class="token comment">#同上</span>
</code></pre> </li></ol> 
<p><img src="https://images2.imgbox.com/2d/c1/hD8JllBD_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li> <p>删除全部容器</p> <pre><code class="prism language-bash">docker <span class="token function">rm</span> -f <span class="token variable"><span class="token variable">$(</span>docker <span class="token function">ps</span> -a -q<span class="token variable">)</span></span> <span class="token comment">#$() 你可以理解sql 语句中的嵌套语句</span>
</code></pre> </li></ol> 
<h3><a id="Docker__347"></a>四、Docker 查看运行日志</h3> 
<blockquote> 
 <p>基本格式：docker logs [OPTIONS] CONTAINER</p> 
</blockquote> 
<p>OPTIONS：可带参数 见下图。</p> 
<p><img src="https://images2.imgbox.com/de/6c/YPmvMU3A_o.png" alt="在这里插入图片描述"></p> 
<ul><li>–details 显示更多的信息</li><li>-f, --follow 跟踪实时日志</li><li>–since string 显示自某个timestamp之后的日志，或相对时间，如30m（即30分钟）</li><li>–tail string 从日志末尾显示多少行日志， 默认是all</li><li>-t, --timestamps 显示时间戳</li><li>–until string 显示自某个timestamp之前的日志，或相对时间，如30m（即30分钟）</li></ul> 
<p><code>举例：</code></p> 
<h4><a id="41_365"></a>4.1、查看此容器全部运行日志：</h4> 
<pre><code class="prism language-bash">docker logs  <span class="token operator">&lt;</span>容器id<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="42200_371"></a>4.2、查看日志，只显示最后200行</h4> 
<pre><code class="prism language-bash">docker logs --tail <span class="token number">200</span> CONTAINER_ID
</code></pre> 
<h4><a id="4330_377"></a>4.3、查看最近30分钟的日志</h4> 
<pre><code class="prism language-bash">docker logs --since 30m CONTAINER_ID
</code></pre> 
<h4><a id="44_383"></a>4.4、查看某时间之后的日志</h4> 
<pre><code class="prism language-bash">dockere logs -t --since <span class="token string">"2021-07-31T10:35:10"</span> d0e <span class="token comment">#d0e是我的容器id </span>
</code></pre> 
<h4><a id="45_389"></a>4.5、查看某时间段之间的日志</h4> 
<pre><code class="prism language-bash">docker logs -t --since <span class="token string">"2021-07-31T10:35:10"</span> --until <span class="token string">"2021-07-31T10:36:10"</span> CONTAINER_ID
</code></pre> 
<p><img src="https://images2.imgbox.com/c0/39/NDZkhn5B_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_402"></a>五、自言自语</h3> 
<p>又是继续内卷的一天啊，昨天看群聊，里面的大佬凌晨了还在讨论问题，讲真，我有点怕啦。这还邀不要人睡啦啊。☠😇</p> 
<p>一起 <code>共勉</code> or🛌。（<s>我还是觉得🛌更爽啊，唉，不过不能选啊</s>）</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dc23c12371b120a67dbff1e8aaf7f570/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">小型网站服务器系统,针对中小型网站的服务器架构(一)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/85510a6ece4506c1a5fa25992a3fdf1d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Arduino与人体感应模块</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>