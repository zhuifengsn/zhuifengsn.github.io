<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Airtest笔记（一） - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Airtest笔记（一）" />
<meta property="og:description" content="个人学习笔记（整理不易，有帮助点个赞）
笔记目录：学习笔记目录_pytest和unittest、airtest_weixin_42717928的博客-CSDN博客
目录
一：简单了解
二：工具下载安装
三：了解工具使用
1）实时坐标、相对坐标
2）手机屏幕显示效果
3）兼容模式
4）代码补全
5）安卓小助手
6）生成报告
四：连接设备
1）Android
2）Windows窗口
3）模拟器连接
4）无线连接
5）IOS
五：简单熟悉
1）基于图像识别(airtest)
2）基于UI控件搜索（poco）
六：语法简单熟悉
1）touch
2)swipe
3）text
4）keyevent
5）断言
七：其他了解（注：学习的时候看到路径都是/，但我用\也可以）
1）使用airtest命令运行脚本
2）使用本地python运行脚本
3）命令参数（更多参考：Airtest — airtest 文档）
4）生成报告（更多参数：Airtest — airtest 文档）
5）airtest使用PYTHON代码生成报告
一：简单了解 Airtest：是一个跨平台的、基于图像识别的UI自动化测试框架，适用于游戏和App，支持平台有Windows、Android和iOS。
Poco：是一款基于UI控件识别的自动化测试框架，目前支持Unity3D/cocos2dx-*/Android原生app/iOS原生app/微信小程序，也可以在其他引擎中自行接入poco-sdk来使用。
AirtestIDE：跨平台的UI自动化测试编辑器，内置了Airtest和Poco的相关插件功能，能够使用它快速简单地编写Airtest和Poco代码。
二：工具下载安装 Airtest的官网：http://airtest.netease.com/
目前有Windows和Mac两个版本的客户端
下载最新版本
下载其他版本
安装python环境，我用的是3.6，当时学的时候3.8还未支持。
帮助文档：欢迎使用 - Airtest Project Docs
三：了解工具使用 1）实时坐标、相对坐标 两个都勾选就是开了相对坐标（格式是(0, 0) 到 (1, 1)），以避免跨分辨率的操作点超出屏幕的问题
2）手机屏幕显示效果 数字越大，清晰度越高。默认为800
3）兼容模式 4）代码补全 用本地的会更好
5）安卓小助手 连接设备后
快捷键 unlock 解锁、power 电源键 、snapshot 截图" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/e51d3dc605ef3950138afc52a41b4dbf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-04T17:24:04+08:00" />
<meta property="article:modified_time" content="2023-06-04T17:24:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Airtest笔记（一）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>个人学习笔记（整理不易，有帮助点个赞）</p> 
 <p>笔记目录：<a href="https://blog.csdn.net/weixin_42717928/article/details/114343085" title="学习笔记目录_pytest和unittest、airtest_weixin_42717928的博客-CSDN博客">学习笔记目录_pytest和unittest、airtest_weixin_42717928的博客-CSDN博客</a></p> 
</blockquote> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%EF%BC%9A%E7%AE%80%E5%8D%95%E4%BA%86%E8%A7%A3-toc" style="margin-left:0px;"><a href="#%E4%B8%80%EF%BC%9A%E7%AE%80%E5%8D%95%E4%BA%86%E8%A7%A3" rel="nofollow">一：简单了解</a></p> 
<p id="%E4%BA%8C%EF%BC%9A%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%EF%BC%9A%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85" rel="nofollow">二：工具下载安装</a></p> 
<p id="%E4%B8%89%EF%BC%9A%E4%BA%86%E8%A7%A3%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8-toc" style="margin-left:0px;"><a href="#%E4%B8%89%EF%BC%9A%E4%BA%86%E8%A7%A3%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8" rel="nofollow">三：了解工具使用</a></p> 
<p id="1%EF%BC%89%E5%AE%9E%E6%97%B6%E5%9D%90%E6%A0%87%E3%80%81%E7%9B%B8%E5%AF%B9%E5%9D%90%E6%A0%87-toc" style="margin-left:40px;"><a href="#1%EF%BC%89%E5%AE%9E%E6%97%B6%E5%9D%90%E6%A0%87%E3%80%81%E7%9B%B8%E5%AF%B9%E5%9D%90%E6%A0%87" rel="nofollow">1）实时坐标、相对坐标</a></p> 
<p id="2%EF%BC%89%E6%89%8B%E6%9C%BA%E5%B1%8F%E5%B9%95%E6%98%BE%E7%A4%BA%E6%95%88%E6%9E%9C-toc" style="margin-left:40px;"><a href="#2%EF%BC%89%E6%89%8B%E6%9C%BA%E5%B1%8F%E5%B9%95%E6%98%BE%E7%A4%BA%E6%95%88%E6%9E%9C" rel="nofollow">2）手机屏幕显示效果</a></p> 
<p id="3%EF%BC%89%E5%85%BC%E5%AE%B9%E6%A8%A1%E5%BC%8F-toc" style="margin-left:40px;"><a href="#3%EF%BC%89%E5%85%BC%E5%AE%B9%E6%A8%A1%E5%BC%8F" rel="nofollow">3）兼容模式</a></p> 
<p id="4%EF%BC%89%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8-toc" style="margin-left:40px;"><a href="#4%EF%BC%89%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8" rel="nofollow">4）代码补全</a></p> 
<p id="5%EF%BC%89%E5%AE%89%E5%8D%93%E5%B0%8F%E5%8A%A9%E6%89%8B-toc" style="margin-left:40px;"><a href="#5%EF%BC%89%E5%AE%89%E5%8D%93%E5%B0%8F%E5%8A%A9%E6%89%8B" rel="nofollow">5）安卓小助手</a></p> 
<p id="6%EF%BC%89%E7%94%9F%E6%88%90%E6%8A%A5%E5%91%8A-toc" style="margin-left:40px;"><a href="#6%EF%BC%89%E7%94%9F%E6%88%90%E6%8A%A5%E5%91%8A" rel="nofollow">6）生成报告</a></p> 
<p id="%E5%9B%9B%EF%BC%9A%E8%BF%9E%E6%8E%A5%E8%AE%BE%E5%A4%87-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%EF%BC%9A%E8%BF%9E%E6%8E%A5%E8%AE%BE%E5%A4%87" rel="nofollow">四：连接设备</a></p> 
<p id="%EF%BC%881%EF%BC%89Android-toc" style="margin-left:40px;"><a href="#%EF%BC%881%EF%BC%89Android" rel="nofollow">1）Android</a></p> 
<p id="%EF%BC%882%EF%BC%89Windows%E7%AA%97%E5%8F%A3-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89Windows%E7%AA%97%E5%8F%A3" rel="nofollow">2）Windows窗口</a></p> 
<p id="%EF%BC%883%EF%BC%89%E6%A8%A1%E6%8B%9F%E5%99%A8%E8%BF%9E%E6%8E%A5-toc" style="margin-left:40px;"><a href="#%EF%BC%883%EF%BC%89%E6%A8%A1%E6%8B%9F%E5%99%A8%E8%BF%9E%E6%8E%A5" rel="nofollow">3）模拟器连接</a></p> 
<p id="%EF%BC%884%EF%BC%89%E6%97%A0%E7%BA%BF%E8%BF%9E%E6%8E%A5-toc" style="margin-left:40px;"><a href="#%EF%BC%884%EF%BC%89%E6%97%A0%E7%BA%BF%E8%BF%9E%E6%8E%A5" rel="nofollow">4）无线连接</a></p> 
<p id="%EF%BC%885%EF%BC%89IOS-toc" style="margin-left:40px;"><a href="#%EF%BC%885%EF%BC%89IOS" rel="nofollow">5）IOS</a></p> 
<p id="%E4%BA%94%EF%BC%9A%E7%AE%80%E5%8D%95%E7%86%9F%E6%82%89-toc" style="margin-left:0px;"><a href="#%E4%BA%94%EF%BC%9A%E7%AE%80%E5%8D%95%E7%86%9F%E6%82%89" rel="nofollow">五：简单熟悉</a></p> 
<p id="%EF%BC%881%EF%BC%89%E5%9F%BA%E4%BA%8E%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB(airtest)-toc" style="margin-left:40px;"><a href="#%EF%BC%881%EF%BC%89%E5%9F%BA%E4%BA%8E%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB%28airtest%29" rel="nofollow">1）基于图像识别(airtest)</a></p> 
<p id="%EF%BC%882%EF%BC%89%E5%9F%BA%E4%BA%8EUI%E6%8E%A7%E4%BB%B6%E6%90%9C%E7%B4%A2%EF%BC%88poco%EF%BC%89-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89%E5%9F%BA%E4%BA%8EUI%E6%8E%A7%E4%BB%B6%E6%90%9C%E7%B4%A2%EF%BC%88poco%EF%BC%89" rel="nofollow">2）基于UI控件搜索（poco）</a></p> 
<p id="%E5%85%AD%EF%BC%9A%E8%AF%AD%E6%B3%95%E7%AE%80%E5%8D%95%E7%86%9F%E6%82%89-toc" style="margin-left:0px;"><a href="#%E5%85%AD%EF%BC%9A%E8%AF%AD%E6%B3%95%E7%AE%80%E5%8D%95%E7%86%9F%E6%82%89" rel="nofollow">六：语法简单熟悉</a></p> 
<p id="%EF%BC%881%EF%BC%89touch-toc" style="margin-left:40px;"><a href="#%EF%BC%881%EF%BC%89touch" rel="nofollow">1）touch</a></p> 
<p id="(2)swipe-toc" style="margin-left:40px;"><a href="#%282%29swipe" rel="nofollow">2)swipe</a></p> 
<p id="%EF%BC%883%EF%BC%89text-toc" style="margin-left:40px;"><a href="#%EF%BC%883%EF%BC%89text" rel="nofollow">3）text</a></p> 
<p id="%EF%BC%884%EF%BC%89keyevent-toc" style="margin-left:40px;"><a href="#%EF%BC%884%EF%BC%89keyevent" rel="nofollow">4）keyevent</a></p> 
<p id="%EF%BC%885%EF%BC%89%E6%96%AD%E8%A8%80-toc" style="margin-left:40px;"><a href="#%EF%BC%885%EF%BC%89%E6%96%AD%E8%A8%80" rel="nofollow">5）断言</a></p> 
<p id="%E4%B8%83%EF%BC%9A%E5%85%B6%E4%BB%96%E4%BA%86%E8%A7%A3%EF%BC%88%E6%B3%A8%EF%BC%9A%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%97%B6%E5%80%99%E7%9C%8B%E5%88%B0%E8%B7%AF%E5%BE%84%E9%83%BD%E6%98%AF%2F%EF%BC%8C%E4%BD%86%E6%88%91%E7%94%A8%5C%E4%B9%9F%E5%8F%AF%E4%BB%A5%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E4%B8%83%EF%BC%9A%E5%85%B6%E4%BB%96%E4%BA%86%E8%A7%A3%EF%BC%88%E6%B3%A8%EF%BC%9A%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%97%B6%E5%80%99%E7%9C%8B%E5%88%B0%E8%B7%AF%E5%BE%84%E9%83%BD%E6%98%AF%2F%EF%BC%8C%E4%BD%86%E6%88%91%E7%94%A8%5C%E4%B9%9F%E5%8F%AF%E4%BB%A5%EF%BC%89" rel="nofollow">七：其他了解（注：学习的时候看到路径都是/，但我用\也可以）</a></p> 
<p id="%EF%BC%881%EF%BC%89%E4%BD%BF%E7%94%A8airtest%E5%91%BD%E4%BB%A4%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC-toc" style="margin-left:40px;"><a href="#%EF%BC%881%EF%BC%89%E4%BD%BF%E7%94%A8airtest%E5%91%BD%E4%BB%A4%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC" rel="nofollow">1）使用airtest命令运行脚本</a></p> 
<p id="%EF%BC%882%EF%BC%89%E4%BD%BF%E7%94%A8%E6%9C%AC%E5%9C%B0python%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89%E4%BD%BF%E7%94%A8%E6%9C%AC%E5%9C%B0python%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC" rel="nofollow">2）使用本地python运行脚本</a></p> 
<p id="%EF%BC%883%EF%BC%89%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%EF%BC%88%E6%9B%B4%E5%A4%9A%E5%8F%82%E8%80%83%EF%BC%9AAirtest%20%E2%80%94%20airtest%20%20%E6%96%87%E6%A1%A3%EF%BC%89-toc" style="margin-left:40px;"><a href="#%EF%BC%883%EF%BC%89%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%EF%BC%88%E6%9B%B4%E5%A4%9A%E5%8F%82%E8%80%83%EF%BC%9AAirtest%20%E2%80%94%20airtest%20%20%E6%96%87%E6%A1%A3%EF%BC%89" rel="nofollow">3）命令参数（更多参考：Airtest — airtest 文档）</a></p> 
<p id="4%EF%BC%89%E7%94%9F%E6%88%90%E6%8A%A5%E5%91%8A%EF%BC%88%E6%9B%B4%E5%A4%9A%E5%8F%82%E6%95%B0%EF%BC%9AAirtest%20%E2%80%94%20airtest%20%20%E6%96%87%E6%A1%A3%EF%BC%89-toc" style="margin-left:40px;"><a href="#4%EF%BC%89%E7%94%9F%E6%88%90%E6%8A%A5%E5%91%8A%EF%BC%88%E6%9B%B4%E5%A4%9A%E5%8F%82%E6%95%B0%EF%BC%9AAirtest%20%E2%80%94%20airtest%20%20%E6%96%87%E6%A1%A3%EF%BC%89" rel="nofollow">4）生成报告（更多参数：Airtest — airtest 文档）</a></p> 
<p id="%EF%BC%885%EF%BC%89airtest%E4%BD%BF%E7%94%A8PYTHON%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E6%8A%A5%E5%91%8A-toc" style="margin-left:40px;"><a href="#%EF%BC%885%EF%BC%89airtest%E4%BD%BF%E7%94%A8PYTHON%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E6%8A%A5%E5%91%8A" rel="nofollow">5）airtest使用PYTHON代码生成报告</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p></p> 
<h2 id="%E4%B8%80%EF%BC%9A%E7%AE%80%E5%8D%95%E4%BA%86%E8%A7%A3"><strong>一：简单了解</strong></h2> 
<p>Airtest：是一个跨平台的、<strong>基于图像识别</strong>的UI自动化测试框架，适用于游戏和App，支持平台有Windows、Android和iOS。</p> 
<p>Poco：是一款<strong>基于UI控件识别</strong>的自动化测试框架，目前支持Unity3D/cocos2dx-*/Android原生app/iOS原生app/微信小程序，也可以在其他引擎中自行接入poco-sdk来使用。</p> 
<p>AirtestIDE：跨平台的<strong>UI自动化测试编辑器</strong>，内置了Airtest和Poco的相关插件功能，能够使用它快速简单地编写<code>Airtest</code>和<code>Poco</code>代码。</p> 
<p></p> 
<h2 id="%E4%BA%8C%EF%BC%9A%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><strong>二：工具下载安装</strong></h2> 
<p>Airtest的官网：<a href="https://link.jianshu.com/?t=http%3A%2F%2Fairtest.netease.com%2F" rel="nofollow" title="http://airtest.netease.com/">http://airtest.netease.com/</a></p> 
<p>目前有Windows和Mac两个版本的客户端</p> 
<p>下载最新版本</p> 
<p><img alt="" height="600" src="https://images2.imgbox.com/87/8b/UpytrAKV_o.png" width="1003"></p> 
<p>下载其他版本</p> 
<p><img alt="" height="510" src="https://images2.imgbox.com/ca/f9/mG9rgQOd_o.png" width="832"></p> 
<p></p> 
<p>安装python环境，我用的是3.6，当时学的时候3.8还未支持。</p> 
<p>帮助文档：<a href="http://airtest.netease.com/docs/docs_AirtestIDE-zh_CN/index.html" rel="nofollow" title="欢迎使用 - Airtest Project Docs">欢迎使用 - Airtest Project Docs</a></p> 
<p></p> 
<p></p> 
<h2 id="%E4%B8%89%EF%BC%9A%E4%BA%86%E8%A7%A3%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8">三：了解工具使用</h2> 
<h3 id="1%EF%BC%89%E5%AE%9E%E6%97%B6%E5%9D%90%E6%A0%87%E3%80%81%E7%9B%B8%E5%AF%B9%E5%9D%90%E6%A0%87">1）实时坐标、相对坐标</h3> 
<p><img alt="" height="104" src="https://images2.imgbox.com/86/84/PpYbswpK_o.png" width="753"></p> 
<p>两个都勾选就是开了相对坐标（格式是(0, 0) 到 (1, 1)），以避免跨分辨率的操作点超出屏幕的问题</p> 
<p></p> 
<h3 id="2%EF%BC%89%E6%89%8B%E6%9C%BA%E5%B1%8F%E5%B9%95%E6%98%BE%E7%A4%BA%E6%95%88%E6%9E%9C">2）手机屏幕显示效果</h3> 
<p><img alt="" height="37" src="https://images2.imgbox.com/68/ce/CqaQzAfj_o.png" width="330"></p> 
<p>数字越大，清晰度越高。默认为800</p> 
<p></p> 
<h3 id="3%EF%BC%89%E5%85%BC%E5%AE%B9%E6%A8%A1%E5%BC%8F">3）兼容模式</h3> 
<p><img alt="" height="37" src="https://images2.imgbox.com/0e/a2/NMoANASe_o.png" width="564"></p> 
<p></p> 
<h3 id="4%EF%BC%89%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8">4）代码补全</h3> 
<p><img alt="" height="20" src="https://images2.imgbox.com/42/40/jUNhiQVu_o.png" width="480"></p> 
<p>用本地的会更好</p> 
<p><img alt="" height="38" src="https://images2.imgbox.com/e7/ac/ZP6h2t39_o.png" width="771"></p> 
<p></p> 
<h3 id="5%EF%BC%89%E5%AE%89%E5%8D%93%E5%B0%8F%E5%8A%A9%E6%89%8B">5）安卓小助手</h3> 
<p>连接设备后</p> 
<p><img alt="" height="214" src="https://images2.imgbox.com/3f/c8/W2flF8g8_o.png" width="247"></p> 
<ul><li>快捷键</li></ul> 
<p><code>unlock</code> 解锁、<code>power</code> 电源键 、snapshot 截图</p> 
<ul><li>安卓apk</li></ul> 
<p><img alt="" height="545" src="https://images2.imgbox.com/3a/77/K9QZmHKo_o.png" width="829"></p> 
<ul><li>操作包</li></ul> 
<p><img alt="" height="445" src="https://images2.imgbox.com/8f/58/7zDqmodj_o.png" width="720"></p> 
<ul><li>切换输入法（Yosemite和本地输入法）</li></ul> 
<p><img alt="" height="430" src="https://images2.imgbox.com/43/7b/jOqIxrer_o.png" width="452"></p> 
<ul><li> 调节手机音量（一键静音，或者加大、减小音量）</li></ul> 
<p><img alt="" height="50" src="https://images2.imgbox.com/81/b0/fE1iJnzD_o.png" width="396"></p> 
<ul><li>打开网址/输入内容</li></ul> 
<p><img alt="" height="101" src="https://images2.imgbox.com/41/c9/cpRiV1mh_o.png" width="414"></p> 
<p></p> 
<h3 id="6%EF%BC%89%E7%94%9F%E6%88%90%E6%8A%A5%E5%91%8A">6）生成报告</h3> 
<p>脚本运行完毕后，点击<code>查看报告</code>按钮（快捷键Ctrl+L）</p> 
<p></p> 
<p></p> 
<p></p> 
<h2 id="%E5%9B%9B%EF%BC%9A%E8%BF%9E%E6%8E%A5%E8%AE%BE%E5%A4%87"><strong>四：连接设备</strong></h2> 
<h3 id="%EF%BC%881%EF%BC%89Android">1）Android</h3> 
<p><img alt="" height="71" src="https://images2.imgbox.com/6f/36/ZXGojprH_o.png" width="366"></p> 
<p>refresh ADB刷新状态，点击Connect初始化；如果没有显示出设备，用restart ADB重启看看</p> 
<p><img alt="" height="307" src="https://images2.imgbox.com/de/a6/pyQZ3Wgd_o.png" width="443"></p> 
<p><code>如果不行看</code><a href="https://airtest.doc.io.netease.com/IDEdocs/device_connection/2_android_faq/" rel="nofollow" title="2.2 Android连接常见问题 - Airtest Project Docs">2.2 Android连接常见问题 - Airtest Project Docs</a></p> 
<p></p> 
<h3 id="%EF%BC%882%EF%BC%89Windows%E7%AA%97%E5%8F%A3">2）Windows窗口</h3> 
<p><img alt="" height="109" src="https://images2.imgbox.com/fa/90/jsqm10ij_o.png" width="442"></p> 
<p>方法一：嵌入式</p> 
<p>点击<code>Windows-框选游戏窗口,选中被测程序即可，也可以拖出去</code></p> 
<p><code>注意：</code>在选择状态下，点击键盘的 <code>esc</code> 按键、鼠标右键均可退出状态</p> 
<p>方法二：非嵌入式</p> 
<p><img alt="" height="196" src="https://images2.imgbox.com/29/5f/dcKu9rz2_o.png" width="722"></p> 
<p><code>如果不行看</code><a href="https://airtest.doc.io.netease.com/IDEdocs/device_connection/5_windows_connection/#id2" rel="nofollow" title="2.5 Windows窗口连接 - Airtest Project Docs">2.5 Windows窗口连接 - Airtest Project Docs</a></p> 
<p></p> 
<h3 id="%EF%BC%883%EF%BC%89%E6%A8%A1%E6%8B%9F%E5%99%A8%E8%BF%9E%E6%8E%A5">3）模拟器连接</h3> 
<p>支持原生模拟器AVD（ <a href="https://developer.android.com/studio/install.html" rel="nofollow" title="Android Studio">Android Studio</a>里面的那个）和常见模拟器如夜神</p> 
<p>如夜神模拟器，点击连接能看到多了一条数据</p> 
<p><img alt="" height="78" src="https://images2.imgbox.com/8e/0c/mGrO0XQi_o.png" width="934"></p> 
<p><img alt="" height="129" src="https://images2.imgbox.com/ac/25/lvaxwbgg_o.png" width="939"></p> 
<p><img alt="" height="101" src="https://images2.imgbox.com/67/47/I5MBnq3x_o.png" width="334"></p> 
<p>点击connect后面的下拉箭头，选择Use javacap，再点击connect</p> 
<p>在部分版本的模拟器上，可能勾选了 <code>use javacap</code> 后依然连接失败，此时可以尝试再勾选 <code>use adb orientation</code> 选项后再重新连接即可</p> 
<table><thead><tr><th><strong>模拟器</strong></th><th><strong>adb连接代码</strong></th></tr></thead><tbody><tr><td>网易Mumu</td><td>adb connect 127.0.0.1:7555</td></tr><tr><td>夜神</td><td>adb connect 127.0.0.1:62001</td></tr><tr><td>逍遥</td><td>adb connect 127.0.0.1:21503</td></tr><tr><td>iTools</td><td>adb connect 127.0.0.1:54001</td></tr><tr><td>天天</td><td>adb connect 127.0.0.1:6555</td></tr><tr><td>海马玩</td><td>adb connect 127.0.0.1:26744</td></tr><tr><td>BlueStacks</td><td>adb connect 127.0.0.1:5555</td></tr></tbody></table> 
<p>在搞夜神模拟器时候，上面的操作报错了（其中一个是包没有安装的问题，一个是adb版本不一致）</p> 
<p><img alt="" height="297" src="https://images2.imgbox.com/8a/14/tSmkxQ7w_o.png" width="755"></p> 
<p>通过这种方式，分别检查了sdk的adb版本、夜神的版本、airtest的版本</p> 
<p><img alt="" height="150" src="https://images2.imgbox.com/05/c9/2voo5pvr_o.png" width="798"></p> 
<p>解决方法：</p> 
<p>1：将sdk安装目录下的platform-tools中的adb.exe替换夜神中的adb.exe，然后在将sdk中的adb复制一份改名为nox_adb.exe，放入夜神的Nox的bin目录下</p> 
<p>2：将airtest目录里的yosemite.apk手动安装到夜神中</p> 
<p>当然懒的搞直接换模拟器也行，木木不错</p> 
<p></p> 
<p></p> 
<h3 id="%EF%BC%884%EF%BC%89%E6%97%A0%E7%BA%BF%E8%BF%9E%E6%8E%A5">4）无线连接</h3> 
<p>在cmd输入adb tcpip 5555</p> 
<p>在红色这块输入手机的那个wifi的ip（手机的wifi和电脑的网络一样），然后上面就出现设备了，点击连接即可</p> 
<p><img alt="" height="78" src="https://images2.imgbox.com/de/2a/OY1FwN7f_o.png" width="406"></p> 
<pre><code>C:\Users\AUSU&gt;adb shell ip -f inet addr|findstr wlan0
33: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; ...
    inet XXX.XXX.XXX.XX........</code></pre> 
<p></p> 
<p></p> 
<h3 id="%EF%BC%885%EF%BC%89IOS">5）IOS</h3> 
<p>要有安装了Xcode的Mac电脑，可惜我没有，跳过。。。</p> 
<p><a href="https://airtest.doc.io.netease.com/IDEdocs/device_connection/4_ios_connection/" rel="nofollow" title="4 ios connection - Airtest Project Docs">4 ios connection - Airtest Project Docs</a></p> 
<p></p> 
<p></p> 
<h2 id="%E4%BA%94%EF%BC%9A%E7%AE%80%E5%8D%95%E7%86%9F%E6%82%89"><strong>五：简单熟悉</strong></h2> 
<h3 id="%EF%BC%881%EF%BC%89%E5%9F%BA%E4%BA%8E%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB(airtest)">1）基于图像识别(airtest)</h3> 
<p>自动录制脚本，点击AirtestIDE左侧的Airtest辅助窗上的<code>录制</code>按钮，不过这种录制生成的图片不精准，可以自己选择那些按钮，拖动生成自己想要的</p> 
<p><img alt="" height="120" src="https://images2.imgbox.com/c6/42/XvJpE3Gd_o.png" width="354"></p> 
<blockquote> 
 <p>touch（）通过截图来 点击某个位置（截图后图片会存储在当前跟目录下）</p> 
 <p>wait （）等待某个指定的图片元素出现</p> 
 <p>swipe（） 从一个位置滑动到另外一个位置</p> 
 <p>exists（）执行之前，提前判断对应图片是否存在</p> 
 <p>text （）调用输入法输入指定内容</p> 
 <p>keyevent （）输入某个系统按钮键的操作，如(HOME/BACK/MENU等)</p> 
 <p>snapshot （）当前画面截图</p> 
 <p>sleep（）延迟时间（s），也可以用python内的“time.sleep(10)”</p> 
 <p>assert_exists（）来断言一张图片存在当前画面中</p> 
 <p>assert_not_exists（）来断言不存在于当前画面中</p> 
 <p>assert_equal（）断言传入的两个值相等</p> 
 <p>assert_not_equal（）断言传入的两个值不相等</p> 
</blockquote> 
<p></p> 
<h3 id="%EF%BC%882%EF%BC%89%E5%9F%BA%E4%BA%8EUI%E6%8E%A7%E4%BB%B6%E6%90%9C%E7%B4%A2%EF%BC%88poco%EF%BC%89">2）基于UI控件搜索（poco）</h3> 
<p>目前<code>Poco</code>直接支持Unity3d、Cocos2d、白鹭引擎等多种游戏引擎，以及Android/iOS原生App。</p> 
<p>如果<strong>是Android/iOS原生应用，是即插即用的</strong>，无需接入SDK。但由于游戏引擎使用OpenGL等图形接口直接渲染，而没有使用Android原生的UI系统，我们需要与游戏的Runtime进行通信获取整个UI结构。</p> 
<p>sdk接入需要程序帮忙搞，这里我使用原生应用来学习</p> 
<p><img alt="" height="136" src="https://images2.imgbox.com/c8/bc/c7QPpQtV_o.png" width="401"></p> 
<p>需要安装这2个应用</p> 
<p><img alt="" height="112" src="https://images2.imgbox.com/0b/4e/Fpu5ucK0_o.png" width="155"></p> 
<p></p> 
<p><img alt="" height="71" src="https://images2.imgbox.com/00/27/52v9HYhW_o.png" width="874"></p> 
<p>出现下方两行代码，然后就可以在UI渲染树看到UI的结构了</p> 
<pre><code>#安卓实例
from poco.drivers.android.uiautomation import AndroidUiautomationPoco
#poco实例化
poco = AndroidUiautomationPoco(use_airtest_input=True, screenshot_each_action=False)
</code></pre> 
<p>但是我这是没有的</p> 
<p><img alt="" height="181" src="https://images2.imgbox.com/0b/82/6iXla0s4_o.png" width="409"></p> 
<p>1）从左到右分别是锁定（冻结模式），定位（检视器），录制</p> 
<p><img alt="" height="144" src="https://images2.imgbox.com/98/14/2Gv9CxU2_o.png" width="693"></p> 
<p>2）当前页面的UI层级</p> 
<p>我这是原生应用，如果是其他的要接入SDK：<a href="https://poco-chinese.readthedocs.io/zh_CN/latest/source/doc/integration.html" rel="nofollow" title="如何嵌入PocoSDK(Integration Guide) — poco 1.0 文档">如何嵌入PocoSDK(Integration Guide) — poco 1.0 文档</a></p> 
<p>安装poco：（可以通过pip list看安装了什么版本）</p> 
<p><img alt="" height="32" src="https://images2.imgbox.com/1f/da/e0VdEVlV_o.png" width="507"></p> 
<p>然后报错了，输入第二个命令更新pip版本后，再试一次，不过后面还是失败，就换了个地址</p> 
<p><img alt="" height="252" src="https://images2.imgbox.com/b6/9c/NaXgvPXu_o.png" width="937"></p> 
<pre><code>pip3 install pocoui -i http://pypi.douban.com/simple/ --trusted-host pypi.douban.com</code></pre> 
<p>但是我发现UI渲染树还是没有，原因是我用的是oppo手机，没有弹出安装PocoService</p> 
<p>解决方法：在<strong>开发者选项-&gt;直接拉到最后-&gt;禁止权限监控，</strong>会立刻弹出PocoService，安装后就会出现渲染树了。</p> 
<p><img alt="" height="193" src="https://images2.imgbox.com/55/d8/UfYI1RHV_o.png" width="389"></p> 
<p><img alt="" height="177" src="https://images2.imgbox.com/69/8a/UsBCeafC_o.png" width="347"></p> 
<p>3）编写</p> 
<ul><li> <p><strong>生成UI节点的poco代码：</strong><br> 双击UI树中的目标条目，即可插入对应UI节点的poco代码。</p> </li><li> <p><strong>生成UI节点的x-path代码：</strong><br> UI树中的目标条目上，点击<code>右键菜单-'UI path-code'</code>，即可生成完整父子链的poco代码</p> </li></ul> 
<p></p> 
<p></p> 
<p>（3）Selenium Window</p> 
<p>比如谷歌浏览器（属性可以看路径，找不到文件夹是因为路径隐藏了，开了就行）</p> 
<p><img alt="" height="235" src="https://images2.imgbox.com/c7/6b/cKLTXMkg_o.png" width="807"></p> 
<p><img alt="" height="538" src="https://images2.imgbox.com/1e/6e/Yx4KUyd8_o.png" width="1200"></p> 
<p>这个忽略，有缘再见</p> 
<p></p> 
<p></p> 
<p></p> 
<h2 id="%E5%85%AD%EF%BC%9A%E8%AF%AD%E6%B3%95%E7%AE%80%E5%8D%95%E7%86%9F%E6%82%89"><strong>六：语法简单熟悉</strong></h2> 
<h3 id="%EF%BC%881%EF%BC%89touch">1）touch</h3> 
<p><img alt="" height="383" src="https://images2.imgbox.com/a0/04/t7oGRNAD_o.png" width="870"></p> 
<p></p> 
<h3 id="(2)swipe">2)swipe</h3> 
<p><img alt="" height="173" src="https://images2.imgbox.com/47/96/ayz6Gu6l_o.png" width="951"></p> 
<p><img alt="" height="200" src="https://images2.imgbox.com/ae/ab/lrwg3DTZ_o.png" width="1028"></p> 
<p><img alt="" height="255" src="https://images2.imgbox.com/49/b9/gw3fvS1Z_o.png" width="1028"></p> 
<p><img alt="" height="56" src="https://images2.imgbox.com/94/92/hQW3h7Q4_o.png" width="1027"></p> 
<p><img alt="" height="167" src="https://images2.imgbox.com/ce/87/dzNaXk2A_o.png" width="1028"></p> 
<p><img alt="" height="168" src="https://images2.imgbox.com/e9/d0/yK3wEQ2e_o.png" width="1027"></p> 
<p></p> 
<h3 id="%EF%BC%883%EF%BC%89text">3）text</h3> 
<p><img alt="" height="320" src="https://images2.imgbox.com/85/d6/B2cz6SII_o.png" width="950"></p> 
<p><img alt="" height="96" src="https://images2.imgbox.com/b4/91/1CM2rf5D_o.png" width="957"></p> 
<p></p> 
<h3 id="%EF%BC%884%EF%BC%89keyevent">4）keyevent</h3> 
<p><img alt="" height="337" src="https://images2.imgbox.com/c8/52/gAzJ7JoS_o.png" width="954"></p> 
<p><img alt="" height="206" src="https://images2.imgbox.com/58/b5/vJac7eZB_o.png" width="948"></p> 
<p></p> 
<p></p> 
<h3 id="%EF%BC%885%EF%BC%89%E6%96%AD%E8%A8%80">5）断言</h3> 
<p><img alt="" height="294" src="https://images2.imgbox.com/bc/70/Q7AR39bJ_o.png" width="889"></p> 
<p><img alt="" height="115" src="https://images2.imgbox.com/eb/fb/SQiDcKvF_o.png" width="892"></p> 
<p># assert_exists和assert_not_exists接口的超时时间和阙值<br> # 这2接口查找图片的超时时间和阙值都是全局变量，timeout为20s，threasold为0.7<br> # 所以脚本只有在20s内找到置信度&gt;0.7的结果，断言才会成功</p> 
<p>如果是图片，双击可以查看识别精度</p> 
<p><img alt="" height="170" src="https://images2.imgbox.com/a4/e2/UHBByit3_o.png" width="867"></p> 
<p></p> 
<p></p> 
<p></p> 
<h2 id="%E4%B8%83%EF%BC%9A%E5%85%B6%E4%BB%96%E4%BA%86%E8%A7%A3%EF%BC%88%E6%B3%A8%EF%BC%9A%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%97%B6%E5%80%99%E7%9C%8B%E5%88%B0%E8%B7%AF%E5%BE%84%E9%83%BD%E6%98%AF%2F%EF%BC%8C%E4%BD%86%E6%88%91%E7%94%A8%5C%E4%B9%9F%E5%8F%AF%E4%BB%A5%EF%BC%89"><strong>七：其他了解</strong>（<strong>注：学习的时候看到路径都是/，但我用\也可以</strong>）</h2> 
<h3 id="%EF%BC%881%EF%BC%89%E4%BD%BF%E7%94%A8airtest%E5%91%BD%E4%BB%A4%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC">1）使用airtest命令运行脚本</h3> 
<p>airtest自带python插件，但是精简版的，本地没有安装<code>python</code>环境，或是没有安装 <code>airtest</code> 与 <code>poco，也可以通过airtest的命令行在cmd里运行</code></p> 
<p><img alt="" height="170" src="https://images2.imgbox.com/f3/d8/OPToAMqY_o.png" width="570"></p> 
<p></p> 
<h3 id="%EF%BC%882%EF%BC%89%E4%BD%BF%E7%94%A8%E6%9C%AC%E5%9C%B0python%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC">2）使用本地python运行脚本</h3> 
<p>通过<a href="https://airtest.doc.io.netease.com/IDEdocs/settings/1_ide_settings/#python" rel="nofollow" title="添加PYTHONPATH">添加PYTHONPATH</a>设置，可以使用本地的<code>python.exe</code>来运行脚本</p> 
<p><img alt="" height="460" src="https://images2.imgbox.com/c8/98/rEns8DXI_o.png" width="810"></p> 
<p></p> 
<p></p> 
<p><code>上面还是未脱离airtest工具，想使用其他python第三方库，使用</code>在本地python环境中安装airtest和pocoui，然后用命令行运行脚本更好</p> 
<pre><code>#使用 pip 安装Airtest框架 
pip install airtest
#使用 pip 安装poco框架 
pip install pocoui

Pip指令运行失败
国内用户请在pip install 指令后面加上 -i https://pypi.tuna.tsinghua.edu.cn/simple后重试
参考：https://mirrors.tuna.tsinghua.edu.cn/help/pypi/
环境部署完成后，我们就能够脱离AirtestIDE，在不同的宿主机器和被测平台上运行脚本了</code></pre> 
<p>报错，adb版本不一致（通过adb version查），airtest的版本是40，于是我将41的覆盖掉它（airtest\core\android\static\adb\windows\）</p> 
<p><img alt="" height="720" src="https://images2.imgbox.com/78/32/YhokwOKZ_o.png" width="1200"></p> 
<p>但是又很尴尬，这样又导致，在IDE运行脚本的时候，不显示模拟器，而且会报错，于是就还是保留40版本，将40的改名字nox_adb.exe，覆盖夜神里面的，虽然会报错，但是能用</p> 
<p><strong>（注：后面其实用airtest40版本去覆盖sdk里面的41版本，将40也覆盖夜神的adb，同时将40改名nox_adb.exe，覆盖夜神的nox_adb.exe，这样就能真正解决了）</strong></p> 
<p><strong>（如果是使用了本地的python，那需要看看</strong>python目录下的 <code>Lib\site-packages\airtest的adb版本是否一致</code><strong>）</strong></p> 
<p>在命令行运行又报错，这里是没有识别图片，纳尼，我文件夹有该图片呀</p> 
<p><img alt="" height="583" src="https://images2.imgbox.com/30/c9/gOkBGPTw_o.png" width="1200"></p> 
<p>而且我这时候运行命令带了参数--log log/，但是显示了do not save log</p> 
<p>后面在命令行带了参数?cap_method=JAVACAP^&amp;^&amp;ori_method=ADBORI^&amp;^&amp;touch_method=MINITOUCH（注意：特殊字符没转义，命令行被截断，所以log没有）</p> 
<p>参考：<a href="https://airtest.doc.io.netease.com/IDEdocs/run_script/1_useCommand_runScript/#id4" rel="nofollow" title="https://airtest.doc.io.netease.com/IDEdocs/run_script/1_useCommand_runScript/#id4">https://airtest.doc.io.netease.com/IDEdocs/run_script/1_useCommand_runScript/#id4</a></p> 
<p><img alt="" height="344" src="https://images2.imgbox.com/6b/b5/yBlVQb0U_o.png" width="1200"></p> 
<p>运行的时候还是会识别不到图片，可能是设备太卡了，于是将wait的时间设置到60秒，然后就可以了</p> 
<p></p> 
<p></p> 
<p></p> 
<h3 id="%EF%BC%883%EF%BC%89%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%EF%BC%88%E6%9B%B4%E5%A4%9A%E5%8F%82%E8%80%83%EF%BC%9AAirtest%20%E2%80%94%20airtest%20%20%E6%96%87%E6%A1%A3%EF%BC%89">3）命令参数（更多参考：<a href="https://airtest.readthedocs.io/zh_CN/latest/README_MORE.html#running-air-from-cli" rel="nofollow" title="Airtest — airtest  文档">Airtest — airtest 文档</a>）</h3> 
<p>1）--device，指定连接的被测设备</p> 
<pre><code># 什么都不填写，会默认取当前连接中的第一台手机
Android:///
# 连接本机默认端口连的一台设备号为79d03fa的手机
Android://127.0.0.1:5037/79d03fa
android://127.0.0.1:5037/127.0.0.1:62001      #连接夜神模拟器
# 连接一个Windows窗口，窗口句柄为123456
Windows:///123456
# 连接一个Windows窗口，窗口名称匹配某个正则表达式
Windows:///?title_re=Unity.*
# 连接iOS手机
iOS:///127.0.0.1:8100

参考：https://www.cnblogs.com/CincentHuang/p/11766026.html</code></pre> 
<p>备注：模拟器设备字符串的定义：Android://&lt;adbhost[localhost]&gt;:&lt;adbport[5037]&gt;/模拟器端口号</p> 
<p><code>adbhost</code>是<code>adb server</code>所在主机的ip，默认是本机<code>127.0.0.1</code>，<code>adb port</code>默认是<code>5037</code>。</p> 
<pre><code>也可以这样：
1：在脚本编写模拟器的connect_device语句
dev = connect_device("Android://127.0.0.1:5037/127.0.0.1:62001?cap_method=JAVACAP^&amp;^&amp;ori_method=ADBORI")

auto_setup(__file__)

2：在纯.py脚本传入模拟器设备参数
from airtest.cli.parser import cli_setup

if not cli_setup():
    auto_setup(__file__, logdir=True, devices=[
            "Android://127.0.0.1:5037/127.0.0.1:62001?cap_method=JAVACAP^&amp;^&amp;ori_method=ADBORI",
    ])</code></pre> 
<p></p> 
<p>2）--log，指定 log 内容和截图存放的目录</p> 
<pre><code>1:没传入参数--log
不保存 log 内容和截图
命令行会提示do not save log


2：传入的参数为--log log/
生成的 log 内容放到当前命令行执行目录下的 log 目录里面


3：指定目录
log 内容与截图将会放在指定目录里
--log E:/aritest/log

eg：
夜神：
airtest run C:\Users\Administrator\Desktop\chyairtest.air --device android://127.0.0.1:5037/127.0.0.1:62001?cap_method=JAVACAP^&amp;^&amp;ori_method=ADBORI^&amp;^&amp;touch_method=MINITOUCH --log F:\Airtest\log


android设备：
airtest run C:\Users\Administrator\Desktop\chyairtest.air --device android://127.0.0.1:5037/FIFIMFFEPVAIWCU8?cap_method=MINICAP_STREAM^&amp;^&amp;ori_method=MINICAPORI^&amp;^&amp;touch_method=MINITOUCH --log F:\Airtest\log --recording</code></pre> 
<p>注意：在这里，--log log/，我刚开始以为是我脚本文件的目录下，其实应该是C:\Users\Administrator下的log目录（C:\Users\Administrator&gt;脚本命令）</p> 
<p><img alt="" height="174" src="https://images2.imgbox.com/37/5b/aVAOAQUq_o.png" width="696"></p> 
<p></p> 
<p>3）--recording，运行脚本时进行录屏操作</p> 
<pre><code>以 MP4 格式保存在 log 内容所在的目录里面</code></pre> 
<p>用夜神的时候录制不了，要用android设备，于是跑的时候又报错了，点击事件没生效</p> 
<p><img alt="" height="874" src="https://images2.imgbox.com/b4/7e/p9r9uMcp_o.png" width="1200"></p> 
<p>这个问题是我使用了py2，后面换了py3就可以了（2和3的环境变量可以一起配，在前面的先使用）</p> 
<p><img alt="" height="265" src="https://images2.imgbox.com/de/bb/EGqMzRAe_o.png" width="559"></p> 
<p></p> 
<h3 id="4%EF%BC%89%E7%94%9F%E6%88%90%E6%8A%A5%E5%91%8A%EF%BC%88%E6%9B%B4%E5%A4%9A%E5%8F%82%E6%95%B0%EF%BC%9AAirtest%20%E2%80%94%20airtest%20%20%E6%96%87%E6%A1%A3%EF%BC%89">4）生成报告（更多参数：<a href="https://airtest.readthedocs.io/zh_CN/latest/README_MORE.html#generate-html-report" rel="nofollow" title="Airtest — airtest  文档">Airtest — airtest 文档</a>）</h3> 
<p>通过airtest report + 脚本文件路径指令，下面是可用参数：</p> 
<ul><li> <p><code>--log_root</code>，指定log内容和截图文件所在的目录</p> </li><li> <p><code>--outfile</code>，指定生成报告的目录</p> </li><li> <p><code>--lang</code>，指定报告语言，可以是中文/英文</p> </li><li> <p><code>--export</code>，导出一个包含所有资源的报告文件</p> </li><li> <p><code>--static_root</code>，指定静态资源文件的路径</p> </li></ul> 
<p>注意：如果使用report 没有传入参数，会去脚本文件所在目录下寻找log/log.txt生成html报告，如果不存在该目录会报错</p> 
<p><img alt="" height="269" src="https://images2.imgbox.com/c1/31/adWB7NtE_o.png" width="997"></p> 
<p>成功生成报告（在运行生成报告命令前，要运行一次脚本）</p> 
<pre><code>--log_root：指定log和图片目录
--outfile：指定输出报告的目录
--lang：指定语言，默认是英文（zh中文en英文）

C:\Users\Administrator&gt;airtest report C:\Users\Administrator\Desktop\chyairtest.air --log_root F:\Airtest\log --outfile F:\Airtest\log\log.html --lang zh
[07:38:28][INFO]&lt;airtest.report.report&gt; F:\Airtest\log\log.html</code></pre> 
<p></p> 
<p>读取报告中静态资源文件和图片文件</p> 
<p><strong><code>-- export：不使用该参数，是</code></strong>绝对路径来访问里面的图片文件；同时HTML报告中访问的静态css与js资源文件，也是硬盘上的绝对路径（默认在<code>airtest</code>的安装目录下的<code>report</code>文件夹里）</p> 
<p>注意：使用了<strong><code>export参数，outfile参数会失效</code></strong></p> 
<pre><code>airtest report C:\Users\Administrator\Desktop\chyairtest.air --log_root F:\Airtest\log --lang zh --export F:\Airtest\log\cs\</code></pre> 
<p><strong><code>--static_root</code></strong></p> 
<pre><code># 每次导出报告，都有static目录。一般来说，除非报告的样式做了某些更新，否则这些静态资源文件都是固定不变的。

# 将这些资源文件部署到静态资源文件服务器上，用例如 https://host:port/static/css/ 的路径来访问它。然后在生成报告时，将这个部署出来的服务器地址作为 --static_root的参数传过去：
--static_root https://host:port，可以避免导出报告时重复拷贝这些资源文件造成的磁盘空间占用</code></pre> 
<p></p> 
<p>注意：</p> 
<p>1：使用了POCO语句的报告，在你的报告命令行最末尾添加指令<code>--plugin poco.utils.airtest.report</code></p> 
<p>2：使用SELENIUM插件的报告指令，加入<code>--plugin airtest_selenium.report</code></p> 
<p></p> 
<p>（4）怎么样不通过IDE使用命令行去生成和导出报告</p> 
<p><strong>参考：</strong><a href="https://airtest.readthedocs.io/zh_CN/latest/all_module/airtest.report.report.html#airtest.report.report.simple_report" rel="nofollow" title="airtest.report.report module — airtest  文档">airtest.report.report module — airtest 文档</a></p> 
<p>可以借助<code>simple_report()</code> 接口或者 <code>LogToHtml()</code> 类来实现</p> 
<p>1） <code>simple_report</code>生成报告(在本地看)</p> 
<p><img alt="" height="32" src="https://images2.imgbox.com/0c/bc/rJNObSYg_o.png" width="545"></p> 
<ul><li><code>filepath</code>，脚本文件的路径，可以直接传入变量 <code>__file__（auto_setup(__file__)</code>，意思是将脚本文件作为脚本路径传入，其他参数内容将默认读取运行命令行传入的参数<code>）</code></li><li><code>logpath</code> ，log内容所在路径，如为 <code>True</code> ，则默认去当前脚本所在路径找log内容</li><li><code>logfile</code> ，log.txt的文件路径</li><li><code>output</code> ，报告的到处路径，必须以 <code>.html</code> 结尾</li></ul> 
<p>简化版的生成报告的接口，如果不指定参数，该接口会使用默认的参数生成1份HTML格式的报告，<code>output='log.html'</code> 表示在当前脚本路径下生成名为 <code>log.html</code> 的airtest报告</p> 
<pre><code>from airtest.report.report import simple_report
simple_report(__file__)</code></pre> 
<p><img alt="" height="130" src="https://images2.imgbox.com/2c/72/VNZrg02e_o.png" width="584"></p> 
<p>指定<code>output</code> 参数，则按指定路径生成报告</p> 
<pre><code>simple_report(__file__,output="F:\Airtest\log\log.html")</code></pre> 
<p>如果生成报告的路径和脚本的路径不同，比如我脚本在C盘，报告想放F盘，就会报下面这个错，虽然没影响</p> 
<p><img alt="" height="28" src="https://images2.imgbox.com/7e/a4/hZ9fvUZL_o.png" width="462"></p> 
<p>备注：刚刚开始学习的时候，有点懵logpath和logfile这两个参数（这2个参数好像没啥用），我在我脚本下新建了log目录，运行脚本后没看到log.txt生成，那报告是通过哪里的log.txt生成的，我在airtest设置看到log的路径（临时文件）</p> 
<p><img alt="" height="41" src="https://images2.imgbox.com/d1/0f/Yap1AJ7B_o.png" width="763"></p> 
<p>后面问了大佬，我才知道，我代码中的auto_setup(__file__)，使用了默认的参数，不生成log文件</p> 
<p><img alt="" height="33" src="https://images2.imgbox.com/2a/9c/pW79VP3g_o.png" width="674"></p> 
<p>可以使用auto_setup(__file__,logdir=True)，就能在脚本目录下的log目录生成log文件这些，如下：</p> 
<ul><li>basedir：设置当前脚本的路径，也可以直接传入__file__变量</li><li>logdir：脚本运行时log保存路径，如果设置是True，则保存在&lt;basedir&gt;/log目录中</li></ul> 
<p><img alt="" height="79" src="https://images2.imgbox.com/21/aa/Hzldscuq_o.png" width="625"></p> 
<p>刚开始我以为我运行运行后生成了log，我就可以通过logpath和logfile去生成报告（不需要再次运行脚本代码），但是发现报告要不是空的就是图片显示不了，于是我就不纠结了</p> 
<p>直接运行脚本，在脚本后使用simple_report(__file__,logpath=True,output="C:\\Users\Administrator\Desktop\chyairtest.air\log.html")即可</p> 
<p></p> 
<p>2）<code>ogToHtml</code>导出报告（通过脚本的形式）</p> 
<p><img alt="" height="49" src="https://images2.imgbox.com/e2/6b/etcITQpW_o.png" width="696"></p> 
<pre><code>from airtest.report.report import LogToHtml
脚本内容（省略）

# 脚本路径/log文件路径/log.txt路径/存放报告路径/语言/插件
chyR = LogToHtml(script_root="C:\\Users\Administrator\Desktop\chyairtest.air", log_root="C:\\Users\Administrator\Desktop\chyairtest.air\log",logfile="C:\\Users\Administrator\Desktop\chyairtest.air\log\log.txt",export_dir="F:\\Airtest\log",lang='zh',plugins=None)
chyR.report()</code></pre> 
<p><img alt="" height="32" src="https://images2.imgbox.com/0b/dd/gPYJ28hf_o.png" width="147"></p> 
<p><img alt="" height="246" src="https://images2.imgbox.com/3b/9b/9YqceRXs_o.png" width="729"></p> 
<p>3）在运行脚本的时候，不免会出现报错，导致执行不下去，然后无法生成报告，可以这样</p> 
<pre><code># try:
#     用例...
#     会导致失败的语句
#     用例...
# finally:
#     报告语句

注：在airtest要注意缩进，要不报错：expected an indented block</code></pre> 
<p></p> 
<p></p> 
<p></p> 
<h3 id="%EF%BC%885%EF%BC%89airtest%E4%BD%BF%E7%94%A8PYTHON%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E6%8A%A5%E5%91%8A">5）airtest使用PYTHON代码生成报告</h3> 
<p>由于Airtest是python第三方库，所以当然也可以简单地调用接口来生成报告，首先，我们需要先新建脚本-选择纯.py文件，然后在创建时需要勾选生成log</p> 
<p><img alt="" height="276" src="https://images2.imgbox.com/1d/83/5dCCZZ8G_o.png" width="681"></p> 
<p>其中，可以手工指定log目录的路径（logdir=“./log”）</p> 
<p>而且，如果这里带了设备参数，在使用命令行的时候不影响，优先使用命令行的参数</p> 
<pre><code>if not cli_setup():
    auto_setup(__file__, logdir=True, devices=["Android:///",])</code></pre> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/94f85fef33b9a4bc1100e565af17fe1c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于Spring框架中StringUtils常用/易误用方法解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58a854e35dfd0fc78ffa11d87a7eee55/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">离线装docker和相关应用保姆级教程——以安装docker-jupyter/notebook为例</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>