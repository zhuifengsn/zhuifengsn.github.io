<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT串口助手开发2之串口程序编写 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT串口助手开发2之串口程序编写" />
<meta property="og:description" content="系列文章目录 QT串口助手开发2之串口程序编写
QT串口助手开发2 系列文章目录一、前期准备工作1.1给选择框添加子选项1.2给控件命名ID 二、自动识别系统端口程序三、响应打开函数 一、前期准备工作 1.1给选择框添加子选项 书接上文
绘制好界面后，需要给每个控制命个名，再继续编写串口程序
直接对label直接更改标签名字即可同理pushbutton
设置选项框里面的子选项，设置波特率，串口号用程序的方式动态识别
设置方式见设置选项框的方法
同理校验位，数据位，停止位
1.2给控件命名ID 点击串口号后面的Combo Box 控件给其ID为cboxSerialPort
同理波特率更名为CboxBaudrate
校验位更名为CboxParity
数据位更名为CboxDataBits
停止位更名为CboxStopBits
pushbutton更名为打开和发送
Text Edit命名为TeditRecv、TeditSend
ctrl &#43; r运行看下效果，如果觉得不是很好看，就在SizePolicy调整策略
二、自动识别系统端口程序 自动识别当前系统有效的端口，让你选择（在串口号那栏有子选项可以选择）
去帮助文档查看帮助文档查看方法
首先需要给头文件加功能模块可参考文档
QList列表里的每个成员都是SerialPortInfo，其实这个表就是有效端口的列表
类内的静态成员，可以直接通过类来调用不需要对象，直接调用就是两个::
availablePorts()这个函数返回一个列表到serialportInfo
接下来遍历这个列表，把列表里面的内容填到串口号后面的combo box里面去
帮助文档查看QList（列表或者数组）如何使用当作一个数组访问
在for循环里面，返回一个数组下标，at返回一个串口的信息
最详细写法参考参考写法
ctrl &#43; r运行测试效果
测试成功，再添加2个模拟串口测试
ctrl &#43; r 运行，测试成功
三、响应打开函数 参考文章添加链接描述
右键点击打开按钮转到槽
当打开按钮按下后，其余比如波特率…等等这些就不能在选择子选择，按钮就变成断开按钮类似这样
m开头是类内成员
写个函数，alt &#43; enter 鼠标放在写的函数上，选择添加一个定义，界面就跳转了
这样就可以不用直自己写一个函数
我们要获取5个配置
并且设置进去（转到头文件）
再写其类内的成员
写.cpp文件
默认情况就是115200，你没选择波特率就是115200，以免没设置波特率
同理写其它位
校验位只写三种去除两种，太麻烦了（在ui界面也去掉）
这两种去掉
写.cpp文件
同理其它位
停止位：
写完后要返回open的结果" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/2957f834eec0c1d454194cc5411c5606/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-16T09:09:04+08:00" />
<meta property="article:modified_time" content="2023-03-16T09:09:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT串口助手开发2之串口程序编写</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>系列文章目录</h2> 
<font color="#999AAA"> </font> 
<p>QT串口助手开发2之串口程序编写</p> 
<hr size='1"' color="#000000"> 
<p></p> 
<div class="toc"> 
 <h4>QT串口助手开发2</h4> 
 <ul><li><a href="#_0" rel="nofollow">系列文章目录</a></li><li><a href="#_11" rel="nofollow">一、前期准备工作</a></li><li><ul><li><a href="#11_12" rel="nofollow">1.1给选择框添加子选项</a></li><li><a href="#12ID_27" rel="nofollow">1.2给控件命名ID</a></li></ul> 
  </li><li><a href="#_42" rel="nofollow">二、自动识别系统端口程序</a></li><li><a href="#_70" rel="nofollow">三、响应打开函数</a></li></ul> 
</div> 
<p></p> 
<hr size='1"' color="#000000"> 
<h2><a id="_11"></a>一、前期准备工作</h2> 
<h3><a id="11_12"></a>1.1给选择框添加子选项</h3> 
<p><a href="https://blog.csdn.net/westos_yanzheng/article/details/129516841?spm=1001.2014.3001.5501">书接上文</a><br> 绘制好界面后，需要给每个控制命个名，再继续编写串口程序<br> 直接对label直接更改标签名字即可同理pushbutton<br> 设置选项框里面的子选项，设置波特率，串口号用程序的方式动态识别<br> 设置方式见<a href="https://blog.csdn.net/westos_yanzheng/article/details/129516841">设置选项框的方法</a><br> <img src="https://images2.imgbox.com/82/63/MAa3vaDN_o.png" alt="在这里插入图片描述"><br> 同理校验位，数据位，停止位</p> 
<p><img src="https://images2.imgbox.com/c7/07/vLAL8Fcj_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/39/1e/spxx6DH7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f7/36/fsQvpgkw_o.png" alt="在这里插入图片描述"></p> 
<hr size='1"' color="#000000"> 
<h3><a id="12ID_27"></a>1.2给控件命名ID</h3> 
<p>点击串口号后面的Combo Box 控件给其ID为cboxSerialPort<br> 同理波特率更名为CboxBaudrate<br> 校验位更名为CboxParity<br> 数据位更名为CboxDataBits<br> 停止位更名为CboxStopBits<br> pushbutton更名为打开和发送<br> Text Edit命名为TeditRecv、TeditSend<br> <img src="https://images2.imgbox.com/c7/4f/SucB3wUH_o.png" alt="在这里插入图片描述"><br> ctrl + r运行看下效果，如果觉得不是很好看，就在SizePolicy调整策略<br> <img src="https://images2.imgbox.com/77/ca/29ZW3ON3_o.png" alt="在这里插入图片描述"></p> 
<hr size='1"' color="#000000"> 
<h2><a id="_42"></a>二、自动识别系统端口程序</h2> 
<p>自动识别当前系统有效的端口，让你选择（在串口号那栏有子选项可以选择）<br> 去帮助文档查看<a href="https://blog.csdn.net/westos_yanzheng/article/details/129516841">帮助文档查看方法</a><br> 首先需要给头文件加功能模块<a href="https://blog.csdn.net/westos_yanzheng/article/details/129526987">可参考文档</a><br> <img src="https://images2.imgbox.com/40/df/eKsbea0O_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/68/46/CtrXZlJf_o.png" alt="在这里插入图片描述"></p> 
<p>QList列表里的每个成员都是SerialPortInfo，其实这个表就是有效端口的列表<br> 类内的静态成员，可以直接通过类来调用不需要对象，直接调用就是两个::<br> availablePorts()这个函数返回一个列表到serialportInfo<br> 接下来遍历这个列表，把列表里面的内容填到串口号后面的combo box里面去<br> 帮助文档查看QList（列表或者数组）如何使用当作一个数组访问<br> 在for循环里面，返回一个数组下标，at返回一个串口的信息<br> 最详细写法参考<a href="https://blog.csdn.net/westos_yanzheng/article/details/129516841?spm=1001.2014.3001.5501">参考写法</a></p> 
<p>ctrl + r运行测试效果<br> <img src="https://images2.imgbox.com/3d/99/eq3u8SPU_o.png" alt="在这里插入图片描述"><br> 测试成功，再添加2个模拟串口测试</p> 
<p><img src="https://images2.imgbox.com/1f/b8/nI8EIxGA_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/92/d7/3oU3oAGP_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/5a/50/gQoz4kOS_o.png" alt="在这里插入图片描述"><br> ctrl + r 运行，测试成功<br> <img src="https://images2.imgbox.com/a4/5e/k3oo4wDI_o.png" alt="在这里插入图片描述"></p> 
<hr size='1"' color="#000000"> 
<h2><a id="_70"></a>三、响应打开函数</h2> 
<p>参考文章<a href="https://blog.csdn.net/westos_yanzheng/article/details/129526987">添加链接描述</a><br> 右键点击打开按钮转到槽<br> <img src="https://images2.imgbox.com/e8/73/zOF4XW7N_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bd/5e/F4POjYeC_o.png" alt="在这里插入图片描述"><br> 当打开按钮按下后，其余比如波特率…等等这些就不能在选择子选择，按钮就变成断开按钮类似这样<br> <img src="https://images2.imgbox.com/d1/4a/PfOfYhb1_o.png" alt="在这里插入图片描述">m开头是类内成员<br> <img src="https://images2.imgbox.com/e5/65/eRezrGAK_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/bb/25/xNc8ZtvB_o.png" alt="在这里插入图片描述"></p> 
<p>写个函数，alt + enter 鼠标放在写的函数上，选择添加一个定义，界面就跳转了<br> 这样就可以不用直自己写一个函数</p> 
<p><img src="https://images2.imgbox.com/05/4d/QICUMp2E_o.png" alt="在这里插入图片描述"><br> 我们要获取5个配置</p> 
<p><img src="https://images2.imgbox.com/00/74/6vNNrTBB_o.png" alt="在这里插入图片描述"><br> 并且设置进去（转到头文件）<br> <img src="https://images2.imgbox.com/df/54/Ay9pb6Fx_o.png" alt="在这里插入图片描述"></p> 
<p>再写其类内的成员<br> <img src="https://images2.imgbox.com/df/5b/QRZb4Ig4_o.png" alt="在这里插入图片描述"><br> 写.cpp文件<br> 默认情况就是115200，你没选择波特率就是115200，以免没设置波特率</p> 
<p><img src="https://images2.imgbox.com/ea/1f/HYMYUlou_o.png" alt="在这里插入图片描述">同理写其它位<br> 校验位只写三种去除两种，太麻烦了（在ui界面也去掉）<br> 这两种去掉<br> <img src="https://images2.imgbox.com/13/1e/YnaBWVEv_o.png" alt="在这里插入图片描述"><br> 写.cpp文件<br> <img src="https://images2.imgbox.com/8c/b8/0nFNoTNX_o.png" alt="在这里插入图片描述"></p> 
<p><strong>同理其它位</strong></p> 
<p><img src="https://images2.imgbox.com/7f/0f/U2p9LL1M_o.png" alt="在这里插入图片描述"></p> 
<p><strong>停止位：</strong></p> 
<p><img src="https://images2.imgbox.com/51/a1/qcvT0G5U_o.png" alt="在这里插入图片描述"><br> 写完后要返回open的结果</p> 
<p>小灯泡是修改该函数类型后，.h文件也要更改（函数的声明），点下小灯泡跳转到.h文件并且自动帮你更改<br> .cpp是函数的实现<br> <img src="https://images2.imgbox.com/79/95/2D1XPOP3_o.png" alt="在这里插入图片描述"><br> 更变成功</p> 
<p><img src="https://images2.imgbox.com/d3/38/89lS5KX8_o.png" alt="在这里插入图片描述"></p> 
<p>在构造函数中初始化下mIsOpen,默认情况下是关闭<br> open按钮的槽函数可以响应open单击的动作<br> 点击打开这个按钮后，调用getSerialPortConfig函数，当这个函数返回true说明这个串口打开成功，否则打开失败，这个时候才能设置mIsOpen成员true or false（这个时候才是真正打开串口或者没打开串口）<br> 但是我们打开串口按钮打开后只能选择关闭串口，所以这个是循环的过程，下文再书写如何编写串口程序，该问题留给下文</p> 
<p><img src="https://images2.imgbox.com/02/ce/amft1PiO_o.png" alt="在这里插入图片描述"></p> 
<hr size='1"' color="#000000"> 
<p><strong>END</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8dd4194ca0ab013f6711dd01cd99db9c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">二叉树的创建与存储，以及遍历</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3fa0b8f3e137e62a56c905efd16399c6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Tomcat的Connector启动过程分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>