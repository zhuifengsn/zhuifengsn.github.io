<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据分析---疫情数据可视化（地图） - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据分析---疫情数据可视化（地图）" />
<meta property="og:description" content="数据分析---疫情数据可视化（地图） 安装pyecharts库爬取所需要的数据（网上直接爬取数据）绘制全国地图绘制省份地图（以湖北省为例）在全国地图上加入湖北省数据 导入数据（本地导入数据）获取代码 安装pyecharts库 pyecharts属于第三方库，需要从https://pypi.org/project/pyecharts/#files 手动下载安装
下载后，打开“Anaconda Command Prompt”
输入：pip install 所在路径&#43;pyecharts-1.7.0-py3-none-any.whl
安装后可再输入：pip list
查看是否安装成功
import requests import json from pyecharts.charts import Map, Geo from pyecharts import options as opts from pyecharts.globals import GeoType, RenderType 网上有很多博主的文章写的是from pyecharts import Map, Geo ；这是因为版本不同，现在需要加“.charts”
爬取所需要的数据（网上直接爬取数据） url = &#39;https://view.inews.qq.com/g2/getOnsInfo?name=disease_h5&#39; datas = json.loads(requests.get(url=url).json()[&#39;data&#39;]) china = datas[&#39;areaTree&#39;][0][&#39;children&#39;] data = [] for i in range(len(china)): data.append([china[i][&#39;name&#39;], china[i][&#39;total&#39;][&#39;confirm&#39;]]) 注：今天犯了一个小错误，我在往列表中添加元素时，原来打成了data=data.append()结果报错“AttributeError: ‘NoneType’ object has no attribute ‘append’”，这是因为append会修改data本身，并且返回None。不能把返回值再赋值给data。
print(data) [[&#39;湖北&#39;, 67786], [&#39;广东&#39;, 1356], [&#39;河南&#39;, 1273], [&#39;浙江&#39;, 1227], [&#39;湖南&#39;, 1018], [&#39;安徽&#39;, 990], [&#39;江西&#39;, 935], [&#39;山东&#39;, 760], [&#39;江苏&#39;, 631], [&#39;重庆&#39;, 576], [&#39;四川&#39;, 539], [&#39;黑龙江&#39;, 482], [&#39;北京&#39;, 437], [&#39;上海&#39;, 350], [&#39;河北&#39;, 318], [&#39;福建&#39;, 296], [&#39;广西&#39;, 252], [&#39;陕西&#39;, 245], [&#39;云南&#39;, 174], [&#39;海南&#39;, 168], [&#39;贵州&#39;, 146], [&#39;香港&#39;, 137], [&#39;天津&#39;, 136], [&#39;山西&#39;, 133], [&#39;甘肃&#39;, 129], [&#39;辽宁&#39;, 125], [&#39;吉林&#39;, 93], [&#39;新疆&#39;, 76], [&#39;宁夏&#39;, 75], [&#39;内蒙古&#39;, 75], [&#39;台湾&#39;, 50], [&#39;青海&#39;, 18], [&#39;澳门&#39;, 10], [&#39;西藏&#39;, 1]] confirm = datas[&#39;chinaTotal&#39;][&#39;confirm&#39;] suspect = datas[&#39;chinaTotal&#39;][&#39;suspect&#39;] dead = datas[&#39;chinaTotal&#39;][&#39;dead&#39;] heal = datas[&#39;chinaTotal&#39;][&#39;heal&#39;] lastUpdateTime = datas[&#39;lastUpdateTime&#39;] print(confirm, suspect, dead, lastUpdateTime) 81017 147 3181 2020-03-14 10:03:41 china_total = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/193155e39e80bfff8ab844376b09f7d4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-14T20:39:19+08:00" />
<meta property="article:modified_time" content="2020-03-14T20:39:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据分析---疫情数据可视化（地图）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>数据分析---疫情数据可视化（地图）</h4> 
 <ul><li><a href="#pyecharts_1" rel="nofollow">安装pyecharts库</a></li><li><a href="#_28" rel="nofollow">爬取所需要的数据（网上直接爬取数据）</a></li><li><a href="#_106" rel="nofollow">绘制全国地图</a></li><li><ul><li><a href="#_151" rel="nofollow">绘制省份地图（以湖北省为例）</a></li><li><a href="#_165" rel="nofollow">在全国地图上加入湖北省数据</a></li></ul> 
  </li><li><a href="#_178" rel="nofollow">导入数据（本地导入数据）</a></li><li><a href="#_201" rel="nofollow">获取代码</a></li></ul> 
</div> 
<p></p> 
<h2><a id="pyecharts_1"></a>安装pyecharts库</h2> 
<p>pyecharts属于第三方库，需要从https://pypi.org/project/pyecharts/#files 手动下载安装<br> 下载后，打开“Anaconda Command Prompt”</p> 
<p><img src="https://images2.imgbox.com/53/11/yZh6YJGf_o.png" alt="在这里插入图片描述"></p> 
<p>输入：pip install 所在路径+pyecharts-1.7.0-py3-none-any.whl<br> <img src="https://images2.imgbox.com/44/80/u8UzDBkK_o.png" alt="在这里插入图片描述"><br> 安装后可再输入：pip list<br> 查看是否安装成功</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> json
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> Map<span class="token punctuation">,</span> Geo
<span class="token keyword">from</span> pyecharts <span class="token keyword">import</span> options <span class="token keyword">as</span> opts
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span><span class="token builtin">globals</span> <span class="token keyword">import</span> GeoType<span class="token punctuation">,</span> RenderType
</code></pre> 
<p>网上有很多博主的文章写的是from pyecharts import Map, Geo ；这是因为版本不同，现在需要加“.charts”</p> 
<h2><a id="_28"></a>爬取所需要的数据（网上直接爬取数据）</h2> 
<pre><code class="prism language-python">url <span class="token operator">=</span> <span class="token string">'https://view.inews.qq.com/g2/getOnsInfo?name=disease_h5'</span>
datas <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
china <span class="token operator">=</span> datas<span class="token punctuation">[</span><span class="token string">'areaTree'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'children'</span><span class="token punctuation">]</span>
</code></pre> 
<pre><code class="prism language-python">data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>china<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>china<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> china<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'total'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>注：今天犯了一个小错误，我在往列表中添加元素时，原来打成了data=data.append()结果报错“AttributeError: ‘NoneType’ object has no attribute ‘append’”，这是因为append会修改data本身，并且返回None。不能把返回值再赋值给data。</p> 
<pre><code class="prism language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> 
<pre><code>[['湖北', 67786], ['广东', 1356], ['河南', 1273], ['浙江', 1227], ['湖南', 1018], ['安徽', 990], ['江西', 935], ['山东', 760], ['江苏', 631], ['重庆', 576], ['四川', 539], ['黑龙江', 482], ['北京', 437], ['上海', 350], ['河北', 318], ['福建', 296], ['广西', 252], ['陕西', 245], ['云南', 174], ['海南', 168], ['贵州', 146], ['香港', 137], ['天津', 136], ['山西', 133], ['甘肃', 129], ['辽宁', 125], ['吉林', 93], ['新疆', 76], ['宁夏', 75], ['内蒙古', 75], ['台湾', 50], ['青海', 18], ['澳门', 10], ['西藏', 1]]
</code></pre> 
<pre><code class="prism language-python">confirm <span class="token operator">=</span> datas<span class="token punctuation">[</span><span class="token string">'chinaTotal'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span>
suspect <span class="token operator">=</span> datas<span class="token punctuation">[</span><span class="token string">'chinaTotal'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'suspect'</span><span class="token punctuation">]</span>
dead <span class="token operator">=</span> datas<span class="token punctuation">[</span><span class="token string">'chinaTotal'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'dead'</span><span class="token punctuation">]</span>
heal <span class="token operator">=</span> datas<span class="token punctuation">[</span><span class="token string">'chinaTotal'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'heal'</span><span class="token punctuation">]</span>
lastUpdateTime <span class="token operator">=</span> datas<span class="token punctuation">[</span><span class="token string">'lastUpdateTime'</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>confirm<span class="token punctuation">,</span> suspect<span class="token punctuation">,</span> dead<span class="token punctuation">,</span> lastUpdateTime<span class="token punctuation">)</span>
</code></pre> 
<pre><code>81017 147 3181 2020-03-14 10:03:41
</code></pre> 
<pre><code class="prism language-python">china_total <span class="token operator">=</span> <span class="token string">"确诊:"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>confirm<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 疑似:"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>suspect<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 死亡:"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>dead<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 治愈:"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>heal<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 更新日期:"</span> <span class="token operator">+</span> lastUpdateTime
</code></pre> 
<pre><code class="prism language-python">hubei <span class="token operator">=</span> datas<span class="token punctuation">[</span><span class="token string">'areaTree'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'children'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'children'</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>hubei<span class="token punctuation">)</span>
</code></pre> 
<pre><code>[{'name': '武汉', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 49991, 'suspect': 0, 'dead': 2436, 'deadRate': '4.87', 'showRate': False, 'heal': 35197, 'healRate': '70.41', 'showHeal': True}}, {'name': '孝感', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 3518, 'suspect': 0, 'dead': 126, 'deadRate': '3.58', 'showRate': False, 'heal': 3204, 'healRate': '91.07', 'showHeal': True}}, {'name': '黄冈', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 2907, 'suspect': 0, 'dead': 125, 'deadRate': '4.30', 'showRate': False, 'heal': 2720, 'healRate': '93.57', 'showHeal': True}}, {'name': '荆州', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 1580, 'suspect': 0, 'dead': 49, 'deadRate': '3.10', 'showRate': False, 'heal': 1464, 'healRate': '92.66', 'showHeal': True}}, {'name': '鄂州', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 1394, 'suspect': 0, 'dead': 55, 'deadRate': '3.95', 'showRate': False, 'heal': 1184, 'healRate': '84.94', 'showHeal': True}}, {'name': '随州', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 1307, 'suspect': 0, 'dead': 45, 'deadRate': '3.44', 'showRate': False, 'heal': 1181, 'healRate': '90.36', 'showHeal': True}}, {'name': '襄阳', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 1175, 'suspect': 0, 'dead': 38, 'deadRate': '3.23', 'showRate': False, 'heal': 1112, 'healRate': '94.64', 'showHeal': True}}, {'name': '黄石', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 1015, 'suspect': 0, 'dead': 38, 'deadRate': '3.74', 'showRate': False, 'heal': 938, 'healRate': '92.41', 'showHeal': True}}, {'name': '宜昌', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 931, 'suspect': 0, 'dead': 36, 'deadRate': '3.87', 'showRate': False, 'heal': 847, 'healRate': '90.98', 'showHeal': True}}, {'name': '荆门', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 928, 'suspect': 0, 'dead': 39, 'deadRate': '4.20', 'showRate': False, 'heal': 839, 'healRate': '90.41', 'showHeal': True}}, {'name': '咸宁', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 836, 'suspect': 0, 'dead': 14, 'deadRate': '1.67', 'showRate': False, 'heal': 816, 'healRate': '97.61', 'showHeal': True}}, {'name': '十堰', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 672, 'suspect': 0, 'dead': 8, 'deadRate': '1.19', 'showRate': False, 'heal': 626, 'healRate': '93.15', 'showHeal': True}}, {'name': '仙桃', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 575, 'suspect': 0, 'dead': 22, 'deadRate': '3.83', 'showRate': False, 'heal': 520, 'healRate': '90.43', 'showHeal': True}}, {'name': '天门', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 496, 'suspect': 0, 'dead': 15, 'deadRate': '3.02', 'showRate': False, 'heal': 476, 'healRate': '95.97', 'showHeal': True}}, {'name': '恩施州', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 252, 'suspect': 0, 'dead': 7, 'deadRate': '2.78', 'showRate': False, 'heal': 236, 'healRate': '93.65', 'showHeal': True}}, {'name': '潜江', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 198, 'suspect': 0, 'dead': 9, 'deadRate': '4.55', 'showRate': False, 'heal': 182, 'healRate': '91.92', 'showHeal': True}}, {'name': '神农架', 'today': {'confirm': 0, 'confirmCuts': 0, 'isUpdated': False}, 'total': {'confirm': 11, 'suspect': 0, 'dead': 0, 'deadRate': '0.00', 'showRate': False, 'heal': 11, 'healRate': '100.00', 'showHeal': True}}]
</code></pre> 
<pre><code class="prism language-python">hubei_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>hubei<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    hubei_data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>hubei<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> hubei<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'total'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>hubei_data<span class="token punctuation">)</span>
</code></pre> 
<pre><code>[['武汉', 49991], ['孝感', 3518], ['黄冈', 2907], ['荆州', 1580], ['鄂州', 1394], ['随州', 1307], ['襄阳', 1175], ['黄石', 1015], ['宜昌', 931], ['荆门', 928], ['咸宁', 836], ['十堰', 672], ['仙桃', 575], ['天门', 496], ['恩施州', 252], ['潜江', 198], ['神农架', 11]]
</code></pre> 
<pre><code class="prism language-python">hubeitotal <span class="token operator">=</span> datas<span class="token punctuation">[</span><span class="token string">'areaTree'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'children'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'total'</span><span class="token punctuation">]</span>
hubei_confirm <span class="token operator">=</span> hubeitotal<span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span>
hubei_suspect <span class="token operator">=</span> hubeitotal<span class="token punctuation">[</span><span class="token string">'suspect'</span><span class="token punctuation">]</span>
hubei_dead <span class="token operator">=</span> hubeitotal<span class="token punctuation">[</span><span class="token string">'dead'</span><span class="token punctuation">]</span>
hubei_heal <span class="token operator">=</span> hubeitotal<span class="token punctuation">[</span><span class="token string">'heal'</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>hubei_confirm<span class="token punctuation">,</span> hubei_suspect<span class="token punctuation">,</span> hubei_dead<span class="token punctuation">,</span> lastUpdateTime<span class="token punctuation">)</span>
hubei_total <span class="token operator">=</span> <span class="token string">"确诊:"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>hubei_confirm<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 疑似:"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>hubei_suspect<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 死亡:"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>hubei_dead<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 治愈:"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>hubei_heal<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 更新日期:"</span> <span class="token operator">+</span> lastUpdateTime
<span class="token keyword">print</span><span class="token punctuation">(</span>hubei_total<span class="token punctuation">)</span>
</code></pre> 
<pre><code>67786 0 3062 2020-03-14 10:03:41
确诊:67786 疑似:0 死亡:3062 治愈:51553 更新日期:2020-03-14 10:03:41
</code></pre> 
<h2><a id="_106"></a>绘制全国地图</h2> 
<p>设置绘图尺寸，背景色，页面标题，绘制类型；<br> 附上RGB颜色对照表：https://www.114la.com/other/rgb.htm</p> 
<pre><code class="prism language-python">geo_china <span class="token operator">=</span> Geo<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token string">"1680px"</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token string">"800px"</span><span class="token punctuation">,</span> bg_color<span class="token operator">=</span><span class="token string">"#EAEAEA"</span><span class="token punctuation">,</span> page_title<span class="token operator">=</span><span class="token string">"全国疫情实时报告"</span><span class="token punctuation">,</span>renderer<span class="token operator">=</span>RenderType<span class="token punctuation">.</span>SVG<span class="token punctuation">,</span> theme<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/95/9f/3VEUqwKw_o.png" alt="在这里插入图片描述"></p> 
<p>选择地图板块，设置地图区域颜色、区域边界颜色</p> 
<pre><code class="prism language-python">geo_china <span class="token operator">=</span> geo_china<span class="token punctuation">.</span>add_schema<span class="token punctuation">(</span>maptype<span class="token operator">=</span><span class="token string">"china"</span><span class="token punctuation">,</span> itemstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ItemStyleOpts<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">"#FFFFFF"</span><span class="token punctuation">,</span>border_color<span class="token operator">=</span><span class="token string">"#030303"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9d/c6/rd5GwsgZ_o.png" alt="在这里插入图片描述"></p> 
<p>设置地图数据，动画方式为涟漪特效effect scatter</p> 
<pre><code class="prism language-python">geo_china <span class="token operator">=</span> geo_china<span class="token punctuation">.</span>add<span class="token punctuation">(</span>series_name<span class="token operator">=</span><span class="token string">"全国"</span><span class="token punctuation">,</span> data_pair<span class="token operator">=</span>data<span class="token punctuation">,</span> type_<span class="token operator">=</span>GeoType<span class="token punctuation">.</span>EFFECT_SCATTER<span class="token punctuation">)</span>
</code></pre> 
<p>设置系列配置；opts.LabelOpts(is_show=False/True)设置是否显示标签；effect_opts设置涟漪特效缩放比例<br> <img src="https://images2.imgbox.com/de/a9/qqPFxpLP_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">geo_china <span class="token operator">=</span> geo_china<span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>effect_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>EffectOpts<span class="token punctuation">(</span>scale<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/55/ac/zXFD4kme_o.png" alt="在这里插入图片描述"></p> 
<p>设置全局系列配置：设置标题，副标题，标题位置，文字颜色，opts.LegendOpts(is_show=True/False)设置“series_name”是否显示</p> 
<pre><code class="prism language-python">geo_china <span class="token operator">=</span> geo_china<span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"全国疫情地图"</span><span class="token punctuation">,</span> subtitle<span class="token operator">=</span>china_total<span class="token punctuation">,</span>
                                                                pos_left<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span> pos_top<span class="token operator">=</span><span class="token string">"30px"</span><span class="token punctuation">,</span>
                                                                title_textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">"#030303"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                      legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/20/d6/7r55qGIw_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_151"></a>绘制省份地图（以湖北省为例）</h3> 
<pre><code class="prism language-python">geo_hubei <span class="token operator">=</span> <span class="token punctuation">(</span>Geo<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token string">"1200px"</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token string">"800px"</span><span class="token punctuation">,</span> bg_color<span class="token operator">=</span><span class="token string">"#EAEAEA"</span><span class="token punctuation">,</span> page_title<span class="token operator">=</span><span class="token string">"湖北省疫情实时报告"</span><span class="token punctuation">,</span>renderer<span class="token operator">=</span>RenderType<span class="token punctuation">.</span>SVG<span class="token punctuation">,</span> theme<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span>add_schema<span class="token punctuation">(</span>maptype<span class="token operator">=</span><span class="token string">"湖北"</span><span class="token punctuation">,</span> itemstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ItemStyleOpts<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">"#FFFFFF"</span><span class="token punctuation">,</span>border_color<span class="token operator">=</span><span class="token string">"#030303"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span>add<span class="token punctuation">(</span>series_name<span class="token operator">=</span><span class="token string">"湖北"</span><span class="token punctuation">,</span> data_pair<span class="token operator">=</span>hubei_data<span class="token punctuation">,</span> type_<span class="token operator">=</span>GeoType<span class="token punctuation">.</span>EFFECT_SCATTER<span class="token punctuation">)</span>
             <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>effect_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>EffectOpts<span class="token punctuation">(</span>scale<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"湖北省疫情地图"</span><span class="token punctuation">,</span> subtitle<span class="token operator">=</span>hubei_total<span class="token punctuation">,</span>
                                                                pos_left<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span> pos_top<span class="token operator">=</span><span class="token string">"30px"</span><span class="token punctuation">,</span>
                                                                title_textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">"#030303"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                      legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/35/60/2aAL7CXb_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_165"></a>在全国地图上加入湖北省数据</h3> 
<pre><code class="prism language-python">geo_chinahubei <span class="token operator">=</span> geo_china<span class="token punctuation">.</span>add<span class="token punctuation">(</span>series_name<span class="token operator">=</span><span class="token string">"湖北"</span><span class="token punctuation">,</span> data_pair<span class="token operator">=</span>hubei_data<span class="token punctuation">,</span> type_<span class="token operator">=</span>GeoType<span class="token punctuation">.</span>EFFECT_SCATTER<span class="token punctuation">)</span>
geo_chinahubei <span class="token operator">=</span> geo_chinahubei<span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"全国和湖北省疫情地图"</span><span class="token punctuation">,</span> subtitle<span class="token operator">=</span>china_total<span class="token punctuation">,</span>
                                                                pos_left<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span> pos_top<span class="token operator">=</span><span class="token string">"30px"</span><span class="token punctuation">,</span>
                                                                title_textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">"#030303"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                      legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
geo_chinahubei <span class="token operator">=</span> geo_chinahubei<span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>effect_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>EffectOpts<span class="token punctuation">(</span>scale<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/10/17/zP1X5YKL_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_178"></a>导入数据（本地导入数据）</h2> 
<p>除了网上爬取数据还可以从本地直接读取已有数据</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> xlrd
<span class="token builtin">file</span> <span class="token operator">=</span> xlrd<span class="token punctuation">.</span>open_workbook<span class="token punctuation">(</span><span class="token string">'F:\\公众号\\python\\【案例】数据分析---疫情数据可视化（地图）\\中国疫情数据.xlsx'</span><span class="token punctuation">)</span>
table <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>sheets<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span>col_values<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>table<span class="token punctuation">.</span>cell<span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>table<span class="token punctuation">.</span>cell<span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> 
<pre><code>[['湖北', 67773.0], ['广东', 1353.0], ['河南', 1272.0], ['浙江', 1215.0], ['湖南', 1018.0], ['安徽', 990.0], ['江西', 935.0], ['山东', 759.0], ['江苏', 631.0], ['重庆', 576.0], ['四川', 539.0], ['黑龙江', 482.0], ['北京', 435.0], ['上海', 344.0], ['河北', 318.0], ['福建', 296.0], ['广西', 252.0], ['陕西', 245.0], ['云南', 174.0], ['海南', 168.0], ['贵州', 146.0], ['天津', 136.0], ['山西', 133.0], ['甘肃', 125.0], ['辽宁', 125.0], ['香港', 120.0], ['吉林', 93.0], ['新疆', 76.0], ['内蒙古', 75.0], ['宁夏', 75.0], ['台湾', 47.0], ['青海', 18.0], ['澳门', 10.0], ['西藏', 1.0]]
</code></pre> 
<p>总结：<br> 今天给大家分享了geo()的一些常用参数设置，如何设置画布、如何设置标题标签、如何设置动画效果，但是geo()中仍有很多参数并未涉及，这里也无法给大家一一展示，我从CSDN上找了两篇较为详细的geo()参数介绍，附在文末，感兴趣的朋友可以自行研究，在以后的可视化案例中，也会尽可能多使用其它参数进行展示。</p> 
<p>参考博客：<br> https://blog.csdn.net/qq_22592457/article/details/98957767<br> https://blog.csdn.net/chunbali9596/article/details/100819631?depth_1-utm_source=distribute.pc_relevant_right.none-task&amp;utm_source=distribute.pc_relevant_right.none-task</p> 
<h2><a id="_201"></a>获取代码</h2> 
<p>以下是我的个人公众号，该篇的代码可在公众号中回复“<strong>疫情数据可视化</strong>”即可获得，谢谢大家支持。<br> <img src="https://images2.imgbox.com/c3/d9/gbgFrLyl_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5a4c8339487ceab805b4c35f8bbc18c0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何在windows安装NET Framework 3.5</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/533ce2fb156e06b250d8d404d102b13e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python学习笔记（Map,  Filter,   Reduce）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>