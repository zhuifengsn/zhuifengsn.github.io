<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux Centos7安装Redis - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux Centos7安装Redis" />
<meta property="og:description" content="安装 Redis 5 一、安装gcc依赖
由于 redis 是用 C 语言开发，安装之前必先确认是否安装 gcc 环境（gcc -v），如果没有安装，执行以下命令进行安装
[root@localhost local]# yum install -y gcc
二、下载并解压安装包
[root@localhost local]# wget http://download.redis.io/releases/redis-5.0.3.tar.gz
[root@localhost local]# tar -zxvf redis-5.0.3.tar.gz
三、cd切换到redis解压目录下，执行编译
[root@localhost local]# cd redis-5.0.3
[root@localhost redis-5.0.3]# make
四、安装并指定安装目录
[root@localhost redis-5.0.3]# make install PREFIX=/usr/local/redis
五、启动服务
5.1前台启动
[root@localhost redis-5.0.3]# cd /usr/local/redis/bin/
[root@localhost bin]# ./redis-server
5.2后台启动
从 redis 的源码目录中复制 redis.conf 到 redis 的安装目录
[root@localhost bin]# cp /usr/local/redis-5.0.3/redis.conf /usr/local/redis/bin/
修改 redis.conf 文件，把 daemonize no 改为 daemonize yes" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/3ace3e95cc4a08541b858f58362e9174/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-12T14:05:00+08:00" />
<meta property="article:modified_time" content="2020-08-12T14:05:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux Centos7安装Redis</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_Redis_5_0"></a>安装 Redis 5</h3> 
<p>一、安装gcc依赖</p> 
<p>由于 redis 是用 C 语言开发，安装之前必先确认是否安装 gcc 环境（gcc -v），如果没有安装，执行以下命令进行安装</p> 
<blockquote> 
 <p>[root@localhost local]# yum install -y gcc</p> 
</blockquote> 
<p>二、下载并解压安装包</p> 
<blockquote> 
 <p>[root@localhost local]# wget http://download.redis.io/releases/redis-5.0.3.tar.gz</p> 
 <p>[root@localhost local]# tar -zxvf redis-5.0.3.tar.gz</p> 
</blockquote> 
<p>三、cd切换到redis解压目录下，执行编译</p> 
<blockquote> 
 <p>[root@localhost local]# cd redis-5.0.3</p> 
 <p>[root@localhost redis-5.0.3]# make</p> 
</blockquote> 
<p>四、安装并指定安装目录</p> 
<blockquote> 
 <p>[root@localhost redis-5.0.3]# make install PREFIX=/usr/local/redis</p> 
</blockquote> 
<p>五、启动服务</p> 
<p>5.1前台启动</p> 
<blockquote> 
 <p>[root@localhost redis-5.0.3]# cd /usr/local/redis/bin/</p> 
 <p>[root@localhost bin]# ./redis-server</p> 
</blockquote> 
<p>5.2后台启动</p> 
<p>从 redis 的源码目录中复制 redis.conf 到 redis 的安装目录</p> 
<blockquote> 
 <p>[root@localhost bin]# cp /usr/local/redis-5.0.3/redis.conf /usr/local/redis/bin/</p> 
</blockquote> 
<p>修改 redis.conf 文件，把 daemonize no 改为 daemonize yes</p> 
<blockquote> 
 <p>[root@localhost bin]# vi redis.conf</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/a7/60/qS6Mmrrj_o.png" alt="在这里插入图片描述"></p> 
<p>后台启动</p> 
<blockquote> 
 <p>[root@localhost bin]# ./redis-server redis.conf</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/b0/75/xrFBeCk3_o.png" alt="在这里插入图片描述"></p> 
<p>六、设置开机启动</p> 
<p>添加开机启动服务</p> 
<blockquote> 
 <p>[root@localhost bin]# vi /etc/systemd/system/redis.service</p> 
</blockquote> 
<p>复制粘贴以下内容：</p> 
<p><strong>复制代码</strong></p> 
<blockquote> 
 <p>[Unit]<br> Description=redis-server<br> After=network.target</p> 
 <p>[Service]<br> Type=forking<br> ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf<br> PrivateTmp=true</p> 
 <p>[Install]<br> WantedBy=multi-user.target</p> 
</blockquote> 
<p>复制代码<br> 注意：<strong>ExecStart</strong>配置成自己的路径</p> 
<p>设置开机启动</p> 
<blockquote> 
 <p>[root@localhost bin]# systemctl daemon-reload</p> 
 <p>[root@localhost bin]# systemctl start redis.service</p> 
 <p>[root@localhost bin]# systemctl enable redis.service</p> 
</blockquote> 
<p>创建 redis 命令软链接</p> 
<blockquote> 
 <p>[root@localhost ~]# ln -s /usr/local/redis/bin/redis-cli /usr/bin/redis</p> 
</blockquote> 
<p>测试 redis</p> 
<p><img src="https://images2.imgbox.com/87/41/N4gDLhFz_o.png" alt="在这里插入图片描述"></p> 
<p>服务操作命令</p> 
<blockquote> 
 <p>systemctl start redis.service #启动redis服务</p> 
 <p>systemctl stop redis.service #停止redis服务</p> 
 <p>systemctl restart redis.service #重新启动服务</p> 
 <p>systemctl status redis.service #查看服务当前状态</p> 
 <p>systemctl enable redis.service #设置开机自启动</p> 
 <p>systemctl disable redis.service #停止开机自启动</p> 
</blockquote> 
<h3><a id="_Redis_6_130"></a>安装 Redis 6</h3> 
<p>Redis6 跟之前有些不同，先要升级gcc的版本，(6.0的坑，gcc版本 9.0 以上)，输入以下命令</p> 
<blockquote> 
 <p>[root@localhost local]# yum -y install centos-release-scl<br> [root@localhost local]# yum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils</p> 
</blockquote> 
<p>下载 redis-6.0.6</p> 
<blockquote> 
 <p>[root@localhost local]# wget http://download.redis.io/releases/redis-6.0.6.tar.gz</p> 
</blockquote> 
<p>临时启用 gcc 9.1</p> 
<blockquote> 
 <p>[root@localhost local]# scl enable devtoolset-9 bash</p> 
</blockquote> 
<p>长期使用gcc 9.1</p> 
<blockquote> 
 <p>[root@localhost local]# echo “source /opt/rh/devtoolset-9/enable” &gt;&gt;/etc/profile</p> 
</blockquote> 
<p>完成后 重启服务器，接下来就能进行Redis的安装了，先解压</p> 
<blockquote> 
 <p>[root@localhost local]# tar -zxvf redis-6.0.6.tar.gz</p> 
</blockquote> 
<p>进入到该目录中输入make ，进行编译</p> 
<blockquote> 
 <p>[root@localhost local]# cd redis-6.0.6<br> [root@localhost redis-6.0.6]# make</p> 
</blockquote> 
<p>安装到指定目录</p> 
<blockquote> 
 <p>[root@localhost redis-6.0.6]# make install PREFIX=/usr/local/redis</p> 
</blockquote> 
<p><strong>Redis 的配置和启动</strong></p> 
<p>从 redis 的源码目录中复制 redis.conf 到 redis 的安装目录</p> 
<blockquote> 
 <p>[root@localhost bin]# cp /usr/local/redis-6.0.6/redis.conf /usr/local/redis/bin/</p> 
</blockquote> 
<p>编辑 redis.conf ，输入i 才可以更改内容</p> 
<blockquote> 
 <p>[root@localhost bin]# vim redis.conf</p> 
</blockquote> 
<p>将 daemonize 属性改为 yes （这样启动时就在后台启动）<img src="https://images2.imgbox.com/5a/58/vvmSVL3H_o.png" alt="在这里插入图片描述"></p> 
<p>将 protected-mode 属性改为 no （关闭保护模式，不然会阻止远程访问）<br> <img src="https://images2.imgbox.com/f0/5d/lZErc5o7_o.png" alt="在这里插入图片描述"></p> 
<p>在 bind 127.0.0.1 前面加上 # 号<br> <img src="https://images2.imgbox.com/41/8a/ug8T3dOC_o.png" alt="在这里插入图片描述"><br> 添加密码 requirepass 123456<br> <img src="https://images2.imgbox.com/61/3c/jKbIYPrx_o.png" alt="在这里插入图片描述"></p> 
<p>修改完按Esc 然后输入:wq (注意有个冒号)<br> 最后 enter 保存退出</p> 
<p><strong>后台启动命令</strong></p> 
<blockquote> 
 <p>[root@localhost bin]# ./redis-server redis.conf</p> 
</blockquote> 
<p><strong>查看防火墙</strong></p> 
<blockquote> 
 <p>sudo systemctl status firewalld</p> 
</blockquote> 
<p><strong>关闭防火墙</strong></p> 
<blockquote> 
 <p>sudo systemctl disable firewalld</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d3dc875f7dc806d6cc68007b7f7fc23a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">docker部署项目时 时间相差8小时问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cc653e84d3b4e70a579fbcc75873aec7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">bootargs和bootcmd含义</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>