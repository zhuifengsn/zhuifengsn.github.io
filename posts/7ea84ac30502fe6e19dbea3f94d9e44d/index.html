<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HarmonyOS-配置卡片的配置文件 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="HarmonyOS-配置卡片的配置文件" />
<meta property="og:description" content="配置卡片的配置文件 卡片相关的配置文件主要包含FormExtensionAbility的配置和卡片的配置两部分：
卡片需要在module.json5配置文件中的extensionAbilities标签下，配置FormExtensionAbility相关信息。FormExtensionAbility需要填写metadata元信息标签，其中键名称为固定字符串“ohos.extension.form”，资源为卡片的具体配置信息的索引。
配置示例如下：
{ &#34;module&#34;: { ... &#34;extensionAbilities&#34;: [ { &#34;name&#34;: &#34;EntryFormAbility&#34;, &#34;srcEntrance&#34;: &#34;./ets/entryformability/EntryFormAbility.ts&#34;, &#34;label&#34;: &#34;$string:EntryFormAbility_label&#34;, &#34;description&#34;: &#34;$string:EntryFormAbility_desc&#34;, &#34;type&#34;: &#34;form&#34;, &#34;metadata&#34;: [ { &#34;name&#34;: &#34;ohos.extension.form&#34;, &#34;resource&#34;: &#34;$profile:form_config&#34; } ] } ] } } 卡片的具体配置信息。在上述FormExtensionAbility的元信息（“metadata”配置项）中，可以指定卡片具体配置信息的资源索引。例如当resource指定为$profile:form_config时，会使用开发视图的resources/base/profile/目录下的form_config.json作为卡片profile配置文件。内部字段结构说明如下表所示。
表1 卡片form_config.json配置文件
属性名称含义数据类型是否可缺省name表示卡片的类名，字符串最大长度为127字节。字符串否description表示卡片的描述。取值可以是描述性内容，也可以是对描述性内容的资源索引，以支持多语言。字符串最大长度为255字节。该属性将显示在卡片预览界面上，以便用户识别不同卡片。字符串可缺省，缺省为空。src表示卡片对应的UI代码的完整路径。当为ArkTS卡片时，完整路径需要包含卡片文件的后缀，如：“./ets/widget/pages/WidgetCard.ets”。当为JS卡片时，完整路径无需包含卡片文件的后缀，如：“./js/widget/pages/WidgetCard”字符串否uiSyntax表示该卡片的类型，当前支持如下两种类型：- arkts：当前卡片为ArkTS卡片。- hml：当前卡片为JS卡片。字符串可缺省，缺省值为hmlwindow用于定义与显示窗口相关的配置。对象可缺省isDefault表示该卡片是否为默认卡片，每个UIAbility有且只有一个默认卡片。- true：默认卡片。- false：非默认卡片。布尔值否colorMode表示卡片的主题样式，取值范围如下：- auto：自适应。- dark：深色主题。- light：浅色主题。字符串可缺省，缺省值为“auto”。supportDimensions表示卡片支持的外观规格，取值范围：- 1 * 2：表示1行2列的二宫格。- 2 * 2：表示2行2列的四宫格。- 2 * 4：表示2行4列的八宫格。- 4 * 4：表示4行4列的十六宫格。字符串数组否defaultDimension表示卡片的默认外观规格，取值必须在该卡片supportDimensions配置的列表中。字符串否updateEnabled表示卡片是否支持周期性刷新（包含定时刷新和定点刷新），取值范围：- true：表示支持周期性刷新，可以在定时刷新（updateDuration）和定点刷新（scheduledUpdateTime）两种方式任选其一，当两者同时配置时，定时刷新优先生效。- false：表示不支持周期性刷新。布尔类型否scheduledUpdateTime表示卡片的定点刷新的时刻，采用24小时制，精确到分钟。&gt; 说明：&gt; updateDuration参数优先级高于scheduledUpdateTime，两者同时配置时，以updateDuration配置的刷新时间为准。字符串可缺省，缺省时不进行定点刷新。updateDuration表示卡片定时刷新的更新周期，单位为30分钟，取值为自然数。当取值为0时，表示该参数不生效。当取值为正整数N时，表示刷新周期为30*N分钟。&gt; 说明：&gt; updateDuration参数优先级高于scheduledUpdateTime，两者同时配置时，以updateDuration配置的刷新时间为准。数值可缺省，缺省值为“0”。formConfigAbility表示卡片的配置跳转链接，采用URI格式。字符串可缺省，缺省值为空。formVisibleNotify标识是否允许卡片使用卡片可见性通知。字符串可缺省，缺省值为空。metadata表示卡片的自定义信息，包含customizeData数组标签。对象可缺省，缺省值为空。配置示例如下：
{ &#34;forms&#34;: [ { &#34;name&#34;: &#34;widget&#34;, &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/7ea84ac30502fe6e19dbea3f94d9e44d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-26T09:02:58+08:00" />
<meta property="article:modified_time" content="2024-02-26T09:02:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HarmonyOS-配置卡片的配置文件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>配置卡片的配置文件</h2> 
<p>卡片相关的配置文件主要包含FormExtensionAbility的配置和卡片的配置两部分：</p> 
<ol><li> <p>卡片需要在module.json5配置文件中的extensionAbilities标签下，配置FormExtensionAbility相关信息。FormExtensionAbility需要填写metadata元信息标签，其中键名称为固定字符串“ohos.extension.form”，资源为卡片的具体配置信息的索引。</p> <p>配置示例如下：</p> <pre><code>{
  "module": {
    ...
    "extensionAbilities": [
      {
        "name": "EntryFormAbility",
        "srcEntrance": "./ets/entryformability/EntryFormAbility.ts",
        "label": "$string:EntryFormAbility_label",
        "description": "$string:EntryFormAbility_desc",
        "type": "form",
        "metadata": [
          {
            "name": "ohos.extension.form",
            "resource": "$profile:form_config"
          }
        ]
      }
    ]
  }
}
</code></pre> </li><li> <p>卡片的具体配置信息。在上述FormExtensionAbility的元信息（“metadata”配置项）中，可以指定卡片具体配置信息的资源索引。例如当resource指定为$profile:form_config时，会使用开发视图的resources/base/profile/目录下的form_config.json作为卡片profile配置文件。内部字段结构说明如下表所示。</p> <p><strong>表1</strong> 卡片form_config.json配置文件</p> 
  <table><thead><tr><th>属性名称</th><th>含义</th><th>数据类型</th><th>是否可缺省</th></tr></thead><tbody><tr><td>name</td><td>表示卡片的类名，字符串最大长度为127字节。</td><td>字符串</td><td>否</td></tr><tr><td>description</td><td>表示卡片的描述。取值可以是描述性内容，也可以是对描述性内容的资源索引，以支持多语言。字符串最大长度为255字节。该属性将显示在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V2/service-widget-overview-0000001536226057-V2#ZH-CN_TOPIC_0000001523648622__fig149024251313" rel="nofollow">卡片预览</a>界面上，以便用户识别不同卡片。</td><td>字符串</td><td>可缺省，缺省为空。</td></tr><tr><td>src</td><td>表示卡片对应的UI代码的完整路径。当为ArkTS卡片时，完整路径需要包含卡片文件的后缀，如：“./ets/widget/pages/WidgetCard.ets”。当为JS卡片时，完整路径无需包含卡片文件的后缀，如：“./js/widget/pages/WidgetCard”</td><td>字符串</td><td>否</td></tr><tr><td>uiSyntax</td><td>表示该卡片的类型，当前支持如下两种类型：- arkts：当前卡片为ArkTS卡片。- hml：当前卡片为JS卡片。</td><td>字符串</td><td>可缺省，缺省值为hml</td></tr><tr><td>window</td><td>用于定义与显示窗口相关的配置。</td><td>对象</td><td>可缺省</td></tr><tr><td>isDefault</td><td>表示该卡片是否为默认卡片，每个UIAbility有且只有一个默认卡片。- true：默认卡片。- false：非默认卡片。</td><td>布尔值</td><td>否</td></tr><tr><td>colorMode</td><td>表示卡片的主题样式，取值范围如下：- auto：自适应。- dark：深色主题。- light：浅色主题。</td><td>字符串</td><td>可缺省，缺省值为“auto”。</td></tr><tr><td>supportDimensions</td><td>表示卡片支持的外观规格，取值范围：- 1 * 2：表示1行2列的二宫格。- 2 * 2：表示2行2列的四宫格。- 2 * 4：表示2行4列的八宫格。- 4 * 4：表示4行4列的十六宫格。</td><td>字符串数组</td><td>否</td></tr><tr><td>defaultDimension</td><td>表示卡片的默认外观规格，取值必须在该卡片supportDimensions配置的列表中。</td><td>字符串</td><td>否</td></tr><tr><td>updateEnabled</td><td>表示卡片是否支持周期性刷新（包含定时刷新和定点刷新），取值范围：- true：表示支持周期性刷新，可以在定时刷新（updateDuration）和定点刷新（scheduledUpdateTime）两种方式任选其一，当两者同时配置时，定时刷新优先生效。- false：表示不支持周期性刷新。</td><td>布尔类型</td><td>否</td></tr><tr><td>scheduledUpdateTime</td><td>表示卡片的定点刷新的时刻，采用24小时制，精确到分钟。&gt; <strong>说明：</strong>&gt; updateDuration参数优先级高于scheduledUpdateTime，两者同时配置时，以updateDuration配置的刷新时间为准。</td><td>字符串</td><td>可缺省，缺省时不进行定点刷新。</td></tr><tr><td>updateDuration</td><td>表示卡片定时刷新的更新周期，单位为30分钟，取值为自然数。当取值为0时，表示该参数不生效。当取值为正整数N时，表示刷新周期为30*N分钟。&gt; <strong>说明：</strong>&gt; updateDuration参数优先级高于scheduledUpdateTime，两者同时配置时，以updateDuration配置的刷新时间为准。</td><td>数值</td><td>可缺省，缺省值为“0”。</td></tr><tr><td>formConfigAbility</td><td>表示卡片的配置跳转链接，采用URI格式。</td><td>字符串</td><td>可缺省，缺省值为空。</td></tr><tr><td>formVisibleNotify</td><td>标识是否允许卡片使用卡片可见性通知。</td><td>字符串</td><td>可缺省，缺省值为空。</td></tr><tr><td>metadata</td><td>表示卡片的自定义信息，包含customizeData数组标签。</td><td>对象</td><td>可缺省，缺省值为空。</td></tr></tbody></table><p>配置示例如下：</p> <pre><code>{
  "forms": [
    {
      "name": "widget",
      "description": "This is a service widget.",
      "src": "./ets/widget/pages/WidgetCard.ets",
      "uiSyntax": "arkts",
      "window": {
        "designWidth": 720,
        "autoDesignWidth": true
      },
      "colorMode": "auto",
      "isDefault": true,
      "updateEnabled": true,
      "scheduledUpdateTime": "10:30",
      "updateDuration": 1,
      "defaultDimension": "2*2",
      "supportDimensions": [
        "2*2"
      ]
    }
  ]
}
</code></pre> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/423ba0d53e0599e89295f06b772ee5b4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python世界之语句</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8627eb01a4d8b2720233e766faecfda2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">哪种文件摆渡系统 可以实现跨网文件安全收发？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>