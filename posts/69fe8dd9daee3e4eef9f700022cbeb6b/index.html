<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>华为防火墙ssl xxx配置 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="华为防火墙ssl xxx配置" />
<meta property="og:description" content="ipsec vpn,gre vpn 适合企业间的连接，要求连接的两端设备都可以配置；如果是出差的员工，或员工在家想连接到企业网的内部，这两类vpn就不能满足条件。
可以使用PPTP VPN ,L2TP VPN,SSL VPN,EZVPN(CISOCO 专有)，其中以SSL VPN最为安全，应用最普遍。
SSL VPN(CISCO称为 web vpn),使用SSL(安全套接层)协议，实现隧道加密数据传输，客户端使用浏览器即可（L2TP要手工在系统中建立一个连接）,浏览器使用HTTPS协议加密数据，客户端只要能上网，连接到SSLVPN设备即可。
本实验使用 EVE-NG平台，华为USG6K防火墙和思科的路由交换机实现。
拓扑：
图中，内网使用ospf 协议，防火墙使用默认路由访问外网。内网服务器使用eve-ng中的linux服务器模拟，如EVE中 没有的话也可以使用桥接到Vmware 中的虚拟机，外网用户模拟客户端，使用vmware中的windows。
准备：eve-ng中添加两块网卡，用于桥接到vmware虚拟机
在eve-ng中查看ip
目标：在防火墙上配置SSL VPN,使windows10客户端，可以访问到内网的web服务器、文件共享服务器、可以远程管理内网交换机、可以访问内网的指定网段。
配置步骤：
1、交换机配置
sw ena conf t ip routing int lo 0 ip add 172.16.100.254 255.255.255.255 int g0/0 ip add 192.168.10.2 255.255.255.0 no sh int g0/1 ip add 172.16.10.1 255.255.255.0 no sh int g0/2 ip add 172.16.20.1 255.255.255.0 no sh exit router ospf 1 net 172." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/69fe8dd9daee3e4eef9f700022cbeb6b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-17T21:07:04+08:00" />
<meta property="article:modified_time" content="2022-02-17T21:07:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">华为防火墙ssl xxx配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>ipsec vpn,gre vpn 适合企业间的连接，要求连接的两端设备都可以配置；如果是出差的员工，或员工在家想连接到企业网的内部，这两类vpn就不能满足条件。</p> 
<p>可以使用PPTP VPN ,L2TP VPN,SSL VPN,EZVPN(CISOCO 专有)，其中以SSL VPN最为安全，应用最普遍。</p> 
<p>SSL VPN(CISCO称为 web vpn),使用SSL(安全套接层)协议，实现隧道加密数据传输，客户端使用浏览器即可（L2TP要手工在系统中建立一个连接）,浏览器使用HTTPS协议加密数据，客户端只要能上网，连接到SSLVPN设备即可。</p> 
<p>本实验使用 EVE-NG平台，华为USG6K防火墙和思科的路由交换机实现。</p> 
<p>拓扑：</p> 
<p><img src="https://images2.imgbox.com/d4/c1/8bwdSWW9_o.png" alt="在这里插入图片描述"></p> 
<p>图中，内网使用ospf 协议，防火墙使用默认路由访问外网。内网服务器使用eve-ng中的linux服务器模拟，如EVE中 没有的话也可以使用桥接到Vmware 中的虚拟机，外网用户模拟客户端，使用vmware中的windows。</p> 
<p>准备：eve-ng中添加两块网卡，用于桥接到vmware虚拟机</p> 
<p>在eve-ng中查看ip</p> 
<p>目标：在防火墙上配置SSL VPN,使windows10客户端，可以访问到内网的web服务器、文件共享服务器、可以远程管理内网交换机、可以访问内网的指定网段。</p> 
<p>配置步骤：</p> 
<p>1、交换机配置</p> 
<pre><code>sw
ena
conf t

ip routing
int lo 0
ip add 172.16.100.254 255.255.255.255
int g0/0
ip add 192.168.10.2 255.255.255.0
no sh
int g0/1
ip add 172.16.10.1 255.255.255.0
no sh
int g0/2
ip add 172.16.20.1 255.255.255.0
no sh
exit

router ospf 1
net 172.16.10.0 0.0.0.255 area 0
net 172.16.10.0 0.0.0.255 area 0
net 192.168.10.0 0.0.0.255 area 0
net 172.16.100.254 0.0.0.0 area 0
exit

line vty 0 4
login
password 1234
exit

========intnet路由器配置
ena
conf t

int g0/0
ip add 11.1.1.2 255.255.255.0
no sh
int g0/1
ip add 192.168.20.20 255.255.255.0
no sh
exit
=======防火墙修改默认的ip地址，使其与宿主机一个网段，
sys
int g0/0/0
ip add 192.168.8.100 24
</code></pre> 
<p>2、配置防火墙</p> 
<p>使用web 配置，eve-ng中console密码为admin,web默认用户名、密码为：admin\Admin@123,首次登录要修改密码</p> 
<p>​ 配置网络接口、加入到相应的域</p> 
<p>​ 配置对象</p> 
<p>​ 配置路由</p> 
<p>​ 配置ssl vpn</p> 
<p>​ 配置策略</p> 
<p>​ 2.1 配置接口</p> 
<p><img src="https://images2.imgbox.com/8f/2d/two5BZEn_o.png" alt="image-20220217192419853"></p> 
<p>​ 2.2 配置路由</p> 
<p>​ 默认路由，访问外网</p> 
<p>​ <img src="https://images2.imgbox.com/ae/65/SWdzaPBM_o.png" alt="image-20220217192651588"></p> 
<pre><code>OSPF 访问内网
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-s2jn7gEn-1645103076269)(https://raw.githubusercontent.com/github2cx/picgo/master/image-20220217192922820.png)]</p> 
<p>​ 注，web界面配置ospf时，先新建ospf进程，确定后，点后面的“高级”，配置区域、网段等</p> 
<p>​ 另：web界面没有引入默认路由的选项，在终端自行配置</p> 
<p>​ default-route-advertise always</p> 
<p>​ 查看路由表.，防火墙已经学到了内网的路由，</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xNkt67M4-1645103076291)(https://raw.githubusercontent.com/github2cx/picgo/master/image-20220217194236231.png)]</p> 
<p>2.3 配置对象</p> 
<p>​ 地址对象</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jypFvcTD-1645103076293)(https://raw.githubusercontent.com/github2cx/picgo/master/image-20220217194441446.png)]</p> 
<p>​ 用户对象，这里为ssl vpn的4种应用分别创建了4个用户，应用于web访问、</p> 
<p><img src="https://images2.imgbox.com/82/b7/gcOH0t6t_o.png" alt="image-20220217194705779"></p> 
<p>2.4 配置ssl vpn</p> 
<p>​ <img src="https://images2.imgbox.com/4d/6d/0B8Jt9sg_o.png" alt="image-20220217194947055"></p> 
<p>​ 在模拟 器中，如果不能点下一步配置，配置完后点下一步没有反应，这时点“取消”，然后可以在SSL 配置进到下一步继续配置</p> 
<p>​ ssl 配置默认，不用修改。</p> 
<p>​ [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-IgLD6g0D-1645103076302)(https://raw.githubusercontent.com/github2cx/picgo/master/image-20220217195244940.png)]</p> 
<p>​ 业务功能选择，即防火墙ssl vpn所支持的ssl vpn类型</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-q5EIHhDf-1645103076305)(https://raw.githubusercontent.com/github2cx/picgo/master/image-20220217195434445.png)]</p> 
<p>​ 配置web代理，填写相应资源</p> 
<p>​ <img src="https://images2.imgbox.com/20/46/dEzT59B7_o.png" alt="image-20220217195633749"></p> 
<p>​ 文件共享</p> 
<p>​ <img src="https://images2.imgbox.com/fd/81/N3WYcpWv_o.png" alt="image-20220217200321132"></p> 
<p>​ 端口转发</p> 
<p>​ [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-gcT6k2TJ-1645103076311)(https://raw.githubusercontent.com/github2cx/picgo/master/image-20220217200520501.png)]</p> 
<p>角色授权、用户,：创建角色授权资源，将资源关联到相应用户。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-wDFIdOf9-1645103076313)(https://raw.githubusercontent.com/github2cx/picgo/master/image-20220217201010342.png)]</p> 
<p>​ 分别为不同的类型vpn创建相应的用户和授权，完成</p> 
<p>​ <img src="https://images2.imgbox.com/dc/c7/RL9HK315_o.png" alt="image-20220217201335393"></p> 
<p>4、创建相应的安全策略</p> 
<p>​ 4。1 ssl vpn用户访问防火墙，</p> 
<p>​ [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-sEtCN0lg-1645103076317)(https://raw.githubusercontent.com/github2cx/picgo/master/image-20220217203216038.png)]</p> 
<p>​ 4。2 防火墙代理 访问内网的资源，web代理、文件共享都是这个策略生效</p> 
<p>​</p> 
<p>5、验证：在vmware 中的windows10虚拟机上访问防火墙外网接口，使用firefox,chrome浏览器</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Ui0M9l4u-1645103076319)(https://raw.githubusercontent.com/github2cx/picgo/master/image-20220217204401730.png)]</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9cfa3c957e6b165c9edb188cd06a2958/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【lzy学习笔记-dive into deep learning】4.6 暂退法Dropout 的原理与代码实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f70d68040fdf901d516bebcf6ddee93f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[深度学习][原创]yolo训练时候提示页面文件太小，无法完成操作5种解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>