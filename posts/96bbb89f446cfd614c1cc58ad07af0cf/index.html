<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ros学习笔记（十）：树莓派 Ubuntu mate 16.04 开启vncserver 远程桌面&#43;自启动&#43;分辨率修改 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ros学习笔记（十）：树莓派 Ubuntu mate 16.04 开启vncserver 远程桌面&#43;自启动&#43;分辨率修改" />
<meta property="og:description" content="树莓派 Ubuntu mate 16.04 开启vncserver 远程桌面&#43;自启动&#43;分辨率修改 一、 环境 1、树莓派3b &#43; Ubuntu 16.04 mate
2、我是在win10 安装的 vncview 软件进行远程桌面（自行搜索下载），ubuntu环境也可以，参考末尾；
二 、步骤 1、镜像烧录，树莓派系统安装；教程很多，直接参考下面博主的记录： 1）在树莓派上装Ubuntu MATE16.04详细过程
2）树莓派安装Ubuntu MATE 16.04（需要显示屏，一路Debug，测试通过）
（以上都行，我是按照第一个来的，做下参考吧！）
3)换源（比较好用的一个）
deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse deb http://mirrors." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/96bbb89f446cfd614c1cc58ad07af0cf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-13T10:33:09+08:00" />
<meta property="article:modified_time" content="2021-03-13T10:33:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ros学习笔记（十）：树莓派 Ubuntu mate 16.04 开启vncserver 远程桌面&#43;自启动&#43;分辨率修改</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_Ubuntu_mate_1604_vncserver__0"></a>树莓派 Ubuntu mate 16.04 开启vncserver 远程桌面+自启动+分辨率修改</h3> 
<h4><a id="__1"></a>一、 环境</h4> 
<p>1、树莓派3b + Ubuntu 16.04 mate</p> 
<p>2、我是在win10 安装的 vncview 软件进行远程桌面（自行搜索下载），ubuntu环境也可以，参考末尾；</p> 
<h4><a id="__5"></a>二 、步骤</h4> 
<h5><a id="1_6"></a>1、<strong>镜像烧录</strong>，树莓派系统安装；教程很多，直接参考下面博主的记录：</h5> 
<p>1）<a href="https://blog.csdn.net/qq_41058594/article/details/81130375">在树莓派上装Ubuntu MATE16.04详细过程</a></p> 
<p>2）<a href="https://blog.csdn.net/weixin_41869763/article/details/105041145">树莓派安装Ubuntu MATE 16.04（需要显示屏，一路Debug，测试通过）</a></p> 
<p>（以上都行，我是按照第一个来的，做下参考吧！）<br> 3)换源（比较好用的一个）</p> 
<pre><code class="prism language-bash">deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse
deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-updates main restricted universe multiverse
deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse
deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-security main restricted universe multiverse
deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse
deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-backports main restricted universe multiverse
deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial main universe restricted
deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial main universe restricted
</code></pre> 
<h5><a id="2VNC_WiFi_vncserver_25"></a>2、<strong>安装VNC</strong>经过第一步已经进入到系统，并连接好 WiFi 了，接下来安装vncserver；</h5> 
<ol><li>安装 vncserver</li></ol> 
<pre><code class="prism language-bash"> <span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> vnc4server
</code></pre> 
<ol start="2"><li>启动 vncserver （首次启动需要设置密码）</li></ol> 
<pre><code class="prism language-bash">vncserver
</code></pre> 
<p>Ubuntu mate里面是 mate desktop，测试：</p> 
<pre><code class="prism language-bash"><span class="token keyword">echo</span> <span class="token variable">$DESKTOP_SESSION</span>
</code></pre> 
<p>显示：（实测不显示也没有关系）</p> 
<pre><code class="prism language-bash">mate
</code></pre> 
<ol start="3"><li>编辑 /home/.vnc/xstartup 设置VNC要显示图形界面</li></ol> 
<pre><code class="prism language-bash">vim  home/.vnc/xstartup
</code></pre> 
<p>或者</p> 
<pre><code class="prism language-bash">vim  ~/.vnc/xstartup
</code></pre> 
<p>修改之后：</p> 
<pre><code class="prism language-bash"><span class="token operator">!</span>/bin/sh
<span class="token comment"># Uncomment the following two lines for normal desktop:</span>
<span class="token comment"># unset SESSION_MANAGER</span>
<span class="token comment"># exec /etc/X11/xinit/xinitrc</span>

unset SESSION_MANAGRE
unset DBUG_SESSION_BUS_ADDRESS

<span class="token punctuation">[</span> -x /etc/vnc/xstartup <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">exec</span> /etc/vnc/xstartup
<span class="token punctuation">[</span> -r <span class="token variable">$HOME</span>/.Xresources <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> xrdb <span class="token variable">$HOME</span>/.Xresources
xsetroot -solid grey
vncconfig -iconic <span class="token operator">&amp;</span>
x-terminal-emulator -geometry 80x24+10+10 -ls -title <span class="token string">"<span class="token variable">$VNCDESKTOP</span> Desktop"</span> <span class="token operator">&amp;</span>
x-window-manager <span class="token operator">&amp;</span>

mate-session <span class="token operator">&amp;</span> mate-panel <span class="token operator">&amp;</span>

</code></pre> 
<p>ps:我是第二个可以，跟着别的教程，如果进去之后是空白的则进错了；看自己的路径吧；<br> 在后面添加</p> 
<pre><code class="prism language-bash">mate-session <span class="token operator">&amp;</span> mate-panel <span class="token operator">&amp;</span>
</code></pre> 
<ol start="4"><li>设置vncserver开机自启，这样不用每次都vncserver，编辑 /etc/rc.local</li></ol> 
<pre><code class="prism language-bash">vim /etc/rc.local
</code></pre> 
<p>在exit 0 前添加以下内容 :</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span>  vncserver  :1
</code></pre> 
<p>后面的 <code>:1</code> 是端口号，我的机器不加这个的话，自启动，电脑上 vncview 是连接不上的；</p> 
<h5><a id="ps__88"></a><strong>ps:</strong> 没有端口号可能出现的问题：</h5> 
<p><strong>1）自启动没有生效：</strong> <img src="https://images2.imgbox.com/30/75/dl4i1zOn_o.png" alt="在这里插入图片描述"><br> <strong>2) 连接上只显示一个终端窗口，没有桌面，且有可能没法输入；我是修改分辨率弄好的；</strong></p> 
<p><strong>3) vnc 软件显示</strong></p> 
<blockquote> 
 <p>“The connection was refused by the computer”</p> 
</blockquote> 
<p>没解决；但是不影响使用；</p> 
<ol start="5"><li>改变分辨率<br> <strong>方法一：</strong><br> 查看vncserver安装目录</li></ol> 
<pre><code class="prism language-bash"><span class="token function">which</span> vncserver
</code></pre> 
<p>显示/usr/bin/vncserver，</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /usr/bin/vncserver
</code></pre> 
<p>将 <code>$geometry = "1024x768";</code><br> 改为自己想要的分辨率<br> 如 <code>$geometry = "1920x1080";</code><br> 重启 <code>sudo reboot</code><br> <strong>方法二</strong></p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> raspi-config
</code></pre> 
<p>具体百度吧；树莓派入梅教程基本都有；</p> 
<h4><a id="_1ubuntuvnc_117"></a>附录 1：ubuntu连接vnc</h4> 
<blockquote> 
 <p>在虚拟机ubuntu下完成下述任务。<br> 1.下载vncviewer的网站： https://www.realvnc.com/download/viewer/linux/<br> 2.安装好vncviewer<br> 3.添加执行权限<br> chmod +x vncviewer 如下图所示。<br> 4.打开vncviewer,直接执行vncviewer<br> vncviewer<br> 5.接着就连接树莓派上的IP地址即可。<br> 完成任务。<br> 版权声明：本文为CSDN博主「呆萌蜗牛」的原创文章，遵循CC 4.0<br> BY-SA版权协议，转载请附上原文出处链接及本声明。<br> 原文链接：https://blog.csdn.net/Mr_dhy/article/details/82822439</p> 
</blockquote> 
<h4><a id="_2_131"></a>附录 2：参考链接：</h4> 
<p>1、<a href="https://blog.csdn.net/weixin_40546602/article/details/103972473">Ubuntu16.04 配置gnome桌面 VNCserver xstartup文件</a></p> 
<p>2、<a href="https://blog.csdn.net/qq_41058594/article/details/81079259">不小心自己安装gazebo最新版即gazebo8,导致编译catkin_make错误引发的删除ros，重装ros</a></p> 
<p>3、<a href="https://blog.csdn.net/weixin_30814319/article/details/98497221">树莓派 Ubuntu mate 16.04 下开启vncserver（自动启动+改分辨率）</a></p> 
<p>4、<a href="https://www.baidu.com/s?wd=The%20connection%20was%20refused%20by%20the%20computer&amp;rsv_spt=1&amp;rsv_iqid=0xbb9afb4c00064c81&amp;issp=1&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=2&amp;ie=utf-8&amp;tn=baiduhome_pg&amp;rsv_dl=ib&amp;rsv_enter=1&amp;rsv_sug3=2&amp;rsv_n=2" rel="nofollow">The connection was refused by the computer</a></p> 
<p>5、<a href="https://blog.csdn.net/To_be_a_fisher/article/details/99738932">解决VNC远程连接树莓派，窗口显示不全的问题，亲测可行！！</a></p> 
<p>6、<a href="https://blog.csdn.net/qq_45032341/article/details/105748910">树莓派 | 解决VNC Viewer无法连接显示问题</a></p> 
<p>7、<a href="https://blog.csdn.net/dengruijin/article/details/46575681">Ubuntu12.04配置vnc远程桌面,解决Could not acquire name on session bus问题</a></p> 
<p>8、<a href="https://www.cnblogs.com/leetom/archive/2010/04/29/2845848.html" rel="nofollow">终于明白vnc登录后could not acquire name on session bus错误的原因了</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c4b2f341712963a98dc30fd505762dd7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java 线程池的理解_java线程池深入理解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d3e696ee7f409c7e95ddde41044fec6f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">BIO到NIO的演进</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>