<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python爬虫1.1 — urllib基础用法教程 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python爬虫1.1 — urllib基础用法教程" />
<meta property="og:description" content="Python爬虫1.1 — urllib基础用法教程 综述urllib库介绍urllib.request 介绍urlopen()urlretrleve() urllib.parse 介绍urlencode()parse_s()urlparse()urlsplit()urljoin() urllib.error 介绍 综述 本系列文档用于对Python爬虫技术进行简单的教程讲解，巩固自己技术知识的同时，万一一不小心又正好对你有用那就更好了。
Python 版本是3.7.4
urllib库介绍 它是 Python 内置的HTTP请求库，也就是说我们不需要额外安装即可使用，它包含四个模块(主要对前三个模块进行学习)：
request : 它是最基本的 HTTP 请求模块，我们可以用它来模拟发送一请求，就像在浏览器里输入网址然后敲击回车一样，只需要给库方法传入 URL 还有额外的参数，就可以模拟实现这个过程了。error : 异常处理模块，如果出现请求错误，我们可以捕获这些异常，然后进行重试或其他操作保证程序不会意外终止。parse : 用于解析URL，提供了许多URL处理方法，比如拆分、解析、合并等等的方法，以及对参数的拼接等待。robotparser : 主要是用来识别网站的robots.txt协议文件，然后判断网站的那些数据可以爬，哪些数据不可以爬的，其实用的比较少。 urllib.request 介绍 urlopen() 参数说明(仅写了四个最常用的参数)
url : 爬取目标的URL；data : 请求参数，如果设置该参数，则请求默认为post请求；没有默认为get请求；timeout : 用于设置超时时间，单位为秒；context : 必须是一个ssl.SSLContext类型,用来指定SSL设置,忽略未认证的CA证书; 具体用法
GET 请求方式 # 导入urllib库 import urllib.request # 向指定的url发送请求，并返回服务器响应的类文件对象 url = &#34;http://www.baidu.com&#34; response = urllib.request.urlopen(url=url) print(type(response)) # 类文件对象支持文件对象的操作方法，如read()方法读取文件全部内容，返回字符串 html = response.read() # html = response.readline() # 读取一行 # html = response." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/13ce55a9b202accab87b6a091c26ec1e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-03T17:02:54+08:00" />
<meta property="article:modified_time" content="2019-08-03T17:02:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python爬虫1.1 — urllib基础用法教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Python爬虫1.1 — urllib基础用法教程</h4> 
 <ul><li><ul><li><a href="#_2" rel="nofollow">综述</a></li><li><a href="#urllib_6" rel="nofollow">urllib库介绍</a></li><li><a href="#urllibrequest__14" rel="nofollow">urllib.request 介绍</a></li><li><ul><li><a href="#urlopen_16" rel="nofollow">urlopen()</a></li><li><a href="#urlretrleve_91" rel="nofollow">urlretrleve()</a></li></ul> 
   </li><li><a href="#urllibparse__131" rel="nofollow">urllib.parse 介绍</a></li><li><ul><li><a href="#urlencode_133" rel="nofollow">urlencode()</a></li><li><a href="#parse_s_153" rel="nofollow">parse_s()</a></li><li><a href="#urlparse_176" rel="nofollow">urlparse()</a></li><li><a href="#urlsplit_203" rel="nofollow">urlsplit()</a></li><li><a href="#urljoin_231" rel="nofollow">urljoin()</a></li></ul> 
   </li><li><a href="#urlliberror__256" rel="nofollow">urllib.error 介绍</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_2"></a>综述</h3> 
<p>本系列文档用于对Python爬虫技术进行简单的教程讲解，巩固自己技术知识的同时，万一一不小心又正好对你有用那就更好了。<br> Python 版本是3.7.4</p> 
<h3><a id="urllib_6"></a>urllib库介绍</h3> 
<p>它是 Python 内置的HTTP请求库，也就是说我们不需要额外安装即可使用，它包含四个模块(主要对前三个模块进行学习)：</p> 
<ul><li>request : 它是最基本的 HTTP 请求模块，我们可以用它来模拟发送一请求，就像在浏览器里输入网址然后敲击回车一样，只需要给库方法传入 URL 还有额外的参数，就可以模拟实现这个过程了。</li><li>error : 异常处理模块，如果出现请求错误，我们可以捕获这些异常，然后进行重试或其他操作保证程序不会意外终止。</li><li>parse : 用于解析URL，提供了许多URL处理方法，比如拆分、解析、合并等等的方法，以及对参数的拼接等待。</li><li>robotparser : 主要是用来识别网站的robots.txt协议文件，然后判断网站的那些数据可以爬，哪些数据不可以爬的，其实用的比较少。</li></ul> 
<h3><a id="urllibrequest__14"></a>urllib.request 介绍</h3> 
<h4><a id="urlopen_16"></a>urlopen()</h4> 
<ol><li> <p>参数说明(仅写了四个最常用的参数)</p> 
  <ul><li>url : 爬取目标的URL；</li><li>data : 请求参数，如果设置该参数，则请求默认为post请求；没有默认为get请求；</li><li>timeout : 用于设置超时时间，单位为秒；</li><li>context : 必须是一个ssl.SSLContext类型,用来指定SSL设置,忽略未认证的CA证书;</li></ul> </li><li> <p>具体用法</p> 
  <ul><li>GET 请求方式</li></ul> <pre><code class="prism language-python">    <span class="token comment"># 导入urllib库</span>
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
    
    <span class="token comment"># 向指定的url发送请求，并返回服务器响应的类文件对象</span>
    url <span class="token operator">=</span> <span class="token string">"http://www.baidu.com"</span>
    response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 类文件对象支持文件对象的操作方法，如read()方法读取文件全部内容，返回字符串</span>
    html <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># html = response.readline() # 读取一行</span>
    <span class="token comment"># html = response.readlines() # 读取多行，返回列表</span>
    <span class="token comment"># 打印响应结果（byte类型）</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
    <span class="token comment"># 打印响应结果（utf-8类型）</span>
    <span class="token comment"># 二进制和字符串之间的相互转码使用 encode() 和 decode() 函数</span>
    <span class="token comment"># encode() 和 decode() 可带参数，不写默认utf-8，其他不再特别说明</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 打印状态码</span>
    <span class="token comment"># print(response.get_code())</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span>
    <span class="token comment"># 获取响应头</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>getheaders<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取响应头Server信息</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>getheader<span class="token punctuation">(</span><span class="token string">'Server'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取响应结果原因</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>reason<span class="token punctuation">)</span>
</code></pre> 
  <ul><li>POST 请求方式</li></ul> <pre><code class="prism language-python">    <span class="token comment"># 导入urllib库</span>
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
    
    <span class="token comment"># 向指定的url发送请求，并返回</span>
    post_url <span class="token operator">=</span> <span class="token string">'https://fanyi.baidu.com/sug'</span>
    <span class="token comment"># 传入参数</span>
    form_data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'kw'</span><span class="token punctuation">:</span> <span class="token string">'honey'</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># 格式化参数</span>
    form_data <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>form_data<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token operator">=</span>post_url<span class="token punctuation">,</span> data<span class="token operator">=</span>form_data<span class="token punctuation">)</span>
    <span class="token comment"># 打印服务器响应的类文件对象</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 类文件对象支持文件对象的操作方法，如read()方法读取文件全部内容，返回字符串</span>
    html <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 打印响应结果（byte类型）</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
    <span class="token comment"># 打印响应结果（utf-8类型）</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 打印状态码</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span>
    <span class="token comment"># print(response.getcode())</span>
    <span class="token comment"># 获取响应头</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>getheaders<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取响应头Server信息</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>getheader<span class="token punctuation">(</span><span class="token string">'Server'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取响应结果原因</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>reason<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h4><a id="urlretrleve_91"></a>urlretrleve()</h4> 
<ol><li> <p>参数说明</p> 
  <ul><li>url : 下载链接地址；</li><li>filename : 指定保存本地路径(如果参数未指定，urllib会生成一个临时文件保存数据)；</li><li>reporthook : 是一个回调函数，当连接上服务器、以及相应的数据块传输完毕时会触发该回调，我们可以利用这个回调函数来显示当前的下载进度；</li><li>data : 指post导服务器的数据，该方法返回一个包含两个元素的(filename, headers) 元组，filename 表示保存到本地的路径，header表示服务器的响应头;</li></ul> </li><li> <p>具体用法</p> <pre><code class="prism language-python">    <span class="token comment"># 引入所需要的库</span>
    <span class="token keyword">import</span> os
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
    
    
    <span class="token comment"># 定义回调函数</span>
    <span class="token keyword">def</span> <span class="token function">call_back</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        图片下载回调
        :param a: 已经下载的数据块
        :param b: 数据块的大小
        :param c: 远程文件的大小
        :return: 
        """</span>
        per <span class="token operator">=</span> <span class="token number">100.0</span> <span class="token operator">*</span> a <span class="token operator">*</span> b <span class="token operator">/</span> c
        <span class="token keyword">if</span> per <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">:</span>
            per <span class="token operator">=</span> <span class="token number">100</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%.2f%%'</span> <span class="token operator">%</span> per<span class="token punctuation">)</span>
    
    
    <span class="token comment"># 定义下下载的地址</span>
    url <span class="token operator">=</span> <span class="token string">'http://www.baidu.com'</span>
    <span class="token comment"># 构造文件保存路径</span>
    path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>
    file_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">'baidu.html'</span><span class="token punctuation">)</span>
    <span class="token comment"># 进行下载</span>
    urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token punctuation">,</span> file_path<span class="token punctuation">,</span> call_back<span class="token punctuation">)</span>

</code></pre> </li></ol> 
<h3><a id="urllibparse__131"></a>urllib.parse 介绍</h3> 
<h4><a id="urlencode_133"></a>urlencode()</h4> 
<ol><li> <p>参数说明</p> 
  <ul><li>query : url参数，可以是字符串，也可以是字典；</li><li>encoding : 编码方式；</li></ul> </li><li> <p>具体用法</p> <pre><code class="prism language-python">    <span class="token comment"># 引入所需要的库</span>
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse
    <span class="token comment"># 参数数据</span>
    data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
        <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">26</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># 进行编码</span>
    ret <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h4><a id="parse_s_153"></a>parse_s()</h4> 
<ol><li> <p>参数说明</p> 
  <ul><li>qs : url参数，编码后的字符串；</li><li>encoding : 字符方式；</li></ul> </li><li> <p>具体用法</p> <pre><code class="prism language-python">    <span class="token comment"># 引入所需要的库</span>
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse
    <span class="token comment"># 参数数据</span>
    data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
        <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">26</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># 进行编码</span>
    ret1 <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret1<span class="token punctuation">)</span>
    <span class="token comment"># 进行解码</span>
    ret2 <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>parse_qs<span class="token punctuation">(</span>ret1<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret2<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h4><a id="urlparse_176"></a>urlparse()</h4> 
<ol><li> <p>参数说明</p> 
  <ul><li>url : url地址字符串；</li></ul> </li><li> <p>具体用法</p> <pre><code class="prism language-python">    <span class="token comment"># 引入所需要的库</span>
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse
    <span class="token comment"># 声明url</span>
    url <span class="token operator">=</span> <span class="token string">"https://www.baidu.com/s?wd=urlparse&amp;rsv_spt=1&amp;rsv_iqid=0x921f00fe005646ef&amp;issp=1&amp;f=8"</span>
    <span class="token comment"># 进行url解析</span>
    ret <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlparse<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'scheme:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>scheme<span class="token punctuation">)</span>  <span class="token comment"># 协议</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'netloc:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>netloc<span class="token punctuation">)</span>  <span class="token comment"># 域名服务器</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'path:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>path<span class="token punctuation">)</span>  <span class="token comment"># 相对路径</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'params:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>params<span class="token punctuation">)</span>  <span class="token comment"># 路径端参数</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fragment:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>fragment<span class="token punctuation">)</span>  <span class="token comment"># 片段</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'query:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>query<span class="token punctuation">)</span>  <span class="token comment"># 查询</span>
    
    <span class="token comment"># urlunparse() 与 urlparse() 对应相反函数</span>
    <span class="token comment"># 使用urlparse的格式组合成一个url，可以直接将urlparse的返回传递组合</span>
    ret1 <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlunparse<span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret1<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h4><a id="urlsplit_203"></a>urlsplit()</h4> 
<ol><li> <p>参数说明</p> 
  <ul><li>url : url地址字符串；</li></ul> </li><li> <p>具体用法</p> <pre><code class="prism language-python">    <span class="token comment"># 引入所需要的库</span>
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse
    <span class="token comment"># 声明url</span>
    url <span class="token operator">=</span> <span class="token string">"https://www.baidu.com/s?wd=urlparse&amp;rsv_spt=1&amp;rsv_iqid=0x921f00fe005646ef&amp;issp=1&amp;f=8"</span>
    <span class="token comment"># 进行url解析</span>
    ret <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlsplit<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'scheme:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>scheme<span class="token punctuation">)</span>  <span class="token comment"># 协议</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'netloc:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>netloc<span class="token punctuation">)</span>  <span class="token comment"># 域名服务器</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'path:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>path<span class="token punctuation">)</span>  <span class="token comment"># 相对路径</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'fragment:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>fragment<span class="token punctuation">)</span>  <span class="token comment"># 片段</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'query:'</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>query<span class="token punctuation">)</span>  <span class="token comment"># 查询</span>
    
    <span class="token comment"># urlunsplit() 与 urlsplit() 对应相反函数</span>
    <span class="token comment"># 使用urlsplit的格式组合成一个url，可以直接将urlsplit的返回传递组合</span>
    ret1 <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlunsplit<span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret1<span class="token punctuation">)</span>
    
    <span class="token comment"># 此函数和urlparse函数的区别在于此函数没有params</span>
</code></pre> </li></ol> 
<h4><a id="urljoin_231"></a>urljoin()</h4> 
<ol><li> <p>参数说明</p> 
  <ul><li>qs : url参数，编码后的字符串；</li><li>encoding : 字符方式；</li></ul> </li><li> <p>具体用法</p> <pre><code class="prism language-python">    <span class="token comment"># 引入所需要的库</span>
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse
    
    <span class="token comment"># 声明url</span>
    url <span class="token operator">=</span> <span class="token string">"https://www.baidu.com/"</span>
    <span class="token comment"># 参数数据</span>
    data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
        <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">26</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># 格式化参数</span>
    data <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token comment"># 进行url拼接</span>
    ret <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urljoin<span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h3><a id="urlliberror__256"></a>urllib.error 介绍</h3> 
<p>我们在爬虫的时候发请求的时候难免出现错误，如访问不到服务器或者访问被禁止等等，error分为URLError和HTTPError两类：</p> 
<ol><li> <p>URLError</p> 
  <ul><li>没有网</li><li>服务器链接失败</li><li>找不大指定服务器</li></ul> </li><li> <p>HTTPError</p> 
  <ul><li>是URLError的子类</li></ul> </li><li> <p>两者区别和联系</p> 
  <ul><li>URLError封装的错误信息一般是由网络引起的，包括url错误</li><li>HTTPError封装的错误信息一般是服务器返回了错误状态码</li><li>URLError是OSERROR的子类，HTTPError是URLError的子类</li><li>【注意】两个同时捕获的时候需要将子类放在上面，父类放在下面</li></ul> </li><li> <p>用法</p> <pre><code class="prism language-python">    <span class="token comment"># 引入所需要的库</span>
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>error
    <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
    
    <span class="token comment"># 一个访问异常的url</span>
    url <span class="token operator">=</span> <span class="token string">'https://www.mz.com/156427/100'</span>
    <span class="token comment"># 捕获异常</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        ret <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
    <span class="token keyword">except</span> urllib<span class="token punctuation">.</span>error<span class="token punctuation">.</span>HTTPError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>getcode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> urllib<span class="token punctuation">.</span>error<span class="token punctuation">.</span>URLError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</code></pre> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/50ec6650af0c38d488ae8d6490c636ea/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">文件摆渡如何实现自动化传输？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/800bc6839198db266896bc0d149c553f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySql事务隔离级别-已提交读（READ COMMITTED）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>