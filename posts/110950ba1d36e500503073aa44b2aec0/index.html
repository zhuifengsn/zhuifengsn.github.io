<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python中escape,一日一技：在 Python 正则表达式模块中逃跑（escape） - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python中escape,一日一技：在 Python 正则表达式模块中逃跑（escape）" />
<meta property="og:description" content="一日一技：在 Python 正则表达式模块中逃跑(escape)
摄影：产品经理
时间：从九溪十八涧出来后的小雨天
在编程语言中，有常见的符号被赋予了特殊的意义，例如小数点.，在正则表达式里面表示任意一个非换行符的字符；小于号
但有时候，我们只想让这些符号表示它本来的意思，不想让它的特殊意义表露出来，应该怎么办？
我们知道，在正则表达式中可以使用反斜杠来让一个特殊符号变成普通符号，例如.表示普通的小数点，\$表示普通的美元符号。
现在我有一个列表keywords_list，里面是100个字符串，我想判断是否有任意一个字符串在某个给定的句子中。如果用 for 循环一个一个去检查，效率非常低。于是可以考虑使用正则表达式：
import re
pattern = re.compile(&#39;|&#39;.join(keywords_list))
if pattern.search(&#39;目标句子&#39;):
print(&#39;目标句子中包含某个关键词&#39;)
但假设 keywords_list列表中有如下的字符串：
keywords_list = [&#39;4.5&#39;, &#39;&#43;{d&#39;, &#39;***&#39;]
那么我们使用正则表达式就会导致报错，如下图所示。
这是因为这些字符串里面存在特殊的符号，这些符号在正则表达式里面有特殊的意义，有使用的规范，不能随意使用。
但是，keywords_list里面有各种各样的特殊符号，难道要一个一个取出来，逐一x.replace(&#39;&#43;&#39;, &#39;&#43;&#39;).replace(&#39;.&#39;, &#39;.&#39;).replace(&#39;&#39;, &#39;\&#39;)...?
当然不用，Python 的正则表达式模块已经帮你想好了解决办法，使用re.escape就能自动处理所有的特殊符号了！
它的用法如下：
&gt;&gt;&gt; import re
&gt;&gt;&gt; keywords_list = [&#39;4.5&#39;, &#39;&#43;{d&#39;, &#39;***&#39;]
&gt;&gt;&gt; pattern_str = &#39;|&#39;.join(keywords_list)
&gt;&gt;&gt; safe_pattern_str = re.escape(pattern_str)
&gt;&gt;&gt; print(safe_pattern_str)
4\.5\|\&#43;\{d\|\*\*\*
&gt;&gt;&gt; re.compile(safe_pattern_str)
re.compile(&#39;4\\.5\\|\\&#43;\\{d\\|\\*\\*\\*&#39;)
&gt;&gt;&gt;
运行效果如下图所示：
解决问题。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/110950ba1d36e500503073aa44b2aec0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-25T22:43:31+08:00" />
<meta property="article:modified_time" content="2021-03-25T22:43:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python中escape,一日一技：在 Python 正则表达式模块中逃跑（escape）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>一日一技：在 Python 正则表达式模块中逃跑(escape)</p> 
 <p align="center"><img src="https://images2.imgbox.com/3b/6b/tZAwrfaq_o.png" alt="ea8d1c6fb136f5740fd666173b644bdb.png"></p> 
 <p>摄影：产品经理</p> 
 <p>时间：从九溪十八涧出来后的小雨天</p> 
 <p>在编程语言中，有常见的符号被赋予了特殊的意义，例如小数点.，在正则表达式里面表示任意一个非换行符的字符；小于号</p> 
 <p>但有时候，我们只想让这些符号表示它本来的意思，不想让它的特殊意义表露出来，应该怎么办？</p> 
 <p>我们知道，在正则表达式中可以使用反斜杠来让一个特殊符号变成普通符号，例如.表示普通的小数点，\$表示普通的美元符号。</p> 
 <p>现在我有一个列表keywords_list，里面是100个字符串，我想判断是否有任意一个字符串在某个给定的句子中。如果用 for 循环一个一个去检查，效率非常低。于是可以考虑使用正则表达式：</p> 
 <p>import re</p> 
 <p>pattern = re.compile('|'.join(keywords_list))</p> 
 <p>if pattern.search('目标句子'):</p> 
 <p>print('目标句子中包含某个关键词')</p> 
 <p>但假设 keywords_list列表中有如下的字符串：</p> 
 <p>keywords_list = ['4.5', '+{d', '***']</p> 
 <p>那么我们使用正则表达式就会导致报错，如下图所示。</p> 
 <p align="center"><img src="https://images2.imgbox.com/c5/f2/HyPzcyfU_o.png" alt="dc334e9949d7357ed3af3ab2423e52fc.png"></p> 
 <p>这是因为这些字符串里面存在特殊的符号，这些符号在正则表达式里面有特殊的意义，有使用的规范，不能随意使用。</p> 
 <p>但是，keywords_list里面有各种各样的特殊符号，难道要一个一个取出来，逐一x.replace('+', '+').replace('.', '.').replace('', '\')...?</p> 
 <p>当然不用，Python 的正则表达式模块已经帮你想好了解决办法，使用re.escape就能自动处理所有的特殊符号了！</p> 
 <p>它的用法如下：</p> 
 <p>&gt;&gt;&gt; import re</p> 
 <p>&gt;&gt;&gt; keywords_list = ['4.5', '+{d', '***']</p> 
 <p>&gt;&gt;&gt; pattern_str = '|'.join(keywords_list)</p> 
 <p>&gt;&gt;&gt; safe_pattern_str = re.escape(pattern_str)</p> 
 <p>&gt;&gt;&gt; print(safe_pattern_str)</p> 
 <p>4\.5\|\+\{d\|\*\*\*</p> 
 <p>&gt;&gt;&gt; re.compile(safe_pattern_str)</p> 
 <p>re.compile('4\\.5\\|\\+\\{d\\|\\*\\*\\*')</p> 
 <p>&gt;&gt;&gt;</p> 
 <p>运行效果如下图所示：</p> 
 <p align="center"><img src="https://images2.imgbox.com/83/84/BYGambeG_o.png" alt="e4e60230fbfd8864935c4f1cba952990.png"></p> 
 <p>解决问题。</p> 
 <p align="center"></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/183d673319cfc7ee3b2f4827d4ca99a4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">下拉框(select)，可以多选，带有分组搜索功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8cd5ddc35a7c70badf6e4c8137a3ae39/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">《长安十二时辰》之学习PMP项目管理、 NPDP产品经理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>