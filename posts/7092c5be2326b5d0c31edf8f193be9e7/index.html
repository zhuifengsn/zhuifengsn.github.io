<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>当神经网络遇上GUI - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="当神经网络遇上GUI" />
<meta property="og:description" content="1，在这里先构建一个简单的神经网络；```
l%数据集导入选择数据集的前14组用于训练，后3组用于测试
clear all
clc
load sample
data=Data1’;%矩阵转置
result=Data2’;
n=randperm(17);%1-17 随机排列
input_train=data(:,n(1:14));%取14个样本用于训练
output_train=result(:,n(1:14));
input_test=data(:,n(15:17));%取剩余3个样本用于检验
output_test=result(:,n(15:17));
%训练样本归一化
[inputn,inputps]=mapminmax(input_train);
minp=inputps.ymin;
maxp=inputps.ymax;
[outputn,outputps]=mapminmax(output_train);
mint=outputps.ymin;
maxt=outputps.ymax;
load bpdata
%最适隐藏节点确定设置在1~30 个隐层节点数情况下，计算预测结果与实际结果的误差绝对值之和，由此确定隐层节点数。
for i=1:30
net =newff (inputn,outputn,i, {‘tansig’,‘purelin’},‘traingdx’)
net.divideParam.trainRatio = 100/100;
net.divideParam.valRatio = 0/100;
net.divideParam.testRatio = 0/100;
net.trainParam.epochs=2000;
net.trainParam.lr=0.05;
net.trainParam.goal=0.00001;
net=train(net,inputn,outputn);
testn=mapminmax(‘apply’,input_test,inputps);
an=sim(net,testn);
a=mapminmax(‘reverse’,an,outputps);
sse=sum((b-a).^2);
r(i)=norm(sse);
end
load bpdata
inputnum=3;
hiddennum=5;
outputnum=1
net1 =newff (xn,zn,5, {‘tansig’,‘purelin’},‘traingdm’);
net.divideParam.trainRatio = 100/100;
net.divideParam.valRatio = 0/100;
net.divideParam.testRatio = 0/100;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/7092c5be2326b5d0c31edf8f193be9e7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-09T13:57:35+08:00" />
<meta property="article:modified_time" content="2022-04-09T13:57:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">当神经网络遇上GUI</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1，在这里先构建一个简单的神经网络；```<br> l%数据集导入选择数据集的前14组用于训练，后3组用于测试<br> clear all<br> clc<br> load sample<br> data=Data1’;%矩阵转置<br> result=Data2’;<br> n=randperm(17);%1-17 随机排列<br> input_train=data(:,n(1:14));%取14个样本用于训练<br> output_train=result(:,n(1:14));<br> input_test=data(:,n(15:17));%取剩余3个样本用于检验<br> output_test=result(:,n(15:17));<br> %训练样本归一化<br> [inputn,inputps]=mapminmax(input_train);<br> minp=inputps.ymin;<br> maxp=inputps.ymax;<br> [outputn,outputps]=mapminmax(output_train);<br> mint=outputps.ymin;<br> maxt=outputps.ymax;<br> load bpdata<br> %最适隐藏节点确定设置在1~30 个隐层节点数情况下，计算预测结果与实际结果的误差绝对值之和，由此确定隐层节点数。<br> for i=1:30<br> net =newff (inputn,outputn,i, {‘tansig’,‘purelin’},‘traingdx’)<br> net.divideParam.trainRatio = 100/100;<br> net.divideParam.valRatio = 0/100;<br> net.divideParam.testRatio = 0/100;<br> net.trainParam.epochs=2000;<br> net.trainParam.lr=0.05;<br> net.trainParam.goal=0.00001;<br> net=train(net,inputn,outputn);<br> testn=mapminmax(‘apply’,input_test,inputps);<br> an=sim(net,testn);<br> a=mapminmax(‘reverse’,an,outputps);<br> sse=sum((b-a).^2);<br> r(i)=norm(sse);<br> end<br> load bpdata<br> inputnum=3;<br> hiddennum=5;<br> outputnum=1<br> net1 =newff (xn,zn,5, {‘tansig’,‘purelin’},‘traingdm’);<br> net.divideParam.trainRatio = 100/100;<br> net.divideParam.valRatio = 0/100;<br> net.divideParam.testRatio = 0/100;<br> net.trainParam.epochs=2000;<br> net.trainParam.lr=0.05;<br> net.trainParam.goal=0.00001;<br> net=train(net,inputn,outputn)<br> testn=mapminmax(‘apply’,input_test,inputps);<br> an=sim(net,testn);<br> a=mapminmax(‘reverse’,an,outputps);<br> %将预测结果反归一化处理<br> w_test=mapminmax(‘apply’,input_train,inputps);<br> an=sim(net,w_test);<br> test_simu=mapminmax(‘reverse’,an,outputps)</p> 
<p>神经网络算法原理：<br> 便捷的线性加权求和可得netz神经元净输入，<br> 对于一个含有四个输入神经元和4个隐藏神经元的神经网络即矩阵计算;<br> <img src="https://images2.imgbox.com/fe/0f/EWRzrbqc_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/4a/88/9LhNyGB3_o.png" alt="在这里插入图片描述"> 2.Matlab_gui<br> 效果<br> <img src="https://images2.imgbox.com/df/74/AmgiZUJf_o.png" alt="在这里插入图片描述"></p> 
<p>1.按钮的回调如下</p> 
<p>filterspec = {‘<em>.jpg;</em>.tif;<em>.png;</em>.gif’,‘All Image Files’};<br> [f, p] = uigetfile(filterspec);<br> %p是文件所在的目录 如：C:\Users\Administrator\Desktop\php项目<br> %f是文件的名字 如 微信截图_20210405181244.png<br> %拼接起来[p f] 例如： C:\Users\Administrator\Desktop\php项目\微信截图_20210405205426.png<br> if (ischar§)<br> fname = [p f];<br> %这个是核心方法，调用主函数，传递参数<br> updateimage(app, fname)<br> end<br> % Make sure user didn’t cancel uigetfile dialog</p> 
<p>坐标轴不用管</p> 
<p>左上角添加一个全局函数</p> 
<p>function updateimage(app,imagefile)<br> im=imread(imagefile)<br> %app.UIAxes是坐标轴的名号<br> imshow(im,‘parent’,app.UIAxes)<br> end<br> 表格：<br> 首先需要一个坐标轴和一个按钮</p> 
<p>按钮的回调如下<br> filterspec = {‘<em>.xls;</em>.xlsx;<em>.png;</em>.gif’,‘All Image Files’};<br> [f, p] = uigetfile(filterspec);<br> app.fname=[p f];<br> % Make sure user didn’t cancel uigetfile dialog<br> if (ischar§)<br> fname = [p f];<br> updateimage(app, fname)<br> end<br> 左上角添加一个全局函数</p> 
<p>function updateimage(app,imagefile)<br> t=readtable(imagefile)<br> app.UITable.Data=t<br> end<br> 注意 第一行是默认不显示的</p> 
<p>2.公共变量的传递 逻辑函数的使用</p> 
<p>上面的知识load了一个数据并显示，我们现在要拿到里面的数据并且对其中进行公共变量的传递</p> 
<p>首先，我们定义一个全局属性</p> 
<p>然后所有的属性都用 app.fname 就行了，像上面的方法我们可以叫他 app.fname</p> 
<p>然后在按钮的回调代码中我们可以</p> 
<p>im=imread(app.fname)<br> imshow(im)</p> 
<p>% % Draw a region of interest<br> h = imrect<br> % % Evaluate OCR within ROI<br> roi = h.getPosition;<br> %这个文件其实就是一个脚本M文件<br> ocrI = evaluateOCRTraining(im, roi);<br> % Show results<br> imshow(ocrI)</p> 
<p>3.值的输出，参数拼接</p> 
<p>1.按钮下回调，改变文本框的值<br> app.EditField.Value=p</p> 
<p>1.参数的拼接</p> 
<p>像预测问题时是可以这么做的</p> 
<p>new_x=[app.x_1.Value,app.x_2.Value,app.x_3.Value,app.x_4.Value,app.x_5.Value]</p> 
<ol start="2"><li>excel参数的读取</li></ol> 
<p>function updateexcel(app,imagefile)<br> t=readtable(imagefile);<br> app.UITable.Data=t;<br> t1=xlsread(imagefile);<br> disp(t1(1,2))<br> app.EditField.Value=num2str(t1(2,1))<br> %app.EditField.Value=num2str(t1(2,:))</p> 
<p>end</p> 
<p>load(‘test.mat’)<br> %参数拼接<br> new_x=[app.x_1.Value,app.x_2.Value,app.x_3.Value,app.x_4.Value,app.x_5.Value]<br> predict_y=sim(net,new_x(1,:)');<br> %结果输出<br> app.y.Value=predict_y</p> 
<p>第二种读取excel的方法</p> 
<p>properties (Access = public)<br> fname % Description<br> end<br> methods (Access = private)<br> function updateimage(app,imagefile)<br> t=readtable(imagefile)<br> app.UITable.Data=t<br> %第一行 第二列<br> test_1=table2array(t)<br> app.x_1.Value=test_1(1,1)<br> app.x_2.Value=test_1(1,2)<br> app.x_3.Value=test_1(1,3)<br> app.x_4.Value=test_1(1,4)<br> app.x_5.Value=test_1(1,5)<br> end</p> 
<p>end</p> 
<p>代码：</p> 
<p>1.第一个按钮（load data）</p> 
<p>filterspec = {‘<em>.xls;</em>.xlsx;<em>.png;</em>.gif’,‘All Image Files’};<br> [f, p] = uigetfile(filterspec);<br> app.fname=[p f];<br> % Make sure user didn’t cancel uigetfile dialog<br> if (ischar§)<br> fname = [p f];<br> updateimage(app, fname)<br> end</p> 
<p>2.第二个按钮（调用神经网络）</p> 
<p>load(‘test.mat’)<br> new_x=[app.x_1.Value,app.x_2.Value,app.x_3.Value,app.x_4.Value,app.x_5.Value]<br> predict_y=sim(net,new_x(1,:)')<br> app.y.Value=predict_y</p> 
<p>3.全局函数</p> 
<p>properties (Access = public)<br> fname % Description<br> end<br> methods (Access = private)<br> function updateimage(app,imagefile)<br> t=readtable(imagefile)<br> app.UITable.Data=t<br> %第一行 第二列<br> test_1=table2array(t)<br> app.x_1.Value=test_1(1,1)<br> app.x_2.Value=test_1(1,2)<br> app.x_3.Value=test_1(1,3)<br> app.x_4.Value=test_1(1,4)<br> app.x_5.Value=test_1(1,5)<br> end</p> 
<p>end</p> 
<pre><code>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c71633f174602b07494da9bea0a6f66e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">警告当当成错误 may be used uninitialized in this function [-Werror=maybe-uninitialized]</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bf4a04e12aa3029ecf7a848cfbd42297/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Win11此应用无法在你的电脑上运行怎么解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>