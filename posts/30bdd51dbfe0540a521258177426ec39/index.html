<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>异或与字符串反转 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="异或与字符串反转" />
<meta property="og:description" content="异或运算可以实现两个二进制位的交换，而不影响其他位。例如： // 假设a=3,b=5，用二进制表示为： a = 00000011 b = 00000101 // 第一步：a=a^b，相当于把a和b的每一位都异或一次，结果如下： a = 00000110 // a的第2位和第3位变成了1，其余不变 b = 00000101 // b不变 // 第二步：b=a^b，相当于把新的a和原来的b的每一位都异或一次，结果如下： a = 00000110 // a不变 b = 00000011 // b的第2位和第3位变成了0，其余不变，此时b等于原来的a // 第三步：a=a^b，相当于把新的a和新的b的每一位都异或一次，结果如下： a = 00000101 // a的第2位和第3位变成了0，其余不变，此时a等于原来的b b = 00000011 // b不变 可以看出，在这个过程中，只有两个数相同位置上不同的二进制位被交换了。这就是通过异或可以交换两个变量的原理。
使用异或运算符来交换两个变量的值的技巧 异或运算符的特点是：
任何数和0异或，结果仍然是原来的数，即a^0=a。任何数和自身异或，结果是0，即a^a=0。异或运算满足交换律和结合律，即ab=ba，(ab)c=a(bc)。 利用这些性质，可以实现不使用临时变量来交换两个变量的值。例如：
int a = 3; int b = 5; // 交换前：a=3,b=5 a = a ^ b; // a=(3^5)=6,b=5 b = a ^ b; // a=6,b=(6^5)=3 a = a ^ b; // a=(6^3)=5,b=3 // 交换后：a=5,b=3 字符串反转 #include &lt;iostream&gt; // 反转字符串的函数 void ReverseString(char* buf, int n) { if (n &lt; 2) return; *buf ^= *(buf &#43; n - 1); // 交换首尾字符 *(buf &#43; n - 1) ^= *buf; *buf ^= *(buf &#43; n - 1); return ReverseString(buf &#43; 1, n - 2); //递归调用 } int main(int argc, char* argv[]) { char x[] = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/30bdd51dbfe0540a521258177426ec39/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-16T18:06:10+08:00" />
<meta property="article:modified_time" content="2023-03-16T18:06:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">异或与字符串反转</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_1"></a>异或运算可以实现两个二进制位的交换，而不影响其他位。例如：</h3> 
<pre><code class="prism language-cpp"><span class="token comment">// 假设a=3,b=5，用二进制表示为：</span>
a <span class="token operator">=</span> <span class="token number">00000011</span>
b <span class="token operator">=</span> <span class="token number">00000101</span>
<span class="token comment">// 第一步：a=a^b，相当于把a和b的每一位都异或一次，结果如下：</span>
a <span class="token operator">=</span> <span class="token number">00000110</span> <span class="token comment">// a的第2位和第3位变成了1，其余不变</span>
b <span class="token operator">=</span> <span class="token number">00000101</span> <span class="token comment">// b不变</span>
<span class="token comment">// 第二步：b=a^b，相当于把新的a和原来的b的每一位都异或一次，结果如下：</span>
a <span class="token operator">=</span> <span class="token number">00000110</span> <span class="token comment">// a不变</span>
b <span class="token operator">=</span> <span class="token number">00000011</span> <span class="token comment">// b的第2位和第3位变成了0，其余不变，此时b等于原来的a</span>
<span class="token comment">// 第三步：a=a^b，相当于把新的a和新的b的每一位都异或一次，结果如下：</span>
a <span class="token operator">=</span> <span class="token number">00000101</span> <span class="token comment">// a的第2位和第3位变成了0，其余不变，此时a等于原来的b</span>
b <span class="token operator">=</span> <span class="token number">00000011</span> <span class="token comment">// b不变</span>
</code></pre> 
<p>可以看出，在这个过程中，只有两个数相同位置上不同的二进制位被交换了。这就是通过异或可以交换两个变量的原理。</p> 
<h3><a id="_20"></a>使用异或运算符来交换两个变量的值的技巧</h3> 
<p>异或运算符的特点是：</p> 
<ul><li>任何数和0异或，结果仍然是原来的数，即a^0=a。</li><li>任何数和自身异或，结果是0，即a^a=0。</li><li>异或运算满足交换律和结合律，即ab=ba，(ab)c=a(bc)。</li></ul> 
<p>利用这些性质，可以实现不使用临时变量来交换两个变量的值。例如：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token comment">// 交换前：a=3,b=5</span>
a <span class="token operator">=</span> a <span class="token operator">^</span> b<span class="token punctuation">;</span> <span class="token comment">// a=(3^5)=6,b=5</span>
b <span class="token operator">=</span> a <span class="token operator">^</span> b<span class="token punctuation">;</span> <span class="token comment">// a=6,b=(6^5)=3</span>
a <span class="token operator">=</span> a <span class="token operator">^</span> b<span class="token punctuation">;</span> <span class="token comment">// a=(6^3)=5,b=3</span>
<span class="token comment">// 交换后：a=5,b=3</span>
</code></pre> 
<h3><a id="_40"></a>字符串反转</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token comment">// 反转字符串的函数</span>
<span class="token keyword">void</span> <span class="token function">ReverseString</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> buf<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token operator">*</span>buf <span class="token operator">^=</span> <span class="token operator">*</span><span class="token punctuation">(</span>buf <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 交换首尾字符</span>
  <span class="token operator">*</span><span class="token punctuation">(</span>buf <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">^=</span> <span class="token operator">*</span>buf<span class="token punctuation">;</span>
  <span class="token operator">*</span>buf <span class="token operator">^=</span> <span class="token operator">*</span><span class="token punctuation">(</span>buf <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">ReverseString</span><span class="token punctuation">(</span>buf <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//递归调用</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">char</span> x<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"1234567\0"</span><span class="token punctuation">;</span> <span class="token comment">// 加上空字符</span>
  <span class="token function">ReverseString</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用strlen函数获取字符串长度</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token comment">// 使用cout输出</span>

  <span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span> <span class="token comment">// 返回成功标志</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>main函数应该返回EXIT_SUCCESS或EXIT_FAILURE来表示程序是否正常结束</p> 
<p>反转字符串的函数ReverseString每次交换两个字符，并递归调用自身，直到字符串长度小于2。因此，该函数的时间复杂度为O(n/2)，即O(n)。</p> 
<p>如果要改进该算法，可以考虑使用双指针法，即定义两个指针分别指向字符串的首尾，并同时向中间移动，每次交换两个指针所指的字符。这样可以减少递归调用的开销，并且时间复杂度仍然为O(n)。</p> 
<p>以下是使用双指针法的代码：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token comment">// 反转字符串的函数</span>
<span class="token keyword">void</span> <span class="token function">ReverseString</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> buf<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">char</span><span class="token operator">*</span> left <span class="token operator">=</span> buf<span class="token punctuation">;</span> <span class="token comment">// 左指针</span>
  <span class="token keyword">char</span><span class="token operator">*</span> right <span class="token operator">=</span> buf <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 右指针</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 当左右指针相遇时停止</span>
    <span class="token operator">*</span>left <span class="token operator">^=</span> <span class="token operator">*</span>right<span class="token punctuation">;</span> <span class="token comment">// 交换首尾字符</span>
    <span class="token operator">*</span>right <span class="token operator">^=</span> <span class="token operator">*</span>left<span class="token punctuation">;</span>
    <span class="token operator">*</span>left <span class="token operator">^=</span> <span class="token operator">*</span>right<span class="token punctuation">;</span>
    left<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 左指针右移</span>
    right<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// 右指针左移</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">char</span> x<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"1234567\0"</span><span class="token punctuation">;</span> <span class="token comment">// 加上空字符</span>
  <span class="token function">ReverseString</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用strlen函数获取字符串长度</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token comment">// 使用cout输出</span>

  <span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span> <span class="token comment">// 返回成功标志</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>更多内容请往：<a href="https://juzihhu.github.io/" rel="nofollow">https://juzihhu.github.io/</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3fa0b8f3e137e62a56c905efd16399c6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Tomcat的Connector启动过程分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/80f86022cc0929ee5e2b2b79eb6d767b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决warning: ‘p‘ is used uninitialized in this function</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>