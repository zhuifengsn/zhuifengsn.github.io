<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在Linux环境下安装多处理器（SMP）核心 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在Linux环境下安装多处理器（SMP）核心" />
<meta property="og:description" content="在Linux环境下安装多处理器（SMP）核心
很多高档PC服务器都支持多处理器，而linux作为服务器操作系统中的新贵因其丰富可用的免费资源在服务器上的应用也日益普及，怎样配置Linux使之有效利用多处理器服务器的优势呢？以下以Netfinity 5000加Red Hat Linux 6.2的环境为例介绍linux下关于多处理器的设置方法。
在Linux环境下，安装Linux多处理器核心有两种不同的情况：
情况一：
在安装时，系统已经拥有多个处理器，客户可以直接将Linux安装为多处理器核心。
具体步骤:
1、用Red Hat Linux 6.2光盘启动机器，在出现“boot:”键入“text”回车，进入文本安装模式。
2、在&#34;Package Group Selection&#34;窗口，根据需要按空格键选择或删除软件包时，如果我们想要加入多处理器时，需要选中下面的“Select individual packages”，选择OK继续。
3、在下面的另一个&#34;Package Group Selection&#34;窗口，从列表中找到并高亮&#34;System Environment/Kernel&#34;，按空格键展开。选择kernel-smp。
4、一旦选择成功，系统会自动安装SMP核心，并以该核心启动。在启动时，系统也可以以单处理器核心启动，客户只需在“boot:”后键入“linux-up”。
情况二：
在安装时，客户没有选择安装kernel-smp，系统会缺省安装为单处理器核心，用户可以通过添加多处理器核心模组，将系统升级。
具体步骤:
1、启动Red Hat Linux 6.2，以root身份登录，进入字符界面。
2、将光盘插入光驱，#mount /mnt/cdrom，将光驱挂载。
3、#cd /mnt/cdrom/Redhat/RPMS，进入模组所在路径。
4、#rpm --install kernel-smp-2.2.14-5.0.i386.rpm，加载多处理器（smp）模块。
5、#mkinitrd -v -f /boot/initrd-2.2.14-5.0smp.img 2.2.14-5.0smp，创建初始化程序。
6、#vi /etc/lilo.conf，添加多处理器启动选项，例如
image=/boot/vmlinuz-2.2.14-5.0smp
label=smp
initrd=/boot/initrd-2.2.14-5.0smp.img
read-only
root=/dev/sda2
7、#lilo -v，重新启动机器，在“boot:”出现后，键入“smp”回车，进入多处理器核心。
备注：
1、在第二种情况中，如果系统使用ServeRAID卡，客户需要在创建初始化程序前，添加对于smp的驱动程序。
2、对于第二种情况，客户也可以通过重新联接核心达到同样效果，但比较复杂，这里不再详细阐述。
30. 升级内核
为了确保内核的完整性和对它所支持的硬件的兼容性，Red Hat Linux 内核由 Red Hat 内核小组定制建构。在内核被 Red Hat 发行之前，它一定要通过一系列严格的质量保证测试。
Red Hat Linux 内核使用 RPM 格式打包，因而它们易于升级和校验。例如，由 Red Hat, Inc." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/45989083ea99ddc071f9aed08600a683/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-01-20T21:20:22+08:00" />
<meta property="article:modified_time" content="2015-01-20T21:20:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在Linux环境下安装多处理器（SMP）核心</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> <img class="wp-more-tag mce-wp-more" title="阅读更多..." src="" alt="" style="">在Linux环境下安装多处理器（SMP）核心</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 很多高档PC服务器都支持多处理器，而linux作为服务器操作系统中的新贵因其丰富可用的免费资源在服务器上的应用也日益普及，怎样配置Linux使之有效利用多处理器服务器的优势呢？以下以Netfinity 5000加Red Hat Linux 6.2的环境为例介绍linux下关于多处理器的设置方法。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　在Linux环境下，安装Linux多处理器核心有两种不同的情况：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　情况一：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　在安装时，系统已经拥有多个处理器，客户可以直接将Linux安装为多处理器核心。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　具体步骤:</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　1、用Red Hat Linux 6.2光盘启动机器，在出现“boot:”键入“text”回车，进入文本安装模式。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　2、在"Package Group Selection"窗口，根据需要按空格键选择或删除软件包时，如果我们想要加入多处理器时，需要选中下面的“Select individual packages”，选择OK继续。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　3、在下面的另一个"Package Group Selection"窗口，从列表中找到并高亮"System Environment/Kernel"，按空格键展开。选择kernel-smp。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　4、一旦选择成功，系统会自动安装SMP核心，并以该核心启动。在启动时，系统也可以以单处理器核心启动，客户只需在“boot:”后键入“linux-up”。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 情况二：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　在安装时，客户没有选择安装kernel-smp，系统会缺省安装为单处理器核心，用户可以通过添加多处理器核心模组，将系统升级。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　具体步骤:</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　1、启动Red Hat Linux 6.2，以root身份登录，进入字符界面。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　2、将光盘插入光驱，#mount /mnt/cdrom，将光驱挂载。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　3、#cd /mnt/cdrom/Redhat/RPMS，进入模组所在路径。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　4、#rpm --install kernel-smp-2.2.14-5.0.i386.rpm，加载多处理器（smp）模块。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　5、#mkinitrd -v -f /boot/initrd-2.2.14-5.0smp.img 2.2.14-5.0smp，创建初始化程序。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　6、#vi /etc/lilo.conf，添加多处理器启动选项，例如</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　image=/boot/vmlinuz-2.2.14-5.0smp<br> 　　label=smp<br> 　　initrd=/boot/initrd-2.2.14-5.0smp.img<br> 　　read-only<br> 　　root=/dev/sda2</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　7、#lilo -v，重新启动机器，在“boot:”出现后，键入“smp”回车，进入多处理器核心。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　<br> 　　备注：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　1、在第二种情况中，如果系统使用ServeRAID卡，客户需要在创建初始化程序前，添加对于smp的驱动程序。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 　　2、对于第二种情况，客户也可以通过重新联接核心达到同样效果，但比较复杂，这里不再详细阐述。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 30. 升级内核</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 为了确保内核的完整性和对它所支持的硬件的兼容性，Red Hat Linux 内核由 Red Hat 内核小组定制建构。在内核被 Red Hat 发行之前，它一定要通过一系列严格的质量保证测试。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> Red Hat Linux 内核使用 RPM 格式打包，因而它们易于升级和校验。例如，由 Red Hat, Inc. 发行的 kernel RPM 软件包被安装后， initrd 映像会被创建；这样，在你安装了不同的内核后，你就没必要使用 mkinitrd 命令。如果你安装了 GRUB 或 LILO 的话，它还会修改引导装载程序的配置文件来包括这个新内核。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 本章仅讨论在 x86 系统上升级内核的必要步骤。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 警告: 建构你自行定制的内核是不被 Red Hat Linux 安装支持组支持的。关于从源码中建构定制内核的详情，请参阅 附录 A 。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 30.1. 2.4 版本的内核</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> Red Hat Linux 随带定制的 2.4 内核，它包括以下功能：<br> 内核源码的目录是 /usr/src/linux-2.4/ ，而不是 /usr/src/linux/ 。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> · 对 ext3 文件系统的支持。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> · 对多重处理器（SMP）的支持。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> · 对 USB 的支持。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> · 对 IEEE 1394 设备（又称 FireWire ?）的初步支持。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 30.2. 准备升级</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 在你升级内核之前，你应该先采取几项预防措施。第一步是确定你有一张适用于你的系统的可运行的引导盘以防万一出现问题。如果引导装载程序没有被正确配置来引导新内核，除非你有引导盘，否则就无法引导系统。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 要创建引导盘，在 shell 提示下登录为根用户，然后键入以下命令：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> /sbin/mkbootdisk `uname -r`</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 窍门：请参考 mkbootdisk 的说明书页（man）来阅读更多选项。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 在继续前，使用引导盘来重新引导你的机器以校验该软盘的可运行性。但愿你不必使用引导盘，但是你应该把它存放在一个安全的地方以防万一。要判定你已安装了哪些内核软件包，在 shell 提示下执行下面的命令：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> rpm -qa | grep kernel</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 依据你执行的安装类型而定（你的版本号码和软件包可能不同），该命令的输出会包括某些或全部在下面列出的软件包： kernel-2.4.20-2.47.1<br> kernel-debug-2.4.20-2.47.1<br> kernel-source-2.4.20-2.47.1<br> kernel-doc-2.4.20-2.47.1<br> kernel-pcmcia-cs-3.1.31-13<br> kernel-smp-2.4.20-2.47.1</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 从输出中，你可以判定你需要下载哪些软件包来执行内核升级。对于单处理器系统而言，只有 kernel 软件包是必需的。<br> 如果你的计算机不只有一个处理器，你需要包括支持多处理器的 kernel-smp 软件包。强烈建议你仍安装 kernel 软件包，以防万一多处理器内核不能在你的系统中正确运行。<br> 如果你的计算机的内存超过了 4GB，你必须安装 kernel-bigmem 软件包才能使系统使用多于 4GB 的内存。强烈建议你仍旧安装 kernel 软件包以用于调试。 kernel-bigmem 软件包仅为 i686 体系建构。<br> 如果你需要 PCMCIA 支持（例如在便携电脑上）， kernel-pcmcia-cs 软件包就必不可少。<br> 除非你想重新编译内核，或把系统用于内核开发，你不需要 kernel-source 软件包。<br> kernel-doc 软件包包括内核开发文档，它不是必需的。如果你的系统被用于内核开发，则推荐你安装它。<br> kernel-util 软件包包括能够用来控制内核或系统硬件的工具程序，它也不是必需的。<br> Red Hat 建构的内核为不同的 x86 版本做了优化。选项有：用于 AMD Athlon ? 和 AMD Duron ? 系统的 athlon ；用于 Intel ? Pentium ? II、 Intel ? Pentium ? III、和 Intel ? Pentium ? 4 系统的 i686 ；用于 Intel ? Pentium ? 和 AMD K6 ? 系统的 i586 。如果你不知道你的 x86 系统的版本，使用为 i386 版本建构的内核；它是为所有基于 x86 的系统建构的。<br> RPM 软件包的 x86 版本被包括在文件名中。例如： kernel-2.4.20-2.47.1.athlon.rpm 是为AMD Athlon ? 和 AMD Duron ? 系统优化的， kernel-2.4.20-2.47.1.i686.rpm 是为 Intel ? Pentium ? II、 Intel ? Pentium ? III、和 Intel ? Pentium ? 4 系统优化的。在你判定了软件包之后，你需要升级内核，为 kernel 、 kernel-smp 、和 kernel-bigmem 软件包选择正确的体系。其它软件包使用 i386 版本。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 30.3. 下载升级了的内核</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 要判定是否有可用于你的系统的升级内核，方法有好几种。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> ·进入 <a target="_blank" href="http://www.redhat.com/apps/support/errata/" rel="nofollow noopener noreferrer" style="color:rgb(116,51,153)">http://www.redhat.com/apps/support/errata/</a> 网站，选择你使用的 Red Hat Linux 版本，然后查看它的勘误。内核勘误通常在 安全顾问（Security Advisories）部分下。从勘误列表中 点击内核勘误来查看它的详细勘误报告。在勘误报告中，有一个需要的 RPM 列表，以及从 Red Hat FTP 站点下载它们的链接。你还可以从 Red Hat FTP 的 镜像站点中下载它们。镜像站点的列表在 <a target="_blank" href="http://www.redhat.com/download/mirror.html" rel="nofollow noopener noreferrer" style="color:rgb(116,51,153)">http://www.redhat.com/download/mirror.html</a> 中。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> ·使用 Red Hat 网络来下载内核 RPM 软件包并安装它们。Red Hat 网络能够下载最新的内核、升级系统上的内核、如果必要，创建初始 RAM 映像，并配置引导装载程序来载入新内核。要获取更多信息，请参阅 <a target="_blank" href="http://www.redhat.com/docs/manuals/RHNetwork/" rel="nofollow noopener noreferrer" style="color:rgb(116,51,153)">http://www.redhat.com/docs/manuals/RHNetwork/</a> 上的 Red Hat 网络 User Reference Guide 。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 如果你从 Red Hat Linux 的勘误网页上下载了 RPM 软件包，或只使用了 Red Hat 网络来下载软件包，继续阅读 第 30.4 节 。如果你使用了 Red Hat 网络来下载并安装更新了的内核，遵循第 30.5 节 和 第 30.6 节中的说明。只不过，不要把内核改成默认引导项，因为 Red Hat 网络会自动把默认内核改成最新版本。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 30.4. 执行升级</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 检索到所有必要的软件包后，你就可以开始升级现存内核了。在 shell 提示下登录为根用户，转换到包含内核 RPM 软件包的目录中，遵循以下步骤：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 重要:强烈建议你保留旧内核，以防万一新内核出现问题。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 使用 rpm 命令的 -i 选项来保留就内核。如果你使用了 -U 选项来升级 kernel 软件包，它会覆盖当前安装了的内核。该命令为（内核版本和 x86 版本会有所不同）：<br> rpm -ivh kernel-2.4.20-2.47.1.i386.rpm<br> 如果系统是多处理器系统，还需安装 kernel-smp 软件包（内核版本和 x86 版本会有所不同）：<br> rpm -ivh kernel-smp-2.4.20-2.47.1.i386.rpm<br> 如果系统是基于 i686 的，并包含超过 4GB 的内存，还需安装为 i686 体系建构的 kernel-bigmem 软件包（内核版本和 x86 版本会有所不同）：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> rpm -ivh kernel-bigmem-2.4.20-2.47.1.i686.rpm</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 如果你打算升级 kernel-source 、 kernel-docs 、或 kernel-utils 软件包，你可能不需要保留老版本。使用下面的命令来升级这些软件包（版本会有所不同）：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> rpm -Uvh kernel-source-2.4.20-2.47.1.i386.rpm<br> rpm -Uvh kernel-docs-2.4.20-2.47.1.i386.rpm<br> rpm -Uvh kernel-utils-2.4.20-2.47.1.i386.rpm</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 如果系统需要 PCMCIA 支持（例如便携电脑），你还需要安装 kernel-pcmcia-cs 并保留老版本。如果你使用了 -i 选项，它可能会返回冲突，因为老内核需要该软件包来引导带有 PCMCIA 支持的系统。要绕过这个问题，使用 --force 选项，如下所示（版本会有所不同）：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> rpm -ivh --force kernel-pcmcia-cs-3.1.24-2.i386.rpm</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 下一步是校验初始 RAM 磁盘映像是否被创建。详情请参阅第 30.5 节 。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 30.5. 校验初始 RAM 磁盘映像</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 如果系统使用 ext3 文件系统或 SCSI 控制器，你就需要初始 RAM 磁盘。初始 RAM 磁盘的目的是允许模块化的内核在它能够进入模块通常驻留的设备之前具备进入内核需要从该设备引导的模块的能力。<br> 初始 RAM 磁盘通过使用 mkinitrd 命令来创建。然而，如果内核及其相关文件是从 Red Hat, Inc. 发行的 RPM 软件包中安装或升级的话，这个步骤会被自动执行；因此，它不必被手工进行。要校验它是否被创建了，使用 ls -l /boot 命令来确定 initrd-2.4.20-2.47.1.img 文件被创建了（版本应该匹配刚刚安装了的内核的版本）。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 下一步是校验引导装载程序已被配置来引导新内核。详情请参阅 第 30.6 节 。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 30.6. 校验引导装载程序</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 如果你安装了 GRUB 或 LILO 引导装载程序， kernel RPM 软件包配置它们来引导刚刚安装的内核，但是它并不配置引导装载程序默认引导新内核。<br> 确认一下引导装载程序已被配置成引导新内核总是值得提倡的。这是至关重要的一步。如果引导装载程序被配置得不正确，你将无法引导你的系统。若这种情况发生了，使用你从前创建的引导盘来引导你的系统，然后再试图配置你的引导装载程序。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 30.6.1. GRUB</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 如果你选择了 GRUB 作为引导装载程序，请确认 /boot/grub/grub.conf 文件中包含的 title 部分中的版本与你刚刚安装的 kernel 软件包的版本相同（如果你安装了 kernel-smp 和/或 kernel-bigmem ，你也会看到这个部分）：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> # Note that you do not have to rerun grub after making changes to this file<br> # NOTICE: You have a /boot partition. This means that<br> # all kernel and initrd paths are relative to /boot/, eg.<br> # root (hd0,0)<br> # kernel /vmlinuz-version ro root=/dev/hda2<br> # initrd /initrd-version.img<br> #boot=/dev/hda<br> default=3<br> timeout=10<br> splashimage=(hd0,0)/grub/splash.xpm.gz<br> title Red Hat Linux (2.4.20-2.47.1)<br> root (hd0,0)<br> kernel /vmlinuz-2.4.20-2.47.1 ro root=LABEL=/<br> initrd /initrd-2.4.20-2.47.1.img<br> title Red Hat Linux (2.4.20-2.30)<br> root (hd0,0)<br> kernel /vmlinuz-2.4.20-2.30 ro root=LABEL=/<br> initrd /initrd-2.4.20-2.30.img</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 如果你创建了单独的 /boot 分区，到内核与 initrd 映像的路径是相对于 /boot 分区而言的。<br> 注意，默认引导项目没有被设置为新内核。要配置 GRUB 来默认引导新内核，把 default 变量的值改成包含新内核的 title 部分的号码。这个号码从 0 开始。例如，如果新内核是第二个 title 部分，把 default 设置为 1 。<br> 你可以重新引导计算机来开始测试这个新内核，观察屏幕上的消息来确保硬件被正确地检测到了。</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 30.6.2. LILO</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 如果你选择了 LILO 作为引导装载程序，请确认 /etc/lilo.conf 文件中包含的 image 部分中的版本与你刚刚安装的 kernel 软件包的版本相同（如果你安装了 kernel-smp 和/或 kernel-bigmem ，你也会看到这个部分）：</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> prompt<br> timeout=50<br> default=2.4.20-2.30<br> boot=/dev/hda<br> map=/boot/map<br> install=/boot/boot.b<br> message=/boot/message<br> linear</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> image=/boot/vmlinuz-2.4.20-2.47.1<br> label=2.4.20-2.47.1<br> initrd=/boot/initrd-2.4.20-2.47.1.img<br> read-only<br> append="root=LABEL=/"</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> image=/boot/vmlinuz-2.4.20-2.30<br> label=2.4.20-2.30<br> initrd=/boot/initrd-2.4.20-2.30.img<br> read-only<br> append="root=LABEL=/"</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 注意，默认引导项目没有被设置为新内核。要配置 LILO 来默认引导新内核，把 default 变量的值改成包含新内核的 image 部分中的 label 的值。以根用户身份运行 /sbin/lilo 命令来启用改变。运行后，其输出会与如下相似：<br> Added 2.4.20-2.47.1 * Added linux</p> 
<p style="font-size:16px; margin-bottom:24px; color:rgb(68,68,68); font-family:Georgia,'Bitstream Charter',serif"> 2.4.20-2.47.1 后面的 * 意味着那部分中的内核是 LILO 会默认引导的内核。<br> 你可以重新引导计算机来开始测试这个新内核，观察屏幕上的消息来确保硬件被正确地检测到了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2d239062d5ac90587f524c919230fc12/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">windows下使用virtualenv进行多版本python共存</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c8422308156c04a89ce731bb179a4880/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">windows版tinyhttpd</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>