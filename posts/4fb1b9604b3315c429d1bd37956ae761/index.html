<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Git基本操作（2） - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Git基本操作（2）" />
<meta property="og:description" content="Git基本操作（2） 上交文件之后，git文件的变化git cat-file HEAD指针里面有啥文件被修改git statusgit diff &#43; 文件名 版本回退（git reset）撤销回退git reflog 撤销的三种情况还没有addgit checkout -- [file] 已经add还没有commit已经add且commit 从本地仓库删除文件git rm 文件名 今天我们来继续了解Git的操作
上交文件之后，git文件的变化 我们之前不是上交了几个文件嘛，我们可以看看我们隐藏的.git文件发生什么变化没有：
我们发现，我们的对象库中记录了每次上交的commit编号，而编号的前两位就是此次上交储存在对象库中的文件名。
objects 为Git的对象库，里面包含了创建的各种版本库对象及内容。当执行git add 命令时，暂存区的目录树被更新，同时⼯作区修改（或新增）的文件内容被写⼊到对象库中的⼀个新的对象中，就位于?“.git/objects”?目录下，查找object时要将commit id 分成2部分，其前2位是⽂件夹名称，后38位是文件名称
git cat-file 找到这个⽂件之后，⼀般不能直接看到里面是什么，该类⽂件是经过? sha （安全哈希算法）加密过的文件，好在我们可以使用 git cat-file 命令来查看版本库对象的内容：
其中还有一行tree b7a6dcbed4b5f267fde31ed7438195daaace7755，我们也可以打印来看看
如果我们此时继续查看，我们就可以查看My_file里面的内容：
因为我的My_file里面没有任何内容，所以没有打印任何内容。
通过这次操作，我们可以大概理解，git会记录我们的修改操作，我们找到对应的修改操作之后，就可以找到对应的文件。
HEAD指针里面有啥 除此之外，我们可以看看HEAD指针里面有啥：
我们来看看日志：
这时候我们知道了，HEAD指针里面储存了最近一次上交时的commit编号。
文件被修改 首先，我们得知道git是追踪修改痕迹（这里的修改痕迹指的是新增文件，修改文件，删除文件）的版本控制器。我们之前把My_file文件已经上交了，如果此时我们将My_file里写入文字：
此时我们修改了工作区中的My_file文件。
git status 此时我们可以用git status来查看我们git仓库的状态：
这里提示我们工作区中一个文件被修改了，就是我们的My_file。而我们的暂存区没有改动。
git diff &#43; 文件名 我们可以用git diff &#43; 文件名来查看到底我们的文件有了哪些变化：
我们看到带有加号的内容就是新增的内容。
我们还可以用git diff HEAD – [file] 命令来查看版本库和工作区文件的区别。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/4fb1b9604b3315c429d1bd37956ae761/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-20T15:24:16+08:00" />
<meta property="article:modified_time" content="2024-02-20T15:24:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Git基本操作（2）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Git基本操作（2）</h4> 
 <ul><li><a href="#git_4" rel="nofollow">上交文件之后，git文件的变化</a></li><li><ul><li><a href="#git_catfile_9" rel="nofollow">git cat-file</a></li></ul> 
  </li><li><a href="#HEAD_18" rel="nofollow">HEAD指针里面有啥</a></li><li><a href="#_26" rel="nofollow">文件被修改</a></li><li><ul><li><a href="#git_status_30" rel="nofollow">git status</a></li><li><a href="#git_diff___35" rel="nofollow">git diff + 文件名</a></li></ul> 
  </li><li><a href="#git_reset_49" rel="nofollow">版本回退（git reset）</a></li><li><a href="#_93" rel="nofollow">撤销回退</a></li><li><ul><li><a href="#git_reflog_98" rel="nofollow">git reflog</a></li></ul> 
  </li><li><a href="#_105" rel="nofollow">撤销的三种情况</a></li><li><ul><li><a href="#add_106" rel="nofollow">还没有add</a></li><li><ul><li><a href="#git_checkout__file_112" rel="nofollow">git checkout -- [file]</a></li></ul> 
   </li><li><a href="#addcommit_119" rel="nofollow">已经add还没有commit</a></li><li><a href="#addcommit_127" rel="nofollow">已经add且commit</a></li></ul> 
  </li><li><a href="#_135" rel="nofollow">从本地仓库删除文件</a></li><li><ul><li><a href="#git_rm__140" rel="nofollow">git rm 文件名</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p>今天我们来继续了解Git的操作</p> 
<h2><a id="git_4"></a>上交文件之后，git文件的变化</h2> 
<p>我们之前不是上交了几个文件嘛，我们可以看看我们隐藏的.git文件发生什么变化没有：<br> <img src="https://images2.imgbox.com/58/60/m6ih9XSr_o.png" alt="在这里插入图片描述"><br> 我们发现，我们的对象库中记录了每次上交的commit编号，而编号的前两位就是此次上交储存在对象库中的文件名。</p> 
<blockquote> 
 <p>objects 为Git的对象库，里面包含了创建的各种版本库对象及内容。当执行git add 命令时，暂存区的目录树被更新，同时⼯作区修改（或新增）的文件内容被写⼊到对象库中的⼀个新的对象中，就位于?“.git/objects”?目录下，查找object时要将commit id 分成2部分，其前2位是⽂件夹名称，后38位是文件名称</p> 
</blockquote> 
<h3><a id="git_catfile_9"></a>git cat-file</h3> 
<p>找到这个⽂件之后，⼀般不能直接看到里面是什么，该类⽂件是经过? sha （安全哈希算法）加密过的文件，好在我们可以使用 git cat-file 命令来查看版本库对象的内容：<br> <img src="https://images2.imgbox.com/e5/df/YdH5s0uJ_o.png" alt="在这里插入图片描述"><br> 其中还有一行tree b7a6dcbed4b5f267fde31ed7438195daaace7755，我们也可以打印来看看<br> <img src="https://images2.imgbox.com/d0/7a/tLzblGeO_o.png" alt="在这里插入图片描述"><br> 如果我们此时继续查看，我们就可以查看My_file里面的内容：<br> <img src="https://images2.imgbox.com/48/76/L9Vgd83d_o.png" alt="在这里插入图片描述"><br> 因为我的My_file里面没有任何内容，所以没有打印任何内容。<br> 通过这次操作，我们可以大概理解，<strong>git会记录我们的修改操作，我们找到对应的修改操作之后，就可以找到对应的文件。</strong></p> 
<h2><a id="HEAD_18"></a>HEAD指针里面有啥</h2> 
<p>除此之外，我们可以看看HEAD指针里面有啥：<br> <img src="https://images2.imgbox.com/78/9e/PqKnCRVr_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/af/89/HUkPKbhj_o.png" alt="在这里插入图片描述"><br> 我们来看看日志：<br> <img src="https://images2.imgbox.com/d8/33/kC05oHeL_o.png" alt="在这里插入图片描述"><br> 这时候我们知道了，HEAD指针里面储存了最近一次上交时的commit编号。</p> 
<h2><a id="_26"></a>文件被修改</h2> 
<p>首先，我们得知道git是追踪修改痕迹（这里的修改痕迹指的是<strong>新增文件，修改文件，删除文件</strong>）的版本控制器。我们之前把My_file文件已经上交了，如果此时我们将My_file里写入文字：<br> <img src="https://images2.imgbox.com/38/59/OkWp3Zx8_o.png" alt="在这里插入图片描述"><br> 此时我们修改了工作区中的My_file文件。</p> 
<h3><a id="git_status_30"></a>git status</h3> 
<p>此时我们可以用git status来查看我们git仓库的状态：<br> <img src="https://images2.imgbox.com/36/e0/7d7VOi1Q_o.png" alt="在这里插入图片描述"><br> 这里提示我们工作区中一个文件被修改了，就是我们的My_file。而我们的暂存区没有改动。</p> 
<h3><a id="git_diff___35"></a>git diff + 文件名</h3> 
<p>我们可以用git diff + 文件名来查看到底我们的文件有了哪些变化：<br> <img src="https://images2.imgbox.com/80/e1/wPcbwFEO_o.png" alt="在这里插入图片描述"><br> 我们看到带有加号的内容就是新增的内容。<br> 我们还可以用<strong>git diff HEAD – [file]</strong> 命令来查看版本库和工作区文件的区别。</p> 
<p>我们了解好了状态之后，我们就可以把文件提交暂存区：<br> <img src="https://images2.imgbox.com/c0/54/XbLLKLb0_o.png" alt="在这里插入图片描述"><br> 这个时候我们再来看仓库的状态：<br> <img src="https://images2.imgbox.com/a2/01/Crbzvj0w_o.png" alt="在这里插入图片描述"><br> 这个时候显示的是，，修改需要被commited了，我们此时commit一下：<br> <img src="https://images2.imgbox.com/3f/6c/LPR6mOlG_o.png" alt="在这里插入图片描述"><br> 这时候，显示的是没有什么需要被提交，工作区是干净的。</p> 
<h2><a id="git_reset_49"></a>版本回退（git reset）</h2> 
<p>git最重要的功能之一就是版本回退：</p> 
<blockquote> 
 <p>之前我们也提到过，Git能够管理⽂件的历史版本，这也是版本控制器重要的能⼒。如果有⼀天你发现之前前的⼯作做的出现了很大的问题，需要在某个特定的历史版本重新开始，这个时候，就需要版本回退的功能了。<br> 执行git reset 命令⽤于回退版本，可以指定退回某⼀次提交的版本。要解释⼀下“回退”本质是要将版本库中的内容进⾏回退，⼯作区或暂存区是否回退由命令参数决定：<br> git reset 命令语法格式为： <strong>git reset [–soft | --mixed | --hard] [HEAD]</strong><br> • <strong>–mixed</strong> 为默认选项，使⽤时可以不⽤带该参数。该参数将暂存区的内容退回为指定提交版本内容，工作区文件保持不变。<br> • <strong>–soft</strong> 参数对于工作区和暂存区的内容都不变，只是将版本库回退到某个指定版本。<br> • <strong>–hard</strong> 参数将暂存区与工作区都退回到指定版本。切记工作区有未提交的代码时不要⽤这个命令，因为工作区会回滚，你没有提交的代码就再也找不回了，所以使用该参数前⼀定要慎重。<br> • HEAD 说明：<br> ◦ 可直接写成commit id，表示指定退回的版本<br> ◦ HEAD 表示当前版本<br> ◦ HEAD^ 上⼀个版本<br> ◦ HEAD^^ 上上⼀个版本<br> ◦ 以此类推…<br> • 可以使用〜数字表示：<br> ◦ HEAD~0 表示当前版本<br> ◦ HEAD~1上⼀个版本<br> ◦ HEAD^2 上上⼀个版本</p> 
</blockquote> 
<p>为了演示，我们做一些准备工作：<br> <img src="https://images2.imgbox.com/f9/98/dpis6ghf_o.png" alt="在这里插入图片描述"><br> 现在我们想退回到第一次提交的版本，我们现在可以用<strong>git reset</strong>来进行回退，但是在这之前，我们要弄清<strong>工作区 暂存区 版本库</strong>中的内容：<br> 我们现在<strong>工作区 暂存区 版本库</strong>的内容都是第二次提交的内容：<br> <img src="https://images2.imgbox.com/c5/04/laJxERIC_o.png" alt="在这里插入图片描述"><br> 我们的 <strong>–soft 参数对于工作区和暂存区的内容都不变，只是将版本库回退到某个指定版本</strong><br> <img src="https://images2.imgbox.com/5b/23/AqXszond_o.png" alt="在这里插入图片描述"><br> 我们的 <strong>–mixed 为默认选项，使用时可以不用带该参数。该参数将暂存区的内容退回为指定提交版本内容，工作区文件件保持不变</strong>。<br> <img src="https://images2.imgbox.com/00/ee/Hgzq65q9_o.png" alt="在这里插入图片描述"><br> 我们的 <strong>–hard 参数将暂存区与工作区都退回到指定版本。切记用作区有未提交的代码时不要用这个命令，因为工作区会回滚，你没有提交的代码就再也找不回了，所以使用该参数前⼀定要慎重。</strong><br> <img src="https://images2.imgbox.com/b6/ac/NmukG387_o.png" alt="在这里插入图片描述"><br> 我们这里演示一下–soft选项：<br> <img src="https://images2.imgbox.com/8e/29/aWu3Z38m_o.png" alt="在这里插入图片描述"><br> 我们来查看仓库的状态：<br> <img src="https://images2.imgbox.com/ed/39/6zEXs9gs_o.png" alt="在这里插入图片描述"><br> 我们来看看版本库和工作区文件的区别：<br> <img src="https://images2.imgbox.com/77/6b/r5WNRZ7t_o.png" alt="在这里插入图片描述"><br> 再来看看工作区和暂存区的区别：<br> <img src="https://images2.imgbox.com/36/47/sUHwfXg0_o.png" alt="在这里插入图片描述"><br> 发现版本库的内容已经回退，工作区和暂存区的内容没有回退。</p> 
<p>除此之外，我们还可以利用commit的id来回退，我们打印日志：<br> <img src="https://images2.imgbox.com/5c/64/GPPrWXu8_o.png" alt="在这里插入图片描述"><br> 找到第一次上交的commit编号，然后用类似的方法：<br> <img src="https://images2.imgbox.com/0a/f3/iz7roo9J_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_93"></a>撤销回退</h2> 
<p>拿上面举例，我后悔撤销了，该怎么办呢？其实，我们如果能拿到第二次提交时的commit的id，就没问题。<br> <img src="https://images2.imgbox.com/16/1d/BsnpmYXR_o.png" alt="在这里插入图片描述"><br> 但是这是因为凑巧我们打印了第二次提交时的commit的id，要是万一没打印该怎么办？</p> 
<h3><a id="git_reflog_98"></a>git reflog</h3> 
<p>也许还可以补救，我们可以用<strong>git reflog</strong>命令，可以查看我们本地的每一次命令：<br> <img src="https://images2.imgbox.com/b9/5c/mKZciYPi_o.png" alt="在这里插入图片描述"><br> HEAD前面的部分commit的id也可以帮助我们进行回退：<br> <img src="https://images2.imgbox.com/58/06/smFShCSG_o.png" alt="在这里插入图片描述"><br> 但是，现实开发中，因为一直再进行开发，id号什么的，早就忘的一干二净了，所以还是小心点为上策~。</p> 
<h2><a id="_105"></a>撤销的三种情况</h2> 
<h3><a id="add_106"></a>还没有add</h3> 
<p>这个时候，我们只是在工作区进行了修改，还没有进行add。<br> 假设，我现在对我们的文件进行了修改：<br> <img src="https://images2.imgbox.com/d3/28/u2vgtMal_o.png" alt="在这里插入图片描述"><br> 现在我想回到修改之前的版本，我们有一条命令：</p> 
<h4><a id="git_checkout__file_112"></a>git checkout – [file]</h4> 
<blockquote> 
 <p><strong>git checkout – [file] 命令让工作区的<br> 文件回到最近⼀次 add 或 commit 时的状态。要注意 git checkout – [file] 命令中的<br> – 很重要，切记不要省略，⼀旦省略，该命令就变为其他意思了</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/3e/3b/4Nf5rL3H_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="addcommit_119"></a>已经add还没有commit</h3> 
<p>这个时候我们可以用–mixed选项：</p> 
<pre><code class="prism language-cpp"> git reset HEAD 文件名
</code></pre> 
<p>因为–mixed是默认的，所以不用再写。</p> 
<h3><a id="addcommit_127"></a>已经add且commit</h3> 
<p>这个时候只能用–hard：</p> 
<pre><code class="prism language-cpp">git reset <span class="token operator">--</span>hard 想回退的版本的commitid
</code></pre> 
<p>这个时候希望文件还没有交到远程仓库上，要是交了，事情就麻烦了。</p> 
<h2><a id="_135"></a>从本地仓库删除文件</h2> 
<p>如果我们直接在工作区删除文件，git会记录我们的修改的：<br> <img src="https://images2.imgbox.com/44/66/iK5L21Po_o.png" alt="在这里插入图片描述"><br> 我们只删除了工作区的，并没有删除暂存区的，要删除暂存区的，我们要使用：</p> 
<h3><a id="git_rm__140"></a>git rm 文件名</h3> 
<p><img src="https://images2.imgbox.com/d6/24/X2wfc0yE_o.png" alt="在这里插入图片描述"><br> 删除之后，记得commit我们的修改痕迹：<br> <img src="https://images2.imgbox.com/7f/67/NUzbsN2d_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0804ce01605dc1bc2ae30a26e8881ca8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用WxPython处理弹出菜单和绑定回调</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cf2a4ce31a3f0fb99732fdd85e6aaa4c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">说一下 JVM 有哪些垃圾回收算法？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>