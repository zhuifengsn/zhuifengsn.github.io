<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Vue】组件通信组件通信 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Vue】组件通信组件通信" />
<meta property="og:description" content="📝个人主页：五敷有你 🔥系列专栏：JVM
⛺️稳中求进，晒太阳
组件通信 组件通信，就是指组件与组件之间的数据传递
组件的数据是独立的，无法直接访问其他组件的数据想用其他组件的数据--&gt;组件通信 组件关系： 父子关系 props和$emit prop定义：组件上定义的属性prop作用：向子组件传递数据特点： 可以传递任何数量的prop可以传递任何类型的propprops的校验 为组件的prop指定验证要求，不符合要求，控制台就会有错误显示语法：类型校验非空校验默认值自定义校验 //类型校验 props:{ 检验的属性名：类型 } //全 props:{ 校验的属性名:{ type：类型， require:true, default:&#34;默认值&#34;, validator(value){ //自定义校验逻辑 return 是否通过校验 } } } 父传子 子传父 非父子关系 provide和injecteventbus通用解决方案：Vuex（适合复杂业务场景） 小黑记事本（组件化版） App.vue &lt;template&gt; &lt;div id=&#34;app&#34;&gt; &lt;div class=&#34;main&#34;&gt; &lt;TodoHeader @addItem=&#34;add&#34; &gt;&lt;/TodoHeader&gt; &lt;TodoMain :list=&#34;list&#34; @deleteItem=&#34;del&#34;&gt;&lt;/TodoMain&gt; &lt;TodoFooter :totalNum=&#34;totalNum&#34; @clearItem=&#34;clear&#34;&gt;&lt;/TodoFooter&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import TodoHeader from &#39;./components/TodoHeader.vue&#39;; import TodoMain from &#39;./components/TodoMain.vue&#39;; import TodoFooter from &#39;./components/TodoFooter.vue&#39;; export default { name: &#39;App&#39;, components: { TodoHeader, TodoMain, TodoFooter }, data(){ return { list:JSON." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/70c48c2b41b950c3f5633b7eb5aa4287/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-26T22:54:47+08:00" />
<meta property="article:modified_time" content="2024-02-26T22:54:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Vue】组件通信组件通信</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><img alt="" height="132" src="https://images2.imgbox.com/cc/c8/HMYeGY48_o.png" width="124"></p> 
<p></p> 
<p style="text-align:center;"><strong><span style="color:#38d8f0;">       📝个人主页：<a href="https://blog.csdn.net/m0_62645012?" title="五敷有你">五敷有你</a>      </span></strong></p> 
<p style="text-align:center;"><strong><span style="color:#956fe7;"> 🔥系列专栏：<a href="https://blog.csdn.net/m0_62645012/category_12573051.html" title="JVM">JVM</a></span></strong></p> 
<p style="text-align:center;"><span style="color:#ff9900;"><strong>⛺️稳中求进，晒太阳</strong></span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5b/0a/mIcZcd9X_o.gif"></p> 
<h3>组件通信</h3> 
<p>组件通信，就是指组件与组件之间的数据传递</p> 
<ul><li>组件的数据是独立的，无法直接访问其他组件的数据</li><li>想用其他组件的数据--&gt;组件通信</li></ul> 
<h3 style="background-color:transparent;">组件关系：</h3> 
<ul><li> <h4>父子关系</h4> 
  <ul><li>props和$emit 
    <ul><li>prop定义：组件上定义的属性</li><li>prop作用：向子组件传递数据</li><li>特点： 
      <ul><li>可以传递任何数量的prop</li><li>可以传递任何类型的prop</li></ul></li><li>props的校验 
      <ul><li>为组件的prop指定验证要求，不符合要求，控制台就会有错误显示</li><li>语法：</li><li>类型校验</li><li>非空校验</li><li>默认值</li><li>自定义校验</li></ul></li></ul></li></ul></li></ul> 
<pre><code class="language-html">//类型校验
props:{
    检验的属性名：类型
}
//全
props:{
    校验的属性名:{
        type：类型，
        require:true,
        default:"默认值",
        validator(value){
                    //自定义校验逻辑
                    return 是否通过校验
        }    
    }
}</code></pre> 
<ul><li> <h5>父传子</h5> </li></ul> 
<p><img alt="" height="648" src="https://images2.imgbox.com/2c/a8/4Ao2JqEi_o.png" width="1200"></p> 
<ul><li> <h5>子传父</h5> </li></ul> 
<p><img alt="" height="651" src="https://images2.imgbox.com/ad/96/5HBRMkkR_o.png" width="1200"></p> 
<ul><li> <h4 style="background-color:transparent;">非父子关系</h4> 
  <ul><li>provide和inject</li><li>eventbus</li></ul></li><li>通用解决方案：Vuex（适合复杂业务场景）</li></ul> 
<h3 style="background-color:transparent;">小黑记事本（组件化版）</h3> 
<p><img alt="" height="212" src="https://images2.imgbox.com/a3/18/87fao7WG_o.png" width="231"></p> 
<h4 style="background-color:transparent;"><strong>App.vue</strong></h4> 
<pre><code class="language-html">&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;div class="main"&gt;
      &lt;TodoHeader @addItem="add" &gt;&lt;/TodoHeader&gt;
      &lt;TodoMain :list="list" @deleteItem="del"&gt;&lt;/TodoMain&gt;
     &lt;TodoFooter :totalNum="totalNum" @clearItem="clear"&gt;&lt;/TodoFooter&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import TodoHeader from './components/TodoHeader.vue';
import TodoMain from './components/TodoMain.vue';
import TodoFooter from './components/TodoFooter.vue';

export default {

  name: 'App',
  components: {
   TodoHeader,
   TodoMain,
   TodoFooter
  },
  data(){
    
     return {

      list:JSON.parse(localStorage.getItem("list"))||[
        {id:1,name:"打篮球"},
        {id:2,name:"打足球"},
        {id:3,name:"打排球"},
        {id:4,name:"打气球"}],
     }
  },
  computed:{
    totalNum(){
      return this.list.length
    }
  },
  watch:{
      list:{
        deep:true,
        handler(newValue){
            localStorage.setItem("list",JSON.stringify(newValue))
        }
      }
  },
  methods:{
    del(id){
      this.list=this.list.filter(item=&gt;item.id!==id)
    },
    clear(){
        this.list=[]
    },
    add(todoName){
      this.list.unshift({
        id:+new Date(),
        name:todoName
      })
    }
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
#app {
  height: 1200px;
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;

  margin-top: 60px;
  display: flex;
  justify-content: space-around;
}
.main{
  width: 40%;
 

}
&lt;/style&gt;
</code></pre> 
<h4><strong>TodoHead.vue</strong></h4> 
<pre><code class="language-html">&lt;template&gt;
    &lt;div class="main"&gt;
        &lt;div class="title"&gt;记事本&lt;/div&gt;
        &lt;div class="search"&gt;
            &lt;input type="text" v-model.trim="item" v v-on:keyup.enter="addList"&gt;&lt;input type="button" @click="addList" value="添加"&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;

export default {
    data(){
        return {
            item:""
        }
    },
    methods:{
        addList(){
            this.$emit("addItem",this.item)
            this.item=""
        }
    }
}
&lt;/script&gt;
&lt;style scoped&gt;
.main{
    width: 100%;

}
&lt;/style&gt;
</code></pre> 
<h4><strong>TodoMain.vue</strong></h4> 
<pre><code class="language-html">&lt;template&gt;
    &lt;div class="main"&gt;
        &lt;ul class="todo-list"&gt;
            &lt;li v-for="(item,index) in list" :key="item.id" &gt;
              &lt;div&gt;&lt;span&gt;{<!-- -->{ index+1 }}&lt;/span&gt; &amp;nbsp;&lt;span&gt;{<!-- -->{ item.name }}&lt;/span&gt; &lt;/div&gt; &lt;div&gt;&lt;button @click="handlerDelete(item.id)"&gt;X&lt;/button&gt;&lt;/div&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;

export default {
    props:{
        list:Array
    },
    methods:{
    handlerDelete(id){
        this.$emit("deleteItem",id)
    },
    }
}
&lt;/script&gt;
&lt;style scoped&gt;
    .main{
        width: 100%;
    }
    li{
        padding: 5px 2px;
        border-bottom: 1px solid gray;
        list-style: none;
        display: flex;
        justify-content: space-around;

    }
&lt;/style&gt;</code></pre> 
<h4>TodoFooter.vue</h4> 
<pre><code class="language-html">&lt;template&gt;
    &lt;div class="main"&gt;
        &lt;span&gt;{<!-- -->{totalNum}}&lt;/span&gt; &lt;span @click="handerClear"&gt;清空记录&lt;/span&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;

export default {
props:{
    totalNum:Number
},
    methods:{
        handerClear(){
            this.$emit("clearItem")
        }
    }
    
}
&lt;/script&gt;
&lt;style scoped&gt;
.main{
    display: flex;
    justify-content: space-between;

}
span{
    color: gray;
    font-size: 13px;
    padding: 10px;
}
&lt;/style&gt;</code></pre> 
<h3 style="background-color:transparent;">非父子间通信（两种方式）</h3> 
<h4 style="background-color:transparent;">非父子通信（enent bus）</h4> 
<h5>作用：</h5> 
<p>非父子组件之间，进行简易的消息传递（复杂场景→Vuex）</p> 
<h5>步骤：</h5> 
<ol><li>创建一个都能访问到的事件总线（空的VUe实例）→utils</li></ol> 
<p>文件名：EventBus.js</p> 
<pre><code class="language-html">创建一个都能访问到的事件总线(空的Vue实例)
import Vue from 'vue'

const Bus=new Vue()

export default Bus</code></pre> 
<p>        2. A组件（接收方）,监听Bus实例的事件</p> 
<pre><code class="language-html">&lt;script&gt;
import Bus from '../utils/EventBus'
export default {
    data(){
        return {
            msg:""
        }
    },
    created(){
        //2.在A组件进行bus的事件监听
        Bus.$on("sendMsg",(msg)=&gt;{
            this.msg=msg
        })
    }
  

}
&lt;/script&gt;</code></pre> 
<p>        3. B组件（发送方）,触发Bus实例的事件</p> 
<pre><code class="language-html">import Bus from '../utils/EventBus'
export default {
    methods:{
        clickSend(){
            //3.B组件触发事件的方式传递参数
            Bus.$emit("sendMsg","今天晴天，适合出去玩")
        }
    }
}
&lt;/script&gt;</code></pre> 
<h4>非父子通信--provide&amp;inject</h4> 
<p><span style="color:#ff9900;"><strong>provide &amp; inject 作用：跨层级共享数据</strong></span></p> 
<p></p> 
<ol><li>父组件provide提供数据</li></ol> 
<pre><code class="language-html">export default{
    provide(){
        //普通类型【非响应式】
        color:this.color,
        //复杂类型【响应式】
        userInfo:this.userInfo    
    }
}</code></pre> 
<p>       2. 子/孙组件inject取值使用</p> 
<pre><code class="language-html">export default{
    inject:['color','userInfo'],
    created(){
        console.log(this.color,this.userInfo)    
    }
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/91518add9b46e78e53ff2bcc24666597/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用EFCore连接SQLite</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ca39872257f502ec6f8fff185f5537bb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">开启数字内容创作的新时代</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>