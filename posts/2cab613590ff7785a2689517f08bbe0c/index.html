<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【汇编语言】除法（DIV/IDIV） - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【汇编语言】除法（DIV/IDIV）" />
<meta property="og:description" content="除法（DIV/IDIV） 目录 除法（DIV/IDIV）`DIV`(unsigned divide)无符号数除法`IDIV`(signed divide)有符号数除法 DIV(unsigned divide)无符号数除法 格式：DIV SRC
操作：
S R C SRC SRC为字节时， ( A L ) ← ( A X ) / ( S R C ) (AL)\gets (AX)/(SRC) (AL)←(AX)/(SRC)的商， ( A H ) ← ( A X ) / ( S R C ) (AH)\gets (AX)/(SRC) (AH)←(AX)/(SRC)的余数 S R C SRC SRC为字时， ( A X ) ← ( D X , A X ) / ( S R C ) (AX)\gets (DX,AX)/(SRC) (AX)←(DX,AX)/(SRC)的商， ( D X ) ← ( D X , A X ) / ( S R C ) (DX)\gets (DX,AX)/(SRC) (DX)←(DX,AX)/(SRC)的余数 该指令将参与运算的数据默认为无符号数，则商和余数都是无符号数" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/2cab613590ff7785a2689517f08bbe0c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-14T20:57:13+08:00" />
<meta property="article:modified_time" content="2021-11-14T20:57:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【汇编语言】除法（DIV/IDIV）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="DIVIDIV_0"></a>除法（DIV/IDIV）</h4> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><ul><li><ul><li><a href="#DIVIDIV_0" rel="nofollow">除法（DIV/IDIV）</a></li><li><ul><li><a href="#DIVunsigned_divide_2" rel="nofollow">`DIV`(unsigned divide)无符号数除法</a></li><li><a href="#IDIVsigned_divide_31" rel="nofollow">`IDIV`(signed divide)有符号数除法</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h5><a id="DIVunsigned_divide_2"></a><code>DIV</code>(unsigned divide)无符号数除法</h5> 
<p>格式：<code>DIV SRC</code></p> 
<p>操作：</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          S 
         
        
          R 
         
        
          C 
         
        
       
         SRC 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span></span></span></span></span>为字节时，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          ( 
         
        
          A 
         
        
          L 
         
        
          ) 
         
        
          ← 
         
        
          ( 
         
        
          A 
         
        
          X 
         
        
          ) 
         
        
          / 
         
        
          ( 
         
        
          S 
         
        
          R 
         
        
          C 
         
        
          ) 
         
        
       
         (AL)\gets (AX)/(SRC) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault">L</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mclose">)</span></span></span></span></span>的商，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          ( 
         
        
          A 
         
        
          H 
         
        
          ) 
         
        
          ← 
         
        
          ( 
         
        
          A 
         
        
          X 
         
        
          ) 
         
        
          / 
         
        
          ( 
         
        
          S 
         
        
          R 
         
        
          C 
         
        
          ) 
         
        
       
         (AH)\gets (AX)/(SRC) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mclose">)</span></span></span></span></span>的余数</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          S 
         
        
          R 
         
        
          C 
         
        
       
         SRC 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span></span></span></span></span>为字时，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          ( 
         
        
          A 
         
        
          X 
         
        
          ) 
         
        
          ← 
         
        
          ( 
         
        
          D 
         
        
          X 
         
        
          , 
         
        
          A 
         
        
          X 
         
        
          ) 
         
        
          / 
         
        
          ( 
         
        
          S 
         
        
          R 
         
        
          C 
         
        
          ) 
         
        
       
         (AX)\gets (DX,AX)/(SRC) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mclose">)</span></span></span></span></span>的商，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          ( 
         
        
          D 
         
        
          X 
         
        
          ) 
         
        
          ← 
         
        
          ( 
         
        
          D 
         
        
          X 
         
        
          , 
         
        
          A 
         
        
          X 
         
        
          ) 
         
        
          / 
         
        
          ( 
         
        
          S 
         
        
          R 
         
        
          C 
         
        
          ) 
         
        
       
         (DX)\gets (DX,AX)/(SRC) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mclose">)</span></span></span></span></span>的余数</li></ul> 
<p>该指令将参与运算的数据默认为无符号数，则商和余数都是无符号数</p> 
<p>除法貌似并不会影响标志位（进位标志<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         C 
        
       
         F 
        
       
      
        CF 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span></span></span></span></span>和溢出标志<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         F 
        
       
      
        OF 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span></span></span></span></span>）的改变，但通过上述操作可知，被除数位数总是除数的两倍，而<strong>相除的商和余数是存储在和除数位数相同的空间里</strong>，显然余数是肯定够存的，但是商是有可能存不下的（例如：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         0300 
        
       
         H 
        
       
         ÷ 
        
       
         02 
        
       
         H 
        
       
         = 
        
       
         0180 
        
       
         H 
        
       
      
        0300H\div 02H=0180H 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord">0</span><span class="mord">3</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord">0</span><span class="mord">2</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord">0</span><span class="mord">1</span><span class="mord">8</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span></span></span></span></span>，这里商仅依靠字节存储是无法存下的）。<mark>商出现溢出时，系统转0号类型中断处理，提示“divide overflow”，并退出程序，返回到操作系统，程序便已经崩溃了</mark>。要想避免出现这种情况，必须在作除法前对溢出作出预判</p> 
<p>由于商需要更大空间来存储，而字节长度的除数无法满足，因此需要将其扩展为字长度，这样商便有了字长度空间存储</p> 
<pre><code class="prism language-assembly">MOV AX, 300H
CWD ;这里书上使用CWD指令进行字到双字的符号扩展（将AX的符号位即最高位填充至DX的所有位），而这里使用的是无符号数除法，当被除数的最高位为1时显然会扩大被除数的大小，我认为应当使用零扩展（即将DX所有位置0），这样便不会改变原数的大小，但我未查询到汇编零扩展的相关指令，或许没有该指令，也许只能自己手动零扩展（MOV DX, 0）
MOV BX, 2
DIV BX ;这里的SRC为字长
</code></pre> 
<p>这里使用<code>CWD</code>进行符号扩展是因为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         S 
        
       
         R 
        
       
         C 
        
       
      
        SRC 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span></span></span></span></span>为字长时，被除数则为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
       
         D 
        
       
         X 
        
       
         , 
        
       
         A 
        
       
         X 
        
       
         ) 
        
       
      
        (DX,AX) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span></span></span></span></span>，因此需将这两寄存器一起看作被除数，于是使用<code>CWD</code>将<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         D 
        
       
         X 
        
       
      
        DX 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span></span></span></span></span>置0，使其整体等于<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         300 
        
       
         H 
        
       
      
        300H 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span></span></span></span></span>，这里个人认为因采用类似<code>MOV DX, 0</code> 的指令去处理更为合理</p> 
<p><img src="https://images2.imgbox.com/49/d4/yGr691Yy_o.png" alt="在这里插入图片描述"></p> 
<p>等到的结果商为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         180 
        
       
         H 
        
       
         ( 
        
       
         A 
        
       
         X 
        
       
         ) 
        
       
      
        180H(AX) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mord">8</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span></span></span></span></span>，余数为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         0 
        
       
         H 
        
       
         ( 
        
       
         D 
        
       
         X 
        
       
         ) 
        
       
      
        0H(DX) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">0</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mclose">)</span></span></span></span></span></p> 
<h5><a id="IDIVsigned_divide_31"></a><code>IDIV</code>(signed divide)有符号数除法</h5> 
<p>指令格式和操作与无符号数除法相同，用来作有符号数除法。最终<strong>商的符号应是两个操作数符号的异或，而余数的符号和被除数符号一致</strong></p> 
<p>这里用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         F 
        
       
         F 
        
       
         80 
        
       
         H 
        
       
         ( 
        
       
         − 
        
       
         128 
        
       
         ) 
        
       
         ÷ 
        
       
         03 
        
       
         H 
        
       
         ( 
        
       
         + 
        
       
         3 
        
       
         ) 
        
       
         = 
        
       
         D 
        
       
         6 
        
       
         H 
        
       
         ( 
        
       
         − 
        
       
         42 
        
       
         ) 
        
       
         ⋯ 
        
       
         ⋯ 
        
       
         F 
        
       
         E 
        
       
         H 
        
       
         ( 
        
       
         − 
        
       
         2 
        
       
         ) 
        
       
      
        FF80H(-128)\div 03H(+3)=D6H(-42)\cdots \cdots FEH(-2) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="mord">8</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mord">2</span><span class="mord">8</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">0</span><span class="mord">3</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mopen">(</span><span class="mord">+</span><span class="mord">3</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span><span class="mord">6</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">4</span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span>举例</p> 
<p><img src="https://images2.imgbox.com/5e/3b/wMrR4SOG_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0842fc95af3fc06f6123f929414b8d1f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">计算机组成原理： Disruptor分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/53f10109e4321acb61bb414aa847a8c4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot整合RabbitMQ与RabbitMQ高级特性</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>