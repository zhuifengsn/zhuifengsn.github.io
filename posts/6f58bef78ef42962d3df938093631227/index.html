<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python中如何打开csv文件_如何使用Python从URL读取CSV文件？ - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python中如何打开csv文件_如何使用Python从URL读取CSV文件？" />
<meta property="og:description" content="当我卷曲到API调用链接时http://example.com/passkey=wedsmdjsjmdd
1curl &#39;http://example.com/passkey=wedsmdjsjmdd&#39;
我以csv文件格式获取员工输出数据，例如：
1&#34;Steve&#34;,&#34;421&#34;,&#34;0&#34;,&#34;421&#34;,&#34;2&#34;,&#34;&#34;,&#34;&#34;,&#34;&#34;,&#34;&#34;,&#34;&#34;,&#34;&#34;,&#34;&#34;,&#34;&#34;,&#34;421&#34;,&#34;0&#34;,&#34;421&#34;,&#34;2&#34;
如何使用python解析。
我试过了：
1
2
3
4import csv
cr = csv.reader(open(&#39;http://example.com/passkey=wedsmdjsjmdd&#39;,&#34;rb&#34;))
for row in cr:
print row
但它不起作用，我出现了一个错误
http://example.com/passkey=wedsmdjsjmdd No such file or directory:
谢谢！
您可以直接访问该域吗？
您需要打开url并以大文本字符串形式读取它(请参阅urllib / requests)，然后我假设您可以使用字符串而不是文件对象来初始化csv阅读器，但我不知道，我一直在将它与 一个打开的文件句柄。
@brbcoding，是的。 将链接放在浏览器上时，我可以获取csv文件。
@JoranBeasley，我认为您的方法是正确的，也许我需要类似http:processing.orgreferenceloadStrings_.html这样的东西，但是使用python
仅供参考：pandas库(pandas.pydata.org)中的read_csv函数接受URL。 参见pandas.pydata.org/pandas-docs/stable/generated/
如何使用Python读取和写入CSV文件的副本？ 并使用Python获取网页内容？ 请参阅如果一个问题与其他两个问题的和完全相同，该怎么办
使用熊猫，直接从网址中读取csv文件非常简单
1
2import pandas as pd
data = pd.read_csv(&#39;https://example.com/passkey=wedsmdjsjmdd&#39;)
这将以表格格式读取您的数据，这将非常容易处理
这是到目前为止我遇到的最简单的方法之一！
只要您的CSV文件适合内存，就可以了。
您需要将open替换为urllib.urlopen或urllib2.urlopen。
例如
1
2
3
4
5
6
7
8
9import csv
import urllib2
url = &#39;http://winterolympicsmedals." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/6f58bef78ef42962d3df938093631227/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-23T15:26:40+08:00" />
<meta property="article:modified_time" content="2020-11-23T15:26:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python中如何打开csv文件_如何使用Python从URL读取CSV文件？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>当我卷曲到API调用链接时http://example.com/passkey=wedsmdjsjmdd</p> 
<p>1curl 'http://example.com/passkey=wedsmdjsjmdd'</p> 
<p>我以csv文件格式获取员工输出数据，例如：</p> 
<p>1"Steve","421","0","421","2","","","","","","","","","421","0","421","2"</p> 
<p>如何使用python解析。</p> 
<p>我试过了：</p> 
<p>1</p> 
<p>2</p> 
<p>3</p> 
<p>4import csv</p> 
<p>cr = csv.reader(open('http://example.com/passkey=wedsmdjsjmdd',"rb"))</p> 
<p>for row in cr:</p> 
<p>print row</p> 
<p>但它不起作用，我出现了一个错误</p> 
<p>http://example.com/passkey=wedsmdjsjmdd No such file or directory:</p> 
<p>谢谢！</p> 
<p>您可以直接访问该域吗？</p> 
<p>您需要打开url并以大文本字符串形式读取它(请参阅urllib / requests)，然后我假设您可以使用字符串而不是文件对象来初始化csv阅读器，但我不知道，我一直在将它与 一个打开的文件句柄。</p> 
<p>@brbcoding，是的。 将链接放在浏览器上时，我可以获取csv文件。</p> 
<p>@JoranBeasley，我认为您的方法是正确的，也许我需要类似http:processing.orgreferenceloadStrings_.html这样的东西，但是使用python</p> 
<p>仅供参考：pandas库(pandas.pydata.org)中的read_csv函数接受URL。 参见pandas.pydata.org/pandas-docs/stable/generated/</p> 
<p>如何使用Python读取和写入CSV文件的副本？ 并使用Python获取网页内容？ 请参阅如果一个问题与其他两个问题的和完全相同，该怎么办</p> 
<p>使用熊猫，直接从网址中读取csv文件非常简单</p> 
<p>1</p> 
<p>2import pandas as pd</p> 
<p>data = pd.read_csv('https://example.com/passkey=wedsmdjsjmdd')</p> 
<p>这将以表格格式读取您的数据，这将非常容易处理</p> 
<p>这是到目前为止我遇到的最简单的方法之一！</p> 
<p>只要您的CSV文件适合内存，就可以了。</p> 
<p>您需要将open替换为urllib.urlopen或urllib2.urlopen。</p> 
<p>例如</p> 
<p>1</p> 
<p>2</p> 
<p>3</p> 
<p>4</p> 
<p>5</p> 
<p>6</p> 
<p>7</p> 
<p>8</p> 
<p>9import csv</p> 
<p>import urllib2</p> 
<p>url = 'http://winterolympicsmedals.com/medals.csv'</p> 
<p>response = urllib2.urlopen(url)</p> 
<p>cr = csv.reader(response)</p> 
<p>for row in cr:</p> 
<p>print row</p> 
<p>这将输出以下内容</p> 
<p>1</p> 
<p>2</p> 
<p>3</p> 
<p>4Year,City,Sport,Discipline,NOC,Event,Event gender,Medal</p> 
<p>1924,Chamonix,Skating,Figure skating,AUT,individual,M,Silver</p> 
<p>1924,Chamonix,Skating,Figure skating,AUT,individual,W,Gold</p> 
<p>...</p> 
<p>您可以将其传递给csv_reader吗？我想是这样的……它很像文件，但是我从来没有做过，甚至从未考虑过这样做。</p> 
<p>你是对的。秒更新。</p> 
<p>大声笑我不知道我是对的，我只是问...以前从未见过那样做</p> 
<p>我只是认为这是诚实的。我已经使用了一百次了，这太疯狂了。 ：D</p> 
<p>我认为urllib2.urlopen返回一个类似文件的对象，因此您可能只需删除.read()，然后将response传递给csv.reader。</p> 
<p>可以，但是至少对我来说我没有得到例外的输出。我认为这是一个格式化问题。</p> 
<p>当我尝试输出结果print cr时，我得到了这个</p> 
<p>@mongotop表示它正在工作...向您显示该对象在内存中的位置。看起来它一次只能读取一行，因此循环内的cr.next()可能正是您要寻找的。 (我自己使用过csv阅读器...)</p> 
<p>就像@brbcoding说的那样。我更新了示例，演示了如何显示结果。</p> 
<p>我得到以下输出：[&gt;]</p> 
<p>您可能在urlopen的末尾缺少.read()吗？</p> 
<p>我更新了示例以使其更加清晰。</p> 
<p>不，我没有，但是当我这样做时，我得到了一个输出，但为空`[</p> 
<p>1Method Not Allowed</p> 
<p>] [</p> 
<p>] [ body&gt;] [ html&gt;] ************************ ************`</p> 
<p>您未包含尝试从中下载数据的地址。您的网络服务器似乎不允许该请求。尝试在示例中包含的csv。作为urllib2的替代方法，您还可以尝试请求docs.python-requests.org/en/latest</p> 
<p>首先，非常感谢您提供一个生活示例！!! 1非常有帮助，我尝试添加csv，但出现此错误，`response = urllib2.urlopen(NewUrlCall + .csv，" rb")。read()File" /usr/lib/python2.6/urllib2.py"，第124行，在urlopen中返回_opener.open(URL，数据，超时)，文件" /usr/lib/python2.6/urllib2.py"，第395行，在打开响应= meth(req，response)文件" /usr/lib/python2.6/urllib2.py"，第508行，位于http_response中。 HTTPError：HTTP错误405：不允许的方法</p> 
<p>让我们继续聊天中的讨论</p> 
<p>请检查聊天以获取更多信息，</p> 
<p>您也可以使用请求模块来完成此操作：</p> 
<p>1</p> 
<p>2</p> 
<p>3</p> 
<p>4url = 'http://winterolympicsmedals.com/medals.csv'</p> 
<p>r = requests.get(url)</p> 
<p>text = r.iter_lines()</p> 
<p>reader = csv.reader(text, delimiter=',')</p> 
<p>像魅力一样工作！感谢您提交答案！</p> 
<p>一个问题。 reader变量是_csv.reader对象。当我遍历此对象以打印内容时，出现以下错误。错误：迭代器应返回字符串，而不是字节(您是否以文本模式打开文件？)。我如何读取csvreader对象的内容并说将其加载到熊猫数据框？</p> 
<p>@Harikrishna这可能是Python 3中的问题，在这里可以回答这种情况：stackoverflow.com/questions/18897029/</p> 
<p>为了在下载大文件时提高性能，以下操作可能会更有效：</p> 
<p>1</p> 
<p>2</p> 
<p>3</p> 
<p>4</p> 
<p>5</p> 
<p>6</p> 
<p>7</p> 
<p>8</p> 
<p>9</p> 
<p>10</p> 
<p>11import requests</p> 
<p>from contextlib import closing</p> 
<p>import csv</p> 
<p>url ="http://download-and-process-csv-efficiently/python.csv"</p> 
<p>with closing(requests.get(url, stream=True)) as r:</p> 
<p>reader = csv.reader(r.iter_lines(), delimiter=',', quotechar='"')</p> 
<p>for row in reader:</p> 
<p># Handle each row here...</p> 
<p>print row</p> 
<p>通过在GET请求中设置stream=True，当我们将r.iter_lines()传递给csv.reader()时，我们将生成器传递给csv.reader()。 这样，我们使csv.reader()可以使用for row in reader延迟地迭代响应中的每一行。</p> 
<p>这样可以避免在开始处理整个文件之前将其加载到内存中，从而大大减少了大文件的内存开销。</p> 
<p>这是一个很好的解决方案！谢谢@The Aelfinn！</p> 
<p>很好的解决方案，但是我也必须import codecs并将r.iter_lines()包裹在codecs.iterdecode()中，如下所示：codecs.iterdecode(r.iterlines(), utf-8) ...为了解决byte vs str问题，unicode解码问题和通用换行问题。</p> 
<p>1</p> 
<p>2</p> 
<p>3</p> 
<p>4import pandas as pd</p> 
<p>url='https://raw.githubusercontent.com/juliencohensolal/BankMarketing/master/rawData/bank-additional-full.csv'</p> 
<p>data = pd.read_csv(url,sep=";") # use sep="," for coma separation.</p> 
<p>data.describe()</p> 
<p align="center"><img src="https://images2.imgbox.com/04/52/kNomTizH_o.png" alt="tvJSO.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e78772b5819c3d3f207a2fc4194e793/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python3ide_Python编程初学者要了解的三个顶级Python IDE！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c037463b99acc7811e88d2b57d450b5a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python读取文件中的内容并输出_笨办法学Python 习题 15: 读取文件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>