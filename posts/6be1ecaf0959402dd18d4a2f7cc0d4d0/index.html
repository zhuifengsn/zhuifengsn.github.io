<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43;444444 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C&#43;&#43;444444" />
<meta property="og:description" content="前言：本文章主要用于个人复习，追求简洁，感谢大家的参考、交流和搬运，后续可能会继续修改和完善。
因为是个人复习，会有部分压缩和省略。
一、默认成员函数 当类里面成员函数什么都不写的时候，编译器会自动生成6个默认成员函数
六个成员函数包括：
构造函数（主要完成初始化工作）
析构函数（主要完成清理工作）
拷贝构造（视同同类对象初始化创建对象）
赋值重载（主要是把一个对象赋值给另一个对象）
取地址重载（主要是普通对象和const对象取地址，这两个很少需要自己实现）
默认成员函数对于内置类型成员不处理，对于自定义类型成员，它会去调用它的构造函数、析构函数
我们主要探讨前四个
1.构造函数（主要完成初始化工作） 构造函数完成的是对象的初始化，对象实例化时自动调用，这样就保证对象一定初始化。
构造函数没有返回值，没有返回值和void不一样，void是返回值为空
因为我们有时候可能会忘记调用初始化函数，C&#43;&#43;为了解决这个问题，引入了构造函数来初始化，构造函数不可能没有调用，因为它是一个特殊的成员函数，其特征如下：
1.函数名与类名相同
2.无返回值
3.对象实例化时编译器自动调用对应的构造函数（保证了对象一定会初始化）
4.构造函数可以重载（我们就可以有多种初始化方式）
给一个全缺省的初始化是最好的
注意：调试的时候，只能看当前作用域里的变量
当全缺省构造函数和无任何参数的构造函数同时存在时，编译会出错，因为无法判断是要调用哪一个构造函数。语法上是可以的，但是实际使用时是不可以的。
我们不写，编译器会生成一个构造函数，我们写了编译器就不会生成了。所以说构造函数是默认构造函数
虽然构造函数进行初始化，但是它不会把值初始为0，而是随机值
对于内置类型（基本类型）语言原生定义的类型，如char、int、double、指针等等编译器不会初始化为0。对于自定义类型：class、struct等定义的类型，编译器回去调用它们的默认构造函数初始化为0。构造函数还是自己写靠谱，绝大多数情况下，默认构造函数并不行
默认构造函数：我们不写，编译器自动生成，我们写了，编译器自动生成。这个理解有一些地方不对
1.我们不写，编译器默认生成的
2.我们自己写的无参的
3.我们写的全缺省（最推荐）
总结：不用传参就可以调用的构造函数
大多数情况下，都是我们自己写构造函数初始化，建议写一个全缺省的构造函数，这种方式能适应各种场景
编译器默认生成的并不是什么都不做，而是有区分的。
class Date { private: int _year; int _month; int _day; }; int main() { Date d1(2022,5,15);//可以 Date d2;//可以 Date d3();//不可以，未调用原型函数。没有调用到构造函数，对象没有被构造出来 return 0; } 那么我们如何验证呢？如下：
class Date { public: void Print() { cout &lt;&lt; &#34;cout&#34; &lt;&lt; endl; } private: int _year; int _month; int _day; }; int main() { Date d1(2022,5,15);//可以 Date d2;//可以 Date d3();//不可以，未调用原型函数。没有调用到构造函数，对象没有被构造出来 d1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/6be1ecaf0959402dd18d4a2f7cc0d4d0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-28T16:12:21+08:00" />
<meta property="article:modified_time" content="2023-07-28T16:12:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43;444444</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>前言：本文章主要用于个人复习，追求简洁，感谢大家的参考、交流和搬运，后续可能会继续修改和完善。</p> 
 <p>因为是个人复习，会有部分压缩和省略。</p> 
</blockquote> 
<h2><span style="color:#fe2c24;"><span style="background-color:#a2e043;"> 一、默认成员函数</span></span></h2> 
<p>当类里面成员函数什么都不写的时候，编译器会自动生成6个默认成员函数</p> 
<blockquote> 
 <p>六个成员函数包括：</p> 
 <p>                构造函数（主要完成初始化工作）</p> 
 <p>                析构函数（主要完成清理工作）</p> 
 <p>                拷贝构造（视同同类对象初始化创建对象）</p> 
 <p>                赋值重载（主要是把一个对象赋值给另一个对象）</p> 
 <p>                取地址重载（主要是普通对象和const对象取地址，这两个很少需要自己实现）</p> 
</blockquote> 
<p>默认成员函数对于内置类型成员不处理，对于自定义类型成员，它会去调用它的构造函数、析构函数</p> 
<p>我们主要探讨前四个</p> 
<h3><span style="color:#fe2c24;"><span style="background-color:#a2e043;">1.构造函数（主要完成初始化工作）</span></span></h3> 
<p>构造函数完成的是对象的初始化，对象实例化时自动调用，这样就保证对象一定初始化。</p> 
<p>构造函数没有返回值，没有返回值和void不一样，void是返回值为空</p> 
<p>因为我们有时候可能会忘记调用初始化函数，C++为了解决这个问题，引入了构造函数来初始化，构造函数不可能没有调用，因为它是一个特殊的成员函数，其特征如下：</p> 
<blockquote> 
 <p>1.函数名与类名相同</p> 
 <p>2.无返回值</p> 
 <p>3.对象实例化时编译器自动调用对应的构造函数（保证了对象一定会初始化）</p> 
 <p>4.构造函数可以重载（我们就可以有多种初始化方式）</p> 
</blockquote> 
<p> 给一个全缺省的初始化是最好的</p> 
<p>注意：调试的时候，只能看当前作用域里的变量</p> 
<p>当全缺省构造函数和无任何参数的构造函数同时存在时，编译会出错，因为无法判断是要调用哪一个构造函数。语法上是可以的，但是实际使用时是不可以的。</p> 
<p>我们不写，编译器会生成一个构造函数，我们写了编译器就不会生成了。所以说构造函数是默认构造函数</p> 
<p>虽然构造函数进行初始化，但是它不会把值初始为0，而是随机值</p> 
<p>对于内置类型（基本类型）语言原生定义的类型，如char、int、double、指针等等编译器不会初始化为0。对于自定义类型：class、struct等定义的类型，编译器回去调用它们的默认构造函数初始化为0。构造函数还是自己写靠谱，绝大多数情况下，默认构造函数并不行</p> 
<blockquote> 
 <p>默认构造函数：我们不写，编译器自动生成，我们写了，编译器自动生成。这个理解有一些地方不对</p> 
 <p>1.我们不写，编译器默认生成的</p> 
 <p>2.我们自己写的无参的</p> 
 <p>3.我们写的全缺省（最推荐）</p> 
 <p>总结：不用传参就可以调用的构造函数</p> 
</blockquote> 
<p>大多数情况下，都是我们自己写构造函数初始化，建议写一个全缺省的构造函数，这种方式能适应各种场景</p> 
<p>编译器默认生成的并不是什么都不做，而是有区分的。</p> 
<pre><code class="language-cpp">class Date
{
    private:
        int _year;
        int _month;
        int _day;
};

int main()
{
    Date d1(2022,5,15);//可以
    Date d2;//可以
    Date d3();//不可以，未调用原型函数。没有调用到构造函数，对象没有被构造出来
    return 0;
}</code></pre> 
<p> 那么我们如何验证呢？如下：</p> 
<pre><code class="language-cpp">class Date
{
    public:
        void Print()
        {
            cout &lt;&lt; "cout" &lt;&lt; endl;
        }
    private:
        int _year;
        int _month;
        int _day;
};

int main()
{
    Date d1(2022,5,15);//可以
    Date d2;//可以
    Date d3();//不可以，未调用原型函数。没有调用到构造函数，对象没有被构造出来
    d1.Print();
    d2.Print();
    d3.Print();//这里会出错，会显示"Print"的左边必须有类/结构/联合
    return 0;
}</code></pre> 
<p>在创建对象时，编译器通过调用构造函数，给对象中各个成员变量一个合适的初始值。</p> 
<p>虽然有些构造函数调用之后，对象已经有了一个初始值，但是不能将其称作为类对象成员的初始化，构造函数体中的语句只能将其称作为赋初值，不能称作初始化，因为初始化只能初始化一次，而构造函数体内可以多次赋值。</p> 
<h4><span style="color:#fe2c24;"><span style="background-color:#a2e043;">初始化列表</span></span></h4> 
<p>初始化列表：以一个冒号开始，接着是一个以逗号分隔的数据成员列表，每个成员变量后跟一个放在括号中的初始值或表达式</p> 
<blockquote> 
 <div> 
  <span style="color:#770088;">class </span> 
  <span style="color:#0000ff;">Date </span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#777777;">{ </span> 
  </div> 
  <div> 
   <span style="color:#770088;">public</span> 
   <span style="color:#777777;">: </span> 
  </div> 
  <div> 
   <span style="color:#000000;">Date</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#008855;">int </span> 
   <span style="color:#000000;">year</span> 
   <span style="color:#777777;">, </span> 
   <span style="color:#008855;">int </span> 
   <span style="color:#000000;">month</span> 
   <span style="color:#777777;">, </span> 
   <span style="color:#008855;">int </span> 
   <span style="color:#000000;">day</span> 
   <span style="color:#777777;">) </span> 
  </div> 
  <div> 
   <span style="color:#777777;">: </span> 
   <span style="color:#000000;">_year</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#000000;">year</span> 
   <span style="color:#777777;">) </span> 
  </div> 
  <div> 
   <span style="color:#777777;">, </span> 
   <span style="color:#000000;">_month</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#000000;">month</span> 
   <span style="color:#777777;">) </span> 
  </div> 
  <div> 
   <span style="color:#777777;">, </span> 
   <span style="color:#000000;">_day</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#000000;">day</span> 
   <span style="color:#777777;">) </span> 
  </div> 
  <div> 
   <span style="color:#777777;">{} </span> 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#770088;">private</span> 
   <span style="color:#777777;">: </span> 
  </div> 
  <div> 
   <span style="color:#008855;">int </span> 
   <span style="color:#000000;">_year</span> 
   <span style="color:#777777;">; </span> 
  </div> 
  <div> 
   <span style="color:#008855;">int </span> 
   <span style="color:#000000;">_month</span> 
   <span style="color:#777777;">; </span> 
  </div> 
  <div> 
   <span style="color:#008855;">int </span> 
   <span style="color:#000000;">_day</span> 
   <span style="color:#777777;">; </span> 
  </div> 
  <div> 
   <span style="color:#777777;">};</span> 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#777777;">注意：</span> 
  </div> 
  <div> 
   <span style="color:#777777;">        1.每个成员变量在初始化列表中只能出现一次（初始化只能初始化一次）</span> 
  </div> 
  <div> 
   <span style="color:#777777;">        2.类中包含以下成员，必须放在初始化列表位置进行初始化：</span> 
  </div> 
  <div> 
   <span style="color:#777777;">                引用成员变量、const成员变量、自定义类型成员（该类没有默认构造函数）</span> 
  </div> 
  <div> 
   <span style="color:#777777;">        3.尽量使用初始化列表初始化，因为不管是否使用初始化列表，对于自定义类型成员变量，一定会先使用初始化列表初始化</span> 
  </div> 
  <div> 
   <span style="color:#777777;">        4.成员变量在类中的声明次序就是其在初始化列表中的初始化顺序，与其在初始化列表中的先后次序无关</span> 
  </div> 
  <div> 
   <div> 
    <span style="color:#770088;">class </span> 
    <span style="color:#0000ff;">A </span> 
   </div> 
   <div> 
    <span style="color:#777777;">{ </span> 
   </div> 
   <div> 
    <span style="color:#770088;">public</span> 
    <span style="color:#777777;">: </span> 
   </div> 
   <div> 
    <span style="color:#000000;">A</span> 
    <span style="color:#777777;">(</span> 
    <span style="color:#008855;">int </span> 
    <span style="color:#000000;">a</span> 
    <span style="color:#777777;">) </span> 
   </div> 
   <div> 
    <span style="color:#777777;">:</span> 
    <span style="color:#000000;">_a1</span> 
    <span style="color:#777777;">(</span> 
    <span style="color:#000000;">a</span> 
    <span style="color:#777777;">) </span> 
   </div> 
   <div> 
    <span style="color:#777777;">,</span> 
    <span style="color:#000000;">_a2</span> 
    <span style="color:#777777;">(</span> 
    <span style="color:#000000;">_a1</span> 
    <span style="color:#777777;">) </span> 
   </div> 
   <div> 
    <span style="color:#777777;">{} </span> 
   </div> 
   <div></div> 
   <div> 
    <span style="color:#008855;">void </span> 
    <span style="color:#000000;">Print</span> 
    <span style="color:#777777;">() { </span> 
   </div> 
   <div> 
    <span style="color:#000000;">cout</span> 
    <span style="color:#981a1a;">&lt;&lt;</span> 
    <span style="color:#000000;">_a1</span> 
    <span style="color:#981a1a;">&lt;&lt;</span> 
    <span style="color:#aa1111;">" "</span> 
    <span style="color:#981a1a;">&lt;&lt;</span> 
    <span style="color:#000000;">_a2</span> 
    <span style="color:#981a1a;">&lt;&lt;</span> 
    <span style="color:#000000;">endl</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#777777;">} </span> 
   </div> 
   <div> 
    <span style="color:#770088;">private</span> 
    <span style="color:#777777;">: </span> 
   </div> 
   <div> 
    <span style="color:#008855;">int </span> 
    <span style="color:#000000;">_a2</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#008855;">int </span> 
    <span style="color:#000000;">_a1</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#777777;">} </span> 
   </div> 
   <div> 
    <span style="color:#008855;">int </span> 
    <span style="color:#0000ff;">main</span> 
    <span style="color:#777777;">() { </span> 
   </div> 
   <div> 
    <span style="color:#000000;">A aa</span> 
    <span style="color:#777777;">(</span> 
    <span style="color:#116644;">1</span> 
    <span style="color:#777777;">); </span> 
   </div> 
   <div> 
    <span style="color:#000000;">aa</span> 
    <span style="color:#777777;">.</span> 
    <span style="color:#000000;">Print</span> 
    <span style="color:#777777;">(); </span> 
   </div> 
   <div> 
    <span style="color:#777777;">}</span> 
   </div> 
   <div> 
    <span style="color:#000000;">A</span> 
    <span style="color:#777777;">. </span> 
    <span style="color:#000000;">输出</span> 
    <span style="color:#000000;">1</span> 
    <span style="color:#116644;">1 </span> 
   </div> 
   <div> 
    <span style="color:#000000;">B</span> 
    <span style="color:#777777;">.</span> 
    <span style="color:#000000;">程序崩溃 </span> 
   </div> 
   <div> 
    <div> 
     <span style="color:#000000;">C</span> 
     <span style="color:#777777;">.</span> 
     <span style="color:#000000;">编译不通过 </span> 
    </div> 
    <div> 
     <span style="color:#000000;">D</span> 
     <span style="color:#777777;">.</span> 
     <span style="color:#000000;">输出</span> 
     <span style="color:#000000;">1</span> 
     <span style="color:#000000;">随机值 </span> 
    </div> 
    <div>
      选D 
    </div> 
   </div> 
  </div> 
 </div> 
</blockquote> 
<h4><span style="color:#fe2c24;"><span style="background-color:#a2e043;">explicit关键字</span></span> </h4> 
<p>构造函数不仅可以构造与初始化对象，对于单个参数的构造函数，还具有类型转换地作用</p> 
<blockquote> 
 <div> 
  <span style="color:#770088;">class </span> 
  <span style="color:#0000ff;">Date </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#770088;">public</span> 
  <span style="color:#777777;">: </span> 
 </div> 
 <div> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">year</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">:</span> 
  <span style="color:#000000;">_year</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#000000;">year</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{} </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#770088;">explicit </span> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">year</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">:</span> 
  <span style="color:#000000;">_year</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#000000;">year</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{} </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#770088;">private</span> 
  <span style="color:#777777;">: </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_year</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_month</span> 
  <span style="color:#777777;">: </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_day</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">}</span> 
  <span style="color:#000000;">； </span> 
 </div> 
 <div> 
  <span style="color:#008855;">void </span> 
  <span style="color:#0000ff;">TestDate</span> 
  <span style="color:#777777;">() </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#000000;">Date d1</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#116644;">2018</span> 
  <span style="color:#777777;">); </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#aa5500;">// </span> 
  <span style="color:#aa5500;">用一个整形变量给日期类型对象赋值 </span> 
 </div> 
 <div> 
  <span style="color:#aa5500;">// </span> 
  <span style="color:#aa5500;">实际编译器背后会用</span> 
  <span style="color:#aa5500;">2019</span> 
  <span style="color:#aa5500;">构造一个无名对象，最后用无名对象给</span> 
  <span style="color:#aa5500;">d1</span> 
  <span style="color:#aa5500;">对象进行赋值 </span> 
 </div> 
 <div> 
  <span style="color:#000000;">d1 </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">2019</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
</blockquote> 
<p>上述代码可读性不是很好，用explicit修饰构造函数，将会禁止单参构造函数的隐式转换</p> 
<h3><span style="color:#fe2c24;"><span style="background-color:#a2e043;">2.析构函数（主要完成清理工作）</span></span></h3> 
<p>对象的构造和销毁是编译器干的。</p> 
<p>析构函数的作用是对于资源的清理，会在对象销毁时（生命周期到时）自动调用</p> 
<blockquote> 
 <p>析构函数的特性：</p> 
 <p>1.析构函数是在类名前加上~</p> 
 <p>2.没有参数没有返回值（即无法重载）</p> 
 <p>3.一个类有且只有一个析构函数。若未显式定义，系统会自动生成默认的析构函数</p> 
 <p>4.对象生命周期结束时，C++编译系统自动调用析构函数</p> 
</blockquote> 
<p>有些类的析构函数才有意义，例如类中有malloc的。</p> 
<h3><span style="color:#fe2c24;"><span style="background-color:#a2e043;">关于调用顺序</span></span></h3> 
<p>因为对象是定义在函数中的，函数调用会建立栈帧，栈帧中的对象构造和析构也要符合后进先出</p> 
<h2><span style="color:#fe2c24;"><span style="background-color:#a2e043;">3.拷贝构造函数（使用同类对象初始化创建对象）</span></span></h2> 
<p>拷贝构造函数在我们不写时会自动生成，会对内置类型完成浅拷贝或者值拷贝</p> 
<pre><code class="language-cpp">Date d4(d1);</code></pre> 
<p>这样之后d4和d1的值就是一样的。即使用d1的值初始化创建出来的d4.</p> 
<p>拷贝构造也是一种构造函数</p> 
<blockquote> 
 <p>其特征如下：<br> 1. 拷贝构造函数是构造函数的一个重载形式。<br> 2. 拷贝构造函数的参数<strong>只有一个</strong>且<strong>必须使用引用传参</strong>，使用传值方式会引发无穷递归调用。</p> 
</blockquote> 
<p>也就是说这样写是不对的：</p> 
<pre><code class="language-cpp">Date(Date d)
{
    _year = year;
    _month = month;
    _day = day;
}</code></pre> 
<p>非法的拷贝构造函数，要把传参括号里的Date d写成Date&amp; d，不然传值会一直进行拷贝构造，这里先省一个图。为了避免这个，我们有两种解决方式：1.传引用2.用指针</p> 
<p>这里用指针比较麻烦，推荐使用传引用</p> 
<p>拷贝构造建议加const，这样写反了才能报错</p> 
<pre><code class="language-cpp">Date(const Date d)
{
    _year = year;
    _month = month;
    _day = day;
}

Date d4(d1);</code></pre> 
<p>如果拷贝构造了一块空间，会出很多错误</p> 
<p><img alt="" src="https://images2.imgbox.com/e1/e4/u7uzsf9t_o.png"></p> 
<p> 那么拷贝构造函数对于自定义类型呢？</p> 
<p>自定义类型会调用它自己的拷贝构造</p> 
<p>对于浅拷贝，默认生成的拷贝构造就够用了，像Stack这样的类，需要的是深拷贝，需要自己写</p> 
<h2><span style="color:#fe2c24;"><span style="background-color:#a2e043;">4.赋值运算符重载（主要是把一个对象赋值给另一个对象）</span></span></h2> 
<h3><span style="color:#fe2c24;"><span style="background-color:#a2e043;">运算符重载</span></span></h3> 
<blockquote> 
 <p>C++为了<strong>增强代码的可读性</strong>引入了运算符重载，运算符重载是具有特殊函数名的函数，也具有其返回值类 <br> 型，函数名字以及参数列表，其返回值类型与参数列表与普通的函数类似。<br> 函数名字为：关键字operator后面接需要重载的运算符符号。 <br> 函数原型：返回值类型 operator操作符(参数列表)<br> 注意：<br> 不能通过连接其他符号来创建新的操作符：比如operator@ <br> 重载操作符必须有一个类类型或者枚举类型的操作数</p> 
 <p>用于内置类型的操作符，其含义不能改变，例如：内置的整型+，不  能改变其含义 <br> 作为类成员的重载函数时，其形参看起来比操作数数目少1成员函数的<br> 操作符有一个默认的形参this，限定为第一个形参<br> .* 、:: 、sizeof 、?: 、. 注意以上5个运算符不能重载。这个经常在笔试选择题中出现。</p> 
</blockquote> 
<blockquote> 
 <div> 
  <span style="color:#aa5500;">// </span> 
  <span style="color:#aa5500;">全局的</span> 
  <span style="color:#aa5500;">operator== </span> 
 </div> 
 <div> 
  <span style="color:#770088;">class </span> 
  <span style="color:#0000ff;">Date </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#770088;">public</span> 
  <span style="color:#777777;">: </span> 
 </div> 
 <div> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">year </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">1900</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">month </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">1</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">day </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">1</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_year </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">year</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_month </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">month</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_day </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">day</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
 <div> 
  <span style="color:#aa5500;">//private: </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_year</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_month</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_day</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">}; </span> 
 </div> 
 <div> 
  <span style="color:#aa5500;">// </span> 
  <span style="color:#aa5500;">这里会发现运算符重载成全局的就需要成员变量是共有的，那么问题来了，封装性如何保证？ </span> 
 </div> 
 <div> 
  <span style="color:#aa5500;">// </span> 
  <span style="color:#aa5500;">这里其实可以用我们后面学习的友元解决，或者干脆重载成成员函数。 </span> 
 </div> 
 <div> 
  <span style="color:#008855;">bool </span> 
  <span style="color:#770088;">operator</span> 
  <span style="color:#981a1a;">==</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#770088;">const </span> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#981a1a;">&amp; </span> 
  <span style="color:#000000;">d1</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#770088;">const </span> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#981a1a;">&amp; </span> 
  <span style="color:#000000;">d2</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#770088;">return </span> 
  <span style="color:#000000;">d1</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_year </span> 
  <span style="color:#981a1a;">== </span> 
  <span style="color:#000000;">d2</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_year</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#981a1a;">&amp;&amp; </span> 
  <span style="color:#000000;">d1</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_month </span> 
  <span style="color:#981a1a;">== </span> 
  <span style="color:#000000;">d2</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_month </span> 
 </div> 
 <div> 
  <span style="color:#981a1a;">&amp;&amp; </span> 
  <span style="color:#000000;">d1</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_day </span> 
  <span style="color:#981a1a;">== </span> 
  <span style="color:#000000;">d2</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_day</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
 <div> 
  <span style="color:#008855;">void </span> 
  <span style="color:#0000ff;">Test</span> 
  <span style="color:#777777;"> () </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#000000;">Date d1</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#116644;">2018</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#116644;">9</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#116644;">26</span> 
  <span style="color:#777777;">); </span> 
 </div> 
 <div> 
  <span style="color:#000000;">Date d2</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#116644;">2018</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#116644;">9</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#116644;">27</span> 
  <span style="color:#777777;">); </span> 
 </div> 
 <div> 
  <span style="color:#000000;">cout</span> 
  <span style="color:#981a1a;">&lt;&lt;</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#000000;">d1 </span> 
  <span style="color:#981a1a;">== </span> 
  <span style="color:#000000;">d2</span> 
  <span style="color:#777777;">)</span> 
  <span style="color:#981a1a;">&lt;&lt;</span> 
  <span style="color:#000000;">endl</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#770088;">class </span> 
   <span style="color:#0000ff;">Date </span> 
  </div> 
  <div> 
   <span style="color:#777777;">{ </span> 
  </div> 
  <div> 
   <span style="color:#770088;">public</span> 
   <span style="color:#777777;">: </span> 
  </div> 
  <div> 
   <span style="color:#000000;">Date</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#008855;">int </span> 
   <span style="color:#000000;">year </span> 
   <span style="color:#981a1a;">= </span> 
   <span style="color:#116644;">1900</span> 
   <span style="color:#777777;">, </span> 
   <span style="color:#008855;">int </span> 
   <span style="color:#000000;">month </span> 
   <span style="color:#981a1a;">= </span> 
   <span style="color:#116644;">1</span> 
   <span style="color:#777777;">, </span> 
   <span style="color:#008855;">int </span> 
   <span style="color:#000000;">day </span> 
   <span style="color:#981a1a;">= </span> 
   <span style="color:#116644;">1</span> 
   <span style="color:#777777;">) </span> 
  </div> 
  <div> 
   <span style="color:#777777;">{ </span> 
  </div> 
  <div> 
   <span style="color:#000000;">_year </span> 
   <span style="color:#981a1a;">= </span> 
   <span style="color:#000000;">year</span> 
   <span style="color:#777777;">; </span> 
  </div> 
  <div> 
   <span style="color:#000000;">_month </span> 
   <span style="color:#981a1a;">= </span> 
   <span style="color:#000000;">month</span> 
   <span style="color:#777777;">; </span> 
  </div> 
  <div> 
   <span style="color:#000000;">_day </span> 
   <span style="color:#981a1a;">= </span> 
   <span style="color:#000000;">day</span> 
   <span style="color:#777777;">; </span> 
  </div> 
  <div> 
   <span style="color:#777777;">} </span> 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#aa5500;">// bool operator==(Date* this, const Date&amp; d2) </span> 
  </div> 
  <div> 
   <span style="color:#aa5500;">// </span> 
   <span style="color:#aa5500;">这里需要注意的是，左操作数是</span> 
   <span style="color:#aa5500;">this</span> 
   <span style="color:#aa5500;">指向的调用函数的对象 </span> 
  </div> 
  <div> 
   <span style="color:#008855;">bool </span> 
   <span style="color:#770088;">operator</span> 
   <span style="color:#981a1a;">==</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#770088;">const </span> 
   <span style="color:#000000;">Date</span> 
   <span style="color:#981a1a;">&amp; </span> 
   <span style="color:#000000;">d2</span> 
   <span style="color:#777777;">) </span> 
  </div> 
  <div> 
   <span style="color:#777777;">{<!-- --></span> 
  </div> 
  <div> 
   <div> 
    <span style="color:#770088;">return </span> 
    <span style="color:#000000;">_year </span> 
    <span style="color:#981a1a;">== </span> 
    <span style="color:#000000;">d2</span> 
    <span style="color:#777777;">.</span> 
    <span style="color:#000000;">_year</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#981a1a;">&amp;&amp; </span> 
    <span style="color:#000000;">_month </span> 
    <span style="color:#981a1a;">== </span> 
    <span style="color:#000000;">d2</span> 
    <span style="color:#777777;">.</span> 
    <span style="color:#000000;">_month </span> 
   </div> 
   <div> 
    <span style="color:#981a1a;">&amp;&amp; </span> 
    <span style="color:#000000;">_day </span> 
    <span style="color:#981a1a;">== </span> 
    <span style="color:#000000;">d2</span> 
    <span style="color:#777777;">.</span> 
    <span style="color:#000000;">_day</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#777777;">} </span> 
   </div> 
   <div> 
    <span style="color:#770088;">private</span> 
    <span style="color:#777777;">: </span> 
   </div> 
   <div> 
    <span style="color:#008855;">int </span> 
    <span style="color:#000000;">_year</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#008855;">int </span> 
    <span style="color:#000000;">_month</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#008855;">int </span> 
    <span style="color:#000000;">_day</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#777777;">}; </span> 
   </div> 
   <div> 
    <span style="color:#008855;">void </span> 
    <span style="color:#0000ff;">Test</span> 
    <span style="color:#777777;"> () </span> 
   </div> 
   <div> 
    <span style="color:#777777;">{ </span> 
   </div> 
   <div> 
    <span style="color:#000000;">Date d1</span> 
    <span style="color:#777777;">(</span> 
    <span style="color:#116644;">2018</span> 
    <span style="color:#777777;">, </span> 
    <span style="color:#116644;">9</span> 
    <span style="color:#777777;">, </span> 
    <span style="color:#116644;">26</span> 
    <span style="color:#777777;">); </span> 
   </div> 
   <div> 
    <span style="color:#000000;">Date d2</span> 
    <span style="color:#777777;">(</span> 
    <span style="color:#116644;">2018</span> 
    <span style="color:#777777;">, </span> 
    <span style="color:#116644;">9</span> 
    <span style="color:#777777;">, </span> 
    <span style="color:#116644;">27</span> 
    <span style="color:#777777;">); </span> 
   </div> 
   <div> 
    <span style="color:#000000;">cout</span> 
    <span style="color:#981a1a;">&lt;&lt;</span> 
    <span style="color:#777777;">(</span> 
    <span style="color:#000000;">d1 </span> 
    <span style="color:#981a1a;">== </span> 
    <span style="color:#000000;">d2</span> 
    <span style="color:#777777;">)</span> 
    <span style="color:#981a1a;">&lt;&lt;</span> 
    <span style="color:#000000;">endl</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#777777;">} </span> 
   </div> 
  </div> 
 </div> 
</blockquote> 
<p>让自定义类型可以像内置类型一样使用运算符需要哪个运算符，就重载哪个运算符</p> 
<blockquote> 
 <p>运算符重载跟函数重载，都有用了重载这个词，但是两个地方之间没有关联。</p> 
 <p>1.函数重载时支持定义同名函数</p> 
 <p>2.运算符重载时为了让自定义类型可以像内置类型一样取使用运算符</p> 
 <p>赋值是把值赋给变量，拷贝构造是创建一个对象时，拿同类对象初始化它。赋值拷贝时两个对象都已经存在</p> 
</blockquote> 
<p>赋值重载：两个已经存在的对象拷贝</p> 
<p>拷贝构造：拿一个已经存在的对象取构造初始化另一个要创建的对象</p> 
<h3><span style="color:#fe2c24;"><span style="background-color:#a2e043;">赋值运算符重载</span></span></h3> 
<blockquote> 
 <div> 
  <span style="color:#770088;">class </span> 
  <span style="color:#0000ff;">Date </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#770088;">public</span> 
  <span style="color:#777777;"> : </span> 
 </div> 
 <div> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">year </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">1900</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">month </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">1</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">day </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">1</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_year </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">year</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_month </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">month</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_day </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">day</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#777777;"> (</span> 
  <span style="color:#770088;">const </span> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#981a1a;">&amp; </span> 
  <span style="color:#000000;">d</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_year </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">d</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_year</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_month </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">d</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_month</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_day </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">d</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_day</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#981a1a;">&amp; </span> 
  <span style="color:#770088;">operator</span> 
  <span style="color:#981a1a;">=</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#770088;">const </span> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#981a1a;">&amp; </span> 
  <span style="color:#000000;">d</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#770088;">if</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#770088;">this </span> 
  <span style="color:#981a1a;">!= &amp;</span> 
  <span style="color:#000000;">d</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_year </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">d</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_year</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_month </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">d</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_month</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_day </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">d</span> 
  <span style="color:#777777;">.</span> 
  <span style="color:#000000;">_day</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
 <div> 
  <span style="color:#770088;">private</span> 
  <span style="color:#777777;">: </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_year</span> 
  <span style="color:#777777;"> ; </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_month</span> 
  <span style="color:#777777;"> ; </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_day</span> 
  <span style="color:#777777;"> ; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">}; </span> 
 </div> 
</blockquote> 
<blockquote> 
 <p>赋值运算符主要有四点：</p> 
 <p>1.参数类型</p> 
 <p>2.返回值</p> 
 <p>3.检测是否自己给自己赋值</p> 
 <p>4.返回*this</p> 
 <p>5.一个类如果没有显示定义赋值运算符重载，编译器也会生成一个，完成对象俺字节序的值拷贝</p> 
</blockquote> 
<blockquote> 
 <div> 
  <span style="color:#770088;">class </span> 
  <span style="color:#0000ff;">Date </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#770088;">public</span> 
  <span style="color:#777777;">: </span> 
 </div> 
 <div> 
  <span style="color:#000000;">Date</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">year </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">1900</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">month </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">1</span> 
  <span style="color:#777777;">, </span> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">day </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#116644;">1</span> 
  <span style="color:#777777;">) </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_year </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">year</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_month </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">month</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">_day </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">day</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
 <div> 
  <span style="color:#770088;">private</span> 
  <span style="color:#777777;">: </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_year</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_month</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#000000;">_day</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">}; </span> 
 </div> 
 <div> 
  <span style="color:#008855;">int </span> 
  <span style="color:#0000ff;">main</span> 
  <span style="color:#777777;">() </span> 
 </div> 
 <div> 
  <span style="color:#777777;">{ </span> 
 </div> 
 <div> 
  <span style="color:#000000;">Date d1</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#000000;">Date d2</span> 
  <span style="color:#777777;">(</span> 
  <span style="color:#116644;">2018</span> 
  <span style="color:#000000;">，</span> 
  <span style="color:#000000;">10</span> 
  <span style="color:#000000;">， </span> 
  <span style="color:#116644;">1</span> 
  <span style="color:#777777;">); </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#aa5500;">// </span> 
  <span style="color:#aa5500;">这里</span> 
  <span style="color:#aa5500;">d1</span> 
  <span style="color:#aa5500;">调用的编译器生成</span> 
  <span style="color:#aa5500;">operator=</span> 
  <span style="color:#aa5500;">完成拷贝，</span> 
  <span style="color:#aa5500;">d2</span> 
  <span style="color:#aa5500;">和</span> 
  <span style="color:#aa5500;">d1</span> 
  <span style="color:#aa5500;">的值也是一样的。 </span> 
 </div> 
 <div> 
  <span style="color:#000000;">d1 </span> 
  <span style="color:#981a1a;">= </span> 
  <span style="color:#000000;">d2</span> 
  <span style="color:#000000;">； </span> 
 </div> 
 <div> 
  <span style="color:#770088;">return </span> 
  <span style="color:#116644;">0</span> 
  <span style="color:#777777;">; </span> 
 </div> 
 <div> 
  <span style="color:#777777;">} </span> 
 </div> 
</blockquote> 
<div>
  那么编译器生成的默认赋值重载函数已经可以完成字节序的值拷贝了，我们还需要自己实现吗？当然像日期类这样的类是没必要的。那么下面的类呢？ 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#aa5500;">// </span> 
   <span style="color:#aa5500;">这里会发现下面的程序会崩溃掉？这里就需要我们以后讲的深拷贝去解决。 </span> 
  </div> 
  <div> 
   <span style="color:#770088;">class </span> 
   <span style="color:#0000ff;">String </span> 
  </div> 
  <div> 
   <span style="color:#777777;">{ </span> 
  </div> 
  <div> 
   <span style="color:#770088;">public</span> 
   <span style="color:#777777;">: </span> 
  </div> 
  <div> 
   <span style="color:#000000;">String</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#770088;">const </span> 
   <span style="color:#008855;">char* </span> 
   <span style="color:#000000;">str </span> 
   <span style="color:#981a1a;">= </span> 
   <span style="color:#aa1111;">""</span> 
   <span style="color:#777777;">) </span> 
  </div> 
  <div> 
   <span style="color:#777777;">{ </span> 
  </div> 
  <div> 
   <span style="color:#000000;">_str </span> 
   <span style="color:#981a1a;">=</span> 
   <span style="color:#777777;"> (</span> 
   <span style="color:#008855;">char*</span> 
   <span style="color:#777777;">)</span> 
   <span style="color:#000000;">malloc</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#000000;">strlen</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#000000;">str</span> 
   <span style="color:#777777;">) </span> 
   <span style="color:#981a1a;">+ </span> 
   <span style="color:#116644;">1</span> 
   <span style="color:#777777;">); </span> 
  </div> 
  <div> 
   <span style="color:#000000;">strcpy</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#000000;">_str</span> 
   <span style="color:#777777;">, </span> 
   <span style="color:#000000;">str</span> 
   <span style="color:#777777;">); </span> 
  </div> 
  <div> 
   <span style="color:#777777;">} </span> 
  </div> 
  <div> 
   <span style="color:#000000;">~String</span> 
   <span style="color:#777777;">() </span> 
  </div> 
  <div> 
   <span style="color:#777777;">{ </span> 
  </div> 
  <div> 
   <span style="color:#000000;">cout </span> 
   <span style="color:#981a1a;">&lt;&lt; </span> 
   <span style="color:#aa1111;">"~String()" </span> 
   <span style="color:#981a1a;">&lt;&lt; </span> 
   <span style="color:#000000;">endl</span> 
   <span style="color:#777777;">; </span> 
  </div> 
  <div> 
   <span style="color:#000000;">free</span> 
   <span style="color:#777777;">(</span> 
   <span style="color:#000000;">_str</span> 
   <span style="color:#777777;">); </span> 
  </div> 
  <div> 
   <span style="color:#777777;">} </span> 
  </div> 
  <div> 
   <div> 
    <span style="color:#770088;">private</span> 
    <span style="color:#777777;">: </span> 
   </div> 
   <div> 
    <span style="color:#008855;">char* </span> 
    <span style="color:#000000;">_str</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#777777;">}; </span> 
   </div> 
   <div> 
    <span style="color:#008855;">int </span> 
    <span style="color:#0000ff;">main</span> 
    <span style="color:#777777;">() </span> 
   </div> 
   <div> 
    <span style="color:#777777;">{ </span> 
   </div> 
   <div> 
    <span style="color:#000000;">String s1</span> 
    <span style="color:#777777;">(</span> 
    <span style="color:#aa1111;">"hello"</span> 
    <span style="color:#777777;">); </span> 
   </div> 
   <div> 
    <span style="color:#000000;">String s2</span> 
    <span style="color:#777777;">(</span> 
    <span style="color:#aa1111;">"world"</span> 
    <span style="color:#777777;">); </span> 
   </div> 
   <div></div> 
   <div> 
    <span style="color:#000000;">s1 </span> 
    <span style="color:#981a1a;">= </span> 
    <span style="color:#000000;">s2</span> 
    <span style="color:#777777;">; </span> 
   </div> 
   <div> 
    <span style="color:#777777;">} </span> 
   </div> 
  </div> 
 </div> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6cbbd317942bf0a50b3a344027e02c22/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何自定下载文件名？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5ff304d9e49e4b0b9d19dc2be8a05bbd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【C&#43;&#43;11】——右值引用、移动语义</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>