<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>用户的埋点和用户行为分析实战（埋点数据分析） - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="用户的埋点和用户行为分析实战（埋点数据分析）" />
<meta property="og:description" content="Hello，大家好，很久没有发帖了，最近脑补最近的心得。
首先介绍一下，什么是埋点？ 我的个人见解，埋点是数据化的体现，数据化的定义回到最初，都是对时间，空间的定义，最简单的的埋点描述，就是基于时空论法则的什么人在什么空间什么时间段做了什么事。
既然如此，数据表的定义就可以给出，比如什么人对应一个用户的ID,什么空间假如场景在C端，那很多都是1级页面，2级页面之类的点击，什么时间段，那么可以定义为简单的时间类型字段，做了什么事，比如点击了分享，优惠券，加入购物车，这些运营动作，又或者是，观察了什么商品，商品的名称所传达的点击动作，都可以定义为一个行为。
用户的埋点解释已经给出，我们需要更快的切入到实战战场，就开始切人正题，从简单到复杂，我们假设有小明，小天这两个人，用户ID是分别是1，2，观测他们在早上做了什么电商的动作，然后我们根据他动作的次数去分析这两个人的重度行为是什么，进而在电商平台上给他们推送类似的产品，以提高我们电商产品的转化率，提高转化率的方法很多种，听自媒体说当年马化腾也男扮女在QQ聊天提高转化率（哈哈），这种是相对较有效率而直接。
重度行为的分析一般也是可以从时空论入手，比如时间（点击什么花费的时间最多），空间（点击的次数最多，发送的请求量最多），耗费时间方面还需要考虑数据库字段的设计，这里就不再多述，空间方面我们可以简单从点击次数入手，也是最为简单的手段，下面我们来看一下小明和小天做了什么？下面这个是csv文件，可以保存成csv格式就能导入。
id,username,time,behavior 1,小明,2019/1/1 12:00,球鞋 1,小明,2019/1/1 12:13,键盘 1,小明,2019/1/3 12:20,鼠标 1,小明,2019/1/1 12:40,鼠标 1,小明,2019/1/1 12:50,鼠标 1,小明,2019/1/3 14:20,键盘 2,小天,2019/1/1 12:00,可乐 2,小天,2019/1/1 12:13,王老吉 2,小天,2019/1/3 12:20,炸鸡 2,小天,2019/1/1 12:40,王老吉 2,小天,2019/1/1 12:50,炸鸡 2,小天,2019/1/3 14:20,全家桶 我这里就直接把小明和小天的数据库表csv格式给展现出来了，直观来看，小明应该是一个喜欢电脑方面，玩游戏的童鞋，小天一眼看去就是吃货，这个表结构很直观的体现出时空论的三要素，什么人，什么时间，什么行为，这里是一个APP或者小程序产品的埋点，我们其实还需要增加页面的定义的埋点（空间场景埋点），但这里没有具体可阐述的电商产品，我们就以最简单的形式来吧。
接下来我会使用python的一个库：pandas进行分析这些行为特征，找出他们的重度行为，当然简单来说，普通的数据库语言都能操作这些行为，但以后遇到更复杂的场景，pandas会更为好用。
这里先将脉络用导图方式画出来，这样好理解。
接下来，二话不多说，开始分析了，这里用到jupyter的形式去分析。
#%% #一，导入处理数据包 pandas,numpy import pandas as pd import numpy as np import os #设置分析文件的路径 os.chdir(r&#39;C:\Users\foxirenseng\Desktop&#39;) #%% # 二，读取数据 df = pd.read_csv(&#39;behavior_analysis.csv&#39;,encoding=&#39;utf-8&#39;,dtype= {&#39;id&#39;:str}) #%% #计算df的行列数 df.shape #(12, 4) #%% #观察df的每列的数据结构 df.info() #&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt; # RangeIndex: 12 entries, 0 to 11 # Data columns (total 4 columns): # # Column Non-Null Count Dtype # --- ------ -------------- ----- # 0 id 12 non-null object # 1 username 12 non-null object # 2 time 12 non-null object # 3 behavior 12 non-null object # dtypes: object(4) # memory usage: 512." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/d034d4e0382ce00eb8902960b1457d35/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-05T14:52:28+08:00" />
<meta property="article:modified_time" content="2021-04-05T14:52:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">用户的埋点和用户行为分析实战（埋点数据分析）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>Hello，大家好，很久没有发帖了，最近脑补最近的心得。</p> 
<h3><a id="_2"></a>首先介绍一下，什么是埋点？</h3> 
<p>我的个人见解，埋点是<strong>数据化</strong>的<strong>体现</strong>，数据化的定义回到最初，都是对时间，空间的定义，最简单的的埋点描述，就是基于时空论法则的<strong>什么人在什么空间什么时间段做了什么事</strong>。</p> 
<p>既然如此，数据表的定义就可以给出，比如<strong>什么人</strong>对应一个用户的ID,什么空间假如<strong>场景</strong>在C端，那很多都是1级页面，2级页面之类的点击，什么<strong>时间段</strong>，那么可以定义为简单的时间类型字段，做了<strong>什么事</strong>，比如点击了分享，优惠券，加入购物车，这些运营动作，又或者是，观察了什么商品，商品的名称所传达的点击动作，都可以定义为一个行为。</p> 
<p>用户的埋点解释已经给出，我们需要更快的切入到实战战场，就开始切人正题，从简单到复杂，我们假设有<strong>小明</strong>，<strong>小天</strong>这两个人，用户ID是分别是<strong>1</strong>，<strong>2</strong>，观测他们在早上做了什么电商的动作，然后我们根据他动作的次数去分析这两个人的重度行为是什么，进而在电商平台上给他们<strong>推送</strong>类似的产品，以提高我们电商产品的转化率，提高转化率的方法很多种，听自媒体说当年马化腾也男扮女在QQ聊天提高转化率（哈哈），这种是相对较有效率而直接。</p> 
<p>重度行为的分析一般也是可以从时空论入手，比如<strong>时间</strong>（点击什么花费的时间最多），<strong>空间</strong>（点击的次数最多，发送的请求量最多），耗费时间方面还需要考虑数据库字段的设计，这里就不再多述，空间方面我们可以简单从点击次数入手，也是最为简单的手段，下面我们来看一下小明和小天做了什么？下面这个是csv文件，可以保存成csv格式就能导入。</p> 
<pre><code class="prism language-python"><span class="token builtin">id</span><span class="token punctuation">,</span>username<span class="token punctuation">,</span>time<span class="token punctuation">,</span>behavior
<span class="token number">1</span><span class="token punctuation">,</span>小明<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">,</span>球鞋
<span class="token number">1</span><span class="token punctuation">,</span>小明<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">13</span><span class="token punctuation">,</span>键盘
<span class="token number">1</span><span class="token punctuation">,</span>小明<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span>鼠标
<span class="token number">1</span><span class="token punctuation">,</span>小明<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">40</span><span class="token punctuation">,</span>鼠标
<span class="token number">1</span><span class="token punctuation">,</span>小明<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">50</span><span class="token punctuation">,</span>鼠标
<span class="token number">1</span><span class="token punctuation">,</span>小明<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span>键盘
<span class="token number">2</span><span class="token punctuation">,</span>小天<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">,</span>可乐
<span class="token number">2</span><span class="token punctuation">,</span>小天<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">13</span><span class="token punctuation">,</span>王老吉
<span class="token number">2</span><span class="token punctuation">,</span>小天<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span>炸鸡
<span class="token number">2</span><span class="token punctuation">,</span>小天<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">40</span><span class="token punctuation">,</span>王老吉
<span class="token number">2</span><span class="token punctuation">,</span>小天<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">50</span><span class="token punctuation">,</span>炸鸡
<span class="token number">2</span><span class="token punctuation">,</span>小天<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span> <span class="token number">14</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span>全家桶

</code></pre> 
<p>我这里就直接把小明和小天的数据库表csv格式给展现出来了，直观来看，小明应该是一个喜欢电脑方面，玩游戏的童鞋，小天一眼看去就是吃货，这个表结构很直观的体现出时空论的三要素，<strong>什么人，什么时间，什么行为</strong>，这里是一个APP或者小程序产品的埋点，我们其实还需要增加页面的定义的埋点（<strong>空间场景埋点</strong>），但这里没有具体可阐述的电商产品，我们就以最简单的形式来吧。</p> 
<p>接下来我会使用python的一个库：pandas进行分析这些行为特征，找出他们的重度行为，当然简单来说，普通的数据库语言都能操作这些行为，但以后遇到更复杂的场景，pandas会更为好用。</p> 
<p>这里先将脉络用导图方式画出来，这样好理解。<br> <img src="https://images2.imgbox.com/d7/dc/FlsjN6zW_o.png" alt="在这里插入图片描述"><br> 接下来，二话不多说，开始分析了，这里用到<strong>jupyter</strong>的形式去分析。</p> 
<pre><code class="prism language-python"><span class="token comment">#%%</span>

<span class="token comment">#一，导入处理数据包 pandas,numpy</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> os
<span class="token comment">#设置分析文件的路径</span>
os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span>r<span class="token string">'C:\Users\foxirenseng\Desktop'</span><span class="token punctuation">)</span>

<span class="token comment">#%%</span>

<span class="token comment"># 二，读取数据</span>
df  <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'behavior_analysis.csv'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'id'</span><span class="token punctuation">:</span><span class="token builtin">str</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">#%%</span>
<span class="token comment">#计算df的行列数</span>
df<span class="token punctuation">.</span>shape
<span class="token comment">#(12, 4)</span>

<span class="token comment">#%%</span>
<span class="token comment">#观察df的每列的数据结构</span>
df<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#&lt;class 'pandas.core.frame.DataFrame'&gt;</span>
<span class="token comment"># RangeIndex: 12 entries, 0 to 11</span>
<span class="token comment"># Data columns (total 4 columns):</span>
<span class="token comment">#  #   Column    Non-Null Count  Dtype</span>
<span class="token comment"># ---  ------    --------------  -----</span>
<span class="token comment">#  0   id        12 non-null     object</span>
<span class="token comment">#  1   username  12 non-null     object</span>
<span class="token comment">#  2   time      12 non-null     object</span>
<span class="token comment">#  3   behavior  12 non-null     object</span>
<span class="token comment"># dtypes: object(4)</span>
<span class="token comment"># memory usage: 512.0+ bytes</span>


<span class="token comment">#%% md</span>
<span class="token comment">## 三.  数据清洗</span>

<span class="token comment">#统计缺失率</span>
df<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token builtin">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment"># id          0.0</span>
<span class="token comment"># username    0.0</span>
<span class="token comment"># time        0.0</span>
<span class="token comment"># behavior    0.0</span>
<span class="token comment"># dtype: float64</span>
<span class="token comment"># 都是0就是没有缺失值。</span>
<span class="token comment">#%%</span>

<span class="token comment">#%% md</span>

<span class="token operator">*</span> 缺失率，重复值，异常值



<span class="token comment"># 重复值处理，没重复值</span>
df <span class="token operator">=</span> df<span class="token punctuation">.</span>drop_duplicates<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#%%</span>

<span class="token comment"># 异常值处理,没异常</span>
df<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#%% md</span>

<span class="token operator">*</span> 数据分析，分组统计

<span class="token comment">#%%</span>
<span class="token comment">#首先对id和行为分成一组，比如小明，键盘为一行，小天，炸鸡为一行</span>
df_group <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span><span class="token string">'username'</span><span class="token punctuation">,</span><span class="token string">'behavior'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 然后对某人点了某物的次数进行一次次数统计，用到了count函数，再将计算出来的count字段列重置为count的index列，</span>
<span class="token comment"># 形成dataframe数据类型</span>
df1 <span class="token operator">=</span> df_group<span class="token punctuation">.</span>behavior<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'count'</span><span class="token punctuation">)</span>
<span class="token comment"># 最后对id和次数进行排序，id从小到大排True，次数从大到小排，覆盖原有df1列</span>
df1<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 打印出df1看看效果</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df1）
</code></pre> 
<p><strong>结果图：</strong><br> <img src="https://images2.imgbox.com/9a/a8/HbL1ymOE_o.png" alt="在这里插入图片描述"></p> 
<p>结论如下：小明点击鼠标3次，看来<strong>很缺鼠标</strong>，是不是玩游戏砸了n次鼠标砸坏了，小天是<strong>吃货</strong>，炸鸡和王老吉都是2次以上，数据显而易见，后台取出近期（时间维度为一周内）最大次数的点击商品，推送鼠标给小明，然后把炸鸡推送给小天，转化率就有可能提高了，这就是简单的数据驱动业务的例子，我是佛系人僧，欢迎朋友们下次再见。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c7ef864faa8b070448388632112bfd11/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">oracle database concepts,深入学习Oracle Database Concepts</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6471d7411a7510d1807c65ff13765f77/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">深度学习——早停法（Early Stopping）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>