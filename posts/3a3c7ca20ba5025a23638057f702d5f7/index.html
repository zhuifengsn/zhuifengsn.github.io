<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>移植gspcav1-20071224 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="移植gspcav1-20071224" />
<meta property="og:description" content="移植gspcav1-20071224 http://weijb0606.blog.163.com/blog/static/131286274201063145521107/ Kernel version :2.6.22.6
Crosstool :arm-linux-gcc-3.4.5
Board :FS2410 System :Fedora 8
Source :gspcav1-20071224、servfox-R1_1_3、spcaview-20061208 Author :http://viviwei.cublog.cn 一、移植gspcav1-20071224 gspcav1-20071224下载地址:http://www.slackware.com/~alien/slackbuilds/gspcav1/build/gspcav1-20071224.tar.gz
FS2410开发板上移植的是Linux-2.6.22.6内核，USB及CS8900A均能工作，由于linux-2.6.22.6/drivers/usb 目录下没有 media 目录，故移植步骤如下：
a) 在 linux-2.6.22.6/drivers/usb 目录下新建 media 目录，将gspcav1-20071224.tar.gz copy 到 media 下并解压。为了使media 编译进内核，需修改linux-2.6.22.6/drivers/usb 目录下的Kconfig、Makefile 文件。
[linux@weijing usb]$ pwd
/work/kernel/linux-2.6.22.6/drivers/usb
[linux@weijing usb]$ vi Kconfig
添加
source &#34;drivers/usb/media/Kconfig&#34;
[linux@weijing usb]$ vi Makefile
添加
obj-$(CONFIG_USB_SPCA5XX) &#43;= media/
b) 为添加 gspcav1-20071224 编译选项，在 media 下新建 Kconfig、Makefile 文件。
[linux@weijing media]$ pwd
/work/kernel/linux-2.6.22.6/drivers/usb/media
[linux@weijing media]$ vi Kconfig" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/3a3c7ca20ba5025a23638057f702d5f7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-03-08T15:32:09+08:00" />
<meta property="article:modified_time" content="2012-03-08T15:32:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">移植gspcav1-20071224</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                      
<div class="posttitle"> 
 <a class="singleposttitle" id="cb_post_title_url" href="http://www.cnblogs.com/leaven/archive/2010/08/19/1802935.html" rel="nofollow">移植gspcav1-20071224</a> 
</div> 
<div id="cnblogs_post_body"> 
 <p><a title="http://weijb0606.blog.163.com/blog/static/131286274201063145521107/" href="http://weijb0606.blog.163.com/blog/static/131286274201063145521107/" rel="nofollow">http://weijb0606.blog.163.com/blog/static/131286274201063145521107/</a> </p> 
 <p>Kernel version :2.6.22.6<br> Crosstool      :arm-linux-gcc-3.4.5<br> Board          :FS2410 </p> 
 <p>System         :Fedora 8<br> Source         :gspcav1-20071224、servfox-R1_1_3、spcaview-20061208 </p> 
 <p>Author                   :http://viviwei.cublog.cn </p> 
 <p><strong>一、移植gspcav1-20071224</strong> </p> 
 <p><strong></strong>gspcav1-20071224下载地址:<a href="http://www.slackware.com/%7Ealien/slackbuilds/gspcav1/build/gspcav1-20071224.tar.gz" rel="nofollow">http://www.slackware.com/~alien/slackbuilds/gspcav1/build/gspcav1-20071224.tar.gz</a><br> FS2410开发板上移植的是Linux-2.6.22.6内核，USB及CS8900A均能工作，由于linux-2.6.22.6/drivers/usb 目录下没有 media 目录，故移植步骤如下：<br> a)  在 linux-2.6.22.6/drivers/usb 目录下新建 media 目录，将gspcav1-20071224.tar.gz copy 到 media  下并解压。为了使media 编译进内核，需修改linux-2.6.22.6/drivers/usb 目录下的Kconfig、Makefile 文件。<br> [linux@weijing usb]$ pwd<br> /work/kernel/linux-2.6.22.6/drivers/usb<br> [linux@weijing usb]$ vi  Kconfig<br> 添加<br> source "drivers/usb/media/Kconfig"<br> [linux@weijing usb]$ vi Makefile<br> 添加<br> obj-$(CONFIG_USB_SPCA5XX)        += media/<br> b)  为添加 gspcav1-20071224 编译选项，在 media 下新建 Kconfig、Makefile 文件。<br> [linux@weijing media]$ pwd<br> /work/kernel/linux-2.6.22.6/drivers/usb/media<br> [linux@weijing media]$ vi Kconfig<br> #<br> # USB Multimedia device configuration<br> #<br> comment "USB Multimedia devices"<br>         depends on USB<br> config USB_SPCA5XX<br>         tristate "USB SPCA5XX Sunplus/Vimicro/Sonix jpeg Cameras"<br>         depends on USB &amp;&amp; VIDEO_DEV<br>         ---help---<br>           Say Y or M here if you want to use one of these webcams:<br>           The built-in microphone is enabled by selecting USB Audio support.<br>           This driver uses the Video For Linux API. You must say Y or M to<br>           "Video For Linux" (under Character Devices) to use this driver.<br>           Information on this API and pointers to "v4l" programs may be found<br>           at &lt;Documentation/video4linux/API.html&gt;.<br>           To compile this driver as a module, choose M here: the<br>           module will be called spca5xx.<br> [linux@weijing media]$ vi Makefile<br> #<br> # Makefile for USB Media drivers<br> #<br> obj-$(CONFIG_USB_SPCA5XX)   += gspcav1-20071224/<br> c)  修改 gspcav1-20071224 的 Makefile<br> [linux@weijing gspcav1-20071224]$ pwd<br> /work/kernel/linux-2.6.22.6/drivers/usb/media/gspcav1-20071224<br> [linux@weijing gspcav1-20071224]$ vi Makefile<br> gspca-objs := gspca_core.o decoder/gspcadecoder.o<br> obj-$(CONFIG_USB_SPCA5XX) += gspca.o<br> clean:<br>         rm -f *.[oas] .*.flags *.ko .*.cmd .*.d .*.tmp *.mod.c <br>         rm -rf .tmp_versions<br> d)  编译内核 </p> 
 <p>（1）Multimedia devices  ---&gt;<br>          Video For Linux<br> （2） USB support  ---&gt;<br>         Support for Host-side USB<br>        --- USB Host Controller Drivers    <br>         OHCI HCD support<br> （3）--- USB Multimedia devices<br>      USB SPCA5XX Sunplus/Vimicro/Sonix jpeg Cameras </p> 
 <p>此时，可能会提示 gspca_core.c 的一些轻微错误，稍作修改即可：<br> //static const char gspca_version[] = GSPCA_VERSION;<br> static const char gspca_version[] = "00.60.00";<br> 把新生成的 uImage 烧进开发板，重启，插上中星微芯片的摄像头，命令行出现<br> # usb 1-1: new full speed USB device using s3c2410-ohci and address 2           <br> usb 1-1: configuration #1 chosen from 1 choice                                  <br> drivers/usb/media/gspcav1-20071224/gspca_core.c: USB GSPCA camera found.(ZC3XX)<br> 说明移植的驱动已经能识别设备，设备名所在路径 /dev/video0。<br> <strong>二、</strong>servfox<br>     服务器端程序用是servfox，通过它可以在PC上看到开发板采集来的图像，从这里下载 </p> 
 <p><a href="http://mxhaard.free.fr/spca50x/embedded/Servfox/servfox-R1_1_3.tar.gz" rel="nofollow"><strong>http://mxhaard.free.fr/spca50x/embedded/Servfox/servfox-R1_1_3.tar.gz</strong></a><br> 下载，解压，进入其目录，发现没有一个makefile.arm，还有一个makefile.386，将makefile.arm改名为makefile，然后输入命令 make，生成 servfox 可实行文件，copy 到开发板运行之： </p> 
 <p># ./servfox -d /dev/video0 -g -s 640x480 -w 7070                                <br> servfox version: 1.1.3 date: 11:12:2005 (C) <a href="mailto:mxhaard@magic.fr" rel="nofollow">mxhaard@magic.fr</a><br> wrong spca5xx device                                                            <br> Waiting .... for connection. CTrl_c to stop !!!!                                <br> Got connection from 192.168.1.2 <br> 三、spcaview<br> 客户端程序使用的是spcaview，下载地址为： </p> 
 <p><a href="http://mxhaard.free.fr/spca50x/Download/spcaview-20061208.tar.gz" rel="nofollow"><strong>http://mxhaard.free.fr/spca50x/Download/spcaview-20061208.tar.gz</strong></a><br> 这个程序在PC 上运行，直接解压编译，生成 spcaview 可实行文件，运行如下： </p> 
 <p>[root@weijing spcaview-20061208]# ./spcaview -g -w 192.168.1.17<br> Spcaview version: 1.1.7 date: 06:11:2006 (C) <a href="mailto:mxhaard@magic.fr" rel="nofollow">mxhaard@magic.fr</a><br> ERROR Set default port to 7070 <br> using Server 192.168.1.17 Port 7070 <br> bright 32768 contrast 32768 </p> 
 <p>附件2是在 Fedora 8 下看到的图像。 </p> 
 <p>参考：<strong><a href="http://blog.chinaunix.net/u/26710/showart_387765.html" rel="nofollow">http://blog.chinaunix.net/u/26710/showart_387765.html</a></strong> </p> 
 <p><a href="http://blog.chinaunix.net/u/31/showart_692727.html" rel="nofollow">http://blog.chinaunix.net/u/31/showart_692727.html</a></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/349aec0b2b7cb884dfee1b514015f62f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">u-boot在S3C2440上的移植问题及解决方法集锦</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b16853abdfc041aa002ffe5185b721e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Fedora9本地安装配置中文输入法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>