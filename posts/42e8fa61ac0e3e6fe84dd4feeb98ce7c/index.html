<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pxe服务 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pxe服务" />
<meta property="og:description" content="班级同学作为苏信集团云数据中心定向培训班，现在培训已经结束了。大家现在要开始做第一个数据中心实践项目。
公司需要搭建一个内部的论坛，要求这个论坛无论什么时间访问都可以。
方案设计：
网络拓扑规划设备选型：网络设备（路由器，交换机，防火墙，负载均衡设备，监控设备）存储设备（磁盘阵列）服务器（服务器，终端机，监控机）操作系统选型（centos，乌班图） 无人值守操作系统部署安装PXE
4.操作系统软件部署上线（产品上线）
5.系统优化
单机安装基于LAMPweb架构的论坛软件
在一台机器的一块硬盘上同时部署了 前端web服务器和后端数据库服务器，数据和前端页面在同一块硬盘上
任务一：选择一个虚拟机命名为Nfs，配置nfs开放读写权限，创建共享目录/论坛，创建测试文件ceshi，添加内容nihao，在Apache1和Apache2两台主机上创建挂载点/guazai，将共享目录挂载上。测试在Apache1上修改共享文件，去Apache2上查看文件内容是否改变。
任务二：在NFS服务端上配置vsftpd服务，上传软件包到共享目录，然后在apache1和apache2上挂载共享目录到apache的网站根目录/var/www/html
注：上传论坛包后，发现前端页面数据没有独立存储设备，所有我需要在/luntan这个目录上挂载独立存储设备（通常选用硬件磁盘阵列或软件raid）
任务三：选择一个虚拟机命名为mysql，配置基础环境，安装mariadb*
注：考虑到用户数据安全问题，所以mysql的数据目录也要挂载一个raid，但是因为mysql启动后会在数据目录里面创建部分运行基本数据，挂载存储设备会造成数据覆盖问题。
通常建议：先创建数据存放目录，载目录上挂载存储，在去安装mysql对应软件
在数据库安装使用前，修改数据库的默认数据存放目录
创建目录：mkdir 目录名磁盘阵列：mdadm -C /dev/md5 -l 5 – n 3 -x 1 /dev/sd{b,c,d,e}格式化硬盘：mkfs -t ext4 /dev/md5挂载存储设备(分区，lvm, raid) 到目录下: mount 设备路径 目录路径安装数据库软件: yum install -y mariadb*修改目录所属: chown mysql. mysql目录名(第一步创建的目录)修改配置文件: vi /etc/my. cnf 修改datadir参数值为对应目录绝对路径启动服务: systemctl start mariadb为远程主机授予访问数据库的权限;（分号分号分号！） Grant all privileges on *.* to ‘root’@’%’ identified by ‘123456’;
刷新权限立刻生效：flush privileges；
任务四：现在因为用户流量的增多，达到了apache的负载上线，使用我们需要多台apache来处理用户访问信息。所以在apache的主机前需要添加一台代理服务器，代理服务器需要具备：高负载和分流功能。因为我们是论坛，是一个web，所以在众多负载均衡软件中nginx是较为合适的。
软件安装：yum install -y nginx
配置开启nginx的反向代理功能" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/42e8fa61ac0e3e6fe84dd4feeb98ce7c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-11T15:13:46+08:00" />
<meta property="article:modified_time" content="2022-12-11T15:13:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pxe服务</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:left;">班级同学作为苏信集团云数据中心定向培训班，现在培训已经结束了。大家现在要开始做第一个数据中心实践项目。</p> 
<p style="margin-left:.0001pt;text-align:justify;">公司需要搭建一个内部的论坛，要求这个论坛无论什么时间访问都可以。</p> 
<p style="margin-left:.0001pt;text-align:justify;">方案设计：</p> 
<ol><li style="text-align:justify;"><strong>网络拓扑规划</strong></li><li style="text-align:justify;"><strong>设备选型：网络设备（路由器，交换机，防火墙，负载均衡设备，监控设备）存储设备（磁盘阵列）服务器（服务器，终端机，监控机）</strong></li><li style="text-align:justify;"><strong>操作系统选型（centos，乌班图）</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>无人值守操作系统部署安装PXE</strong></p> 
<p style="text-align:justify;"><strong>      4.操作系统软件部署上线（产品上线）</strong></p> 
<p style="text-align:justify;"><strong>      5.系统优化</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">单机安装基于LAMPweb架构的论坛软件</p> 
<p style="margin-left:.0001pt;text-align:justify;">在一台机器的一块硬盘上同时部署了 前端web服务器和后端数据库服务器，数据和前端页面在同一块硬盘上</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffff00;"><span style="color:#ff0000;">任务一：</span></span></strong>选择一个虚拟机命名为Nfs，配置nfs开放读写权限，创建共享目录/论坛，创建测试文件ceshi，添加内容nihao，在Apache1和Apache2两台主机上创建挂载点/guazai，将共享目录挂载上。测试在Apache1上修改共享文件，去Apache2上查看文件内容是否改变。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffff00;"><span style="color:#ff0000;">任务二：</span></span></strong>在NFS服务端上配置vsftpd服务，上传软件包到共享目录，然后在apache1和apache2上挂载共享目录到apache的网站根目录/var/www/html</p> 
<p style="margin-left:.0001pt;text-align:justify;">注：上传论坛包后，发现前端页面数据没有独立存储设备，所有我需要在/luntan这个目录上挂载独立存储设备（通常选用硬件磁盘阵列或软件raid）</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffff00;"><span style="color:#ff0000;">任务三：</span></span></strong>选择一个虚拟机命名为mysql，配置基础环境，安装mariadb*</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">注：考虑到用户数据安全问题，所以mysql的数据目录也要挂载一个raid，但是因为mysql启动后会在数据目录里面创建部分运行基本数据，挂载存储设备会造成数据覆盖问题。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">通常建议：先创建数据存放目录，载目录上挂载存储，在去安装mysql对应软件</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">在数据库安装使用前，修改数据库的默认数据存放目录</span></p> 
<ol><li style="text-align:justify;">创建目录：mkdir 目录名</li><li style="text-align:justify;"><a name="_Hlk121430832">磁盘阵列：mdadm -C  /dev/md5 -l 5 – n 3 -x 1 /dev/sd{b,c,d,e}</a></li><li style="text-align:justify;">格式化硬盘：mkfs -t  ext4 /dev/md5</li><li style="text-align:justify;"><a name="_Hlk121431002">挂载存储设备(分区，lvm, raid) 到目录下: mount  设备路径  目录路径</a></li><li style="text-align:justify;">安装数据库软件: yum install -y mariadb*</li><li style="text-align:justify;"><a name="_Hlk121431307">修改目录所属: chown mysql. mysql目录名(第一步创建的目录)</a></li><li style="text-align:justify;">修改配置文件: vi /etc/my. cnf   修改datadir参数值为对应目录绝对路径</li><li style="text-align:justify;">启动服务: systemctl start mariadb</li><li style="text-align:justify;">为远程主机授予访问数据库的权限;（分号分号分号！）</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;">Grant all  privileges on *.* to ‘root’@’%’  identified  by ‘123456’;</p> 
<p style="margin-left:.0001pt;text-align:justify;">刷新权限立刻生效：flush  privileges；</p> 
<p style="margin-left:.0001pt;text-align:justify;">任务四：现在因为用户流量的增多，达到了apache的负载上线，使用我们需要多台apache来处理用户访问信息。所以在apache的主机前需要添加一台代理服务器，代理服务器需要具备：高负载和分流功能。因为我们是论坛，是一个web，所以在众多负载均衡软件中nginx是较为合适的。</p> 
<p style="margin-left:.0001pt;text-align:justify;">软件安装：yum install -y nginx</p> 
<p style="margin-left:.0001pt;text-align:justify;">配置开启nginx的反向代理功能</p> 
<p style="margin-left:.0001pt;text-align:justify;">修改配置文件开启代理功能：/etc/nginx/conf.g/default.conf</p> 
<p style="margin-left:.0001pt;text-align:justify;">修改配置文件确认代理的主机是那些:/etc/nginx/nginx.conf</p> 
<p style="margin-left:.0001pt;text-align:justify;">重启服务</p> 
<p style="margin-left:.0001pt;text-align:justify;">验证：在浏览器上输入http：//nginxip访问，多次刷新</p> 
<p style="margin-left:.0001pt;text-align:justify;">查看apache的/var/log/httpd/access_log 查看最后一行 确认访问者ip为nginxip</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>负载均衡</strong></p> 
<ol><li style="text-align:justify;">种类：软/硬件负载均衡<strong>     </strong>本地/全局负载均衡</li><li style="text-align:justify;">Ip负载均衡是基于特定的TCP/IP技术实现的负载均衡。</li><li style="text-align:justify;">硬件设备的主要产品是F5-BIG-IP-GTM（简称F5），软件产品主要有LVS，HAProxy，NginX。其中LVS，HAProxy可以工作在4-7层，NginX工作在7层。</li><li style="text-align:justify;">Nginx/LVS/Haproxy是目前使用最广泛的三种 负载均衡软件</li><li style="text-align:justify;">Nginx是一款轻量级的web服务器/反向代理服务器及电子邮件代理服务器。</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="569" src="https://images2.imgbox.com/3f/fb/wBQlalw3_o.png" width="976"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>高可用：</strong>HA，是分布式系统架构设计中必须要考虑的因素，它通常是指，通过设计减少系统不能提供服务的时间</p> 
<ol><li style="text-align:justify;">工程上通常用平均无故障时间（MTTF）来度量系统的可用性。</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>集群：</strong>集群是由一些互相连结在一起的计算机构成的一个并行或分布式系统。</p> 
<ol><li style="text-align:justify;">优点：高可伸缩性，高可用性，高科管理性</li><li style="text-align:justify;">集群分类：高可用集群，负载均衡集群，存储集群，高性能计算集群 <p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="603" src="https://images2.imgbox.com/77/05/5zlxnrCV_o.png" width="1043">常见集群框</p> </li><li style="text-align:justify;"> <p style="margin-left:.0001pt;text-align:justify;"><strong>6.上线测试</strong></p> </li><li style="text-align:justify;"> <p style="margin-left:.0001pt;text-align:justify;">7.<strong>交接文档与交接培训</strong></p> </li><li style="text-align:justify;"><span style="color:#000000;">创建目录： mkdir 目录名</span></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="37" src="https://images2.imgbox.com/c3/1c/7E7KqwKF_o.png" width="758"></p> 
<p><span style="color:#000000;">挂载存储设备（分区，lvm，raid）到目录下： mount  设备路径  目录路径</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="66" src="https://images2.imgbox.com/d2/6f/P6SsGpnt_o.png" width="893"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">格式化硬盘</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="358" src="https://images2.imgbox.com/e4/92/TSW7wIAn_o.png" width="903"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">挂载到目录上</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="214" src="https://images2.imgbox.com/bf/4d/aMgpu5w7_o.png" width="734"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">进入vi /etc/fstab  进行自动挂载</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="217" src="https://images2.imgbox.com/fc/87/qd8Jpa5D_o.png" width="917"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="47" src="https://images2.imgbox.com/9b/4f/H7jEhC4d_o.png" width="812"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="291" src="https://images2.imgbox.com/01/7a/Xp0gw96t_o.png" width="957"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="24" src="https://images2.imgbox.com/8f/09/RSNiQxqF_o.png" width="693"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="color:#ff0000;">为远程主机授予访问数据库的权限;（分号分号分号！）</span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">Grant all  privileges on *.* to ‘root’@’%’  identified  by ‘123456’;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">刷新权限立刻生效：flush  privileges；</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="301" src="https://images2.imgbox.com/7f/6e/0OjwMDYw_o.jpg" width="768"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>一．操作系统选型</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>1.</strong><strong>关闭防火墙：systemctl stop firewalld.service   </strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>关闭防火墙随机启动  Systemctl disable firewall.service</strong> </p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="273" src="https://images2.imgbox.com/1a/58/gV5mLtdg_o.png" width="949"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>2.</strong><strong>临时关闭selinux：setenforce 0</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>开机不启动：vi /etc/selinux/config  </strong><strong>将参数修改为SELINUX=disabled</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="65" src="https://images2.imgbox.com/34/04/DltPq6rg_o.png" width="727"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="149" src="https://images2.imgbox.com/be/2c/Csew11ML_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>3.</strong><strong>虚拟网络编辑器设置为NAT模式，且关闭“使用本地DHCP服务将IP地址分配给虚拟机</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="341" src="https://images2.imgbox.com/bf/9c/9AkMKhDd_o.png" width="556"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>在虚拟机属性，设置网络适配器的“网络连接”为“NAT模式（N）:用于共享主机的IP地址”</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="286" src="https://images2.imgbox.com/54/28/saMWVhYB_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>5.</strong><strong> </strong><strong>输入：yum install -y httpd tftp tftp-server dhcp syslinux        </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>安装httpd、tftp-server、dhcp-server、syslinux软件包</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="169" src="https://images2.imgbox.com/ef/3f/hi3QGcZf_o.png" width="841"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>6.</strong><strong>搭建并启动DHCP 输入：vi /etc/dhcp/dhcpd.conf</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="191" src="https://images2.imgbox.com/19/85/u8y9Cwuv_o.png" width="870"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>7.</strong><strong>启动dhcpd服务：systemctl  start  dhcpd</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>查看dhcpd服务运行状态：systemctl  status dhcpd</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="383" src="https://images2.imgbox.com/0c/9e/xt2nFFpK_o.png" width="993"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>创建软件包存放目录： mkdir  /var/www/html/Centos</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="20" src="https://images2.imgbox.com/8d/c9/BgI479cb_o.png" width="679"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>将光驱挂载到此文件目录下： mount  /dev/sr0  /var/www/html/Centos </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="203" src="https://images2.imgbox.com/44/b7/1RVluEzD_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>编辑挂载点： vi/etc/fstab</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>在文档末尾输入; /dev/sr0  /var/www/html/Centos  iso9660  defaults  0 0</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="116" src="https://images2.imgbox.com/f0/02/dnwY41lz_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>9.</strong><strong>生成需要的文件并启动tftp服务</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>cp /usr/share/syslinux/pxelinux.0        /var/lib/tftpboot/</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>cp  /var/www/html/Centos/isolinux/{vmlinuz,*.c32,initrd.img}  /var/lib/tftpboot/</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>创建pxelinux.cfg文件目录：mkdir  /var/lib/tftpboot/pxelinux.cfg     </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>创建default文件：vi  /var/lib/tftpboot/pxelinux.cfg/default   </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="282" src="https://images2.imgbox.com/09/a0/HQ4Ex23O_o.png" width="818"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>10.</strong><strong>启动tftp服务：systemctl start tftp         </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>systemctl enable tftp  </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>查看tftp服务运行状态：systemctl status tftp </strong>     </p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="243" src="https://images2.imgbox.com/60/cf/S3fqqzIg_o.png" width="1008"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>11.</strong><strong>生成ks.cfg文件：cp /root/anaconda-ks.cfg /var/www/html/ks.cfg    </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>对ks.cfg文件进行编辑：vim /var/www/html/ks.cfg </strong><img alt="" height="421" src="https://images2.imgbox.com/7f/58/STEA4UqF_o.png" width="806"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>12.</strong><strong>修改文件权限，启动http服务</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>  </strong><strong>修改ks.cfg权限：chmod  a+r  /var/www/html/ks.cfg   </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>  </strong><strong>启动httpd服务：systemctl  start  httpd            </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>  </strong><strong>查看http服务状态：systemctl  status  httpd           </strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="432" src="https://images2.imgbox.com/a7/44/7pR24AHS_o.png" width="958"><br><strong>二、PXE客户端配置</strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="766" src="https://images2.imgbox.com/7f/89/BQhB3eEu_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="518" src="https://images2.imgbox.com/ed/28/WmpX7v5A_o.png" width="1123"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="525" src="https://images2.imgbox.com/ac/dc/eVhJE6Ro_o.png" width="1039"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="391" src="https://images2.imgbox.com/c4/35/CrDFPCqQ_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="433" src="https://images2.imgbox.com/d7/48/bF10t8G4_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>二．操作系统软件部署上线</strong></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>开机不启动防火墙：systemctl  disable firewalld</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="120" src="https://images2.imgbox.com/92/72/7w3GDAJC_o.png" width="871"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>关闭selinux：setenforce 0</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>永久关闭selinux：vi /etc/selinux/config</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>将参数SELINUX改成disabled</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="225" src="https://images2.imgbox.com/4a/ab/62rhgowZ_o.png" width="831"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>配置IP地址（实现网络服务要有IP）</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>五个修改参数：</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>BOOTPROTO=</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>IPADDR=IP</strong><strong>地址</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>NETMASK=</strong><strong>子网掩码</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>GATEWAY=</strong><strong>网关</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>ONBOOT=YES</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>注：ONBOOT一定要改成YES，这样才能激活网卡，只有在激活网卡才能连接网络，进行网络通讯</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="200" src="https://images2.imgbox.com/63/df/UoDvWPhg_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>查看IP</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="234" src="https://images2.imgbox.com/91/4a/ObYuje4X_o.png" width="882"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>配置文件：vi /etc/resolv.com</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="78" src="https://images2.imgbox.com/cf/db/M8mI12Wz_o.png" width="723"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>2</strong><strong>）配置好yum源</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>配置本地源（使用的核心原则：不与存在相同软件但是不同版本的源交叉使用）</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>清空原有仓库文件：rm -rf  /etc/yum.repos.d/*</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="45" src="https://images2.imgbox.com/4d/88/xanETTz4_o.png" width="613"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>配置新的仓库文件：vi  /etc/yum.repos.d/仓库文件名.repo</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="25" src="https://images2.imgbox.com/42/83/4xVP7mWM_o.png" width="628"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>添加内容：【源标识】不与文件中其他源标识重名  </strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>Name</strong><strong>（与源标识仓库名称一样）</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>enabled=1</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>gpgcheck=0</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>baseurl </strong><strong>（本地用file://   网络用http：//  https://  ftp：//  mirrors：//）</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>注：本地指向的是存有软件包的目录</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="105" src="https://images2.imgbox.com/ef/a9/pfsuOpja_o.png" width="771"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>进行挂载：mount   /dev/sr0  /mnt</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="51" src="https://images2.imgbox.com/7f/f1/htbe6QqS_o.png" width="768"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>自动挂载：vi  /etc/fstab</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="27" src="https://images2.imgbox.com/88/7c/EYEChlNu_o.png" width="904"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>在最后一行添加：/dev/sr0  /mnt  iso9660  defaults  0   0</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="219" src="https://images2.imgbox.com/af/d5/n3pmCX5i_o.png" width="907"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>查看是否挂载成功：df -hT</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="178" src="https://images2.imgbox.com/6e/3c/BcHoiniH_o.png" width="773"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>配置完成后保存退出，清空原有源缓存：yum  clean  all</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="84" src="https://images2.imgbox.com/9c/9b/9V8uwaPw_o.png" width="770"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>重新生成新的缓存，验证yum源是否可用</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="139" src="https://images2.imgbox.com/46/ec/yeZeMe98_o.png" width="907"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>可能会出现的问题</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="291" src="https://images2.imgbox.com/d3/df/4JFrVkSU_o.png" width="1087"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>进入/etc/yum.repos.d的文件中</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>ls</strong><strong>查看内容并删除多余源：rm  -rf  C*</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="118" src="https://images2.imgbox.com/46/05/zNaOSXcw_o.png" width="1087"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>3</strong><strong>）安装httpd   mariadb*   php  php-mysql</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="43" src="https://images2.imgbox.com/42/75/YURPj7qE_o.png" width="809"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>4) mariadb</strong><strong>的使用</strong></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="790" src="https://images2.imgbox.com/d1/a4/6NRhKAuI_o.png" width="802"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="328" src="https://images2.imgbox.com/f9/8a/mNnczrfA_o.png" width="804"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="193" src="https://images2.imgbox.com/68/dc/9A0IVvL6_o.png" width="760"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="56" src="https://images2.imgbox.com/72/35/gKIiqlsb_o.png" width="688"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="324" src="https://images2.imgbox.com/fe/58/K86iI5Bc_o.png" width="797"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="187" src="https://images2.imgbox.com/d1/b4/O6WGNQcG_o.png" width="799"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;"><span style="color:#000000;">安装数据库软件：yum  install  -y  mariadb*</span></li><li style="text-align:justify;"><span style="color:#000000;">修改目录所属：chown mysql.mysql  目录名（第一步创建的目录）</span></li><li style="text-align:justify;"><span style="color:#000000;">修改配置文件：vi  etc/my.cnf  修改datadir参数值为对应目录绝对路径</span></li><li style="text-align:justify;"><span style="color:#000000;">启动服务：systemctl  start  mariadb </span></li><li style="text-align:left;"><strong>搭建并启动http服务</strong></li><li style="text-align:justify;"><strong>关闭防火墙：systemctl stop firewalld</strong></li><li style="text-align:justify;"><strong>数据库配置文件：/etc/my.cnf</strong></li><li style="text-align:justify;"><strong>服务名称：mariadb</strong></li><li style="text-align:justify;"><strong>端口号：tcp  3306</strong></li><li style="text-align:justify;"><strong>启动服务：systemctl  start  mariadb</strong></li><li style="text-align:justify;"><strong>创建数据库访问密码：mysql_secure_installation</strong></li><li style="text-align:justify;"><strong>访问数据库：mysql  -hIP地址 -u用户名  -p密码  -P端口号</strong></li><li style="text-align:justify;"><strong>本地访问：mysql  -uroot  -p密码</strong></li><li style="text-align:justify;"><strong>显示数据库信息：show databases；（注：最后一定要加分号）</strong></li><li style="text-align:justify;"><strong>退出数据库：exit；（注：最后一定要加分号）</strong></li><li style="text-align:justify;"><strong>修改默认端口号：/etc/my.cnf  在【mysqld】下一行添加 port=新端口号</strong></li><li style="text-align:justify;"><strong>端口范围1-65535（1024以内不要写，因为有人用）</strong></li><li style="text-align:justify;"><strong>重启服务：systemctl  restart  mariadb</strong></li><li style="text-align:justify;"><strong>进入本地访问查看数据库信息</strong></li></ol> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>.php</strong><strong>设置默认识别的web服务器</strong></p> 
<ol><li style="text-align:justify;"><strong>查看当前系统安装的php版本：php  --version</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="362" src="https://images2.imgbox.com/68/97/bfl53zdO_o.png" width="805"></p> 
<ol><li style="text-align:justify;"><strong>Vi  /etc/php.d  </strong><strong>双击tab键</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="122" src="https://images2.imgbox.com/ab/8c/GFN3OcOn_o.png" width="997"></p> 
<ol><li style="text-align:justify;"><strong>罗列信息：rpm -ql  php</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="119" src="https://images2.imgbox.com/02/7d/Y3KXGGee_o.png" width="852"></p> 
<ol><li style="text-align:justify;"><strong>vi  /etc/httpd/conf.d/php.conf </strong><strong>（默认不用改）</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="560" src="https://images2.imgbox.com/19/8e/DvVHrgnZ_o.png" width="869"><strong>三.网站产品部署上线</strong></p> 
<ol><li style="text-align:justify;"><strong>上传软件包到/var/www/html上传方式：使用软件上传或搭建自有的vsftpd服务</strong></li><li style="text-align:justify;"><strong>安装vsftpd服务：yum install -y vsftpd</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="569" src="https://images2.imgbox.com/cf/24/jpKjJSDM_o.png" width="1119"></p> 
<ol><li style="text-align:justify;"><strong>进入：vi  /etc/vsftpd/vsftpd.conf 修改参数anon_upload_enable=YES</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="419" src="https://images2.imgbox.com/d8/f0/3LDf9GY4_o.png" width="554"></p> 
<ol><li style="text-align:justify;"><strong>修改目录/var/ftp/pub让所有人都有写权限：chmod  777  /var/ftp/pub</strong></li><li style="text-align:justify;"><strong>重启vsftpd服务：systemctl  restart  vsftpd</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="55" src="https://images2.imgbox.com/39/1a/32VKqk6A_o.png" width="844"></p> 
<ol><li style="text-align:justify;"><strong>客户端访问就可以上传文件：打开任意一个目录，在地址栏输入 ftp：//服务器ip   将压缩包拖入pub文件夹中</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="193" src="https://images2.imgbox.com/2d/6b/20WUKJ35_o.png" width="783"></p> 
<ol><li style="text-align:justify;"><strong>复制压缩包到/var/www/html</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>输入命令：cp /var/ftp/pub/Discuz_X3.2_SC_UTF8.zip /var/www/html</strong></p> 
<ol><li style="text-align:justify;"><strong>删除Centos ：rm  -rf  Centos/</strong></li><li style="text-align:justify;"><strong>解压软件包到/var/www/html中：unzip  软件包路径 -d  /var/www/html</strong></li><li style="text-align:justify;"><strong>查找unzip： yum  search  unzip</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="271" src="https://images2.imgbox.com/52/19/uggHuFcQ_o.png" width="978"></p> 
<ol><li style="text-align:justify;"><strong>安装unzip服务：yum install -y unzip</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="101" src="https://images2.imgbox.com/70/dc/3kcRHAVe_o.png" width="808"></p> 
<ol><li style="text-align:justify;"><strong>再进行一次解压：unzip  软件包路径 -d  /var/www/html</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="32" src="https://images2.imgbox.com/18/37/XWAHbx8I_o.png" width="612"></p> 
<ol><li style="text-align:justify;"><strong>将安装引导程序复制/移动到网站根目录下：</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>mv  /var/www/html/upload/*   /var/www/html</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="41" src="https://images2.imgbox.com/90/a1/rn9t6ikL_o.png" width="761"></p> 
<ol><li style="text-align:justify;"><strong>进入/var/www/html查看一下有没有复制过来</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="91" src="https://images2.imgbox.com/05/79/dq7rjCJt_o.png" width="999"></p> 
<ol><li style="text-align:justify;"><strong>重新启动服务：systemctl  restart  httpd</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="47" src="https://images2.imgbox.com/df/4e/DrVBdbXm_o.png" width="528"></p> 
<ol><li style="text-align:justify;"><strong>如果没有重启服务就会出现无法访问页面</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="810" src="https://images2.imgbox.com/5a/c9/Yprw0boE_o.png" width="1123"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;"><strong>在浏览器网址上输入： http：//服务器ip（用英文输入）</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="778" src="https://images2.imgbox.com/a4/8f/zmNuuXzv_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="805" src="https://images2.imgbox.com/a0/a3/2QANtA8a_o.png" width="882"></p> 
<ol><li style="text-align:justify;"><strong>给文件加权限：chmod -R 777 /var/www/{html，config，data，uc_client，  uc_server} </strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="120" src="https://images2.imgbox.com/5d/32/3voX7ptI_o.png" width="922"></p> 
<ol><li style="text-align:justify;"><strong>再返回到浏览器刷新一下</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="837" src="https://images2.imgbox.com/42/07/plQfTpbn_o.png" width="883"></p> 
<ol><li style="text-align:justify;"><strong>选择全新安装</strong></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="554" src="https://images2.imgbox.com/e4/6c/eNZOWBU8_o.png" width="938"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;"><strong>设置数据库密码和管理员密码</strong></li><li style="text-align:justify;"><li style="text-align:justify;"> <p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="534" src="https://images2.imgbox.com/58/5c/U9wpRzn4_o.png" width="554"></p> </li><li style="text-align:justify;"><strong>点右下角进入论坛</strong></li><li style="text-align:justify;"> <p style="margin-left:.0001pt;text-align:justify;"></p> <p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="398" src="https://images2.imgbox.com/60/4b/KsHM49ZQ_o.png" width="554"></p> <p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="789" src="https://images2.imgbox.com/ff/53/X1cjacs0_o.png" width="1123"></p> <p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="919" src="https://images2.imgbox.com/74/6d/lTMC45EY_o.png" width="1139"></p> <p style="margin-left:.0001pt;text-align:justify;">再次开启论坛需要关闭防火墙和selinux，httpd服务，vsftpd服务，mariadb数据库</p> <p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="193" src="https://images2.imgbox.com/3a/d3/xp49Fkwi_o.png" width="931"></p> <p style="margin-left:.0001pt;text-align:justify;"></p> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/afb348b7890838b45d6e855b383fe89f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">RNA-seq 详细教程：详解DESeq2流程（9）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/010c880946094fcb00084148aa764511/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Unity3D-VR《静夜诗》5-李白吟诗</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>