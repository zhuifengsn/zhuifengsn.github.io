<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Web系列二十六】el-input内容约束的一些方案 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Web系列二十六】el-input内容约束的一些方案" />
<meta property="og:description" content="目录
写在前面
方案介绍
使用正则表达式实现约束函数
参考资料
写在前面 前端开发会涉及很多输入框，通常都需要根据需求限制输入框的输入内容，其中最常用的就是element ui的el-input，本文就以el-input为例说明，但如果有其他类似的需求也可参考本文的实现方案。
方案介绍 &lt;el-input v-model=&#34;form.plan&#34; type=&#34;number&#34; step=&#34;0.5&#34; min=&#34;0&#34; max=&#34;5&#34; @keyup=&#34;proving($event)&#34; @keyudown=&#34;proving($event)&#34; @input=&#34;editInput($event,&#39;plan&#39;)&#34; oninput=&#34;if(value&gt;5)value=5;if(value&lt;0)value=0&#34; /&gt; 方案一：第一~四属性共同使用 type=“number” input的原生属性，标明input框的类型step=“0.5” input的原生属性，type=“number” 时生效， 标明输入字段的合法数字间隔（假如 step=“0.5”，则合法数字应该是 -0.5、0、0.5、1，以此类推）min=“0” max=“5” min 属性规定输入字段所允许的最小值。 max 属性规定输入字段所允许的最大值。 min 属性与 max 属性配合使用，可创建合法值范围。方案二：第五/六个属性@keyup/keydown=&#34;proving($event)&#34;，可在按键抬起或按下时触发 proving(e){ var val=e.target.value; //限制只能输入一个小数点 if (val.indexOf(&#34;.&#34;) != -1) { var str = val.substr(val.indexOf(&#34;.&#34;) &#43; 1); if (str.indexOf(&#34;.&#34;) != -1) { val = val.substr(0, val.indexOf(&#34;.&#34;) &#43; str.indexOf(&#34;.&#34;) &#43; 1); } } e.target.value = val." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/32a677e89643ff43e451df0d2d3177c2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-24T10:16:39+08:00" />
<meta property="article:modified_time" content="2023-10-24T10:16:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Web系列二十六】el-input内容约束的一些方案</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2-toc" style="margin-left:0px;"><a href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2" rel="nofollow">写在前面</a></p> 
<p id="%E6%96%B9%E6%A1%88%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#%E6%96%B9%E6%A1%88%E4%BB%8B%E7%BB%8D" rel="nofollow">方案介绍</a></p> 
<p id="%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9E%E7%8E%B0%E7%BA%A6%E6%9D%9F%E5%87%BD%E6%95%B0-toc" style="margin-left:0px;"><a href="#%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9E%E7%8E%B0%E7%BA%A6%E6%9D%9F%E5%87%BD%E6%95%B0" rel="nofollow">使用正则表达式实现约束函数</a></p> 
<p id="%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99-toc" style="margin-left:0px;"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" rel="nofollow">参考资料</a></p> 
<hr id="hr-toc"> 
<h2>写在前面</h2> 
<p>        前端开发会涉及很多输入框，通常都需要根据需求限制输入框的输入内容，其中最常用的就是element ui的el-input，本文就以el-input为例说明，但如果有其他类似的需求也可参考本文的实现方案。</p> 
<h2 id="%E6%96%B9%E6%A1%88%E4%BB%8B%E7%BB%8D">方案介绍</h2> 
<pre><code class="language-TypeScript">&lt;el-input 
    v-model="form.plan" 	
   	type="number" 
   	step="0.5" 
   	min="0"
    max="5" 
   	@keyup="proving($event)"  
   	@keyudown="proving($event)"  
   	@input="editInput($event,'plan')"  
   	oninput="if(value&gt;5)value=5;if(value&lt;0)value=0"
/&gt;</code></pre> 
<ul><li>方案一：第一~四属性共同使用 
  <ul><li>type=“number” input的原生属性，标明input框的类型</li><li>step=“0.5” input的原生属性，type=“number” 时生效， 标明输入字段的合法数字间隔（假如 step=“0.5”，则合法数字应该是 -0.5、0、0.5、1，以此类推）</li><li>min=“0” max=“5” min 属性规定输入字段所允许的最小值。 max 属性规定输入字段所允许的最大值。 min 属性与 max 属性配合使用，可创建合法值范围。</li></ul></li><li>方案二：第五/六个属性@keyup/keydown="proving($event)"，可在按键抬起或按下时触发</li></ul> 
<pre><code class="language-TypeScript">proving(e){
    var val=e.target.value;
    //限制只能输入一个小数点
    if (val.indexOf(".") != -1) {
        var str = val.substr(val.indexOf(".") + 1);
        if (str.indexOf(".") != -1) {
            val = val.substr(0, val.indexOf(".") + str.indexOf(".") + 1);
        }
    }
    e.target.value = val.replace(/[^\d^\.]+/g,'');
}</code></pre> 
<ul><li>方案三：第六个属性@input="editInput($event,‘plan’)"，当输入内容是触发，需要基于表单</li></ul> 
<pre><code class="language-TypeScript">editInput(value, name) {
    this.form[name] =
        ("" + value) // 第一步：转成字符串
        .replace(/[^\d^\.]+/g, "") // 第二步：把不是数字，不是小数点的过滤掉
        .replace(/^0+(\d)/, "$1") // 第三步：第一位0开头，0后面为数字，则过滤掉，取后面的数字
        .replace(/^\./, "0.") // 第四步：如果输入的第一位为小数点，则替换成 0. 实现自动补全
        .match(/^\d*(\.?\d{0,1})/g)[0] || ""; // 第五步：最终匹配得到结果 以数字开头，只有一个小数点，而且小数点后面只能有0到2位小数
}</code></pre> 
<ul><li>方案四：第七个属性οninput="if(value&gt;5)value=5;if(value&lt;0)value=0"，行内表达式，不能用自定义的函数</li><li>方案五：watch，监视input的输入变量</li></ul> 
<pre><code class="language-TypeScript">watch(() =&gt; form.plan, () =&gt; {
    // 约束函数
})</code></pre> 
<h2 id="%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9E%E7%8E%B0%E7%BA%A6%E6%9D%9F%E5%87%BD%E6%95%B0">使用正则表达式实现约束函数</h2> 
<pre><code class="language-TypeScript">value = value
    .replace(/[^-\d.]/g,"") // 清除'-'、"数字"和"."以外的字符
    .replace(/^\./g,"") // 第一个字符不能是'.'
    .replace(/^(0[0-9])/,"").replace(/^-(0[0-9])/,"") // 第一个字符不能是0
    .replace(/\d{1,}-|\d{1,}\.\d{1,2}-/,"") // 不能在数字后面输入-
    .replace("-.","%$%").replace(/\-\./g,"").replace("%$%","-") // -后不允许.
    .replace(".-","$#$").replace(/\.\-/g,"").replace("$#$",".") // .后不允许-
    .replace(".","$#$").replace(/\./g,"").replace("$#$",".") // 只保留第一个. 
    .replace("-","$%$").replace(/\-/g,"").replace("$%$","-") // 只保留第一个-
    .replace(/^(\d+)\.(\d\d).*$/,'$1.$2') // 最多保留两位小数
    .replace(/^(-)?(\d+)\.(\d\d\d).*$/,'$1$2.$3'); // 最多保留三位小数</code></pre> 
<h2 id="%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</h2> 
<p><a href="https://www.cnblogs.com/Ao-min/p/16664743.html" rel="nofollow" title="Element input 正则验证 数字包含正负数 小数点 只包含一个小数点 一个 '-' - Ao_min - 博客园 (cnblogs.com)">Element input 正则验证 数字包含正负数 小数点 只包含一个小数点 一个 '-' - Ao_min - 博客园 (cnblogs.com)</a></p> 
<p><a href="https://blog.csdn.net/weixin_44835297/article/details/111253150" title="el-input 限制 只能输入数字，数字大小，长度，小数点后位数以及字母e的限制_elinput限制数字-CSDN博客">el-input 限制 只能输入数字，数字大小，长度，小数点后位数以及字母e的限制_elinput限制数字-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/32773cf187f7680ac75674366f9d4696/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Web系列二十五】前后端使用proto&#43;grpc实现数据传输</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f84e3ae906683c342492a22450e3e8c7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Oracle19c Database Concepts数据库零基础随便看看</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>