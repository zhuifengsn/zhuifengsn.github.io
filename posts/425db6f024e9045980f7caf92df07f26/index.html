<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于51单片机的DS18B20温度显示 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于51单片机的DS18B20温度显示" />
<meta property="og:description" content="本讲内容：
了解温度传感器DS18B20的使用，并通过一个例程展示温度传感器DS18B20测温过程。
DS18B20简介：
DS18B20 是单线数字温度传感器，即“一线器件”，其具有独特的优点：
（1）采用单总线的接口方式 与微处理器连接时 仅需要一条口线即可实现微处理器与 DS18B20 的双向通讯。 单总线具有经济性好，抗干扰能力强，适合于恶劣环境的现场温度测量，使用方便等优点，使用户可轻松地组建传感器网络。
（2）测量温度范围宽，测量精度高 。DS18B20 的测量范围为 -55 ℃ ~&#43; 125 ℃ ； 在 -10~&#43; 85°C 范围内，精度为 ± 0.5°C 。
（3）多点组网功能 多个 DS18B20 并联在惟一的单线上，实现多点测温。
DS18B20的存储器由一个高速暂存RAM和一个非易失性、电可擦除（E2）RAM组成。
0温度的低八位数据5保留（全1）1温度的高八位数据6保留2高温阀值7保留3低位阀值8前八位CRC效验值5配置寄存器 配置寄存器：
出场设置默认R0、R1为11。也就是12位分辨率，也就是1位代表0.0625摄氏度。
DS18B20经转换所得的温度值以二字节补码形式存放在高速暂存存储器的第0和第1个字节。所以当我们只想简单的读取温度值的时候，只用读取暂存器中的第0和第1个字节就可以了。
简单的读取温度值的步骤如下：
1：跳过ROM操作
2：发送温度转换命令
3：跳过ROM操作
4：发送读取温度命令
5：读取温度值
DS18B20接口电路图：
DS18B20的初始化 ： 主机首先发出一个480－960微秒的低电平脉冲，然后释放总线变为高电平，并在随后的480微秒时间内对总线进行检测，如果有低电平出现说明总线上有器件已做出应答。若无低电平出现一直都是高电平说明总线上无器件应答。
做为从器件的DS18B20在一上电后就一直在检测总线上是否有480－960微秒的低电平出现，如果有，在总线转为高电平后等待15－60微秒后将总线电平拉低60－240微秒做出响应存在脉冲，告诉主机本器件已做好准备。若没有检测到就一直在检测等待。
sbit DS = P2^2; void dsreset(void) {
uint i;
DS=0;
i=103;
while(i&gt;0)i--;
DS=1;
i=4;
while(i&gt;0)i--;
}
主机发出各种操作命令都是向DS18B20写0和写1组成的命令字节，接收数据时也是从DS18B20读取0或1的过程。因此首先要搞清主机是如何进行写0、写1、读0和读1的。
写周期最少为60微秒，最长不超过120微秒。
写周期一开始做为主机先把总线拉低1微秒表示写周期开始。随后若主机想写0，则将总线置为低电平，若主机想写1，则将总线置为高电平，持续时间最少60微秒直至写周期结束，然后释放总线为高电平至少1微秒给总线恢复 。而DS18B20则在检测到总线被拉底后等待15微秒然后从15us到45us开始对总线采样，在采样期内总线为高电平则为1，若采样期内总线为低电平则为0。
void tmpwritebyte(uchar dat) {" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/425db6f024e9045980f7caf92df07f26/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-26T10:49:07+08:00" />
<meta property="article:modified_time" content="2022-11-26T10:49:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于51单片机的DS18B20温度显示</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"><strong>本讲内容：</strong></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      了解温度传感器DS18B20的使用，并通过一个例程展示温度传感器DS18B20测温过程。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="color:#0d0016;">DS18B20简介：</span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      DS18B20 是单线数字温度传感器，即“一线器件”，其具有独特的优点：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">    （1）采用单总线的接口方式 与微处理器连接时 仅需要一条口线即可实现微处理器与 DS18B20 的双向通讯。 单总线具有经济性好，抗干扰能力强，适合于恶劣环境的现场温度测量，使用方便等优点，使用户可轻松地组建传感器网络。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">    （2）测量温度范围宽，测量精度高 。DS18B20 的测量范围为 -55 ℃ ~+ 125 ℃ ； 在 -10~+ 85°C 范围内，精度为 ± 0.5°C 。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">    （3）多点组网功能 多个 DS18B20 并联在惟一的单线上，实现多点测温。</span></p> 
<p style="margin-left:.0001pt;text-align:center;"><span style="color:#0d0016;"><img alt="" height="206" src="https://images2.imgbox.com/75/0c/oau9dHFR_o.jpg" width="424"></span></p> 
<p><span style="color:#0d0016;">       DS18B20的存储器由一个高速暂存RAM和一个非易失性、电可擦除（E2）RAM组成。</span></p> 
<p style="text-align:center;"><img alt="" height="68" src="https://images2.imgbox.com/6a/e0/lOjc04e5_o.jpg" width="481"></p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>0</td><td style="width:195px;"><strong>温度的低八位数据</strong></td><td style="width:69px;">5</td><td style="width:172px;"><strong>保留（全1）</strong></td></tr><tr><td>1</td><td style="width:195px;"><strong>温度的高八位数据</strong></td><td style="width:69px;">6</td><td style="width:172px;"><strong>保留</strong></td></tr><tr><td>2</td><td style="width:195px;"><strong>高温阀值</strong></td><td style="width:69px;">7</td><td style="width:172px;"><strong>保留</strong></td></tr><tr><td>3</td><td style="width:195px;"><strong>低位阀值</strong></td><td style="width:69px;">8</td><td style="width:172px;"><strong>前八位CRC效验值</strong></td></tr><tr><td>5</td><td style="width:195px;"><strong>配置寄存器</strong></td><td style="width:69px;"></td><td style="width:172px;"></td></tr></tbody></table> 
<p>        <span style="color:#0d0016;">配置寄存器：</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f4/90/oO0lMEVD_o.jpg"></p> 
<p style="text-align:center;"> <img alt="" height="170" src="https://images2.imgbox.com/80/a8/CbNIdmCQ_o.jpg" width="386"></p> 
<p><span style="color:#0d0016;">       出场设置默认R0、R1为11。也就是12位分辨率，也就是1位代表0.0625摄氏度。</span></p> 
<p style="text-align:center;"><span style="color:#0d0016;"><img alt="" src="https://images2.imgbox.com/87/4c/kVAQtwoy_o.jpg"></span></p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/eb/4c/l9CiYEfM_o.jpg"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      DS18B20经转换所得的温度值以二字节补码形式存放在高速暂存存储器的第0和第1个字节。所以当我们只想简单的读取温度值的时候，只用读取暂存器中的第0和第1个字节就可以了。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      简单的读取温度值的步骤如下：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      1：跳过ROM操作</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      2：发送温度转换命令</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      3：跳过ROM操作</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      4：发送读取温度命令</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      5：读取温度值</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"><strong>DS18B20接口电路图：</strong></span></p> 
<p style="text-align:center;"><img alt="" height="285" src="https://images2.imgbox.com/61/b6/TInq0wLx_o.jpg" width="210"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"><strong>DS18B20的初始化 ： </strong></span>    </p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      主机首先发出一个480－960微秒的低电平脉冲，然后释放总线变为高电平，并在随后的480微秒时间内对总线进行检测，如果有低电平出现说明总线上有器件已做出应答。若无低电平出现一直都是高电平说明总线上无器件应答。</span></p> 
<p><span style="color:#0d0016;">      做为从器件的DS18B20在一上电后就一直在检测总线上是否有480－960微秒的低电平出现，如果有，在总线转为高电平后等待15－60微秒后将总线电平拉低60－240微秒做出响应存在脉冲，告诉主机本器件已做好准备。若没有检测到就一直在检测等待。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">sbit DS  = P2^2;  </p> 
<p style="margin-left:.0001pt;text-align:justify;">void dsreset(void)               </p> 
<p style="margin-left:.0001pt;text-align:justify;">{<!-- --></p> 
<p style="margin-left:.0001pt;text-align:justify;"> uint i;</p> 
<p style="margin-left:.0001pt;text-align:justify;"> DS=0;</p> 
<p style="margin-left:.0001pt;text-align:justify;"> i=103;</p> 
<p style="margin-left:.0001pt;text-align:justify;"> while(i&gt;0)i--;</p> 
<p style="margin-left:.0001pt;text-align:justify;"> DS=1;</p> 
<p style="margin-left:.0001pt;text-align:justify;"> i=4;</p> 
<p style="margin-left:.0001pt;text-align:justify;"> while(i&gt;0)i--;</p> 
<p>}</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/90/b9/VEzSH41e_o.jpg"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      主机发出各种操作命令都是向DS18B20写0和写1组成的命令字节，接收数据时也是从DS18B20读取0或1的过程。因此首先要搞清主机是如何进行写0、写1、读0和读1的。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">        写周期最少为60微秒，最长不超过120微秒。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">       写周期一开始做为主机先把总线拉低1微秒表示写周期开始。随后若主机想写0，则将总线置为低电平，若主机想写1，则将总线置为高电平，持续时间最少60微秒直至写周期结束，然后释放总线为高电平至少1微秒给总线恢复 。而DS18B20则在检测到总线被拉底后等待15微秒然后从15us到45us开始对总线采样，在采样期内总线为高电平则为1，若采样期内总线为低电平则为0。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">void tmpwritebyte(uchar dat)     </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uint i;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uchar j;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> bit testb;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> for(j=1;j&lt;=8;j++)</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> {<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> testb=dat&amp;0x01;        </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  dat=dat&gt;&gt;1;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  if(testb) </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  {<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   DS=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   i++;i++;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   DS=1;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   i=8;while(i&gt;0)i--;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  }</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  else</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  {<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   DS=0; </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   i=8;while(i&gt;0)i--;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   DS=1;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   i++;i++;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  }</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> }</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:center;"><span style="color:#0d0016;"><img alt="" src="https://images2.imgbox.com/8a/8a/2z7tAX3J_o.jpg"></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      对于读数据操作时序也分为读0时序和读1时序两个过程。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      读周期是从主机把单总线拉低1微秒之后就得释放单总线为高电平，以让DS18B20把数据传输到单总线上。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      作为从机DS18B20在检测到总线被拉低1微秒后，便开始送出数据，若是要送出0就把总线拉为低电平直到读周期结束。若要送出1则释放总线为高电平。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">      主机在一开始拉低总线1微秒后释放总线，然后在包括前面的拉低总线电平1微秒在内的15微秒时间内完成对总线进行采样检测，采样期内总线为低电平则确认为0。采样期内总线为高电平则确认为1。完成一个读时序过程，至少需要60微秒才能完成。</span><strong> </strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">bit tmpreadbit(void)   </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uint i;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> bit dat;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> DS=0;i++;  </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> DS=1;i++;i++;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> dat=DS;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> i=8;while(i&gt;0)i--;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> return (dat);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">uchar tmpread(void) </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uchar i,j,dat;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> dat=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> for(i=1;i&lt;=8;i++)</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> {<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  j=tmpreadbit();</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  dat=(j&lt;&lt;7)|(dat&gt;&gt;1); </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> }</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> return(dat);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:center;"><span style="color:#0d0016;"><img alt="" src="https://images2.imgbox.com/e4/bd/IgeXtaO3_o.jpg"></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">例程源代码：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">/*****************DS18B20测量温度******************* </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">*单片机型号：STC89C52RC</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">*开发环境：KEIL  </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">*功能: DS18B20测量温度，并在数码管中显示出来 </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">*********************************************************/</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">#include &lt;reg52.h&gt;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">#define uchar unsigned char</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">#define uint unsigned int</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">sbit DS=P2^2;         </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">sbit LE1=P2^6;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">sbit LE2=P2^7;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">uint temp;           </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">uchar flag1;          </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#0d0016;">unsigned char code table[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71};</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#0d0016;">unsigned char code table1[]={0xbf,0x86,0xdb,0xcf,0xe6,0xed,0xfd,0x87,0xff,0xef};</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">void delay(uint count)   </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uint i;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> while(count){i=200;while(i&gt;0)i--;count--;}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">void dsreset(void)      </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uint i;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> DS=0;i=103;while(i&gt;0)i--;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> DS=1;i=4;while(i&gt;0)i--;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">bit tmpreadbit(void)     </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uint i;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> bit dat;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> DS=0;i++;  </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> DS=1;i++;i++;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> dat=DS;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> i=8;while(i&gt;0)i--;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> return (dat);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">uchar tmpread(void) </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uchar i,j,dat;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> dat=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> for(i=1;i&lt;=8;i++)</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> {j=tmpreadbit();dat=(j&lt;&lt;7)|(dat&gt;&gt;1);}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> return(dat);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">void tmpwritebyte(uchar dat)     </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uint i;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uchar j;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> bit testb;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> for(j=1;j&lt;=8;j++)</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> {<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  testb=dat&amp;0x01;        </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  dat=dat&gt;&gt;1;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  if(testb)   </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  {<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   DS=0;i++;i++;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   DS=1;i=8;while(i&gt;0)i--;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  }</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  else</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  {<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   DS=0; i=8;while(i&gt;0)i--;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">   DS=1;i++;i++;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  }</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> }</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">void tmpchange(void)    </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> dsreset();</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> delay(1);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> tmpwritebyte(0xcc);    </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> tmpwritebyte(0x44);       </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">uint tmp()  </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> float tt;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uchar a,b;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> dsreset();</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> delay(1);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> tmpwritebyte(0xcc);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> tmpwritebyte(0xbe);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> a=tmpread();</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> b=tmpread();</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> temp=b;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> temp&lt;&lt;=8;    </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> temp=temp|a;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> tt=temp*0.0625;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> temp=tt*10+0.5;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> return temp;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">void display(uint temp)    //显示程序       </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uchar A1,A2,A2t,A3;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> A1=temp/100;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> A2t=temp%100;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> A2=A2t/10;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> A3=A2t%10;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE1=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> P0=table[A1];               //显示百位</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE1=1;LE1=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE2=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> P0=0xfe;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE2=1;LE2=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> delay(1);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE1=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> P0=table1[A2];           //显示十位</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE1=1;LE1=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE2=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> P0=0xfd;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE2=1;LE2=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> delay(1);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE1=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> P0=table[A3];               //显示个位</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE1=1;LE1=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE2=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> P0=0xfb;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> LE2=1;LE2=0;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> delay(1);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">void main()</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> uchar a;</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> do</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> {<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  tmpchange();</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">  for(a=10;a&gt;0;a--){display(tmp());}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"> } while(1);</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;"><strong>最后，求求看到的此文的小伙伴</strong></span><span style="color:#fe2c24;"><strong>点赞</strong></span><span style="color:#0d0016;"><strong>和</strong></span><span style="color:#fe2c24;"><strong>关注</strong></span><span style="color:#0d0016;"><strong>支持一下下哦。毕竟，码字不容易哦，您的支持是我最大的动力呀！！！呜呜呜</strong><strong>~~~</strong></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/78f454c9dd64b5c70a40e6e5de5949ba/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java每日一练(2)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eaf2aa753a6c4a436386d4b60d7234a0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux进程总结详解（上——初识）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>