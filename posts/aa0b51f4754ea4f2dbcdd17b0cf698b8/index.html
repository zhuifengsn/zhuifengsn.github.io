<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【设计模式-工厂方法】想象力和创造力：你考虑过自动化实现工厂吗？ - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【设计模式-工厂方法】想象力和创造力：你考虑过自动化实现工厂吗？" />
<meta property="og:description" content="无限思维-想象力和创造力：自动化实现工厂方法 前言一、《大话设计模式》对应的Java版本工厂方法类图先行：代码实现：思考升华： 二、想象力：创新型思维&#43;解决思路战略上：以无限思维的角度去想问题：部署上：将需求、问题等进行拆分：战术上：每一部分具体怎么实现：升华： 三、创造力：通过创造力加以实现！新手上路——需求1：已有算法类，写一段程序让计算机自动化生成算法工厂类以及对应的客户端类方案：扫描——扫描算法类1、 实现思路：2、类图：3、项目结构图：4、 代码： 小试牛刀——需求2：让计算机帮我们自动生成算法类、算法工厂类以及对应的客户端类，并且进行编译和运算（最终目的是要运算出结果）方案一：注册1、实现思路：2、类图：3、项目结构图：4、代码：5、运行效果： 方案二：扫描——扫描运算类包1、实现思路：2、类图：3、项目结构图：4、代码： 无限思维： 如何在程序运行过程中实时添加运算类且编译运行？目前考虑的方案：写个线程定时的去扫描代码： 继续无限思维的思考：一直扫描则会一直占用资源，那么怎么样可以即实时，又能不一直占用资源呢？方案思路：（先浅浅的透露一下吧~~ ）考虑通过事件与委托，简单的说就是考虑注册和扫描这两个方案相结合，代码还在优化中，敬请期待 ~~ 总结升华小测试：你无限思维的去思考问题了吗？ 前言 设计模式之工厂方法，你能不能通过无限思维去考虑，提出一些想象力创造力的问题：
如果后期要动态的添加无数个运算类怎么办？
我们能不能让计算机帮我们实现自动化的添加运算类？
我们程序员手动添加的类和代码，能不能让计算机帮我们自动生成代码呢？
最重要的是你会提出来这样的问题吗？
…
我们做软件开发的需要有想象力和创造力，这是需要在学习代码过程中不断的去培养和提高的一个过程：
创新型思考&#43;解决思路&#43;实现！！！
一、《大话设计模式》对应的Java版本工厂方法 类图先行： 需要注意类图的规范：类、接口以及六大关系的线:
类图中的接口：
①接口名要加上&lt;&gt;
②接口中的方法必须是斜体的
抽象类：
①抽象类的名称必须是斜体的；
②抽象类中的抽象方法必须是斜体的，非抽象方法是不用斜体的。
对于类图画图规范有需要复习或者了解的，请移步博主的博客：
链接: 类图的作用与画图规范
代码实现： 客户端代码：
/** * @Author: Ariel(huan) * @Description:客户端 * @CreateDate: 2023/3/24 22:37 */ public class Client { public static void main(String[] args) { IOperationFactory operationFactory=new OperationAddFactory(); Operation operation=operationFactory.createOperation(); operation.setNumberOne(1); operation.setNumberTwo(2); double result = operation.getResult(); System." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/aa0b51f4754ea4f2dbcdd17b0cf698b8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-26T00:54:02+08:00" />
<meta property="article:modified_time" content="2023-03-26T00:54:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【设计模式-工厂方法】想象力和创造力：你考虑过自动化实现工厂吗？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>无限思维-想象力和创造力：自动化实现工厂方法</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#Java_10" rel="nofollow">一、《大话设计模式》对应的Java版本工厂方法</a></li><li><ul><li><a href="#_11" rel="nofollow">类图先行：</a></li><li><a href="#_23" rel="nofollow">代码实现：</a></li><li><a href="#_185" rel="nofollow">思考升华：</a></li></ul> 
  </li><li><a href="#_193" rel="nofollow">二、想象力：创新型思维+解决思路</a></li><li><ul><li><a href="#_194" rel="nofollow">战略上：以无限思维的角度去想问题：</a></li><li><a href="#_198" rel="nofollow">部署上：将需求、问题等进行拆分：</a></li><li><a href="#_201" rel="nofollow">战术上：每一部分具体怎么实现：</a></li><li><a href="#_206" rel="nofollow">升华：</a></li></ul> 
  </li><li><a href="#_210" rel="nofollow">三、创造力：通过创造力加以实现！</a></li><li><ul><li><a href="#1_212" rel="nofollow">新手上路——需求1：已有算法类，写一段程序让计算机自动化生成算法工厂类以及对应的客户端类</a></li><li><ul><li><a href="#_213" rel="nofollow">方案：扫描——扫描算法类</a></li><li><ul><li><a href="#1__214" rel="nofollow">1、 实现思路：</a></li><li><a href="#2_220" rel="nofollow">2、类图：</a></li><li><a href="#3_222" rel="nofollow">3、项目结构图：</a></li><li><a href="#4__224" rel="nofollow">4、 代码：</a></li></ul> 
   </li></ul> 
   </li><li><a href="#2_679" rel="nofollow">小试牛刀——需求2：让计算机帮我们自动生成算法类、算法工厂类以及对应的客户端类，并且进行编译和运算（最终目的是要运算出结果）</a></li><li><ul><li><a href="#_680" rel="nofollow">方案一：注册</a></li><li><ul><li><ul><li><a href="#1_681" rel="nofollow">1、实现思路：</a></li><li><a href="#2_691" rel="nofollow">2、类图：</a></li><li><a href="#3_693" rel="nofollow">3、项目结构图：</a></li><li><a href="#4_695" rel="nofollow">4、代码：</a></li><li><a href="#5_969" rel="nofollow">5、运行效果：</a></li></ul> 
    </li></ul> 
    </li><li><a href="#_976" rel="nofollow">方案二：扫描——扫描运算类包</a></li><li><ul><li><ul><li><a href="#1_977" rel="nofollow">1、实现思路：</a></li><li><a href="#2_984" rel="nofollow">2、类图：</a></li><li><a href="#3_986" rel="nofollow">3、项目结构图：</a></li><li><a href="#4_988" rel="nofollow">4、代码：</a></li></ul> 
    </li></ul> 
   </li></ul> 
   </li><li><a href="#__1067" rel="nofollow">无限思维： 如何在程序运行过程中实时添加运算类且编译运行？</a></li><li><ul><li><a href="#_1069" rel="nofollow">目前考虑的方案：写个线程定时的去扫描</a></li><li><ul><li><ul><li><a href="#_1070" rel="nofollow">代码：</a></li></ul> 
    </li></ul> 
   </li></ul> 
   </li><li><a href="#_1108" rel="nofollow">继续无限思维的思考：一直扫描则会一直占用资源，那么怎么样可以即实时，又能不一直占用资源呢？</a></li><li><ul><li><a href="#___1109" rel="nofollow">方案思路：（先浅浅的透露一下吧~~ ）考虑通过事件与委托，简单的说就是考虑注册和扫描这两个方案相结合，代码还在优化中，敬请期待 ~~</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_1111" rel="nofollow">总结升华</a></li><li><ul><li><a href="#_1122" rel="nofollow">小测试：你无限思维的去思考问题了吗？</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>设计模式之工厂方法，你能不能通过无限思维去考虑，提出一些想象力创造力的问题：<br> 如果后期要动态的添加无数个运算类怎么办？<br> 我们能不能让计算机帮我们实现自动化的添加运算类？<br> 我们程序员手动添加的类和代码，能不能让计算机帮我们自动生成代码呢？<br> 最重要的是你会提出来这样的问题吗？<br> …<br> 我们做软件开发的需要有想象力和创造力，这是需要在学习代码过程中不断的去培养和提高的一个过程：<br> <strong>创新型思考+解决思路+实现！！！</strong></p> 
<h2><a id="Java_10"></a>一、《大话设计模式》对应的Java版本工厂方法</h2> 
<h3><a id="_11"></a>类图先行：</h3> 
<p><img src="https://images2.imgbox.com/ee/a1/rzDdaNRU_o.png" alt="在这里插入图片描述"><br> <strong>需要注意类图的规范：类、接口以及六大关系的线:</strong></p> 
<blockquote> 
 <p>类图中的接口：<br> ①接口名要加上&lt;&gt;<br> ②接口中的方法必须是斜体的<br> 抽象类：<br> ①抽象类的名称必须是斜体的；<br> ②抽象类中的抽象方法必须是斜体的，非抽象方法是不用斜体的。</p> 
</blockquote> 
<p>对于类图画图规范有需要复习或者了解的，请移步博主的博客：<br> 链接: <a href="https://blog.csdn.net/Ginny97/article/details/124805336?spm=1001.2014.3001.5502">类图的作用与画图规范</a></p> 
<h3><a id="_23"></a>代码实现：</h3> 
<p>客户端代码：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:客户端
 * @CreateDate: 2023/3/24 22:37
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">IOperationFactory</span> operationFactory<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">OperationAddFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Operation</span> operation<span class="token operator">=</span>operationFactory<span class="token punctuation">.</span><span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operation<span class="token punctuation">.</span><span class="token function">setNumberOne</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operation<span class="token punctuation">.</span><span class="token function">setNumberTwo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> result <span class="token operator">=</span> operation<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result:"</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运算类代码：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:抽象类-算法类
 * @CreateDate: 2023/3/24 22:24
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> numberOne<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> numberTwo<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getNumberOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> numberOne<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getNumberTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> numberTwo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNumberOne</span><span class="token punctuation">(</span><span class="token keyword">double</span> numberOne<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numberOne <span class="token operator">=</span> numberOne<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNumberTwo</span><span class="token punctuation">(</span><span class="token keyword">double</span> numberTwo<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numberTwo <span class="token operator">=</span> numberTwo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:加法类
 * @CreateDate: 2023/3/24 22:27
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationAdd</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">getNumberOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">getNumberTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:减法类
 * @CreateDate: 2023/3/24 22:28
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationSub</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">getNumberOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">getNumberTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:乘法类
 * @CreateDate: 2023/3/24 22:29
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationMul</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">getNumberOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">getNumberTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:除法类
 * @CreateDate: 2023/3/24 22:29
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationDiv</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getNumberTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token function">getNumberOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">getNumberTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"除数不可以为0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>运算工厂类代码:</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:算法工厂接口
 * @CreateDate: 2023/3/24 22:25
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IOperationFactory</span> <span class="token punctuation">{<!-- --></span>
   <span class="token class-name">Operation</span> <span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description: 创建加法类的工厂类
 * @CreateDate: 2023/3/24 22:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationAddFactory</span> <span class="token keyword">implements</span> <span class="token class-name">IOperationFactory</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Operation</span> <span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OperationAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description: 创建减法类的工厂类
 * @CreateDate: 2023/3/24 22:34
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationSubFactory</span> <span class="token keyword">implements</span> <span class="token class-name">IOperationFactory</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Operation</span> <span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OperationSub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:创建乘法类的工厂类
 * @CreateDate: 2023/3/24 22:35
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationMulFactory</span> <span class="token keyword">implements</span> <span class="token class-name">IOperationFactory</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Operation</span> <span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OperationMul</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:创建除法类的工厂类
 * @CreateDate: 2023/3/24 22:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationDivFactory</span> <span class="token keyword">implements</span> <span class="token class-name">IOperationFactory</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Operation</span> <span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OperationDiv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_185"></a>思考升华：</h3> 
<p>书本上的工厂方法，学习并思考，提出问题：<br> 工厂方法为什么叫工厂方法？简单工厂为什么叫简单工厂？<br> 在代码中怎么体现的？一定要对应到代码上，不能模棱两可。<br> 工厂方法对比简单工厂有哪些优化和好处？<br> 工厂方法的出现有哪些革命性的意义？<br> 工厂方法还存在什么问题，还可以怎么优化？<br> 工厂方法还可以怎么实现？…</p> 
<h2><a id="_193"></a>二、想象力：创新型思维+解决思路</h2> 
<h3><a id="_194"></a>战略上：以无限思维的角度去想问题：</h3> 
<p>1、后期动态的添加无数个运算类怎么办？<br> 2、能不能让计算机帮我们自动生成代码呢？<br> 3、后期动态添加的运算类能不能在程序运行过程中添加并执行运算？——不重启运行</p> 
<h3><a id="_198"></a>部署上：将需求、问题等进行拆分：</h3> 
<p>1、我们程序员去创建新的运算类、运算工厂以及Client类是一个重复有规律的过程，能不能交给程序去完成，让计算机自动生成运算类、运算工厂类或者Client可不可以？<br> 2、如果程序帮我们生成了对应的运算类、工厂以及Client我们要怎么在程序运行过程中，调用对应的运算方法进行运算呢？</p> 
<h3><a id="_201"></a>战术上：每一部分具体怎么实现：</h3> 
<p>1、我们怎么让计算机自动生成运算类、运算工厂类或者Client？——提供模板，让计算机根据模板去动态的创建<br> 2、如果程序帮我们生成了对应的运算类、工厂以及Client我们要怎么在程序运行过程中，调用对应的运算方法进行运算呢？——动态编译+反射执行<br> 3、后期动态添加的类在运行过程中添加并执行运行？——对于新增的类进行动态注册或者扫描+动态编译+反射执行</p> 
<h3><a id="_206"></a>升华：</h3> 
<p>想象力和创造力： 凡是我们能干的事情，计算机都能干；凡是软件能干的事情，硬件都能干…<br> 最重要的是你会从无限思维的角度思考问题吗？</p> 
<h2><a id="_210"></a>三、创造力：通过创造力加以实现！</h2> 
<p>一步一步思考和实现的过程如下：</p> 
<h3><a id="1_212"></a>新手上路——需求1：已有算法类，写一段程序让计算机自动化生成算法工厂类以及对应的客户端类</h3> 
<h4><a id="_213"></a>方案：扫描——扫描算法类</h4> 
<h5><a id="1__214"></a>1、 实现思路：</h5> 
<p>①通过扫描算法类包，获取到所有的算法类文件，并获取到各类名；<br> ②读取工厂类模板和客户端模板，获取到.java文件对应的模板内容；<br> ③替换模板中的模板“占位符”，替换为我们对应的算法类名和算法符号；<br> ④通过I/O输入输出流，创建新的.java文件，即算法工厂类和算法客户端类</p> 
<h5><a id="2_220"></a>2、类图：</h5> 
<h5><a id="3_222"></a>3、项目结构图：</h5> 
<p><img src="https://images2.imgbox.com/85/b3/2FVug0jY_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="4__224"></a>4、 代码：</h5> 
<p>工厂接口：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:工厂接口
 * @CreateDate: 2023/3/14 11:23
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFactory</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Operation</span> <span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>运算类-抽象类：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:算法抽象类
 * @CreateDate: 2023/3/14 11:37
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> numberA<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> numberB<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getNumberA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> numberA<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getNumberB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> numberB<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNumberA</span><span class="token punctuation">(</span><span class="token keyword">double</span> numberA<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numberA <span class="token operator">=</span> numberA<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNumberB</span><span class="token punctuation">(</span><span class="token keyword">double</span> numberB<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numberB <span class="token operator">=</span> numberB<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运算类包operation下的运算类：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:加法类
 * @CreateDate: 2023/3/14 11:51
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationAdd</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">double</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        result <span class="token operator">=</span> <span class="token function">getNumberA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getNumberB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:减法类
 * @CreateDate: 2023/3/15 19:56
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationSub</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">double</span> result<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        result<span class="token operator">=</span><span class="token function">getNumberA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">getNumberB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:乘法类
 * @CreateDate: 2023/3/15 20:01
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationMul</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">double</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        result <span class="token operator">=</span> <span class="token function">getNumberA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">getNumberB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:除法类
 * @CreateDate: 2023/3/15 19:57
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationDiv</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">double</span> result<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getNumberB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"除数不能为0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        result<span class="token operator">=</span><span class="token function">getNumberA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">getNumberB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>工厂模板：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description: 工厂模板类
 * @CreateDate: 2023/3/15 22:10
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FactoryTemplate</span> <span class="token keyword">implements</span> <span class="token class-name">IFactory</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Operation</span> <span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OperationAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这个模板里以 new OperationAdd为例</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>客户端模板：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:运算器的客户端模板类
 * @CreateDate: 2023/3/16 9:18
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationClientTemplate</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">IFactory</span> operFactory<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FactoryTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Operation</span> operation <span class="token operator">=</span> operFactory<span class="token punctuation">.</span><span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operation<span class="token punctuation">.</span><span class="token function">setNumberA</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operation<span class="token punctuation">.</span><span class="token function">setNumberB</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> result <span class="token operator">=</span> operation<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result是:"</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>程序启动的客户端：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//拿到算法类的类名集合</span>
        <span class="token class-name">ClassNameUtil</span> classUtil <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassNameUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> classNameList <span class="token operator">=</span> classUtil<span class="token punctuation">.</span><span class="token function">getClassNameList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//读取FactoryTemplate模板类.java文件，获取到内容，然后遍历classNameList进行类名的替换并指定路径生成Factory类</span>
        <span class="token class-name">String</span> operationContent <span class="token operator">=</span> <span class="token function">readTemplateContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> classNameList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> classNameList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> operationContentNew<span class="token operator">=</span> operationContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"FactoryTemplate"</span><span class="token punctuation">,</span>className<span class="token operator">+</span><span class="token string">"Factory"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"OperationAdd"</span><span class="token punctuation">,</span> className<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> filePath<span class="token operator">=</span><span class="token string">"E:\\Study\\TGB学习资料\\06设计模式研究\\李欢\\design-pattern\\newStudyHuan\\src\\com\\tfjy"</span> <span class="token operator">+</span>
                    <span class="token string">"\\architecture\\factoryAutoCreate\\operationFactory\\"</span><span class="token operator">+</span>className<span class="token operator">+</span><span class="token string">"Factory.java"</span><span class="token punctuation">;</span>
            <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span>operationContentNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//读取 OperationClientTemplate模板类文件，获取到内容，然后遍历classNameList进行类名的替换并指定路径生成 OperationClient 类</span>
        <span class="token class-name">String</span> <span class="token class-name">OperClientTemContent</span> <span class="token operator">=</span> <span class="token class-name">OperationClientTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> classNameList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> classNameList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> <span class="token class-name">OperClientTemContentNew</span><span class="token operator">=</span> <span class="token class-name">OperClientTemContent</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"OperationClientTemplate"</span><span class="token punctuation">,</span>className<span class="token operator">+</span><span class="token string">"Client"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"FactoryTemplate"</span><span class="token punctuation">,</span> className<span class="token operator">+</span><span class="token string">"Factory"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> filePath<span class="token operator">=</span><span class="token string">"E:\\Study\\TGB学习资料\\06设计模式研究\\李欢\\design-pattern\\newStudyHuan\\src\\com\\tfjy"</span> <span class="token operator">+</span>
                    <span class="token string">"\\architecture\\factoryAutoCreate\\operationClient\\"</span><span class="token operator">+</span>className<span class="token operator">+</span><span class="token string">"Client.java"</span><span class="token punctuation">;</span>
            <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span><span class="token class-name">OperClientTemContentNew</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">readTemplateContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 识别 FactoryTemplate.java文件</span>
        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\Study\\TGB学习资料\\06设计模式研究\\李欢\\design-pattern\\newStudyHuan\\src\\com\\tfjy"</span> <span class="token operator">+</span>
                <span class="token string">"\\architecture\\factoryAutoCreate\\operationFactory\\FactoryTemplate.java"</span><span class="token punctuation">;</span>
        <span class="token class-name">FileInputStream</span> fin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStreamReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>fin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedReader</span> buffReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> strTmp <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token comment">// FactoryTemplate.java文件中的文本内容</span>
        <span class="token class-name">StringBuffer</span> operationContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 读一行文字，未读取任何字符的情况下到达流末尾，则不进行输出操作</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>strTmp <span class="token operator">=</span> buffReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 识别到了所有父类和子类的文本内容</span>
            operationContent<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>strTmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            operationContent<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        buffReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> operationContent<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token class-name">OperationClientTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 识别 FactoryTemplate.java文件</span>
        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"E:\\Study\\TGB学习资料\\06设计模式研究\\李欢\\design-pattern\\newStudyHuan\\src\\com\\tfjy"</span> <span class="token operator">+</span>
                <span class="token string">"\\architecture\\factoryAutoCreate\\operationClient\\OperationClientTemplate.java"</span><span class="token punctuation">;</span>
        <span class="token class-name">FileInputStream</span> fin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStreamReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>fin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedReader</span> buffReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> strTmp <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token comment">// FactoryTemplate.java文件中的文本内容</span>
        <span class="token class-name">StringBuffer</span> operationContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 读一行文字，未读取任何字符的情况下到达流末尾，则不进行输出操作</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>strTmp <span class="token operator">=</span> buffReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 识别到了所有父类和子类的文本内容</span>
            operationContent<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>strTmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            operationContent<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        buffReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> operationContent<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>工具类：FileUtil 和 ClassNameUtil</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description: 输入输出，生成新文件的工具类
 * @CreateDate: 2023/3/16 8:46
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileUtil</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * append:将一个字符写入一个已有的文件中，通过追加的方法追加到内容的末尾；
     * @author Bool
     * @param filePath
     * @param data
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath <span class="token punctuation">,</span> <span class="token class-name">String</span> data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token class-name">String</span> s<span class="token punctuation">;</span>
        <span class="token class-name">StringBuffer</span> sb<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>

            <span class="token comment">//创建文件夹</span>
            <span class="token class-name">String</span> dirPath<span class="token operator">=</span>filePath<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>filePath<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">File</span> dir<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                dir<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>f<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                f<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token class-name">BufferedReader</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">BufferedWriter</span> output <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                output<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                output<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description: 扫描operation包下的所有类
 * @CreateDate: 2023/3/15 21:36
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassNameUtil</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> classList<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
        classList <span class="token operator">=</span> <span class="token function">getClasses</span><span class="token punctuation">(</span><span class="token string">"com.tfjy.architecture.factoryAutoCreate.operation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 从包package中获取所有的Class
     *
     * @param pack
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getClasses</span><span class="token punctuation">(</span><span class="token class-name">String</span> pack<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">// 第一个class类的集合</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> classes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 是否循环迭代</span>
        <span class="token keyword">boolean</span> recursive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取包的名字 并进行替换</span>
        <span class="token class-name">String</span> packageName <span class="token operator">=</span> pack<span class="token punctuation">;</span>
        <span class="token class-name">String</span> packageDirName <span class="token operator">=</span> packageName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token char">'.'</span><span class="token punctuation">,</span> <span class="token char">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 定义一个枚举的集合 并进行循环来处理这个目录下的things</span>
        <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span>URL<span class="token punctuation">&gt;</span></span> dirs<span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            dirs <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span>packageDirName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 循环迭代下去</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>dirs<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 获取下一个元素</span>
                <span class="token class-name">URL</span> url <span class="token operator">=</span> dirs<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 得到协议的名称</span>
                <span class="token class-name">String</span> protocol <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">getProtocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 如果是以文件的形式保存在服务器上</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>protocol<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// System.err.println("file类型的扫描");</span>
                    <span class="token comment">// 获取包的物理路径</span>
                    <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 以文件的方式扫描整个包下的文件 并添加到集合中</span>
                    <span class="token function">findAndAddClassesInPackageByFile</span><span class="token punctuation">(</span>packageName<span class="token punctuation">,</span> filePath<span class="token punctuation">,</span> recursive<span class="token punctuation">,</span> classes<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"jar"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>protocol<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 如果是jar包文件</span>
                    <span class="token comment">// 定义一个JarFile</span>
                    <span class="token comment">// System.err.println("jar类型的扫描");</span>
                    <span class="token class-name">JarFile</span> jar<span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 获取jar</span>
                        jar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">JarURLConnection</span><span class="token punctuation">)</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getJarFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 从此jar包 得到一个枚举类</span>
                        <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">JarEntry</span><span class="token punctuation">&gt;</span></span> entries <span class="token operator">=</span> jar<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 同样的进行循环迭代</span>
                        <span class="token keyword">while</span> <span class="token punctuation">(</span>entries<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            <span class="token comment">// 获取jar里的一个实体 可以是目录 和一些jar包里的其他文件 如META-INF等文件</span>
                            <span class="token class-name">JarEntry</span> entry <span class="token operator">=</span> entries<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token class-name">String</span> name <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token comment">// 如果是以/开头的</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                <span class="token comment">// 获取后面的字符串</span>
                                name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                            <span class="token comment">// 如果前半部分和定义的包名相同</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>packageDirName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                <span class="token keyword">int</span> idx <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token char">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token comment">// 如果以"/"结尾 是一个包</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                    <span class="token comment">// 获取包名 把"/"替换成"."</span>
                                    packageName <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> idx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token char">'/'</span><span class="token punctuation">,</span> <span class="token char">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                                <span class="token comment">// 如果可以迭代下去 并且是一个包</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>idx <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> recursive<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                    <span class="token comment">// 如果是一个.class文件 而且不是目录</span>
                                    <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".class"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>entry<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                        <span class="token comment">// 去掉后面的".class" 获取真正的类名</span>
                                        <span class="token class-name">String</span> className <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>packageName<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                                            <span class="token comment">// 添加到classes</span>
                                            classes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>packageName <span class="token operator">+</span> <span class="token char">'.'</span> <span class="token operator">+</span> className<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                            <span class="token comment">// log</span>
                                            <span class="token comment">// .error("添加用户自定义视图类错误</span>
                                            <span class="token comment">// 找不到此类的.class文件");</span>
                                            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                        <span class="token punctuation">}</span>
                                    <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// log.error("在扫描用户定义视图时从jar包获取文件出错");</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> classes<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

        <span class="token comment">/**
         * 以文件的形式来获取包下的所有Class
         *
         * @param packageName
         * @param packagePath
         * @param recursive
         * @param classes
         */</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">findAndAddClassesInPackageByFile</span><span class="token punctuation">(</span><span class="token class-name">String</span> packageName<span class="token punctuation">,</span> <span class="token class-name">String</span> packagePath<span class="token punctuation">,</span><span class="token keyword">final</span> <span class="token keyword">boolean</span> recursive<span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> classes<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 获取此包的目录 建立一个File</span>
            <span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>packagePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 如果不存在或者 也不是目录就直接返回</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// log.warn("用户定义包名 " + packageName + " 下没有任何文件");</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 如果存在 就获取包下的所有文件 包括目录</span>
            <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dirfiles <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 自定义过滤规则 如果可以循环(包含子目录) 或则是以.class结尾的文件(编译好的java类文件)</span>
                <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">File</span> file<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">return</span> <span class="token punctuation">(</span>recursive <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".class"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 循环所有文件</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> file <span class="token operator">:</span> dirfiles<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 如果是目录 则继续扫描</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">findAndAddClassesInPackageByFile</span><span class="token punctuation">(</span>packageName <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> recursive<span class="token punctuation">,</span>classes<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 如果是java类文件 去掉后面的.class 只留下类名</span>
                    <span class="token class-name">String</span> className <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 添加到集合中去</span>
                        <span class="token comment">// classes.add(Class.forName(packageName + '.' +</span>
                        <span class="token comment">// className));</span>
                        <span class="token comment">// 经过回复同学的提醒，这里用forName有一些不好，会触发static方法，没有使用classLoader的load干净</span>
                        classes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
                                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span>packageName <span class="token operator">+</span> <span class="token char">'.'</span> <span class="token operator">+</span> className<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// log.error("添加用户自定义视图类错误 找不到此类的.class文件");</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getClassNameList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> classNameList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ts <span class="token operator">=</span>   classList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> t<span class="token operator">:</span>ts<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> tt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> t<span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>tt<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//截取最后一个.后边的类名: 字符串.substring(字符串.lastIndexOf(".")+1)；</span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> tt<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>tt<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            classNameList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
       <span class="token keyword">return</span> classNameList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>Readme 说明：<br> 这一版实现的功能：<br> 1、通过ClassNameUtil类扫描operation包下的所有类，通过反射拿到所有的全路径类名，并通过截取获得所有运算类的类名放到集合中<br> 2、通过写两个模板，并识别模板文件内容，<br> 3、通过遍历集合中的类名，替换需要替换的类名以及内容<br> 4、通过FileUtil中的方法，替换并创建新的类文件<br> =========================================<br> 该版待优化：<br> 功能上：<br> 1、只是实现了可以自动生成对应算法类的工厂和client，并没有编译新生成的工厂类和客户端类，也正常运行运算过程<br> 2、还需要自动执行运算过程<br> 3、需要让用户输入运算符来实现 动态添加运算类、对应的预算工厂和Client<br> 4、根据用户输入的运算符来动态的运算结果<br> 代码上：<br> 1、代码重复未抽象、封装、复用<br> 2、常量未封装抽出来，应该放到配置文件中<br> ============================================<br> 注：<br> 1、实现扫描获取operation包下所有类的工具类ClassNameUtil以及里边方法都可以自行修改或替换，且涉及到的包名要修改为自己的<br> 2、程序启动的客户端类Client中涉及到绝对路径，需要修改为自己的文件路径</p> 
</blockquote> 
<h3><a id="2_679"></a>小试牛刀——需求2：让计算机帮我们自动生成算法类、算法工厂类以及对应的客户端类，并且进行编译和运算（最终目的是要运算出结果）</h3> 
<h4><a id="_680"></a>方案一：注册</h4> 
<h6><a id="1_681"></a>1、实现思路：</h6> 
<p>①让用户从控制台输入要进行的运算类的类名和运算符号<br> ②读取运算类模板（这里OperationAdd类作为运算类模板）、工厂类模板（FactoryTemplate）、运算客户端类模板（OperationClientTemplate）<br> ③将模板中的运算类名和运算符 替换为 用户输入的<br> ④生成运算类.java（MulClient）、运算工厂类.java（MulFactory）、运算客户端类.java（MulClient）<br> ⑤调用JavaCompiler（动态编译机制），将生成的三个类进行动态编译.class文件<br> ⑥通过反射执行运算客户端MulCilent中的运算方法（getResult方法）</p> 
<blockquote> 
 <p>关于动态编译机制的参考资料：<br> 链接: <a href="https://blog.csdn.net/weixin_39996256/article/details/90750318">动态编译（JavaCompiler）</a></p> 
</blockquote> 
<h6><a id="2_691"></a>2、类图：</h6> 
<h6><a id="3_693"></a>3、项目结构图：</h6> 
<p><img src="https://images2.imgbox.com/48/6a/RfaUVdZK_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="4_695"></a>4、代码：</h6> 
<p>运算抽象类（父类）：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:算法抽象类
 * @CreateDate: 2023/3/14 11:37
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> numberA<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> numberB<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getNumberA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> numberA<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getNumberB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> numberB<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNumberA</span><span class="token punctuation">(</span><span class="token keyword">double</span> numberA<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numberA <span class="token operator">=</span> numberA<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNumberB</span><span class="token punctuation">(</span><span class="token keyword">double</span> numberB<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numberB <span class="token operator">=</span> numberB<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>工厂接口：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:工厂接口
 * @CreateDate: 2023/3/14 11:23
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFactory</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Operation</span> <span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运算类模板类：（这里是OperationAdd作为模板）</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:加法类
 * @CreateDate: 2023/3/14 11:51
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationAdd</span> <span class="token keyword">extends</span> <span class="token class-name">Operation</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">double</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        result <span class="token operator">=</span> <span class="token function">getNumberA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getNumberB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运算工厂类模板：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description: 工厂模板类
 * @CreateDate: 2023/3/15 22:10
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FactoryTemplate</span> <span class="token keyword">implements</span> <span class="token class-name">IFactory</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Operation</span> <span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OperationAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运算客户端类模板：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:运算器的客户端模板类
 * @CreateDate: 2023/3/16 9:18
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperationClientTemplate</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">IFactory</span> operFactory<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FactoryTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Operation</span> operation <span class="token operator">=</span> operFactory<span class="token punctuation">.</span><span class="token function">createOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operation<span class="token punctuation">.</span><span class="token function">setNumberA</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operation<span class="token punctuation">.</span><span class="token function">setNumberB</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> result <span class="token operator">=</span> operation<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"result是:"</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>程序启动客户端：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description: 注册（触发实现）
 * @CreateDate: 2023/3/15 21:23
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>   <span class="token comment">//这里表示一直可以循环让用户在控制台输入，便于运行中用户随时多次添加运算类</span>
            <span class="token comment">//让用户输入要进行的运算</span>
            <span class="token class-name">Scanner</span> scanner<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入想要运算的算法类名（Add、Sub、Mul、Div）:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> className<span class="token operator">=</span>scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入想要运算的算法符号（+、-、*、/）:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> character<span class="token operator">=</span>scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//根据用户输入的运算，生成对应的类并编译</span>
            <span class="token function">createCompilerFile</span><span class="token punctuation">(</span>className<span class="token punctuation">,</span> character<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//反射执行</span>
            <span class="token function">reflectInvoke</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注释掉为手动</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token comment">//根据用户输入的运算，生成对应的类</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">createCompilerFile</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">,</span> <span class="token class-name">String</span> character<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//调用一个编译源码的方法，将创建出的.java文件编译成.class文件</span>
        <span class="token class-name">Compiler</span> compiler<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Compiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//扫描算法类模板 OperationAdd.java文件，生成对应的算法类</span>
        <span class="token class-name">String</span> operationContent <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">readTemplateContent</span><span class="token punctuation">(</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>OPERATION_PATH<span class="token operator">+</span><span class="token string">"\\OperationAdd.java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> operationContentNew<span class="token operator">=</span> operationContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"OperationAdd"</span><span class="token punctuation">,</span><span class="token string">"Operation"</span><span class="token operator">+</span>className<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">,</span> character<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> operationFilePath<span class="token operator">=</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>OPERATION_PATH<span class="token operator">+</span><span class="token string">"\\Operation"</span><span class="token operator">+</span>className<span class="token operator">+</span><span class="token string">".java"</span><span class="token punctuation">;</span>
        <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>operationFilePath<span class="token punctuation">,</span>operationContentNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"算法类生成："</span><span class="token operator">+</span><span class="token string">"Operation"</span><span class="token operator">+</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//调用一个编译源码的方法，将创建出的.java文件编译成.class文件</span>
        compiler<span class="token punctuation">.</span><span class="token function">compiler</span><span class="token punctuation">(</span>operationFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注释掉为手动</span>


        <span class="token comment">//扫描工厂类模板 FactoryTemplate.java文件，生成对应的算法工厂类</span>
        <span class="token class-name">String</span> operFactoryContent <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">readTemplateContent</span><span class="token punctuation">(</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>FACTORY_PATH<span class="token operator">+</span><span class="token string">"\\FactoryTemplate.java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> operFactoryContentNew<span class="token operator">=</span> operFactoryContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"FactoryTemplate"</span><span class="token punctuation">,</span>className<span class="token operator">+</span><span class="token string">"Factory"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"OperationAdd"</span><span class="token punctuation">,</span> <span class="token string">"Operation"</span><span class="token operator">+</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> operFactoryFilePath<span class="token operator">=</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>FACTORY_PATH<span class="token operator">+</span><span class="token string">"\\"</span><span class="token operator">+</span>className<span class="token operator">+</span><span class="token string">"Factory.java"</span><span class="token punctuation">;</span>
        <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>operFactoryFilePath<span class="token punctuation">,</span>operFactoryContentNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"算法工厂类生成："</span><span class="token operator">+</span>className<span class="token operator">+</span><span class="token string">"Factory"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//调用一个编译源码的方法，将创建出的.java文件编译成.class文件</span>
        compiler<span class="token punctuation">.</span><span class="token function">compiler</span><span class="token punctuation">(</span>operFactoryFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注释掉为手动</span>

        <span class="token comment">//扫描工厂类模板 OperationClientTemplate.java文件，生成对应的算法客户端类</span>
        <span class="token class-name">String</span> operClientContent <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">readTemplateContent</span><span class="token punctuation">(</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>CLIENT_PATH<span class="token operator">+</span><span class="token string">"\\OperationClientTemplate.java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> operClientContentNew<span class="token operator">=</span> operClientContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"OperationClientTemplate"</span><span class="token punctuation">,</span>className<span class="token operator">+</span><span class="token string">"Client"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"FactoryTemplate"</span><span class="token punctuation">,</span> className<span class="token operator">+</span><span class="token string">"Factory"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> operClientFilePath<span class="token operator">=</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>CLIENT_PATH<span class="token operator">+</span><span class="token string">"\\"</span><span class="token operator">+</span>className<span class="token operator">+</span><span class="token string">"Client.java"</span><span class="token punctuation">;</span>
        <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>operClientFilePath<span class="token punctuation">,</span>operClientContentNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"算法客户端生成："</span><span class="token operator">+</span>className<span class="token operator">+</span><span class="token string">"Client"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//调用一个编译源码的方法，将创建出的.java文件编译成.class文件</span>
        compiler<span class="token punctuation">.</span><span class="token function">compiler</span><span class="token punctuation">(</span>operClientFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注释掉为手动</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通过反射，执行自动生成的客户端
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">reflectInvoke</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//客户端类</span>
        <span class="token class-name">String</span> compilerClassName<span class="token operator">=</span><span class="token string">"com.tfjy.architecture.factoryAutoCreateLogon.operationClient."</span><span class="token operator">+</span>className<span class="token operator">+</span><span class="token string">"Client"</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> classLoaderClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>compilerClassName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Method</span> method <span class="token operator">=</span> classLoaderClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>涉及到的工具类：FileUtil</p> 
<pre><code class="prism language-java">
<span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:读模板文件和创建文件的工具类
 * @CreateDate: 2023/3/16 8:46
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileUtil</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 扫描模板类文件
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">readTemplateContent</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 识别 .java文件</span>
        <span class="token class-name">FileInputStream</span> fin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStreamReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>fin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedReader</span> buffReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> strTmp <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token comment">//文件中的文本内容</span>
        <span class="token class-name">StringBuffer</span> operationContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 读一行文字，未读取任何字符的情况下到达流末尾，则不进行输出操作</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>strTmp <span class="token operator">=</span> buffReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 识别到了所有父类和子类的文本内容</span>
            operationContent<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>strTmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            operationContent<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        buffReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> operationContent<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * append:将一个字符写入一个已有的文件中，通过追加的方法追加到内容的末尾；
     * @author Bool
     * @param filePath
     * @param data
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath <span class="token punctuation">,</span> <span class="token class-name">String</span> data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token class-name">String</span> s<span class="token punctuation">;</span>
        <span class="token class-name">StringBuffer</span> sb<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>

            <span class="token comment">//创建文件夹</span>
            <span class="token class-name">String</span> dirPath<span class="token operator">=</span>filePath<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>filePath<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">File</span> dir<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                dir<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//当文件不存在时，创建文件并写入内容</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>f<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                f<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token class-name">BufferedReader</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">BufferedWriter</span> output <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                output<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                output<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>编译器编译：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description：动态编译
 * @CreateDate: 2023/3/19 12:38
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Compiler</span> <span class="token keyword">extends</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">compiler</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"开始编译并运行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JavaCompiler</span> compiler <span class="token operator">=</span> <span class="token class-name">ToolProvider</span><span class="token punctuation">.</span><span class="token function">getSystemJavaCompiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> status <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"-d"</span><span class="token punctuation">,</span>
                <span class="token string">"E:\\Study\\TGB学习资料\\06设计模式研究\\李欢\\design-pattern\\out\\production\\newStudyHuan"</span><span class="token punctuation">,</span> filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"没有编译成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>路径常量类：这部分涉及到的绝对路径需要修改为自己项目实例的路径呦~~~~</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:路径常量类
 * @CreateDate: 2023/3/20 17:09
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Constant</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//算法模板类的路径</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> OPERATION_PATH<span class="token operator">=</span><span class="token string">"E:\\Study\\TGB学习资料\\06设计模式研究\\李欢\\design-pattern\\newStudyHuan\\src\\com"</span> <span class="token operator">+</span>
            <span class="token string">"\\tfjy\\architecture\\factoryAutoCreateLogon\\operation"</span><span class="token punctuation">;</span>
    <span class="token comment">//factory模板类的路径</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FACTORY_PATH<span class="token operator">=</span><span class="token string">"E:\\Study\\TGB学习资料\\06设计模式研究\\李欢\\design-pattern\\newStudyHuan"</span> <span class="token operator">+</span>
            <span class="token string">"\\src\\com\\tfjy\\architecture\\factoryAutoCreateLogon\\operationFactory"</span><span class="token punctuation">;</span>
    <span class="token comment">//client模板类的路径</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> CLIENT_PATH<span class="token operator">=</span><span class="token string">"E:\\Study\\TGB学习资料\\06设计模式研究\\李欢\\design-pattern\\newStudyHuan"</span> <span class="token operator">+</span>
            <span class="token string">"\\src\\com\\tfjy\\architecture\\factoryAutoCreateLogon\\operationClient"</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="5_969"></a>5、运行效果：</h6> 
<p><img src="https://images2.imgbox.com/2d/8a/ojYtmB6H_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_976"></a>方案二：扫描——扫描运算类包</h4> 
<h6><a id="1_977"></a>1、实现思路：</h6> 
<p>①通过扫描算法类包，获取到所有的算法类文件，并获取到各类名；<br> ②读取运算类模板（这里OperationAdd类作为运算类模板）、工厂类模板（FactoryTemplate）、运算客户端类模板（OperationClientTemplate）<br> ③将模板中的运算类名和运算符 替换为 运算类包下的扫描到的运算类名以及其运算符号<br> ④生成运算类.java（MulClient）、运算工厂类.java（MulFactory）、运算客户端类.java（MulClient）<br> ⑤调用JavaCompiler（动态编译机制），将生成的三个类进行动态编译.class文件<br> ⑥通过反射执行运算客户端MulCilent中的运算方法（getResult方法）</p> 
<h6><a id="2_984"></a>2、类图：</h6> 
<h6><a id="3_986"></a>3、项目结构图：</h6> 
<p><img src="https://images2.imgbox.com/39/e6/JZtn0j4U_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="4_988"></a>4、代码：</h6> 
<p>注：<br> 工厂接口IFactory、运算抽象类（父类）Operation、<br> 运算类模板OperationAdd、运算工厂类FactoryTemplate、运算客户端模板类OperationClientTemplate以及FileUtil类和Compiler类的代码都是一样的，不同的是程序启动客户端内的逻辑——改为了扫描（获取）包下的所有运算类：</p> 
<pre><code class="prism language-java"><span class="token comment">//程序启动客户端</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ScanApplication</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Scan</span> scan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scan<span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>核心业务类：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 扫描业务类：获取所有的运算类并生成对应的工厂类和客户端类，并且编译执行
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Scan</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> packagePath <span class="token operator">=</span> <span class="token string">"E:\\Study\\TGB学习资料\\06设计模式研究\\李欢\\design-pattern\\newStudyHuan\\src\\com\\tfjy"</span> <span class="token operator">+</span>
                <span class="token string">"\\architecture\\factoryAutoCreateSaomiao\\operation"</span><span class="token punctuation">;</span>

        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>packagePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> files <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Method</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> f <span class="token operator">:</span> files<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">String</span> fileName <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>fileName<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".java"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">String</span> fullyClassName <span class="token operator">=</span> fileName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>fileName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"com"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fileName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">".java"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> className <span class="token operator">=</span> fullyClassName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"com\\tfjy\\architecture\\factoryAutoCreateSaomiao"</span> <span class="token operator">+</span>
                            <span class="token string">"\\operation\\"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


                    <span class="token comment">//调用一个编译源码的方法，将创建出的.java文件编译成.class文件</span>
                    <span class="token class-name">String</span> operationFilePath<span class="token operator">=</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>OPERATION_PATH <span class="token operator">+</span><span class="token string">"\\"</span> <span class="token operator">+</span> className<span class="token operator">+</span><span class="token string">".java"</span><span class="token punctuation">;</span>
                    <span class="token class-name">Compiler</span> compilerOperation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Compiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    compilerOperation<span class="token punctuation">.</span><span class="token function">compiler</span><span class="token punctuation">(</span>operationFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>


                    <span class="token comment">//扫描工厂类模板 FactoryTemplate.java文件，生成对应的算法工厂类</span>
                    <span class="token class-name">String</span> operFactoryContent <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">readTemplateContent</span><span class="token punctuation">(</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>FACTORY_PATH <span class="token operator">+</span>
                            <span class="token string">"\\FactoryTemplate.java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> operFactoryContentNew <span class="token operator">=</span> operFactoryContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"FactoryTemplate"</span><span class="token punctuation">,</span> className <span class="token operator">+</span> <span class="token string">"Factory"</span>
                    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"OperationAdd"</span><span class="token punctuation">,</span> className<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> operFactoryFilePath <span class="token operator">=</span> <span class="token class-name">Constant</span><span class="token punctuation">.</span>FACTORY_PATH <span class="token operator">+</span> <span class="token string">"\\"</span> <span class="token operator">+</span> className <span class="token operator">+</span> <span class="token string">"Factory.java"</span><span class="token punctuation">;</span>
                    <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>operFactoryFilePath<span class="token punctuation">,</span> operFactoryContentNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"算法工厂类生成："</span> <span class="token operator">+</span> className <span class="token operator">+</span> <span class="token string">"Factory"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//调用一个编译源码的方法，将创建出的.java文件编译成.class文件</span>
                    <span class="token class-name">Compiler</span> compilerFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Compiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    compilerFactory<span class="token punctuation">.</span><span class="token function">compiler</span><span class="token punctuation">(</span>operFactoryFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">//扫描工厂类模板 OperationClientTemplate.java文件，生成对应的算法客户端类</span>
                    <span class="token class-name">String</span> operClientContent <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">readTemplateContent</span><span class="token punctuation">(</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>CLIENT_PATH <span class="token operator">+</span>
                            <span class="token string">"\\OperationClientTemplate.java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> operClientContentNew <span class="token operator">=</span> operClientContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"OperationClientTemplate"</span><span class="token punctuation">,</span> className <span class="token operator">+</span>
                            <span class="token string">"Client"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"FactoryTemplate"</span><span class="token punctuation">,</span> className <span class="token operator">+</span> <span class="token string">"Factory"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> operClientFilePath <span class="token operator">=</span> <span class="token class-name">Constant</span><span class="token punctuation">.</span>CLIENT_PATH <span class="token operator">+</span> <span class="token string">"\\"</span> <span class="token operator">+</span> className <span class="token operator">+</span> <span class="token string">"Client.java"</span><span class="token punctuation">;</span>
                    <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>operClientFilePath<span class="token punctuation">,</span> operClientContentNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"算法客户端生成："</span> <span class="token operator">+</span> className <span class="token operator">+</span> <span class="token string">"Client"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">//调用一个编译源码的方法，将创建出的.java文件编译成.class文件</span>
                    <span class="token class-name">Compiler</span> compilerClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Compiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    compilerClient<span class="token punctuation">.</span><span class="token function">compiler</span><span class="token punctuation">(</span>operClientFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//反射执行</span>
                    <span class="token class-name">String</span> compileClassName <span class="token operator">=</span> <span class="token string">"com.tfjy.architecture.factoryAutoCreateSaomiao.operationClient."</span> <span class="token operator">+</span> className <span class="token operator">+</span> <span class="token string">"Client"</span><span class="token punctuation">;</span>
                    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> classLoaderClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>compileClassName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//                    Object instance = classLoaderClass.getConstructor().newInstance();</span>
                    <span class="token class-name">Method</span> method <span class="token operator">=</span> classLoaderClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//                    map.put(instance,method);</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"测试"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="__1067"></a>无限思维： 如何在程序运行过程中实时添加运算类且编译运行？</h3> 
<p>如果要在运行过程中，手动添加一个运算类到operation包下，那么这个新的运算类如何在不重启项目的情况下，及时的编译并生成对象的工厂和运算客户端类，并且执行运算？？？——热加载实现动态的扩充类以及动态的编译、加载</p> 
<h4><a id="_1069"></a>目前考虑的方案：写个线程定时的去扫描</h4> 
<h6><a id="_1070"></a>代码：</h6> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:自动扫描的启动类
 * @CreateDate: 2023/3/23 8:24
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoScanApplication</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">AutoScan</span> autoScan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AutoScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        autoScan<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Author: Ariel(huan)
 * @Description:自动扫描_线程池
 * @CreateDate: 2023/3/23 8:24
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoScan</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Scan</span> scan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 需要定时执行的任务</span>
        <span class="token class-name">Runnable</span> runnable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                scan<span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">ScheduledExecutorService</span> ses <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadScheduledExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//立即执行，并且每5秒执行一次</span>
        ses<span class="token punctuation">.</span><span class="token function">scheduleAtFixedRate</span><span class="token punctuation">(</span>runnable<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="_1108"></a>继续无限思维的思考：一直扫描则会一直占用资源，那么怎么样可以即实时，又能不一直占用资源呢？</h3> 
<h4><a id="___1109"></a>方案思路：（先浅浅的透露一下吧~~ ）考虑通过事件与委托，简单的说就是考虑注册和扫描这两个方案相结合，代码还在优化中，敬请期待 ~~</h4> 
<h2><a id="_1111"></a>总结升华</h2> 
<p><strong>为什么要写一段代码，能够实现自动化工厂？</strong><br> A.重复的逻辑自动化实现，减少重复造轮子，提高效率<br> B.无限思维看待问题，变——不断增加，不停的增加，那么我们就需要经常添加新的类。<br> 无限思维不仅在于多，更在于变，在于创造。<br> 比如：一条直线两头无限延伸，会变弯曲以及相交。<br> C. 动态扩充+热加载，降低后期的开发成本（扩充和维护）——注意前期的开发成本是高的，因为要求开发者的开发素质能力很高，以及要为了后期拓展打基础所以开发成本高。<br> 什么叫维护？维护应该是用户来做的，通过用户的需求，动态的扩充和维护系统功能。<br> 可变包括两个可变：维护可变、扩充可变。<br> 把重复性有规律性的内容交给程序去完成，降低开发和维护的成本， 减少了人为操作出错的情况。</p> 
<h3><a id="_1122"></a>小测试：你无限思维的去思考问题了吗？</h3> 
<p><img src="https://images2.imgbox.com/72/44/JqHDDVUT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/10/5e/WqvatDVU_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/292e0d836f707bc21d9129b616d6fa01/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">docker 笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fe961d98f4ade6cfd4911d15183fcee9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">51单片机学习笔记-4矩阵键盘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>