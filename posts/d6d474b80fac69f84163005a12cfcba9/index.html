<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>kubectl 常用命令学习笔记 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="kubectl 常用命令学习笔记" />
<meta property="og:description" content="kubernetes kubectl 是Kubernetes的命令行工具，可以让用户通过命令行的方式对Kubernetes集群进行操作，通过它与Kubernetes进行交互。通过kubectl能够对集群本身进行管理，并能够在集群上进行容器化应用的安装部署。
kubectl 用法概述 kubectl命令行的语法如下
$ kubectl [command] [TYPE] [NAME] [flags] command：子命令，用于操作Kubernetes集群资源对象的命令，例如create、delete、describe、get、apply等。TYPE：资源对象的类型，区分大小写，能以单数形式、复数形式或者简写形式表示。例如以下3种TYPE是等价的 kubectl get pod pod1 、 kubectl get pods pod1 、 kubectl get po pod1NAME：资源对象的名称，区分大小写。如果不指定名称，则系统将返回属于TYPE的全部对象的列表，例如$ kubectl get pods将返回所有Pod的列表。flags：kubectl子命令的可选参数，例如使用“-s”指定apiserver的URL地址而不用默认值。 同时对多个资源对象进行操作
在一个命令行中也可以同时对多个资源对象进行操作，以多个 TYPE 和 NAME 的组合表示。
# 获取多个Pod的信息： kubectl get pods pod1 pod2 # 同时应用多个yaml文件，以多个-f file参数表示： kubectl create -f pod1.yaml -f rc1.yaml -f service1.yaml kubectl 输出格式 kubectl 命令可以用多种格式对结果进行显示，输出的格式通过 -o 参数指定：
$ kubectl [command] [TYPE] [NAME] -o=&lt;output_format&gt; 根据不同子命令的输出结果，可选的输出格式如下：
输出格式说明-o=custom-columns=&lt; spec&gt;根据自定义列名进行输出，以逗号分隔-o=custom-colimns-file=&lt; filename&gt;从文件中获取自定义列名进行输出-o=json以SON格式显示结果-o=jsonpath=&lt; template&gt;输出jsonpath表达式定义的字段信息-o=jsonpath-file=&lt; filename&gt;输出jsonpath表达式定义的字段信息，来源于文件-o=name仅输出资源对象的名称-o=wide输出额外信息，对于Pod,将输出Pod所在的Node名-o=yaml以yaml格式显示结果 常用的输出格式示例如下：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/d6d474b80fac69f84163005a12cfcba9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-03T11:58:46+08:00" />
<meta property="article:modified_time" content="2022-08-03T11:58:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">kubectl 常用命令学习笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="kubernetes_0"></a>kubernetes</h3> 
<p><code>kubectl</code> 是Kubernetes的命令行工具，可以让用户通过命令行的方式对Kubernetes集群进行操作，通过它与Kubernetes进行交互。通过kubectl能够对集群本身进行管理，并能够在集群上进行容器化应用的安装部署。</p> 
<h3><a id="kubectl__3"></a>kubectl 用法概述</h3> 
<p><em><strong>kubectl命令行的语法如下</strong></em></p> 
<pre><code class="prism language-powershell">$ kubectl <span class="token namespace">[command]</span> <span class="token namespace">[TYPE]</span> <span class="token namespace">[NAME]</span> <span class="token namespace">[flags]</span>
</code></pre> 
<ul><li><strong>command</strong>：子命令，用于操作Kubernetes集群资源对象的命令，例如<code>create、delete、describe、get、apply</code>等。</li><li><strong>TYPE</strong>：资源对象的类型，区分大小写，能以单数形式、复数形式或者简写形式表示。例如以下3种TYPE是等价的 <code>kubectl get pod pod1</code> 、 <code>kubectl get pods pod1</code> 、 <code>kubectl get po pod1</code></li><li><strong>NAME</strong>：资源对象的名称，区分大小写。如果不指定名称，则系统将返回属于TYPE的全部对象的列表，例如<code>$ kubectl get pods</code>将返回所有Pod的列表。</li><li><strong>flags</strong>：kubectl子命令的可选参数，例如使用“-s”指定apiserver的URL地址而不用默认值。</li></ul> 
<p><em><strong>同时对多个资源对象进行操作</strong></em><br> 在一个命令行中也可以同时对多个资源对象进行操作，以多个 TYPE 和 NAME 的组合表示。</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 获取多个Pod的信息：</span>
kubectl get pods pod1 pod2

<span class="token comment"># 同时应用多个yaml文件，以多个-f file参数表示：</span>
kubectl create <span class="token operator">-</span>f pod1<span class="token punctuation">.</span>yaml <span class="token operator">-</span>f rc1<span class="token punctuation">.</span>yaml <span class="token operator">-</span>f service1<span class="token punctuation">.</span>yaml
</code></pre> 
<h3><a id="kubectl__24"></a>kubectl 输出格式</h3> 
<p>kubectl 命令可以用多种格式对结果进行显示，输出的格式通过 -o 参数指定：</p> 
<pre><code class="prism language-powershell">$ kubectl <span class="token namespace">[command]</span> <span class="token namespace">[TYPE]</span> <span class="token namespace">[NAME]</span> <span class="token operator">-</span>o=&lt;output_format&gt;
</code></pre> 
<p>根据不同子命令的输出结果，可选的输出格式如下：</p> 
<table><thead><tr><th>输出格式</th><th>说明</th></tr></thead><tbody><tr><td>-o=custom-columns=&lt; spec&gt;</td><td>根据自定义列名进行输出，以逗号分隔</td></tr><tr><td>-o=custom-colimns-file=&lt; filename&gt;</td><td>从文件中获取自定义列名进行输出</td></tr><tr><td>-o=json</td><td>以SON格式显示结果</td></tr><tr><td>-o=jsonpath=&lt; template&gt;</td><td>输出jsonpath表达式定义的字段信息</td></tr><tr><td>-o=jsonpath-file=&lt; filename&gt;</td><td>输出jsonpath表达式定义的字段信息，来源于文件</td></tr><tr><td>-o=name</td><td>仅输出资源对象的名称</td></tr><tr><td>-o=wide</td><td>输出额外信息，对于Pod,将输出Pod所在的Node名</td></tr><tr><td>-o=yaml</td><td>以yaml格式显示结果</td></tr></tbody></table> 
<p>常用的输出格式示例如下：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 显示 Pod 的更多信息：</span>
kubectl get pod &lt;pod-name&gt; <span class="token operator">-</span>o wide

<span class="token comment"># 以 yaml 格式显示 Pod 的详细信息：</span>
kubectl get pod &lt;pod-name&gt; <span class="token operator">-</span>o yaml

<span class="token comment"># 以 JSON 格式显示 Pod 的详细信息：</span>
kubectl get pod &lt;pod-name&gt; <span class="token operator">-</span>o json

<span class="token comment"># 以自定义列名显示 Pod 的信息：</span>
kubectl get pod &lt;pod-name&gt; <span class="token operator">-</span>o=custom-columns=NAME:<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>name<span class="token punctuation">,</span>RSRC:<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>resourceVersion
</code></pre> 
<h3><a id="kubectl__58"></a>kubectl 常用操作</h3> 
<p>创建资源对象：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 根据 yaml配置文件 创建资源对象：</span>
kubectl create <span class="token operator">-</span>f <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">.</span>yaml
</code></pre> 
<p>查看资源对象：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 查看资源版本标签：</span>
kubectl api-versions

<span class="token comment"># 查看集群状态：</span>
kubectl get cs

<span class="token comment"># 查看集群节点信息：</span>
kubectl get nodes

<span class="token comment"># 查看所有Pod列表：</span>
kubectl get pods

<span class="token comment"># 查看deployment：</span>
kubectl get deploy

<span class="token comment"># 查看端口映射：</span>
kubectl get svc

<span class="token comment"># 查看指定命名空间的服务：</span>
kubectl get svc <span class="token operator">-</span>n kubectl-system

<span class="token comment"># 显示运行中的Pod、Service、Deployment以及ReplicaSet的关键信息：</span>
kubectl get all

<span class="token comment"># 查看所有的命名空间：</span>
kubectl get all <span class="token operator">--</span>all-namespace
</code></pre> 
<p>描述资源对象：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 显示Node的详细信息：</span>
kubectl describe nodes &lt;node-name&gt;

<span class="token comment"># 显示Pod的详细信息：</span>
kubectl describe pods &lt;pod-name&gt;

<span class="token comment"># 显示由RC管理的Pod的信息：</span>
kubectl describe pods &lt;rc-name&gt;
</code></pre> 
<p>删除资源对象：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 基于pod.yaml定义的名称删除Pod：</span>
kubectl delete <span class="token operator">-</span>f pod<span class="token punctuation">.</span>yaml

<span class="token comment"># 删除所有Pod：</span>
kubectl delete pods <span class="token operator">--</span>all

<span class="token comment"># 删除名称为my_pod的Pod：</span>
kubectl delete pod my_pod
</code></pre> 
<p>执行容器命令：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 执行Pod的date命令：</span>
kubectl exec &lt;pod-name&gt; date

<span class="token comment"># 指定Pod中某个容器执行date命令：</span>
kubectl exec &lt;pod-name&gt; <span class="token operator">-</span>c &lt;container-name&gt; date

<span class="token comment"># 通过bash进入容器：</span>
kubectl exec <span class="token operator">-</span>it &lt;pod-name&gt; <span class="token operator">-</span>c &lt;container-name&gt; <span class="token operator">/</span>bin/bash
kubectl exec <span class="token operator">-</span>it container-name <span class="token operator">/</span>bin/bash
</code></pre> 
<p>查看容器日志：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 查看容器输出到stdout的日志：</span>
kubectl logs &lt;pod-name&gt;

<span class="token comment"># 跟踪查看容器的日志，相当于 tail -f 命令的结果：</span>
kubectl logs <span class="token operator">-</span>f &lt;pod-name&gt; <span class="token operator">-</span>c &lt;container-name&gt;
</code></pre> 
<p>查看集群信息：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 查看集群状态信息：</span>
kubectl cluster-info
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e70887b49494868ac5fbec64c79583f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python降低pip版本</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/be5db78e222b7b910f581d307b54c2b0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">（一）、线性表的顺序存储结构链式存储结构</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>