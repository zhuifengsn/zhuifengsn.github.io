<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言数据结构之逆波兰表达式求值 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C语言数据结构之逆波兰表达式求值" />
<meta property="og:description" content="逆波兰表达式又叫做后缀表达式。在通常的表达式中，二元运算符总是置于与之相关的两个运算对象之间，这种表示法也称为中缀表示。波兰逻辑学家J.Lukasiewicz于1929年提出了另一种表示表达式的方法，按此方法，每一运算符都置于其运算对象之后，故称为后缀表示。
eg:1&#43;1
逆波兰表达式：1 1 &#43;
eg:1&#43;(2-1)*3
逆波兰表达式:1 2 1 - 3 * &#43;
实现截图：
Stack.h
#ifndef _STACK_H_ #define _STACK_H_ #include &lt;stdbool.h&gt; #define STACK_INIT_SIZE 100 //栈控件初始化大小 #define STACK_INCREMENT 10 //栈控件增量 typedef struct{ void * base;//栈底 void * top;//栈顶 int stackSize;//当前已经分配的存储空间 int elementLength; }SqStack; typedef enum{ FAILED,SUCCESS }Status; Status initStack(SqStack * pStack,int elength); void destroyStack(SqStack * pStack); void clearStack(SqStack * pStack);//将栈置空 bool stackIsEmpty(SqStack * pStack); int stackLength(const SqStack * pStack); void * getTop(SqStack * pStack); void push(SqStack * pStack,void *data);//压栈 void pop(SqStack * pStack,void *data);//出栈,若不空删除栈顶元素并将其值返回 void * get(SqStack * pStack,int i);//获取栈的第i个位置的元素 /** * 输出栈中每个元素，如果direction为正则从头到尾输出，反之从尾到头输出." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/5f5ba8b70ffead91ef52e146bf2f3998/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-02-23T21:52:32+08:00" />
<meta property="article:modified_time" content="2018-02-23T21:52:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言数据结构之逆波兰表达式求值</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>逆波兰表达式又叫做<a href="https://baike.baidu.com/item/%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F" rel="nofollow">后缀表达式</a>。在通常的表达式中，二元运算符总是置于与之相关的两个运算对象之间，这种表示法也称为中缀表示。波兰逻辑学家J.Lukasiewicz于1929年提出了另一种表示表达式的方法，按此方法，每一运算符都置于其运算对象之后，故称为后缀表示。</p> 
<p><br></p> 
<p>eg:1+1</p> 
<p>逆波兰表达式：1 1 +</p> 
<p>eg:1+(2-1)*3</p> 
<p>逆波兰表达式:1 2 1 - 3 * +</p> 
<p><br></p> 
<p>实现截图：</p> 
<p><img src="https://images2.imgbox.com/b0/56/hs8p38fy_o.png" alt=""></p> 
<p><br></p> 
<p>Stack.h</p> 
<p><br></p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'DejaVu Sans Mono';font-size:11.3pt;"><span style="color:#bbb529;">#ifndef </span><span style="color:#908b25;">_STACK_H_
</span><span style="color:#bbb529;">#define </span><span style="color:#908b25;">_STACK_H_
</span><span style="color:#908b25;">
</span><span style="color:#bbb529;">#include </span><span style="color:#6a8759;">&lt;stdbool.h&gt;
</span><span style="color:#bbb529;">#define </span><span style="color:#908b25;">STACK_INIT_SIZE </span><span style="color:#6897bb;">100 </span><span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">栈控件初始化大小
</span><span style="color:#bbb529;">#define </span><span style="color:#908b25;">STACK_INCREMENT </span><span style="color:#6897bb;">10 </span><span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">栈控件增量
</span><span style="font-family:'DejaVu Sans';color:#808080;">
</span><span style="color:#cc7832;font-weight:bold;">typedef struct</span>{
    <span style="color:#cc7832;font-weight:bold;">void </span>* <span style="color:#9373a5;">base</span><span style="color:#cc7832;">;</span><span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">栈底
</span><span style="font-family:'DejaVu Sans';color:#808080;">    </span><span style="color:#cc7832;font-weight:bold;">void </span>* <span style="color:#9373a5;">top</span><span style="color:#cc7832;">;</span><span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">栈顶
</span><span style="font-family:'DejaVu Sans';color:#808080;">    </span><span style="color:#cc7832;font-weight:bold;">int </span><span style="color:#9373a5;">stackSize</span><span style="color:#cc7832;">;</span><span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">当前已经分配的存储空间
</span><span style="font-family:'DejaVu Sans';color:#808080;">    </span><span style="color:#cc7832;font-weight:bold;">int </span><span style="color:#9373a5;">elementLength</span><span style="color:#cc7832;">;
</span>}<span style="color:#b9bcd1;">SqStack</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;font-weight:bold;">typedef enum</span>{
    <span style="color:#9876aa;font-style:italic;">FAILED</span><span style="color:#cc7832;">,</span><span style="color:#9876aa;font-style:italic;">SUCCESS
</span>}<span style="color:#b9bcd1;">Status</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#b9bcd1;">Status </span><span style="color:#ffc66d;">initStack</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">int </span>elength)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">destroyStack</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">clearStack</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack)<span style="color:#cc7832;">;</span><span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">将栈置空
</span><span style="color:#908b25;">bool </span><span style="color:#ffc66d;">stackIsEmpty</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;font-weight:bold;">int </span><span style="color:#ffc66d;">stackLength</span>(<span style="color:#cc7832;font-weight:bold;">const </span><span style="color:#b9bcd1;">SqStack </span>* pStack)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;font-weight:bold;">void </span>* <span style="color:#ffc66d;">getTop</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">push</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">void </span>*data)<span style="color:#cc7832;">;</span><span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">压栈
</span><span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">pop</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">void </span>*data)<span style="color:#cc7832;">;</span><span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">出栈</span><span style="color:#808080;">,</span><span style="font-family:'DejaVu Sans';color:#808080;">若不空删除栈顶元素并将其值返回
</span><span style="font-family:'DejaVu Sans';color:#808080;">
</span><span style="color:#cc7832;font-weight:bold;">void </span>* <span style="color:#ffc66d;">get</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">int </span>i)<span style="color:#cc7832;">;</span><span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">获取栈的第</span><span style="color:#808080;">i</span><span style="font-family:'DejaVu Sans';color:#808080;">个位置的元素
</span><span style="font-family:'DejaVu Sans';color:#808080;">
</span><span style="color:#808080;">/**
</span><span style="color:#808080;"> * </span><span style="font-family:'DejaVu Sans';color:#808080;">输出栈中每个元素，如果</span><span style="color:#808080;">direction</span><span style="font-family:'DejaVu Sans';color:#808080;">为正则从头到尾输出，反之从尾到头输出</span><span style="color:#808080;">.
</span><span style="color:#808080;"> * @param pStack
</span><span style="color:#808080;"> * @param pfun
</span><span style="color:#808080;"> * @param direction
</span><span style="color:#808080;"> */
</span><span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">stackTraverse</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">void</span>(*pfun)(<span style="color:#cc7832;font-weight:bold;">void </span>*)<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">int </span>direction)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#bbb529;">#endif</span></pre> 
<p><br></p> 
<p>Stack.c</p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'DejaVu Sans Mono';font-size:11.3pt;"><span style="color:#bbb529;">#include </span><span style="color:#6a8759;">&lt;malloc.h&gt;
</span><span style="color:#bbb529;">#include </span><span style="color:#6a8759;">&lt;memory.h&gt;
</span><span style="color:#bbb529;">#include </span><span style="color:#6a8759;">&lt;assert.h&gt;
</span><span style="color:#bbb529;">#include </span><span style="color:#6a8759;">"Stack.h"
</span><span style="color:#6a8759;">
</span><span style="color:#b9bcd1;">Status </span><span style="color:#ffc66d;">initStack</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">int </span>elength)
{

    pStack-&gt;<span style="color:#9373a5;">base </span>= malloc((<span style="color:#b9bcd1;">size_t</span>) (elength * <span style="color:#908b25;">STACK_INIT_SIZE</span>))<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">if</span>(!pStack-&gt;<span style="color:#9373a5;">base</span>)<span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">如果分配内存失败
</span><span style="font-family:'DejaVu Sans';color:#808080;">        </span><span style="color:#cc7832;font-weight:bold;">return </span><span style="color:#9876aa;font-style:italic;">FAILED</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    </span>pStack-&gt;<span style="color:#9373a5;">elementLength </span>= elength<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>pStack-&gt;<span style="color:#9373a5;">top </span>= pStack-&gt;<span style="color:#9373a5;">base</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>pStack-&gt;<span style="color:#9373a5;">stackSize </span>= <span style="color:#908b25;">STACK_INIT_SIZE</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">return </span><span style="color:#9876aa;font-style:italic;">SUCCESS</span><span style="color:#cc7832;">;
</span>}

<span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">destroyStack</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack)
{
    <span style="color:#cc7832;font-weight:bold;">if</span>(pStack)
    {
        free(pStack-&gt;<span style="color:#9373a5;">base</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>pStack-&gt;<span style="color:#9373a5;">base </span>= <span style="color:#908b25;">NULL</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>pStack-&gt;<span style="color:#9373a5;">top </span>= <span style="color:#908b25;">NULL</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>pStack-&gt;<span style="color:#9373a5;">stackSize </span>= <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

}

<span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">clearStack</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack)<span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">将栈置空
</span>{
    <span style="color:#cc7832;font-weight:bold;">if</span>(pStack)
        pStack-&gt;<span style="color:#9373a5;">top </span>= pStack-&gt;<span style="color:#9373a5;">base</span><span style="color:#cc7832;">;
</span>}

<span style="color:#908b25;">bool </span><span style="color:#ffc66d;">stackIsEmpty</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack)
{
    <span style="color:#cc7832;font-weight:bold;">if</span>(pStack)
    {
        <span style="color:#cc7832;font-weight:bold;">if</span>(pStack-&gt;<span style="color:#9373a5;">top </span>== pStack-&gt;<span style="color:#9373a5;">base</span>)
            <span style="color:#cc7832;font-weight:bold;">return </span><span style="color:#908b25;">true</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span><span style="color:#cc7832;font-weight:bold;">else
</span><span style="color:#cc7832;font-weight:bold;">            return </span><span style="color:#908b25;">false</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    <span style="color:#cc7832;font-weight:bold;">return </span><span style="color:#908b25;">false</span><span style="color:#cc7832;">;
</span>}

<span style="color:#808080;">/**
</span><span style="color:#808080;"> * </span><span style="font-family:'DejaVu Sans';color:#808080;">返回栈当前长度</span><span style="color:#808080;">
</span><span style="color:#808080;"> * </span><span style="font-family:'DejaVu Sans';color:#808080;">用栈顶减去栈底除以单个元素大小即可</span><span style="color:#808080;">.
</span><span style="color:#808080;"> * @param pStack
</span><span style="color:#808080;"> * @return
</span><span style="color:#808080;"> */
</span><span style="color:#cc7832;font-weight:bold;">int </span><span style="color:#ffc66d;">stackLength</span>(<span style="color:#cc7832;font-weight:bold;">const </span><span style="color:#b9bcd1;">SqStack </span>* pStack)
{
    <span style="color:#cc7832;font-weight:bold;">return </span>(<span style="color:#cc7832;font-weight:bold;">int</span>) (pStack-&gt;<span style="color:#9373a5;">top </span>- pStack-&gt;<span style="color:#9373a5;">base</span>)/pStack-&gt;<span style="color:#9373a5;">elementLength</span><span style="color:#cc7832;">;
</span>}

<span style="color:#cc7832;font-weight:bold;">void </span>* <span style="color:#ffc66d;">getTop</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack)
{
    <span style="color:#cc7832;font-weight:bold;">if</span>(pStack-&gt;<span style="color:#9373a5;">top </span>== pStack-&gt;<span style="color:#9373a5;">base</span>)
        <span style="color:#cc7832;font-weight:bold;">return </span><span style="color:#908b25;">NULL</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">else
</span><span style="color:#cc7832;font-weight:bold;">        return </span>pStack-&gt;<span style="color:#9373a5;">top</span><span style="color:#cc7832;">;
</span>}

<span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">push</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">void </span>*data)<span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">压栈
</span>{

    <span style="color:#cc7832;font-weight:bold;">if</span>((pStack-&gt;<span style="color:#9373a5;">top </span>- pStack-&gt;<span style="color:#9373a5;">base</span>)/pStack-&gt;<span style="color:#9373a5;">elementLength </span>&gt;= pStack-&gt;<span style="color:#9373a5;">stackSize</span>)
    {
        pStack-&gt;<span style="color:#9373a5;">base </span>=
                realloc(pStack-&gt;<span style="color:#9373a5;">base</span><span style="color:#cc7832;">,
</span><span style="color:#cc7832;">                        </span>(<span style="color:#b9bcd1;">size_t</span>) ((pStack-&gt;<span style="color:#9373a5;">stackSize </span>+ <span style="color:#908b25;">STACK_INCREMENT</span>)*pStack-&gt;<span style="color:#9373a5;">elementLength</span>))<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span><span style="color:#908b25;">assert</span>(pStack-&gt;<span style="color:#9373a5;">base </span>!= <span style="color:#908b25;">NULL</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>pStack-&gt;<span style="color:#9373a5;">top </span>= pStack-&gt;<span style="color:#9373a5;">base</span>+pStack-&gt;<span style="color:#9373a5;">stackSize</span>*pStack-&gt;<span style="color:#9373a5;">elementLength</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>pStack-&gt;<span style="color:#9373a5;">stackSize </span>+= <span style="color:#908b25;">STACK_INCREMENT</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}
    memcpy(pStack-&gt;<span style="color:#9373a5;">top</span><span style="color:#cc7832;">, </span>data<span style="color:#cc7832;">, </span>(<span style="color:#b9bcd1;">size_t</span>) pStack-&gt;<span style="color:#9373a5;">elementLength</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    </span>pStack-&gt;<span style="color:#9373a5;">top </span>= pStack-&gt;<span style="color:#9373a5;">top</span>+pStack-&gt;<span style="color:#9373a5;">elementLength</span><span style="color:#cc7832;">;
</span>}

<span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">pop</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">void </span>*data)<span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">出栈</span><span style="color:#808080;">,</span><span style="font-family:'DejaVu Sans';color:#808080;">若不空删除栈顶元素并将其值返回
</span>{
    <span style="color:#cc7832;font-weight:bold;">if</span>(pStack-&gt;<span style="color:#9373a5;">top </span>!= pStack-&gt;<span style="color:#9373a5;">base</span>)
    {
        <span style="color:#cc7832;font-weight:bold;">if</span>(data)
            memcpy(data<span style="color:#cc7832;">,</span>pStack-&gt;<span style="color:#9373a5;">top</span><span style="color:#cc7832;">,</span>(<span style="color:#b9bcd1;">size_t</span>)pStack-&gt;<span style="color:#9373a5;">elementLength</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>pStack-&gt;<span style="color:#9373a5;">top </span>-= pStack-&gt;<span style="color:#9373a5;">elementLength</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}
}


<span style="color:#cc7832;font-weight:bold;">void </span>* <span style="color:#ffc66d;">get</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">int </span>i)<span style="color:#808080;">//</span><span style="font-family:'DejaVu Sans';color:#808080;">获取栈的第</span><span style="color:#808080;">i</span><span style="font-family:'DejaVu Sans';color:#808080;">个位置的元素
</span>{
    <span style="color:#cc7832;font-weight:bold;">void </span>* pn = <span style="color:#908b25;">NULL</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">if</span>(stackLength(pStack) != <span style="color:#6897bb;">0</span>)
        pn = &amp;pStack-&gt;<span style="color:#9373a5;">base</span>[i]<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">return </span>pn<span style="color:#cc7832;">;
</span>}


<span style="color:#808080;">/**
</span><span style="color:#808080;"> *
</span><span style="color:#808080;"> * @param pStack
</span><span style="color:#808080;"> * @param pfun
</span><span style="color:#808080;"> * @param direction </span><span style="font-family:'DejaVu Sans';color:#808080;">遍历方向</span><span style="color:#808080;">
</span><span style="color:#808080;"> * @param isHex </span><span style="font-family:'DejaVu Sans';color:#808080;">是否是</span><span style="color:#808080;">16</span><span style="font-family:'DejaVu Sans';color:#808080;">进制</span><span style="color:#808080;">
</span><span style="color:#808080;"> */
</span><span style="color:#cc7832;font-weight:bold;">void </span><span style="color:#ffc66d;">stackTraverse</span>(<span style="color:#b9bcd1;">SqStack </span>* pStack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">void</span>(*pfun)(<span style="color:#cc7832;font-weight:bold;">void </span>*)<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">int </span>direction)
{
    <span style="color:#cc7832;font-weight:bold;">void </span>* pd = <span style="color:#908b25;">NULL</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">if</span>(direction &gt; <span style="color:#6897bb;">0</span>)
    {
        pd = pStack-&gt;<span style="color:#9373a5;">base</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span><span style="color:#cc7832;font-weight:bold;">while</span>(pd &lt; pStack-&gt;<span style="color:#9373a5;">top</span>)
        {
            pfun(pd)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>pd += pStack-&gt;<span style="color:#9373a5;">elementLength</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>}
    }<span style="color:#cc7832;font-weight:bold;">else</span>{
        pd = pStack-&gt;<span style="color:#9373a5;">top</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">        </span><span style="color:#cc7832;font-weight:bold;">while</span>(pd &gt; pStack-&gt;<span style="color:#9373a5;">base</span>)
        {
            pd -= pStack-&gt;<span style="color:#9373a5;">elementLength</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>pfun(pd)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>}
    }

}</pre> 
<p><br></p> 
<p>main2.c</p> 
<p><br></p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'DejaVu Sans Mono';font-size:11.3pt;"><span style="color:#bbb529;">#include </span><span style="color:#6a8759;">&lt;stdio.h&gt;
</span><span style="color:#bbb529;">#include </span><span style="color:#6a8759;">&lt;ctype.h&gt;
</span><span style="color:#bbb529;">#include </span><span style="color:#6a8759;">&lt;stdlib.h&gt;
</span><span style="color:#bbb529;">#include </span><span style="color:#6a8759;">"Stack.h"
</span><span style="color:#6a8759;">
</span><span style="color:#bbb529;">#define </span><span style="color:#908b25;">MAXBUFFER </span><span style="color:#6897bb;">10
</span><span style="color:#6897bb;">
</span><span style="color:#cc7832;font-weight:bold;">int </span><span style="color:#ffc66d;">main</span>(<span style="color:#cc7832;font-weight:bold;">void</span>)
{

    <span style="color:#b9bcd1;">SqStack </span>stack<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>initStack(&amp;stack<span style="color:#cc7832;">,</span><span style="color:#cc7832;font-weight:bold;">sizeof</span>(<span style="color:#cc7832;font-weight:bold;">double</span>))<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>printf(<span style="color:#6a8759;">"</span><span style="font-family:'DejaVu Sans';color:#6a8759;">请输入逆波兰表达式，输入</span><span style="color:#6a8759;">#</span><span style="font-family:'DejaVu Sans';color:#6a8759;">结束输入</span><span style="color:#6a8759;">.</span><span style="color:#cc7832;">\n</span><span style="color:#6a8759;">"</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">char </span>c<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">char </span>buffer[<span style="color:#908b25;">MAXBUFFER</span>]<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">double </span>a<span style="color:#cc7832;">,</span>b<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">int </span>i = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">    </span>scanf(<span style="color:#6a8759;">"</span><span style="color:#cc7832;">%c</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">,</span>&amp;c)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">while</span>(c != <span style="color:#6a8759;">'#'</span>)
    {
        <span style="color:#cc7832;font-weight:bold;">while</span>(<span style="color:#908b25;">isdigit</span>(c) || c == <span style="color:#6a8759;">'.'</span>)
        {
            buffer[i] = c<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>i++<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">            </span><span style="color:#cc7832;font-weight:bold;">if</span>(i &gt;= <span style="color:#908b25;">MAXBUFFER</span>)
            {
                fprintf(<span style="color:#908b25;">stderr</span><span style="color:#cc7832;">,</span><span style="color:#6a8759;">"</span><span style="font-family:'DejaVu Sans';color:#6a8759;">数字长度超出范围自动跳过</span><span style="color:#6a8759;">!</span><span style="color:#cc7832;">\n</span><span style="color:#6a8759;">"</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#cc7832;font-weight:bold;">return </span>-<span style="color:#6897bb;">1</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>}

            scanf(<span style="color:#6a8759;">"</span><span style="color:#cc7832;">%c</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">,</span>&amp;c)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">            </span><span style="color:#cc7832;font-weight:bold;">if</span>(c == <span style="color:#6a8759;">' '</span>)
            {
                buffer[i] = <span style="color:#6a8759;">'</span><span style="color:#cc7832;">\0</span><span style="color:#6a8759;">'</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>a = atof(buffer)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>push(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>i = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#cc7832;font-weight:bold;">break</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>}
        }

        <span style="color:#cc7832;font-weight:bold;">switch</span>(c)
        {
            <span style="color:#cc7832;font-weight:bold;">case </span><span style="color:#6a8759;">'+'</span>:
                pop(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>pop(&amp;stack<span style="color:#cc7832;">,</span>&amp;b)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>a+=b<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>push(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#cc7832;font-weight:bold;">break</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#cc7832;font-weight:bold;">case </span><span style="color:#6a8759;">'-'</span>:
                pop(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>pop(&amp;stack<span style="color:#cc7832;">,</span>&amp;b)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>a-=b<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>push(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#cc7832;font-weight:bold;">break</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#cc7832;font-weight:bold;">case </span><span style="color:#6a8759;">'*'</span>:
                pop(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>pop(&amp;stack<span style="color:#cc7832;">,</span>&amp;b)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>a*=b<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>push(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span><span style="color:#cc7832;font-weight:bold;">break</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span><span style="color:#cc7832;font-weight:bold;">case </span><span style="color:#6a8759;">'/'</span>:
                pop(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>pop(&amp;stack<span style="color:#cc7832;">,</span>&amp;b)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">
</span><span style="color:#cc7832;">                </span><span style="color:#cc7832;font-weight:bold;">if</span>(b != <span style="color:#6897bb;">0</span>){
                    a/=b<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                    </span>push(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>}<span style="color:#cc7832;font-weight:bold;">else
</span><span style="color:#cc7832;font-weight:bold;">                </span>{
                    fprintf(<span style="color:#908b25;">stderr</span><span style="color:#cc7832;">,</span><span style="color:#6a8759;">"</span><span style="font-family:'DejaVu Sans';color:#6a8759;">发生错误，除数为</span><span style="color:#6a8759;">0!</span><span style="color:#cc7832;">\n</span><span style="color:#6a8759;">"</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                    </span><span style="color:#cc7832;font-weight:bold;">return </span>-<span style="color:#6897bb;">1</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">                </span>}
                <span style="color:#cc7832;font-weight:bold;">break</span><span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>}
        scanf(<span style="color:#6a8759;">"</span><span style="color:#cc7832;">%c</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">,</span>&amp;c)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}

    pop(&amp;stack<span style="color:#cc7832;">,</span>&amp;a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>printf(<span style="color:#6a8759;">"</span><span style="font-family:'DejaVu Sans';color:#6a8759;">计算结果为：</span><span style="color:#cc7832;">%lf\n</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">,</span>a)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;font-weight:bold;">return </span><span style="color:#6897bb;">0</span><span style="color:#cc7832;">;
</span>}</pre> 
<br> 
<p><br></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bfec4dac38a17b394a61f5859ff01c31/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言实现Vigenere(维吉利亚)加密</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/05cb11da1ad38adccbca0b3cc08b2ab0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">P3313 [SDOI2014]旅行</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>