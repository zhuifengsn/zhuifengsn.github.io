<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ajax的简单表单登录异步验证 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ajax的简单表单登录异步验证" />
<meta property="og:description" content="AJAX 解释：Asynchronous JavaScript And XML 异步的JavaScript和XML
AJAX是多个技术的联合产物 是浏览器客户端上的前端技术 PHP .NET C# Python 等
注意 ：只要做web开发，B/S架构，都要学习。不管服务器编程语言
通俗理解：
看视频时，看到一半的时候，网页视频已经缓存完毕，这时候如果登录的话，只会在账户小范围等部分刷新，不用完全刷新页面。
百度地图的扩大等， 只会扩大小范围，不会涉及到全局
多个下拉列表的联动，通过ajax，可以实时更新下一个列表的内容，不需要把全部的数据发送到客户
经典案例：
Google的输入框自动补全 auto_complete
Google的谷歌地图
浏览器本身软件也是支持多线程并发的，其中的ajax请求就是一个线程，一个页面可以可以发送多个请求
传统请求：
请求只要一发送，浏览器数据全部清除，准备迎接新的页面如果上一个请求未完成，新的请求开始，则会放弃上个请求操作传统请求会刷新整个页面，会造成一定时间的空白 AJAX操作 ：
用户登录功能，输入错误的话，会在下面提示用户输入错误等，不会重新刷新页面，只刷新下面的块元素等。用户请求不会间断，用户可以继续操作。在页面的其他地方继续操作 AJAX的发送请求全靠浏览器内置的这个对象：XMLHttpRequest 对象.
使用这个对象可以在浏览器中单独起用一个线程，通过浏览器线程发送该请求，达到异步效果
base标签可以用来设置基础地址&lt;base href=&#34;&#34;&#43;&gt; ${pageCOntext.request.scheme}---协议方式 如https ${pageCOntext.request.serverName}---服务器名字 ${pageCOntext.request.serverPort}--- 服务器端口 ${pageCOntext.request.contextPath}--- 基础路径 发送ajax的请求包含四步：
创建ajax核心对象，XMLHttpRequest，（浏览器内置的，可以直接使用）；
var xhr = new XMLhttpRequest();
注册回调函数
// 程序执行到这里的时候，后面的回调函数并不会执行，只是将回调函数注册给xhr对象 // xhr的对象发生改变的时候，后面的回调函数会执行 /* * 对象在请求和响应的过程中，从 0 到 4 * 0: 请求未初始化 * 1: 服务器连接已建立 * 2: 请求已接收 * 3: 请求处理中 * 4: 请求已完成，且响应已就绪 */ xhr." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/2a41709f835cca51dd802850b4bc56fb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-10-31T16:26:05+08:00" />
<meta property="article:modified_time" content="2018-10-31T16:26:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ajax的简单表单登录异步验证</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="AJAX_0"></a>AJAX</h2> 
<hr> 
<p><strong>解释</strong>：Asynchronous JavaScript And XML 异步的JavaScript和XML</p> 
<p>AJAX是多个技术的联合产物 是<strong>浏览器客户端上的前端技术</strong> PHP .NET C# Python 等</p> 
<p><strong>注意</strong> ：只要做web开发，B/S架构，都要学习。不管服务器编程语言</p> 
<hr> 
<blockquote> 
 <p><strong>通俗理解</strong>：</p> 
 <ul><li> <p>看视频时，看到一半的时候，网页视频已经缓存完毕，这时候如果登录的话，只会在账户小范围等部分刷新，不用完全刷新页面。</p> </li><li> <p>百度地图的扩大等， 只会扩大小范围，不会涉及到全局</p> </li><li> <p>多个下拉列表的联动，通过ajax，可以实时更新下一个列表的内容，不需要把全部的数据发送到客户</p> </li></ul> 
</blockquote> 
<blockquote> 
 <p><strong>经典案例</strong>：</p> 
 <p>Google的输入框自动补全 auto_complete</p> 
 <p>Google的谷歌地图</p> 
</blockquote> 
<hr> 
<p><strong>浏览器本身软件也是支持多线程并发的，其中的ajax请求就是一个线程，一个页面可以可以发送多个请求</strong></p> 
<p><strong>传统请求：</strong></p> 
<ol><li>请求只要一发送，浏览器数据全部清除，准备迎接新的页面</li><li>如果上一个请求未完成，新的请求开始，则会放弃上个请求操作</li><li>传统请求会刷新整个页面，会造成一定时间的空白</li></ol> 
<p><strong>AJAX操作</strong> ：</p> 
<ol><li>用户登录功能，输入错误的话，会在下面提示用户输入错误等，不会重新刷新页面，只刷新下面的块元素等。</li><li>用户请求不会间断，用户可以继续操作。在页面的其他地方继续操作</li></ol> 
<hr> 
<p><strong>AJAX的发送请求全靠浏览器内置的这个对象：<mark>XMLHttpRequest</mark> 对象.</strong></p> 
<p>使用这个对象可以在浏览器中单独起用一个线程，通过浏览器线程发送该请求，达到异步效果</p> 
<pre><code class="prism language-c">base标签可以用来设置基础地址<span class="token operator">&lt;</span>base href<span class="token operator">=</span><span class="token string">""</span><span class="token operator">+</span><span class="token operator">&gt;</span>
$<span class="token punctuation">{<!-- --></span>pageCOntext<span class="token punctuation">.</span>request<span class="token punctuation">.</span>scheme<span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">-</span>协议方式 如https
$<span class="token punctuation">{<!-- --></span>pageCOntext<span class="token punctuation">.</span>request<span class="token punctuation">.</span>serverName<span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">-</span>服务器名字
$<span class="token punctuation">{<!-- --></span>pageCOntext<span class="token punctuation">.</span>request<span class="token punctuation">.</span>serverPort<span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">-</span> 服务器端口
$<span class="token punctuation">{<!-- --></span>pageCOntext<span class="token punctuation">.</span>request<span class="token punctuation">.</span>contextPath<span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">-</span> 基础路径
</code></pre> 
<p><strong>发送ajax的请求包含四步：</strong></p> 
<ol><li> <p>创建ajax核心对象，XMLHttpRequest，（浏览器内置的，可以直接使用）；</p> <p><code>var xhr = new XMLhttpRequest();</code></p> </li><li> <p>注册回调函数</p> <pre><code class="prism language-javascript"><span class="token comment">// 程序执行到这里的时候，后面的回调函数并不会执行，只是将回调函数注册给xhr对象</span>
<span class="token comment">// xhr的对象发生改变的时候，后面的回调函数会执行 </span>
<span class="token comment">/*
 * 对象在请求和响应的过程中，从 0 到 4
 * 0: 请求未初始化
 * 1: 服务器连接已建立
 * 2: 请求已接收
 * 3: 请求处理中
 * 4: 请求已完成，且响应已就绪
 */</span>
 xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     <span class="token comment">// xhr 对象改变的时候，执行该函数（回调）</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">// 服务端响应结束</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">// 200表示服务器正常响应结束</span>
             <span class="token comment">// 接收返回来的响应文本</span>
             <span class="token keyword">var</span> s <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
             <span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
             <span class="token comment">//弹出错误代码</span>
             <span class="token function">alert</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// 给按钮对象注册一个单击事件，鼠标单击时，回调函数</span>
 myBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

</code></pre> </li><li> <p>开启浏览器与服务器之间的通道</p> <pre><code class="prism language-c">method<span class="token punctuation">:</span>指定请求方式为get或post
url：请求路径
async<span class="token punctuation">:</span>true<span class="token operator">/</span>false 支持异步<span class="token operator">/</span>支持同步
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"/checkusername.do?username="</span><span class="token operator">+</span>username<span class="token punctuation">,</span>true<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 这里只开启通道，不发送请求</span>
</code></pre> </li><li> <p>发送ajax请求</p> </li></ol> 
<p><code>xhr.send();//这里才会发送请求</code></p> 
<p><strong>简单案例</strong></p> 
<pre><code class="prism language-html">用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">onblur</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkUsername(this.value);<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nameTipMsg<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
    <span class="token keyword">function</span> <span class="token function">checkUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 发送ajax请求，验证用户名是否可用</span>
    <span class="token punctuation">}</span>

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<hr> 
<h4><a id="_128"></a>表单案例</h4> 
<p><strong>JSP页面：</strong></p> 
<pre><code class="prism language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%&gt;
<span class="token doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset=UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>登陆页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
	<span class="token keyword">function</span> <span class="token function">userLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//发送ajax Post 请求完成登陆</span>
		<span class="token comment">// 获取用户名和密码</span>
		<span class="token keyword">var</span> username <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
		<span class="token keyword">var</span> password <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
		<span class="token keyword">var</span> msg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"tipMsg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		msg<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"正在进行身份认证，请稍候"</span><span class="token punctuation">;</span>
		<span class="token comment">// 创建ajax核心对象</span>
		<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 注册回调函数</span>
		xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token comment">// 接收服务器端发送的数据</span>
					<span class="token comment">// 假设服务器响应的是JSON格式的数据</span>
					<span class="token keyword">var</span> jsonString <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
					<span class="token comment">// 变成json对象</span>
					<span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"var jsonObj="</span> <span class="token operator">+</span> jsonString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// </span>
					
					<span class="token keyword">if</span> <span class="token punctuation">(</span>jsonObj<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token comment">// 登录成功</span>
						<span class="token comment">//document.location="list.do"</span>
						msg<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"登录成功"</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
						msg<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"用户名不存在或密码错误"</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 开启通道</span>
		<span class="token comment">// 注意，例如用户注册页面，表单项可以设置为true，使用异步验证.</span>
		<span class="token comment">// 但是注册按钮必须使用同步，为的是提交按钮的时候，锁住页面，不允许操作</span>
		xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"/ajax/login.do"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 发送POST请求，必须使用表单提交，只有form表单才能提交post请求</span>
		<span class="token comment">// 使用post请求必须使用以下代码</span>
		<span class="token comment">// ajax post请求的乱码 需要在这里处理，注意 字符集需要和浏览器和服务器字符集相同</span>
		xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span>
				<span class="token string">"application/x-www-form-urlencoded;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 模拟表单提交数据</span>

		<span class="token comment">// 发送请求</span>
		<span class="token comment">// post 请求数据在send 中提交 </span>
		xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"username="</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">"&amp;password="</span> <span class="token operator">+</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>




<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>用户登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>application/x-www-form-urlencoded<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
	用户名:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>40<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span> 
	密<span class="token entity" title="　">&amp;#12288;</span>码:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>40<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>登录<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>userLogin();<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tipMsg<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<p><strong>servlet 页面：</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> cn<span class="token punctuation">.</span>lenk<span class="token punctuation">.</span>ajax<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span>
<span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>ServletException<span class="token punctuation">;</span>
<span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>WebServlet<span class="token punctuation">;</span>
<span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpServlet<span class="token punctuation">;</span>
<span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpServletRequest<span class="token punctuation">;</span>
<span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpServletResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpSession<span class="token punctuation">;</span>

<span class="token keyword">import</span> cn<span class="token punctuation">.</span>lenk<span class="token punctuation">.</span>bean<span class="token punctuation">.</span>User<span class="token punctuation">;</span>

<span class="token comment">/**
 * Servlet implementation class UserLogin
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/login.do"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserLogin</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1</span>L<span class="token punctuation">;</span>
       
    <span class="token comment">/**
     * @see HttpServlet#HttpServlet()
     */</span>
    <span class="token keyword">public</span> <span class="token function">UserLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// TODO Auto-generated constructor stub</span>
    <span class="token punctuation">}</span>

	<span class="token comment">/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
	 */</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{<!-- --></span>
		request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 获取用户名和密码</span>
		String username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		String password <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		User user <span class="token operator">=</span> null<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>username <span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> password<span class="token operator">!=</span>null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"lenks"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> password<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				user<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">"河北省保定市"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"0001"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		StringBuilder json <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>user<span class="token operator">!=</span>null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			HttpSession session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
			json<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"{\"success\":true}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			json<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"{\"success\":false}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 响应json</span>
		response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
	 */</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// TODO Auto-generated method stub</span>
		<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b216e9ba5baf024f3bd9358104fbeef7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CAS算法与ABA问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f7b63566a3f41ec84f5d0e2356d5ec33/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【R语言-20行代码】牛顿迭代法求伽马函数极大似然估计法的参数估计</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>