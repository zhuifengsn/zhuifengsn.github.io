<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>js:商品排序功能(图片自己找) - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="js:商品排序功能(图片自己找)" />
<meta property="og:description" content="html &lt;!DOCTYPE html&gt; &lt;html lang=&#34;en&#34;&gt; &lt;head&gt; &lt;meta charset=&#34;UTF-8&#34;&gt; &lt;title&gt;5.index.html&lt;/title&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;css/5.reset.css&#34;&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;css/5.css&#34;&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&#34;container&#34;&gt; &lt;div class=&#34;tab&#34;&gt; &lt;div class=&#34;label&#34;&gt;排序&lt;/div&gt; &lt;ul id=&#34;tab&#34;&gt; &lt;li&gt;上架时间&lt;/li&gt; &lt;li&gt;价格&lt;/li&gt; &lt;li&gt;热度&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;ul class=&#34;goodsList&#34; id=&#34;goodsList&#34;&gt; &lt;/ul&gt; &lt;/div&gt; &lt;script src=&#34;js/5.js&#34;&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt; 复制代码 css .container{ width: 1200px; margin: auto; } .tab{ background: yellow; padding: 12px 30px; line-height: 38px; overflow: hidden; margin-bottom: 30px; } .goodsList li{ width: 200px; } .label{ float: left; padding-right: 30px; } #tab{ float: left; overflow: hidden; } #tab li{ float: left; padding: 0 30px; position: relative; } #tab li:before{ display: block; content: &#39;&#39;; width: 0; height: 0; border: 8px solid transparent; border-bottom:8px solid #333333; position: absolute; right: 0; top: 0; } #tab li." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/5d84129be6684f484227c98eb87838fe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-02-14T18:08:57+08:00" />
<meta property="article:modified_time" content="2019-02-14T18:08:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">js:商品排序功能(图片自己找)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="article-content"> 
 <h4 class="heading">html</h4> 
 <pre><code class="hljs bash copyable">&lt;!DOCTYPE html&gt;
&lt;html lang=<span class="hljs-string">"en"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span class="hljs-string">"UTF-8"</span>&gt;
    &lt;title&gt;5.index.html&lt;/title&gt;
    &lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"css/5.reset.css"</span>&gt;
    &lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"css/5.css"</span>&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class=<span class="hljs-string">"container"</span>&gt;
    &lt;div class=<span class="hljs-string">"tab"</span>&gt;
        &lt;div class=<span class="hljs-string">"label"</span>&gt;排序&lt;/div&gt;
        &lt;ul id=<span class="hljs-string">"tab"</span>&gt;
            &lt;li&gt;上架时间&lt;/li&gt;
            &lt;li&gt;价格&lt;/li&gt;
            &lt;li&gt;热度&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;

    &lt;ul class=<span class="hljs-string">"goodsList"</span> id=<span class="hljs-string">"goodsList"</span>&gt;

    &lt;/ul&gt;
&lt;/div&gt;
&lt;script src=<span class="hljs-string">"js/5.js"</span>&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
<span class="copy-code-btn">复制代码</span></code></pre> 
 <h4 class="heading">css</h4> 
 <pre><code class="hljs bash copyable">.container{
    width: 1200px;
    margin: auto;
}
.tab{
    background: yellow;
    padding: 12px 30px;
    line-height: 38px;
    overflow: hidden;
    margin-bottom: 30px;
}
.goodsList li{
    width: 200px;
}
.label{
    <span class="hljs-built_in">float</span>: left;
    padding-right: 30px;
}
<span class="hljs-comment">#tab{<!-- --></span>
    <span class="hljs-built_in">float</span>: left;
    overflow: hidden;
}
<span class="hljs-comment">#tab li{<!-- --></span>
    <span class="hljs-built_in">float</span>: left;
    padding: 0 30px;
    position: relative;
}
<span class="hljs-comment">#tab li:before{<!-- --></span>
    display: block;
    content: <span class="hljs-string">''</span>;
    width: 0;
    height: 0;
    border: 8px solid transparent;
    border-bottom:8px solid <span class="hljs-comment">#333333;</span>
    position: absolute;
    right: 0;
    top: 0;
}
<span class="hljs-comment">#tab li.up:before{<!-- --></span>
    display: block;
    content: <span class="hljs-string">''</span>;
    width: 0;
    height: 0;
    border: 8px solid transparent;
    border-bottom:8px solid red;
    position: absolute;
    right: 0;
    top: 0;
}
<span class="hljs-comment">#tab li:after{<!-- --></span>
    display: block;
    content: <span class="hljs-string">''</span>;
    width: 0;
    height: 0;
    border: 8px solid transparent;
    border-top:8px solid <span class="hljs-comment">#333333;</span>
    position: absolute;
    right: 0;
    bottom: 0;
}
<span class="hljs-comment">#tab li.down:after{<!-- --></span>
    display: block;
    content: <span class="hljs-string">''</span>;
    width: 0;
    height: 0;
    border: 8px solid transparent;
    border-top:8px solid red;
    position: absolute;
    right: 0;
    bottom: 0;
}
.goodsList li{
    <span class="hljs-built_in">float</span>: left;
    width: 200px;
    padding: 0 20px;
}
.goodsList li p{
    line-height: 28px;
    padding-top: 10px;

    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}
<span class="copy-code-btn">复制代码</span></code></pre> 
 <h4 class="heading">rest.css</h4> 
 <pre><code class="hljs bash copyable">html,body,div,ul,li,img,p{
    margin: 0;
    padding: 0;
}
body{
    background: <span class="hljs-comment">#eeeeee;</span>
}
ul{
    list-style: none;
}
img{
    width: 100%;//img是继承li的宽度
    display: block;
}
<span class="copy-code-btn">复制代码</span></code></pre> 
 <h4 class="heading">json文件</h4> 
 <pre><code class="hljs bash copyable">[
  {
    <span class="hljs-string">"id"</span>: 1,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"HUAWEI全网通版（亮黑色）"</span>,
    <span class="hljs-string">"price"</span>: 499,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2017-03-15"</span>,
    <span class="hljs-string">"hot"</span>: 198,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/1.jpg"</span>
  },
  {
    <span class="hljs-string">"id"</span>: 2,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"HUAWEI（曜石黑）"</span>,
    <span class="hljs-string">"price"</span>: 129,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2017-02-08"</span>,
    <span class="hljs-string">"hot"</span>: 25,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/2.jpg"</span>
  },
  {
    <span class="hljs-string">"id"</span>: 3,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"华为畅享7（香槟金）"</span>,
    <span class="hljs-string">"price"</span>: 895,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2017-01-25"</span>,
    <span class="hljs-string">"hot"</span>: 568,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/3.jpg"</span>
  },
  {
    <span class="hljs-string">"id"</span>: 4,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"HUAWEI全网通版（曜石黑）"</span>,
    <span class="hljs-string">"price"</span>: 1895,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2016-12-30"</span>,
    <span class="hljs-string">"hot"</span>: 20000,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/4.jpg"</span>
  },
  {
    <span class="hljs-string">"id"</span>: 5,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"HUAWEI全网通版（玫瑰金）"</span>,
    <span class="hljs-string">"price"</span>: 3587,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2016-01-30"</span>,
    <span class="hljs-string">"hot"</span>: 1032654,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/5.jpg"</span>
  },
  {
    <span class="hljs-string">"id"</span>: 6,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"华为畅享7（香槟金）"</span>,
    <span class="hljs-string">"price"</span>: 992,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2018-01-01"</span>,
    <span class="hljs-string">"hot"</span>: 1,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/6.jpg"</span>
  },
  {
    <span class="hljs-string">"id"</span>: 7,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"HUAWEI全网通版（樱语粉）"</span>,
    <span class="hljs-string">"price"</span>: 564,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2017-02-19"</span>,
    <span class="hljs-string">"hot"</span>: 400,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/7.jpg"</span>
  },
  {
    <span class="hljs-string">"id"</span>: 8,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"HUAWEI全网通版（曜石黑）"</span>,
    <span class="hljs-string">"price"</span>: 420,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2017-01-25"</span>,
    <span class="hljs-string">"hot"</span>: 240,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/8.jpg"</span>
  },
  {
    <span class="hljs-string">"id"</span>: 9,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"HUAWEI P10（钻雕金）"</span>,
    <span class="hljs-string">"price"</span>: 12,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2014-01-01"</span>,
    <span class="hljs-string">"hot"</span>: 12345678,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/9.jpg"</span>
  },
  {
    <span class="hljs-string">"id"</span>: 10,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"HUAWEI全网通版（曜石黑）"</span>,
    <span class="hljs-string">"price"</span>: 420,
    <span class="hljs-string">"time"</span>: <span class="hljs-string">"2017-01-25"</span>,
    <span class="hljs-string">"hot"</span>: 240,
    <span class="hljs-string">"img"</span>: <span class="hljs-string">"img/8.jpg"</span>
  }
]
<span class="copy-code-btn">复制代码</span></code></pre> 
 <h4 class="heading">js</h4> 
 <pre><code class="hljs bash copyable">;(<span class="hljs-function"><span class="hljs-title">function</span></span>(){
    var data=null;

    //获取选项
    var oTab=document.getElementById(<span class="hljs-string">'tab'</span>);
    var oTabs=oTab.getElementsByTagName(<span class="hljs-string">'li'</span>);

    //获取页面展示数据
    var goodsList=document.getElementById(<span class="hljs-string">'goodsList'</span>);
    var goodsListLi=goodsList.getElementsByTagName(<span class="hljs-string">'li'</span>);

    //ajax请求数据
    //1.创建一个ajax对象
    var xhr=new XMLHttpRequest;
    //2.从json中获取数据
    xhr.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'./json/product.json'</span>,<span class="hljs-literal">false</span>);
    //3.判断是否成功获取数据
    xhr.onreadystatechange=<span class="hljs-function"><span class="hljs-title">function</span></span>(){
        <span class="hljs-keyword">if</span>(xhr.readyState===4&amp;&amp;xhr.status===200){
          data=JSON.parse(xhr.responseText);//正常返回的是JSON格式的字符串,但是我们要用JSON格式的字符串,所以JSON.parse()一下
        }
    };
    xhr.send(null);
    console.log(data);//返回JSON格式的对象
    
    //绑定数据,渲染数据
    var str = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">for</span> (var i = 0; i &lt; data.length; i++) {
        console.log(data);
        var item = data[i];

        str+=`&lt;li data-time=<span class="hljs-string">"<span class="hljs-variable">${item.time}</span>"</span> data-price=<span class="hljs-string">"<span class="hljs-variable">${item.price}</span>"</span> data-hot=<span class="hljs-string">"<span class="hljs-variable">${item.hot}</span>"</span>&gt;
                  &lt;img src=<span class="hljs-string">"<span class="hljs-variable">${item.img}</span>"</span> alt=<span class="hljs-string">""</span>&gt;
                  &lt;p&gt;<span class="hljs-variable">${item.title}</span>&lt;/p&gt;
                  &lt;p&gt;上架时间: <span class="hljs-variable">${item.time}</span>&lt;/p&gt;
                  &lt;p&gt;价格: <span class="hljs-variable">${item.price}</span>&lt;/p&gt;
                  &lt;p&gt;热度: <span class="hljs-variable">${item.hot}</span>&lt;/p&gt;
&lt;/li&gt;`
    }
    goodsList.innerHTML = str;

    <span class="hljs-keyword">for</span>(var i=0;i&lt;oTabs.length;i++){
        var tabLi=oTabs[i];

        tabLi.flag=-1;

        tabLi.ind=i;
        //console.log(i);//索引是0 1 2
        //自定义属性flag
        tabLi.onclick=<span class="hljs-function"><span class="hljs-title">function</span></span>(){
            //console.log(i);索引已经变成3了,要在onclick外面存个索引
            //console.log(this);点哪个哪个就是oTabs中的哪个li
            this.flag*=-1;//点击的时候,tabLi.flag为正1,就让它按从小到大排序

            //切换选项
            switchTab.call(this);

            // 排序
            sortGoods.call(this);
        }
    }

    // 给商品排序
    <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">sortGoods</span></span>(){
        // oGoods.sort();
        oGoods = Array.prototype.slice.call(goodsListLi);

        var that = this;

        oGoods.sort(<span class="hljs-keyword">function</span>(a, b){
            // that.index; // 0，上架时间，1价格； 2、热度
            // a,b是数组的相邻两项
            var aProp = null;
            var bProp = null;

            <span class="hljs-keyword">if</span>(that.ind == 0){
                aProp = a.getAttribute(<span class="hljs-string">"data-time"</span>).replace(/-/g, <span class="hljs-string">""</span>);
                bProp = b.getAttribute(<span class="hljs-string">"data-time"</span>).replace(/-/g, <span class="hljs-string">""</span>);
            }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(that.ind == 1){
                aProp = a.getAttribute(<span class="hljs-string">"data-price"</span>);
                bProp = b.getAttribute(<span class="hljs-string">"data-price"</span>);
            }<span class="hljs-keyword">else</span>{
                aProp = a.getAttribute(<span class="hljs-string">"data-hot"</span>);
                bProp = b.getAttribute(<span class="hljs-string">"data-hot"</span>);
            }

            <span class="hljs-built_in">return</span> that.flag*(aProp-bProp);
        });

        // 将排好序的元素渲染到页面上
        var oFragment = document.createDocumentFragment();
        <span class="hljs-keyword">for</span>(var i = 0; i &lt; oGoods.length; i++){
            var item = oGoods[i];
            // dom映射
            oFragment.appendChild(item)
        }
        goodsList.appendChild(oFragment);
    };

    <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">switchTab</span></span>() {
        // 先要清除所有的li上的三角的样式
        <span class="hljs-keyword">for</span> (var j = 0; j &lt; oTabs.length; j++) {
            <span class="hljs-keyword">if</span> (oTabs[j] !== this) {
                oTabs[j].classList.remove(<span class="hljs-string">"up"</span>);
                oTabs[j].classList.remove(<span class="hljs-string">"down"</span>);
                oTabs[j].flag = -1;
            }
        }

        // 然后再根据this.flag给this添加三角的样式
        <span class="hljs-keyword">if</span> (this.flag === 1) {//1
            this.classList.add(<span class="hljs-string">"up"</span>);
            this.classList.remove(<span class="hljs-string">"down"</span>);
        } <span class="hljs-keyword">else</span> {//-1
            this.classList.add(<span class="hljs-string">"down"</span>);
            this.classList.remove(<span class="hljs-string">"up"</span>);
        }
    };
})();
<span class="copy-code-btn">复制代码</span></code></pre> 
 <p></p> 
 <figure> 
  <figcaption></figcaption> 
 </figure> 
 <p></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/566010d3e1bc289378dfe227808d100a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">[SDOI2009]晨跑</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/223096f0e54ed625f7f4c70696486cec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">BitmapData类</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>