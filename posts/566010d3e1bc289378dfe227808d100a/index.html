<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[SDOI2009]晨跑 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[SDOI2009]晨跑" />
<meta property="og:description" content="这道题是一个很裸的费用流题目。
一般点之过一次的套路就是拆点连边。
其他的模拟下就水过去了。
1 #include &lt;bits/stdc&#43;&#43;.h&gt; 2 3 using namespace std; 4 5 #define re register 6 #define rep(i, a, b) for (re int i = a; i &lt;= b; &#43;&#43;i) 7 #define repd(i, a, b) for (re int i = a; i &gt;= b; --i) 8 #define maxx(a, b) a = max(a, b); 9 #define minn(a, b) a = min(a, b); 10 #define LL long long 11 #define INF (1 &lt;&lt; 30) 12 13 inline int read() { 14 int w = 0, f = 1; char c = getchar(); 15 while (!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/566010d3e1bc289378dfe227808d100a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-02-12T22:48:00+08:00" />
<meta property="article:modified_time" content="2019-02-12T22:48:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[SDOI2009]晨跑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>这道题是一个很裸的费用流题目。</p> 
 <p>一般点之过一次的套路就是拆点连边。</p> 
 <p>其他的模拟下就水过去了。</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#008080;"> 1</span> #include &lt;bits/stdc++.h&gt;
<span style="color:#008080;"> 2</span> 
<span style="color:#008080;"> 3</span> <span style="color:#0000ff;">using</span> <span style="color:#0000ff;">namespace</span><span style="color:#000000;"> std;
</span><span style="color:#008080;"> 4</span> 
<span style="color:#008080;"> 5</span> <span style="color:#0000ff;">#define</span> re register
<span style="color:#008080;"> 6</span> <span style="color:#0000ff;">#define</span> rep(i, a, b) for (re int i = a; i &lt;= b; ++i)
<span style="color:#008080;"> 7</span> <span style="color:#0000ff;">#define</span> repd(i, a, b) for (re int i = a; i &gt;= b; --i)
<span style="color:#008080;"> 8</span> <span style="color:#0000ff;">#define</span> maxx(a, b) a = max(a, b);
<span style="color:#008080;"> 9</span> <span style="color:#0000ff;">#define</span> minn(a, b) a = min(a, b);
<span style="color:#008080;">10</span> <span style="color:#0000ff;">#define</span> LL long long
<span style="color:#008080;">11</span> <span style="color:#0000ff;">#define</span> INF (1 &lt;&lt; 30)
<span style="color:#008080;">12</span> 
<span style="color:#008080;">13</span> inline <span style="color:#0000ff;">int</span><span style="color:#000000;"> read() {
</span><span style="color:#008080;">14</span>     <span style="color:#0000ff;">int</span> w = <span style="color:#800080;">0</span>, f = <span style="color:#800080;">1</span>; <span style="color:#0000ff;">char</span> c =<span style="color:#000000;"> getchar();
</span><span style="color:#008080;">15</span>     <span style="color:#0000ff;">while</span> (!isdigit(c)) f = c == <span style="color:#800000;">'</span><span style="color:#800000;">-</span><span style="color:#800000;">'</span> ? -<span style="color:#800080;">1</span> : f, c =<span style="color:#000000;"> getchar();
</span><span style="color:#008080;">16</span>     <span style="color:#0000ff;">while</span> (isdigit(c)) w = (w &lt;&lt; <span style="color:#800080;">3</span>) + (w &lt;&lt; <span style="color:#800080;">1</span>) + (c ^ <span style="color:#800000;">'</span><span style="color:#800000;">0</span><span style="color:#800000;">'</span>), c =<span style="color:#000000;"> getchar();
</span><span style="color:#008080;">17</span>     <span style="color:#0000ff;">return</span> w *<span style="color:#000000;"> f;
</span><span style="color:#008080;">18</span> <span style="color:#000000;">}
</span><span style="color:#008080;">19</span> 
<span style="color:#008080;">20</span> <span style="color:#0000ff;">const</span> <span style="color:#0000ff;">int</span> maxn = <span style="color:#800080;">200</span> + <span style="color:#800080;">10</span>, maxm = <span style="color:#800080;">20000</span> + <span style="color:#800080;">10</span><span style="color:#000000;">;
</span><span style="color:#008080;">21</span> 
<span style="color:#008080;">22</span> <span style="color:#0000ff;">struct</span><span style="color:#000000;"> Edge {
</span><span style="color:#008080;">23</span>     <span style="color:#0000ff;">int</span><span style="color:#000000;"> u, v, c, f, w, pre;
</span><span style="color:#008080;">24</span> <span style="color:#000000;">};
</span><span style="color:#008080;">25</span> 
<span style="color:#008080;">26</span> <span style="color:#0000ff;">int</span> mincost =<span style="color:#000000;"> INF;
</span><span style="color:#008080;">27</span> 
<span style="color:#008080;">28</span> <span style="color:#0000ff;">struct</span><span style="color:#000000;"> Graph {
</span><span style="color:#008080;">29</span>     Edge ed[maxm &lt;&lt; <span style="color:#800080;">2</span><span style="color:#000000;">];
</span><span style="color:#008080;">30</span>     <span style="color:#0000ff;">int</span> n, m, G[maxn &lt;&lt; <span style="color:#800080;">1</span><span style="color:#000000;">];
</span><span style="color:#008080;">31</span>     <span style="color:#0000ff;">void</span> init(<span style="color:#0000ff;">int</span><span style="color:#000000;"> n) {
</span><span style="color:#008080;">32</span>         <span style="color:#0000ff;">this</span>-&gt;n =<span style="color:#000000;"> n;
</span><span style="color:#008080;">33</span>         m = <span style="color:#800080;">1</span><span style="color:#000000;">;
</span><span style="color:#008080;">34</span>         memset(G, <span style="color:#800080;">0</span>, <span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(G));
</span><span style="color:#008080;">35</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">36</span>     <span style="color:#0000ff;">void</span> add(<span style="color:#0000ff;">int</span> u, <span style="color:#0000ff;">int</span> v, <span style="color:#0000ff;">int</span> c, <span style="color:#0000ff;">int</span><span style="color:#000000;"> w) {
</span><span style="color:#008080;">37</span>         ed[++m] = (Edge){u, v, c, <span style="color:#800080;">0</span><span style="color:#000000;">, w, G[u]};
</span><span style="color:#008080;">38</span>         G[u] =<span style="color:#000000;"> m;
</span><span style="color:#008080;">39</span>         ed[++m] = (Edge){v, u, <span style="color:#800080;">0</span>, <span style="color:#800080;">0</span>, -<span style="color:#000000;">w, G[v]};
</span><span style="color:#008080;">40</span>         G[v] =<span style="color:#000000;"> m;
</span><span style="color:#008080;">41</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">42</span>     <span style="color:#0000ff;">int</span> a[maxn &lt;&lt; <span style="color:#800080;">1</span>], d[maxn &lt;&lt; <span style="color:#800080;">1</span>], p[maxn &lt;&lt; <span style="color:#800080;">1</span>], inq[maxn &lt;&lt; <span style="color:#800080;">1</span><span style="color:#000000;">];
</span><span style="color:#008080;">43</span>     <span style="color:#0000ff;">int</span><span style="color:#000000;"> s, t;
</span><span style="color:#008080;">44</span>     queue&lt;<span style="color:#0000ff;">int</span>&gt;<span style="color:#000000;"> Q;
</span><span style="color:#008080;">45</span>     <span style="color:#0000ff;">bool</span> spfa(<span style="color:#0000ff;">int</span> &amp;flow, <span style="color:#0000ff;">int</span> &amp;<span style="color:#000000;">cost) {
</span><span style="color:#008080;">46</span>         memset(inq, <span style="color:#800080;">0</span>, <span style="color:#0000ff;">sizeof</span><span style="color:#000000;">(inq));
</span><span style="color:#008080;">47</span>         rep(i, <span style="color:#800080;">1</span>, n) d[i] =<span style="color:#000000;"> INF;
</span><span style="color:#008080;">48</span>         d[s] = <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;">49</span>         a[s] =<span style="color:#000000;"> INF;
</span><span style="color:#008080;">50</span>         Q.push(s); inq[s] = <span style="color:#800080;">1</span><span style="color:#000000;">;
</span><span style="color:#008080;">51</span>         <span style="color:#0000ff;">while</span> (!<span style="color:#000000;">Q.empty()) {
</span><span style="color:#008080;">52</span>             <span style="color:#0000ff;">int</span> u = Q.front(); Q.pop(); inq[u] = <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;">53</span>             <span style="color:#0000ff;">for</span> (register <span style="color:#0000ff;">int</span> i = G[u]; i; i =<span style="color:#000000;"> ed[i].pre) {
</span><span style="color:#008080;">54</span>                 Edge &amp;e =<span style="color:#000000;"> ed[i];
</span><span style="color:#008080;">55</span>                 <span style="color:#0000ff;">if</span> (e.f &lt; e.c &amp;&amp; d[u] + e.w &lt;<span style="color:#000000;"> d[e.v]) {
</span><span style="color:#008080;">56</span>                     d[e.v] = d[u] +<span style="color:#000000;"> e.w;
</span><span style="color:#008080;">57</span>                     a[e.v] = min(a[u], e.c-<span style="color:#000000;">e.f);
</span><span style="color:#008080;">58</span>                     p[e.v] =<span style="color:#000000;"> i;
</span><span style="color:#008080;">59</span>                     <span style="color:#0000ff;">if</span> (!inq[e.v]) Q.push(e.v), inq[e.v] = <span style="color:#800080;">1</span><span style="color:#000000;">;
</span><span style="color:#008080;">60</span> <span style="color:#000000;">                }
</span><span style="color:#008080;">61</span> <span style="color:#000000;">            }
</span><span style="color:#008080;">62</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">63</span>         <span style="color:#0000ff;">if</span> (d[t] == INF) <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">false</span><span style="color:#000000;">;
</span><span style="color:#008080;">64</span>         flow +=<span style="color:#000000;"> a[t];
</span><span style="color:#008080;">65</span>         cost += a[t] *<span style="color:#000000;"> d[t];
</span><span style="color:#008080;">66</span>         <span style="color:#0000ff;">for</span> (register <span style="color:#0000ff;">int</span> i = p[t]; i; i =<span style="color:#000000;"> p[ed[i].u]) {
</span><span style="color:#008080;">67</span>             ed[i].f +=<span style="color:#000000;"> a[t];
</span><span style="color:#008080;">68</span>             ed[i^<span style="color:#800080;">1</span>].f -=<span style="color:#000000;"> a[t];
</span><span style="color:#008080;">69</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">70</span>         <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">true</span><span style="color:#000000;">;
</span><span style="color:#008080;">71</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">72</span>     <span style="color:#0000ff;">int</span> mcmf(<span style="color:#0000ff;">int</span> s, <span style="color:#0000ff;">int</span> t, <span style="color:#0000ff;">int</span> &amp;<span style="color:#000000;">cost) {
</span><span style="color:#008080;">73</span>         <span style="color:#0000ff;">this</span>-&gt;s = s, <span style="color:#0000ff;">this</span>-&gt;t =<span style="color:#000000;"> t;
</span><span style="color:#008080;">74</span>         <span style="color:#0000ff;">int</span> flow = <span style="color:#800080;">0</span>; cost = <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;">75</span>         <span style="color:#0000ff;">while</span><span style="color:#000000;"> (spfa(flow, cost));
</span><span style="color:#008080;">76</span>         <span style="color:#0000ff;">return</span><span style="color:#000000;"> flow;
</span><span style="color:#008080;">77</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">78</span> <span style="color:#000000;">} G;
</span><span style="color:#008080;">79</span> 
<span style="color:#008080;">80</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> n, m;
</span><span style="color:#008080;">81</span> 
<span style="color:#008080;">82</span> <span style="color:#0000ff;">int</span><span style="color:#000000;"> main() {
</span><span style="color:#008080;">83</span>     n = read(), m = read(); G.init(n*<span style="color:#800080;">2</span><span style="color:#000000;">);
</span><span style="color:#008080;">84</span>     rep(i, <span style="color:#800080;">1</span><span style="color:#000000;">, m) {
</span><span style="color:#008080;">85</span>         <span style="color:#0000ff;">int</span> u = read(), v = read(), w =<span style="color:#000000;"> read();
</span><span style="color:#008080;">86</span>         G.add(u+n, v, <span style="color:#800080;">1</span><span style="color:#000000;">, w);
</span><span style="color:#008080;">87</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">88</span>     rep(i, <span style="color:#800080;">2</span>, n-<span style="color:#800080;">1</span>) G.add(i, i+n, <span style="color:#800080;">1</span>, <span style="color:#800080;">0</span><span style="color:#000000;">);
</span><span style="color:#008080;">89</span>     G.add(n, n*<span style="color:#800080;">2</span>, INF, <span style="color:#800080;">0</span><span style="color:#000000;">);
</span><span style="color:#008080;">90</span>     G.add(<span style="color:#800080;">1</span>, n+<span style="color:#800080;">1</span>, INF, <span style="color:#800080;">0</span><span style="color:#000000;">);
</span><span style="color:#008080;">91</span>     <span style="color:#0000ff;">int</span><span style="color:#000000;"> cost;
</span><span style="color:#008080;">92</span>     printf(<span style="color:#800000;">"</span><span style="color:#800000;">%d</span><span style="color:#800000;">"</span>, G.mcmf(<span style="color:#800080;">1</span>, n*<span style="color:#800080;">2</span><span style="color:#000000;">, cost));
</span><span style="color:#008080;">93</span>     printf(<span style="color:#800000;">"</span><span style="color:#800000;"> %d</span><span style="color:#800000;">"</span><span style="color:#000000;">, cost);
</span><span style="color:#008080;">94</span>     <span style="color:#0000ff;">return</span> <span style="color:#800080;">0</span><span style="color:#000000;">;
</span><span style="color:#008080;">95</span> }</pre> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/ac-evil/p/10367440.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8617dba6718cb68586c1d89313c30b90/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">实验二 单链表的基本操作</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5d84129be6684f484227c98eb87838fe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js:商品排序功能(图片自己找)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>