<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>php学习 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="php学习" />
<meta property="og:description" content="PHP 简介 PHP 是服务器端脚本语言。
PHP 是什么？
PHP（全称：PHP：Hypertext Preprocessor，即&#34;PHP：超文本预处理器&#34;）是一种通用开源脚本语言。PHP 脚本在服务器上执行。PHP 可免费下载使用。 PHP 文件是什么？ PHP 文件可包含文本、HTML、JavaScript代码和 PHP 代码PHP 代码在服务器上执行，结果以纯 HTML 形式返回给浏览器PHP 文件的默认文件扩展名是 “.php” PHP 能做什么？ PHP 可以生成动态页面内容PHP 可以创建、打开、读取、写入、关闭服务器上的文件PHP 可以收集表单数据PHP 可以发送和接收 cookiesPHP 可以添加、删除、修改您的数据库中的数据PHP 可以限制用户访问您的网站上的一些页面PHP 可以加密数据 通过 PHP，您不再限于输出 HTML。您可以输出图像、PDF 文件，甚至 Flash 电影。您还可以输出任意的文本，比如 XHTML 和 XML。
为什么使用 PHP？ PHP 可在不同的平台上运行（Windows、Linux、Unix、Mac OS X 等）PHP 与目前几乎所有的正在被使用的服务器相兼容（Apache、IIS 等）PHP 提供了广泛的数据库支持PHP 是免费的，可从官方的 PHP 资源下载它： www.php.netPHP 易于学习，并可高效地运行在服务器端 PHP基本语法 代码标记 在PHP历史发展中，可以使用多种标记来区分PHP脚本。
ASP标记：&lt;% php代码 %&gt;
短标记：&lt;?php php代码 ?&gt; ，以上两种基本启用，如果要使用需要在配置文件中开启
脚本标记：&lt;scritp language=&#34;php&#34;&gt;php代码\&lt;/script&gt;
标准标记（常用）：&lt;?php php代码 ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/b64d439e64239af99307dec7e8890565/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-14T17:51:24+08:00" />
<meta property="article:modified_time" content="2022-04-14T17:51:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">php学习</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="PHP__0"></a>PHP 简介</h2> 
<p>PHP 是服务器端脚本语言。</p> 
<p>PHP 是什么？</p> 
<ul><li>PHP（全称：PHP：Hypertext Preprocessor，即"PHP：超文本预处理器"）是一种通用开源脚本语言。</li><li>PHP 脚本在服务器上执行。</li><li>PHP 可免费下载使用。</li></ul> 
<hr> 
<h3><a id="PHP__12"></a>PHP 文件是什么？</h3> 
<ul><li>PHP 文件可包含文本、HTML、JavaScript代码和 PHP 代码</li><li>PHP 代码在服务器上执行，结果以纯 HTML 形式返回给浏览器</li><li>PHP 文件的默认文件扩展名是 “.php”</li></ul> 
<hr> 
<h3><a id="PHP__20"></a>PHP 能做什么？</h3> 
<ul><li>PHP 可以生成动态页面内容</li><li>PHP 可以创建、打开、读取、写入、关闭服务器上的文件</li><li>PHP 可以收集表单数据</li><li>PHP 可以发送和接收 cookies</li><li>PHP 可以添加、删除、修改您的数据库中的数据</li><li>PHP 可以限制用户访问您的网站上的一些页面</li><li>PHP 可以加密数据</li></ul> 
<p>通过 PHP，您不再限于输出 HTML。您可以输出图像、PDF 文件，甚至 Flash 电影。您还可以输出任意的文本，比如 XHTML 和 XML。</p> 
<hr> 
<h3><a id="_PHP_34"></a>为什么使用 PHP？</h3> 
<ul><li>PHP 可在不同的平台上运行（Windows、Linux、Unix、Mac OS X 等）</li><li>PHP 与目前几乎所有的正在被使用的服务器相兼容（Apache、IIS 等）</li><li>PHP 提供了广泛的数据库支持</li><li>PHP 是免费的，可从官方的 PHP 资源下载它：<a href="http://www.php.net/" rel="nofollow"> www.php.net</a></li><li>PHP 易于学习，并可高效地运行在服务器端</li></ul> 
<h2><a id="PHP_42"></a>PHP基本语法</h2> 
<h3><a id="_44"></a>代码标记</h3> 
<p>在PHP历史发展中，可以使用多种标记来区分PHP脚本。</p> 
<p>ASP标记：<code>&lt;% php代码 %&gt;</code></p> 
<p>短标记：<code>&lt;?php php代码 ?&gt;</code> ，以上两种基本启用，如果要使用需要在配置文件中开启</p> 
<p>脚本标记：<code>&lt;scritp language="php"&gt;php代码\&lt;/script&gt;</code></p> 
<p>标准标记（常用）：<code>&lt;?php php代码 ?&gt;</code></p> 
<h3><a id="PHP_56"></a>PHP注释</h3> 
<p>习惯：所有的代码在写的过程中都必须进行注释，对于初学者而言注释就是个人学习和写代码的一个思路说明。</p> 
<p>PHP中注释分为两种：行注释和块注释</p> 
<p>行注释：一次注释一行</p> 
<p>//：后面跟的所有内容都是注释</p> 
<p>#：同上</p> 
<p>块注释：一次注释一段</p> 
<p>/* xxx <em>/：中间直到</em>/出现之前，全部都是注释。</p> 
<h3><a id="PHP_72"></a>PHP变量</h3> 
<h4><a id="_74"></a>预定义变量</h4> 
<p>预定义变量：提前定义的变量，系统定义的变量，存储许多需要用到的数据（预定义变量都是数组）</p> 
<p>$_GRT:获取所有表单以get方法提交的数据</p> 
<p>$_POST:POST提交的数据都会保存在此</p> 
<p>$_REQUEST:GET和POST提交的都会保存</p> 
<p>$_GLOBALS:PHP中所有全局变量</p> 
<p>$_SERVER:服务器信息</p> 
<p>$_SESSION:session会话数据</p> 
<p>$_COOKIE:cookie 会话数据</p> 
<p>$_NEV:环境信息</p> 
<p>$_FILES:用户上传的文件信息</p> 
<h4><a id="PHP_96"></a>PHP的八种数据类型</h4> 
<p>在PHP中将数据分为三大类八小类：</p> 
<p>简单（基本）数据类型：4个小类</p> 
<p>整形：int/integer，系统分配4个字节存储，表示整数类型（有前提）</p> 
<p>浮点型：float/double，系统分配8个字节存储，表示小数或者整型存不下的整数</p> 
<p>字符串型：string，系统根据实际长度分配，表示字符串（引号）</p> 
<p>布尔类型：bool/boolean，表示布尔类型，只有两个值：true和false</p> 
<p>复合数据类型：2个小类</p> 
<p>对象类型：object，存放对象（面向对象）</p> 
<p>数组类型：array，存储多个数据（一次性）</p> 
<p>特殊数据类型：2个小类</p> 
<p>资源类型：resource，存放资源数据（PHP外部数据，如数据库、文件）</p> 
<p>空类型：NULL，只有一个值就是NULL（不能运算）</p> 
<h4><a id="_122"></a>类型转换</h4> 
<p>类型转换：在很多的条件下，需要指定的数据类型，需要外部数据（当前PHP取得的数据），转换成目标数据类型</p> 
<p>在PHP中有两种类型转换方式：</p> 
<p>1、自动转换：系统根据需求自己判定，自己转换（用得比较多，效率偏低）</p> 
<p>2、强制（手动）转换：认为根据需要的目标类型转换</p> 
<p>强制转换规则：在变量之前增加一个括号()，然后在里面写上对应类型：int/integer…其中NULL类型用到unset()</p> 
<p>在转换过程中，用得比较多的就是转布尔类型（判断）和转数值类型（算数运算）</p> 
<p>其他类型转布尔类型：true或者false，在PHP中比较少类型转换变成false</p> 
<p>其他类型转数值的说明：</p> 
<p>1、布尔true为1，false为0；</p> 
<p>2、字符串转数值有自己的规则</p> 
<p>2.1、以字母开头的字符串，永远为0；</p> 
<p>2.2、以数字开头的字符串，取到碰到字符串为止（不会同时包含两个小数点 ）</p> 
<pre><code class="prism language-php"><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'abc1.1.1'</span><span class="token punctuation">;</span>
<span class="token variable">$b</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'1.1.1abc'</span><span class="token punctuation">;</span>
<span class="token comment">//自动转换</span>
<span class="token keyword">echo</span> <span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span>    <span class="token comment">//算数+运算，系统先转换为数值类型（整形或浮点型），然后运算</span>
<span class="token comment">//强制转换</span>
<span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token keyword type-casting">float</span><span class="token punctuation">)</span><span class="token variable">$a</span><span class="token punctuation">,</span><span class="token punctuation">(</span>flaot<span class="token punctuation">)</span><span class="token variable">$b</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_157"></a>类型判断</h4> 
<p>通过一组类型判断函数，来判断变量，最终返回这个变量所保存数据的数据类型（相同结果为true，不同为false）：是一组以is_开头后跟乐星名字的函数：is_XXX(变量名)</p> 
<p>Bool类型不能用echo来查看，可以使用var_dump结构来查看</p> 
<p>var_dump(变量1,变量2…)</p> 
<pre><code>var_dump(is_int($a));    //bool(false)
var_dump(is_string($a));    //bool(true)
</code></pre> 
<p>还有一组函数可以用来获取以及设定数据（变量）的类型</p> 
<p>gettype(变量名)：获取类型，得到的是该类型对应的字符串</p> 
<p>settype(变量名,类型)：设定数据类型：与强制转换不同</p> 
<p>1、强制转换（类型）变量名，是对数据值复制的内容进行处理（不会处理实际存储的内容）</p> 
<p>2、settype会直接改变数据本身</p> 
<pre><code class="prism language-php"><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'abc1.1.1'</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token keyword type-casting">float</span><span class="token punctuation">)</span><span class="token variable">$a</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">gettype</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//string,强制转换不会改变数据类型</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">settype</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'int'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//bool(true)，会改变数据本身</span>
<span class="token keyword">echo</span> <span class="token function">gettype</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token variable">$a</span><span class="token punctuation">;</span>        <span class="token comment">//int,a--&gt;1</span>
</code></pre> 
<h5><a id="_188"></a>字符串转义</h5> 
<p>转义：在计算机通用协议中，有以下特定的方式定义的字母，系统会特定处理：通常这种方式都是使用反斜杠+字母（单词）的特性：</p> 
<p>\r\n：回车换行</p> 
<p>PHP在识别转义字符的时候也是使用同样的模式：反斜杠+字母</p> 
<p>在PHP中系统常用的转义符号：</p> 
<p>\’：在单引号字符串中显示单引号</p> 
<p>\”：在双引号字符串中显示双引号</p> 
<p>\r：代表回车（理论上是回到当前行的首位置）</p> 
<p>\n：代表新一行</p> 
<p>\t：类似tab键，输出4个空格</p> 
<p>$：在PHP中使用$符号作为变量符号，因此需要特定识别</p> 
<p>单引号和双引号的区别：</p> 
<p>1、其中单引号中能够识别\’，而双引号中就不能识别\’</p> 
<pre><code class="prism language-php"><span class="token comment">//定义字符串识别转义符号</span>
<span class="token variable">$str1</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'abc\r\ndef\t\'\"\$fg'</span><span class="token punctuation">;</span>
<span class="token variable">$str2</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"abc\r\ndef\t\'\"\$fg"</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$str1</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">,</span><span class="token variable">$str2</span><span class="token punctuation">;</span>        <span class="token comment">//abc\r\ndef\t'\"\$fg</span>
                                <span class="token comment">//abc def \'"$fg</span>
</code></pre> 
<p>2、双引号总因为能够识别$符号，索引双引号中可以解析变量，而单引号不能</p> 
<pre><code class="prism language-php"><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'hello'</span><span class="token punctuation">;</span>
<span class="token comment">//变量识别</span>
<span class="token variable">$str1</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'abc $a def'</span><span class="token punctuation">;</span>
<span class="token variable">$str2</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"abc <span class="token interpolation"><span class="token variable">$a</span></span> def"</span><span class="token punctuation">;</span>
<span class="token variable">$str3</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'abc$adef'</span><span class="token punctuation">;</span>
<span class="token variable">$str4</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"abc<span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token variable">$a</span><span class="token punctuation">}</span></span>def"</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$str1</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">,</span><span class="token variable">$str2</span><span class="token punctuation">;</span>        <span class="token comment">//abc $a def</span>
                                <span class="token comment">//abc hello def</span>
<span class="token keyword">echo</span> <span class="token variable">$str3</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">,</span><span class="token variable">$str4</span><span class="token punctuation">;</span>        <span class="token comment">//abc$adef</span>
                                <span class="token comment">//abchellodef</span>
</code></pre> 
<p>双引号中变量识别的规则</p> 
<p>1、变量本身系统能够与后面的内容区分：应该保证变量的独立性，不要让系统难以区分</p> 
<p>2、使用变量专业标识符（区分），给变量加上一组大括号{}</p> 
<h5><a id="_243"></a>字符串长度问题</h5> 
<p>1、基本函数strlen()：得到字符串的长度（字节为单位）</p> 
<pre><code class="prism language-php"><span class="token comment">//定义字符串</span>
<span class="token variable">$str1</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'abcdefj'</span><span class="token punctuation">;</span>
<span class="token variable">$str2</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'你好中国123'</span><span class="token punctuation">;</span>            <span class="token comment">//中文在utf-8字符集中占3个字节</span>
<span class="token keyword">echo</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$str1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">,</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$str2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//7,15</span>
</code></pre> 
<p>2、多字节字符串的长度问题：包括中文的长度</p> 
<p>3、多自己字符串扩展模块：mbstring扩展（mb：Multi Bytes）</p> 
<p>首先要加载PHP的mbstring扩展（在配置文件中）</p> 
<p>可以使用mb扩展带来的很多函数</p> 
<pre><code class="prism language-php"><span class="token comment">//定义字符串</span>
<span class="token variable">$str1</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'abcdefj'</span><span class="token punctuation">;</span>
<span class="token variable">$str2</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'你好中国123'</span><span class="token punctuation">;</span>            <span class="token comment">//中文在utf-8字符集中占3个字节</span>
<span class="token keyword">echo</span> <span class="token function">mb_strlen</span><span class="token punctuation">(</span><span class="token variable">$str1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">,</span><span class="token function">mb_strlen</span><span class="token punctuation">(</span><span class="token variable">$str2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//7,7</span>
</code></pre> 
<p>mbstring扩展针对的是一些关于字符统计：strlen只是针对标准交换码ASCⅡ，mbstring会针对不同字符集</p> 
<h4><a id="_271"></a>错误抑制符</h4> 
<p>在PHP中有一些错误可以提前预知，但是这些错误可能无法避免，但是又不希望报错为用户看，可以使用错误抑制符处理。</p> 
<p>@：在可能出错的表达式前面使用“@”符号即可</p> 
<pre><code class="prism language-php"><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token variable">$b</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token variable">$a</span> <span class="token operator">/</span> <span class="token variable">$b</span>；        <span class="token comment">//报错</span>
@<span class="token punctuation">(</span><span class="token variable">$a</span> <span class="token operator">/</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//不会报错</span>
</code></pre> 
<p>错误抑制符通常在生产环境（上线）会用到，在开发的时候不会用：系统本身最好没有任何错误。</p> 
<h4><a id="PHP_global__286"></a>PHP global 关键字</h4> 
<p>global 关键字用于函数内访问全局变量。</p> 
<p>在函数内调用函数外定义的全局变量，我们需要在函数中的变量前加上 global 关键字：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$x</span><span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token variable">$y</span><span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
 
<span class="token keyword">function</span> <span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">global</span> <span class="token variable">$x</span><span class="token punctuation">,</span><span class="token variable">$y</span><span class="token punctuation">;</span>
    <span class="token variable">$y</span><span class="token operator">=</span><span class="token variable">$x</span><span class="token operator">+</span><span class="token variable">$y</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$y</span><span class="token punctuation">;</span> <span class="token comment">// 输出 15</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>

</code></pre> 
<p>PHP 将所有全局变量存储在一个名为 $GLOBALS[<em>index</em>] 的数组中。 <em>index</em> 保存变量的名称。这个数组可以在函数内部访问，也可以直接用来更新全局变量。</p> 
<p>上面的实例可以写成这样：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$x</span><span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token variable">$y</span><span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
 
<span class="token keyword">function</span> <span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'y'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'x'</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
 
<span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$y</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="Static__328"></a>Static 作用域</h4> 
<p>当一个函数完成时，它的所有变量通常都会被删除。然而，有时候您希望某个局部变量不要被删除。</p> 
<p>要做到这一点，请在您第一次声明变量时使用 <strong>static</strong> 关键字：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> <span class="token variable">$x</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token variable">$x</span><span class="token punctuation">;</span>
    <span class="token variable">$x</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>    <span class="token comment">// 换行符</span>
<span class="token punctuation">}</span>
 
<span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>然后，每次调用该函数时，该变量将会保留着函数前一次被调用时的值。</p> 
<p>**注释：**该变量仍然是函数的局部变量。</p> 
<h3><a id="PHP_echo__print__354"></a>PHP echo 和 print 语句</h3> 
<p>echo 和 print 区别:</p> 
<ul><li>echo - 可以输出一个或多个字符串</li><li>print - 只允许输出一个字符串，返回值总为 1</li></ul> 
<p>**提示：**echo 输出的速度比 print 快， echo 没有返回值，print有返回值1。</p> 
<h3><a id="PHP_EOFheredoc__363"></a>PHP EOF(heredoc) 使用说明</h3> 
<p>PHP EOF(heredoc)是一种在命令行shell（如sh、csh、ksh、bash、PowerShell和zsh）和程序语言（像Perl、PHP、Python和Ruby）里定义一个字符串的方法。</p> 
<p>使用概述：</p> 
<ul><li>\1. 必须后接分号，否则编译通不过。</li><li>\2. <strong>EOF</strong> 可以用任意其它字符代替，只需保证结束标识与开始标识一致。</li><li><strong>3. 结束标识必须顶格独自占一行(即必须从行首开始，前后不能衔接任何空白和字符)。</strong></li><li>\4. 开始标识可以不带引号或带单双引号，不带引号与带双引号效果一致，解释内嵌的变量和转义符号，带单引号则不解释内嵌的变量和转义符号。</li><li>\5. 当内容需要内嵌引号（单引号或双引号）时，不需要加转义符，本身对单双引号转义，此处相当与q和qq的用法。</li></ul> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$name</span><span class="token operator">=</span><span class="token string double-quoted-string">"runoob"</span><span class="token punctuation">;</span>
<span class="token variable">$a</span><span class="token operator">=</span> <span class="token string heredoc-string"><span class="token delimiter symbol"><span class="token punctuation">&lt;&lt;&lt;</span>EOF</span>
        "abc"<span class="token interpolation"><span class="token variable">$name</span></span>
        "123"
<span class="token delimiter symbol">EOF<span class="token punctuation">;</span></span></span>
<span class="token comment">// 结束需要独立一行且前后不能空格</span>
<span class="token keyword">echo</span> <span class="token variable">$a</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
 
输出：
    <span class="token string double-quoted-string">"abc"</span>runoob
     <span class="token string double-quoted-string">"123"</span>
</code></pre> 
<ul><li>1.PHP 定界符 <strong>EOF</strong> 的作用就是按照原样，包括换行格式什么的，输出在其内部的东西；</li><li>2.在 PHP 定界符 <strong>EOF</strong> 中的任何特殊字符都不需要转义；</li><li>3.PHP 定界符 <strong>EOF</strong></li></ul> 
<h3><a id="PHP__395"></a>PHP 超级全局变量</h3> 
<p>PHP中预定义了几个超级全局变量（superglobals） ，这意味着它们在一个脚本的全部作用域中都可用。 你不需要特别说明，就可以在函数及类中使用。</p> 
<p>PHP 超级全局变量列表:</p> 
<ul><li>$GLOBALS</li><li>$_SERVER</li><li>$_REQUEST</li><li>$_POST</li><li>$_GET</li><li>$_FILES</li><li>$_ENV</li><li>$_COOKIE</li><li>$_SESSION</li></ul> 
<h4><a id="PHP_GLOBALS_411"></a>PHP $GLOBALS</h4> 
<p>$GLOBALS 是PHP的一个超级全局变量组，在一个PHP脚本的全部作用域中都可以访问。</p> 
<p>$GLOBALS 是一个包含了全部变量的全局组合数组。变量的名字就是数组的键。</p> 
<p>以下实例介绍了如何使用超级全局变量 $GLOBALS:</p> 
<p>下表列出了所有 $_SERVER 变量中的重要元素:</p> 
<table><thead><tr><th align="left">元素/代码</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">$_SERVER[‘PHP_SELF’]</td><td align="left">当前执行脚本的文件名，与 document root 有关。例如，在地址为 http://example.com/test.php/foo.bar 的脚本中使用 $_SERVER[‘PHP_SELF’] 将得到 /test.php/foo.bar。<strong>FILE</strong> 常量包含当前(例如包含)文件的完整路径和文件名。 从 PHP 4.3.0 版本开始，如果 PHP 以命令行模式运行，这个变量将包含脚本名。之前的版本该变量不可用。</td></tr><tr><td align="left">$_SERVER[‘GATEWAY_INTERFACE’]</td><td align="left">服务器使用的 CGI 规范的版本；例如，“CGI/1.1”。</td></tr><tr><td align="left">$_SERVER[‘SERVER_ADDR’]</td><td align="left">当前运行脚本所在的服务器的 IP 地址。</td></tr><tr><td align="left">$_SERVER[‘SERVER_NAME’]</td><td align="left">当前运行脚本所在的服务器的主机名。如果脚本运行于虚拟主机中，该名称是由那个虚拟主机所设置的值决定。(如: www.runoob.com)</td></tr><tr><td align="left">$_SERVER[‘SERVER_SOFTWARE’]</td><td align="left">服务器标识字符串，在响应请求时的头信息中给出。 (如：Apache/2.2.24)</td></tr><tr><td align="left">$_SERVER[‘SERVER_PROTOCOL’]</td><td align="left">请求页面时通信协议的名称和版本。例如，“HTTP/1.0”。</td></tr><tr><td align="left">$_SERVER[‘REQUEST_METHOD’]</td><td align="left">访问页面使用的请求方法；例如，“GET”, “HEAD”，“POST”，“PUT”。</td></tr><tr><td align="left">$_SERVER[‘REQUEST_TIME’]</td><td align="left">请求开始时的时间戳。从 PHP 5.1.0 起可用。 (如：1377687496)</td></tr><tr><td align="left">$_SERVER[‘QUERY_STRING’]</td><td align="left">query string（查询字符串），如果有的话，通过它进行页面访问。</td></tr><tr><td align="left">$_SERVER[‘HTTP_ACCEPT’]</td><td align="left">当前请求头中 Accept: 项的内容，如果存在的话。</td></tr><tr><td align="left">$_SERVER[‘HTTP_ACCEPT_CHARSET’]</td><td align="left">当前请求头中 Accept-Charset: 项的内容，如果存在的话。例如：“iso-8859-1,*,utf-8”。</td></tr><tr><td align="left">$_SERVER[‘HTTP_HOST’]</td><td align="left">当前请求头中 Host: 项的内容，如果存在的话。</td></tr><tr><td align="left">$_SERVER[‘HTTP_REFERER’]</td><td align="left">引导用户代理到当前页的前一页的地址（如果存在）。由 user agent 设置决定。并不是所有的用户代理都会设置该项，有的还提供了修改 HTTP_REFERER 的功能。简言之，该值并不可信。)</td></tr><tr><td align="left">$_SERVER[‘HTTPS’]</td><td align="left">如果脚本是通过 HTTPS 协议被访问，则被设为一个非空的值。</td></tr><tr><td align="left">$_SERVER[‘REMOTE_ADDR’]</td><td align="left">浏览当前页面的用户的 IP 地址。</td></tr><tr><td align="left">$_SERVER[‘REMOTE_HOST’]</td><td align="left">浏览当前页面的用户的主机名。DNS 反向解析不依赖于用户的 REMOTE_ADDR。</td></tr><tr><td align="left">$_SERVER[‘REMOTE_PORT’]</td><td align="left">用户机器上连接到 Web 服务器所使用的端口号。</td></tr><tr><td align="left">$_SERVER[‘SCRIPT_FILENAME’]</td><td align="left">当前执行脚本的绝对路径。</td></tr><tr><td align="left">$_SERVER[‘SERVER_ADMIN’]</td><td align="left">该值指明了 Apache 服务器配置文件中的 SERVER_ADMIN 参数。如果脚本运行在一个虚拟主机上，则该值是那个虚拟主机的值。(如：someone@runoob.com)</td></tr><tr><td align="left">$_SERVER[‘SERVER_PORT’]</td><td align="left">Web 服务器使用的端口。默认值为 “80”。如果使用 SSL 安全连接，则这个值为用户设置的 HTTP 端口。</td></tr><tr><td align="left">$_SERVER[‘SERVER_SIGNATURE’]</td><td align="left">包含了服务器版本和虚拟主机名的字符串。</td></tr><tr><td align="left">$_SERVER[‘PATH_TRANSLATED’]</td><td align="left">当前脚本所在文件系统（非文档根目录）的基本路径。这是在服务器进行虚拟到真实路径的映像后的结果。</td></tr><tr><td align="left">$_SERVER[‘SCRIPT_NAME’]</td><td align="left">包含当前脚本的路径。这在页面需要指向自己时非常有用。<strong>FILE</strong> 常量包含当前脚本(例如包含文件)的完整路径和文件名。</td></tr><tr><td align="left">$_SERVER[‘SCRIPT_URI’]</td><td align="left">URI 用来指定要访问的页面。例如 “/index.html”。</td></tr></tbody></table> 
<h4><a id="PHP__REQUEST_448"></a>PHP $_REQUEST</h4> 
<p>PHP $_REQUEST 用于收集HTML表单提交的数据。</p> 
<p>以下实例显示了一个输入字段（input）及提交按钮(submit)的表单(form)。 当用户通过点击 “Submit” 按钮提交表单数据时, 表单数据将发送至标签中 action 属性中指定的脚本文件。 在这个实例中，我们指定文件来处理表单数据。如果你希望其他的PHP文件来处理该数据，你可以修改该指定的脚本文件名。 然后，我们可以使用超级全局变量 $_REQUEST 来收集表单中的 input 字段数据:</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;?php echo $_SERVER[<span class="token punctuation">'</span>PHP_SELF<span class="token punctuation">'</span>];?&gt;<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
Name: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fname<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
 
<span class="token prolog">&lt;?php 
$name = $_REQUEST['fname']; 
echo $name; 
?&gt;</span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="PHP__POST_472"></a>PHP $_POST</h4> 
<p>PHP $_POST 被广泛应用于收集表单数据，在HTML form标签的指定该属性："method=“post”。</p> 
<p>以下实例显示了一个输入字段（input）及提交按钮(submit)的表单(form)。 当用户通过点击 “Submit” 按钮提交表单数据时, 表单数据将发送至标签中 action 属性中指定的脚本文件。 在这个实例中，我们指定文件来处理表单数据。如果你希望其他的PHP文件来处理该数据，你可以修改该指定的脚本文件名。 然后，我们可以使用超级全局变量 $_POST 来收集表单中的 input 字段数据:</p> 
<h4><a id="PHP__GET_478"></a>PHP $_GET</h4> 
<p>PHP $_GET 同样被广泛应用于收集表单数据，在HTML form标签的指定该属性："method=“get”。</p> 
<p>$_GET 也可以收集URL中发送的数据。</p> 
<p>假定我们有一个包含参数的超链接HTML页面：</p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test01.php?subject=php&amp;web=123.qq.com<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>test $_GET<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>当用户点击链接 “test $_GET”, 参数 “subject” 和 “web” 将发送至"test_get.php",你可以在 “test_get.php” 文件中使用 $_GET 变量来获取这些数据。</p> 
<p>以下实例显示了 “test_get.php” 文件的代码:</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token prolog">&lt;?php
echo "study"." ".$_GET["subject"]."@".$_GET["web"];
?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="PHP__515"></a>PHP 魔术常量</h3> 
<p>PHP 向它运行的任何脚本提供了大量的预定义常量。</p> 
<p>不过很多常量都是由不同的扩展库定义的，只有在加载了这些扩展库时才会出现，或者动态加载后，或者在编译时已经包括进去了。</p> 
<p>有八个魔术常量它们的值随着它们在代码中的位置改变而改变。</p> 
<p>例如 <strong>LINE</strong> 的值就依赖于它在脚本中所处的行来决定。这些特殊的常量不区分大小写，如下：</p> 
<h4><a id="__LINE___525"></a><strong>LINE</strong></h4> 
<p>文件中的当前行号。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'这是第 " '</span>  <span class="token operator">.</span> <span class="token constant">__LINE__</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' " 行'</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="__FILE___535"></a><strong>FILE</strong></h4> 
<p>文件的完整路径和文件名。如果用在被包含文件中，则返回被包含的文件名。</p> 
<p>自 PHP 4.0.2 起，<strong>FILE</strong> 总是包含一个绝对路径（如果是符号连接，则是解析后的绝对路径），而在此之前的版本有时会包含一个相对路径。</p> 
<pre><code class="prism language-HTML">&lt;html&gt;
&lt;body&gt;

&lt;?php
echo '该文件位于"'.__FILE__.'"';
?&gt;

&lt;/body&gt;
&lt;/html&gt;

//输出
//E:\Code\code-phpstorm\TestProj\src\test01.php
</code></pre> 
<h4><a id="__DIR___556"></a><strong>DIR</strong></h4> 
<p>文件所在的目录。如果用在被包括文件中，则返回被包括的文件所在的目录。</p> 
<p>它等价于 dirname(<strong>FILE</strong>)。除非是根目录，否则目录中名不包括末尾的斜杠。（PHP 5.3.0中新增）</p> 
<pre><code class="prism language-HTML">&lt;html&gt;
&lt;body&gt;

&lt;?php
echo '该文件位于"'.__DIR__.'"';
?&gt;

&lt;/body&gt;
&lt;/html&gt;

//输出
//E:\Code\code-phpstorm\TestProj\src
</code></pre> 
<h4><a id="__FUNCTION___577"></a><strong>FUNCTION</strong></h4> 
<p>函数名称（PHP 4.3.0 新加）。自 PHP 5 起本常量返回该函数被定义时的名字（区分大小写）。在 PHP 4 中该值总是小写字母的。</p> 
<h4><a id="__CLASS___581"></a><strong>CLASS</strong></h4> 
<p>类的名称（PHP 4.3.0 新加）。自 PHP 5 起本常量返回该类被定义时的名字（区分大小写）。</p> 
<p>在 PHP 4 中该值总是小写字母的。类名包括其被声明的作用区域（例如 Foo\Bar）。注意自 PHP 5.4 起 <strong>CLASS</strong> 对 trait 也起作用。当用在 trait 方法中时，<strong>CLASS</strong> 是调用 trait 方法的类的名字。</p> 
<pre><code class="prism language-PHP">&lt;?php
class test {
    function _print() {
        echo '类名为：'  . __CLASS__ . "&lt;br&gt;";
        echo  '函数名为：' . __FUNCTION__ ;
    }
}
$t = new test();
$t-&gt;_print();
?&gt;
  
//输出
//类名为：test
//函数名为：_print
</code></pre> 
<h4><a id="__TRAIT___604"></a><strong>TRAIT</strong></h4> 
<p>Trait 的名字（PHP 5.4.0 新加）。自 PHP 5.4.0 起，PHP 实现了代码复用的一个方法，称为 traits。</p> 
<p>Trait 名包括其被声明的作用区域（例如 Foo\Bar）。</p> 
<p>从基类继承的成员被插入的 SayWorld Trait 中的 MyHelloWorld 方法所覆盖。其行为 MyHelloWorld 类中定义的方法一致。优先顺序是当前类中的方法会覆盖 trait 方法，而 trait 方法又覆盖了基类中的方法。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Hello '</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">trait</span> <span class="token class-name">SayWorld</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'World!'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">class</span> <span class="token class-name">MyHelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">use</span> <span class="token package">SayWorld</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token variable">$o</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyHelloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$o</span><span class="token operator">-&gt;</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
  
  <span class="token comment">//输出</span>
  <span class="token comment">//Hello World!</span>
</code></pre> 
<h4><a id="__METHOD___639"></a><strong>METHOD</strong></h4> 
<p>类的方法名（PHP 5.0.0 新加）。返回该方法被定义时的名字（区分大小写）。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span>  <span class="token string single-quoted-string">'函数名为：'</span> <span class="token operator">.</span> <span class="token constant">__METHOD__</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>

<span class="token comment">//输出：test</span>
</code></pre> 
<h3><a id="_654"></a>文件包含</h3> 
<p>文件包含：在一个PHP脚本中，去将另外一个文件（PHP）包含进来，去合作完成一件事情。</p> 
<h4><a id="_658"></a>文件包含的作用</h4> 
<p>文件包含的意义：</p> 
<p>1、要么使用被包含文件中的内容，实现代码的共享（重用）：向上包含（索要）</p> 
<p>向上包含：在当前脚本要用某个代码之前包含别的文件</p> 
<p>2、要么自己有东西可以给别的文件使用，实现代码的共享（重用）：向下包含（给与）</p> 
<p>向下包含：在自己又某个东西的时候，需要别的脚本来显示（自己代码写完之后包含其他文件）</p> 
<p>最大的作用：分工写作，每个脚本做的事情不一样，因此可以使用写作方式，让多个脚本共同完成意见事情。</p> 
<h4><a id="_672"></a>文件包含四种形式</h4> 
<p>在PHP中文件的包含有四种形式（两种大形式）</p> 
<p>include：包含文件</p> 
<p>include_once：系统会自动判断文件包含过程中，是否已经包含过（一个文件最多被包含一次）</p> 
<p>require：与include相同</p> 
<p>require_once：与include_once相同</p> 
<p>包含基本语法：</p> 
<p>include ‘文件名字’;</p> 
<p>include(‘文件名字’); //文件名字：路径问题</p> 
<pre><code class="prism language-php"><span class="token comment">//include1.php</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>php
    <span class="token comment">//被包含文件</span>
    <span class="token comment">//定义数据</span>
    <span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'PI'</span><span class="token punctuation">,</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token comment">//include2.php</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>php
    <span class="token comment">//包含文件：使用数据</span>
    <span class="token comment">//包含文件</span>
    <span class="token keyword">include</span> <span class="token string single-quoted-string">'include1.php'</span><span class="token punctuation">;</span>        <span class="token comment">//包含当前文件include2.php所在文件夹下的include1.php</span>
    <span class="token keyword">echo</span> <span class="token variable">$a</span><span class="token punctuation">,</span><span class="token constant">PI</span><span class="token punctuation">;</span>
    <span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上方式：是先包含文件，后使用文件中的内容（向上包含）</p> 
<p>向下包含：先准备内容，然后包含另外的文件，在另外的文件中，使用当前的内容</p> 
<pre><code class="prism language-php"><span class="token comment">//include3.php</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>php
    <span class="token comment">//定义数据</span>
    <span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'PI'</span><span class="token punctuation">,</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//包含文件：为了显示以上数据</span>
    <span class="token keyword">include_once</span> <span class="token string single-quoted-string">'include4.php'</span><span class="token punctuation">;</span>
    <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token comment">//include4.php</span>
<span class="token operator">&lt;</span>table<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">echo</span> <span class="token variable">$a</span><span class="token punctuation">;</span><span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">echo</span> <span class="token constant">PI</span><span class="token punctuation">;</span><span class="token operator">?</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="_728"></a>文件加载原理</h4> 
<p>PHP代码的执行流程</p> 
<p>1、读取代码文件（PHP文件）</p> 
<p>2、编译：将PHP代码转换成字节码（生成opcode）</p> 
<p>3、zendengine来计息opcode，按照字节码去进行逻辑运算</p> 
<p>4、转换成对应的HTML代码</p> 
<p>文件加载原理：</p> 
<p>1、在文件加载（include或者require）的时候，系统会自动的将将被包含文件中的代码相当于嵌入到当前文件中</p> 
<p>2、加载位置：在哪加载，对应的文件中的代码嵌入的位置就是对应的include位置</p> 
<p>3、在PHP中被包含的文件是单独进行编译的</p> 
<p>PHP文件在编译的过程中如果出现了语法错误，那么会失败（不会执行）；但是如果被包含文件有错误的时候，系统会在执行到包含include这条语句的时候才会报错。</p> 
<h4><a id="inclderequire_750"></a>inclde和require区别</h4> 
<p>include和include_once的区别：</p> 
<p>include系统会碰到一次，执行一次；如果对同一个文件进行多次加载，那么系统会执行多次；</p> 
<p>include_once：系统碰到多次，也只会执行一次</p> 
<p>require和include的区别：本质都是包含文件，唯一的区别在于包含不到文件的时候，报错的形式不一样</p> 
<p>include的错误级别较轻：不会阻止代码执行</p> 
<p>require要求较高：如果包含出错代码不再执行（require后面的代码）</p> 
<h4><a id="_764"></a>文件加载路径</h4> 
<p>文件在加载的收需要指定文件路径才能保证PHP正确的找到对应的文件。</p> 
<p>文件的加载路径包含两大类：</p> 
<p>1、绝对路径</p> 
<p>从磁盘的根目录开始（本地绝对路径）</p> 
<p>windows：盘符c:/路径/PHP文件</p> 
<p>linux：/路径/PHP文件</p> 
<p>从网站根目录开始（网络绝对路径）</p> 
<p>/：相对于网站主机名字对应的路径</p> 
<p>2、相对路径：从当前文件所在目录开始的路径</p> 
<p>.|./：表示当前文件夹</p> 
<p>…/：上级目录（当前文件夹的上一层文件夹）</p> 
<p>绝对路径和相对路径的加载区别</p> 
<p>1、绝对路径相对相率偏低，但是相对安全（路径不会出问题）</p> 
<p>2、相对路径相对效率较高，但是容易出错（相对路径会发生改变）</p> 
<pre><code class="prism language-php"><span class="token comment">//PHP文件加载路径</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>php
    <span class="token comment">//相对路径加载</span>
    <span class="token keyword">include_once</span> <span class="token string single-quoted-string">'include1.php'</span><span class="token punctuation">;</span>    <span class="token comment">//默认当前文件本身</span>
    <span class="token keyword">include_once</span> <span class="token string single-quoted-string">'./include1.php'</span><span class="token punctuation">;</span>  
    <span class="token comment">//复杂相对路径</span>
    <span class="token keyword">include_once</span> <span class="token string single-quoted-string">'../www/include1.php'</span><span class="token punctuation">;</span>
 
    <span class="token comment">//绝对路径</span>
    <span class="token keyword">include_once</span> <span class="token string single-quoted-string">'D:\Service\phpstudy_pro\WWW\include1.php'</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="_808"></a>文件嵌套包含</h4> 
<p>文件嵌套包含：一个文件包含另外一个文件，同时被包含的文件又包含了另外一个文件</p> 
<pre><code class="prism language-php"><span class="token comment">//文件嵌套包含</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>php
    <span class="token comment">//包含include3.php//文件本身包含了Include4.php</span>
    <span class="token keyword">include</span> <span class="token string single-quoted-string">'include3.php'</span><span class="token punctuation">;</span>
    <span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>嵌套包含的时候就很容易出现相对路径出错的问题：相对路径会因为文件的包含而改变（./和…/）：windows下面，每一个文件夹下都有.和…的文件夹。</p> 
<p>举例：张三左边是李四，李四左边是王五</p> 
<p>张三把李四叫到自己的位置：李四与王五之间又两个位置，李四如果还按照左边伸手找王五就找不到</p> 
<h4><a id="_826"></a>字符串相关函数</h4> 
<p>1、转换函数：Implode()，explode()，str_split()</p> 
<p>implode(连接方式,数组)：将数组中的元素按照某个规则连接成一个字符串</p> 
<p>explode(分隔字符，目标字符串)：将字符串按照某个格式进行分隔，变成一个数组</p> 
<p>中国|北京|顺义 == array(“中国”,”北京”,”顺义”)</p> 
<p>str_split(字符串,字符长度)：按照指定长度拆分字符串得到数组</p> 
<p>2、截取函数：trim()，ltrim()，rtrim()</p> 
<p>trim(字符串[,指定字符])：本身默认是用来去除两边的空格（中间不行），但是也可以指定要去除的内容，是按照指定的内容循环取出两边有的内容：直到碰到一个不是目标字符为止</p> 
<p>ltrim()：去除左边的</p> 
<p>rtrim()：去除右边的</p> 
<pre><code class="prism language-php"><span class="token variable">$str1</span> <span class="token operator">=</span> <span class="token string single-quoted-string">' ab cd ef '</span><span class="token punctuation">;</span>
<span class="token variable">$str2</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$str1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$str2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//string(8) "ab cd ef"</span>
</code></pre> 
<p>3、截取函数：substr()，strstr()</p> 
<p>substr(字符串,起始位置从0开始[,长度])：指定位置开始截取字符串，可以截取指定长度（不指定到最后）</p> 
<p>strstr(字符串,匹配字符)：从指定位置开始，截取到最后（可以用来取文件后缀名）</p> 
<pre><code class="prism language-php"><span class="token variable">$str1</span> <span class="token operator">=</span> <span class="token string single-quoted-string">' ab cd ef '</span><span class="token punctuation">;</span>
<span class="token variable">$str2</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$str1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$str3</span> <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span><span class="token variable">$str1</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$str2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//string(6) "cd ef "</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$str3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//string(6) "cd ef "</span>
</code></pre> 
<p>4、大小写转换函数：strtolower()，strtoupper()，ucfirst()</p> 
<p>strtolower()：全部小写</p> 
<p>strtoupper()：全部大写</p> 
<p>ucfirst()：首字母大写</p> 
<pre><code class="prism language-php"><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'abcd e f '</span>
<span class="token keyword">echo</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ABCD E F</span>
<span class="token keyword">echo</span> <span class="token function">ucfirst</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//Abcd e f</span>
</code></pre> 
<p>5、查找函数：strpos()，strrpos()</p> 
<p>strpos()：查找字符在目标字符串中首次出现的位置，没找到则返回false</p> 
<p>strrpos()：查找字符在目标字符串中最后次出现的位置，没找到则返回false</p> 
<pre><code class="prism language-php"><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'123a123a123a123'</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">strpos</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//3</span>
<span class="token keyword">echo</span> <span class="token function">strrpos</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//11</span>
</code></pre> 
<p>6、替换函数：str_replace()</p> 
<p>str_replace(匹配目标,替换的内容,字符串本身)：将目标字符串中部分字符串进行替换</p> 
<pre><code class="prism language-php"><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'123a123a123a123'</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'b'</span><span class="token punctuation">,</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//123b123b123b123</span>
</code></pre> 
<p>7、格式化函数：printf()，sprintf()</p> 
<p>printf/sprintf(输出字符串有占位符,顺序占位内容…)：格式化输出数据</p> 
<pre><code class="prism language-php"><span class="token variable">$age</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'tony'</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'你好,今年我%d岁，我叫%s'</span><span class="token punctuation">,</span><span class="token variable">$age</span><span class="token punctuation">,</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//你好,今年我8岁，我叫tony</span>
</code></pre> 
<p>8、其他：str_repeat()，str_shuffle()</p> 
<p>str_repeat()：重复某个字符串N次</p> 
<p>str_shuffle()：随机打乱字符串</p> 
<pre><code class="prism language-php"><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'abcdefg'</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">str_repeat</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//abcdefgabcdefg</span>
<span class="token keyword">echo</span> <span class="token function">str_shuffle</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//fdbgeca</span>
</code></pre> 
<h3><a id="_924"></a>数组详解</h3> 
<h4><a id="_926"></a>数组的概念</h4> 
<p>数组：array，数据的组合，值将一组数据（多个）存储到一个指定的容器中，用变量指向该容器，然后可以通过变量一次性得到该容器中的所有数据。</p> 
<h4><a id="_930"></a>数组定义语法</h4> 
<p>在PHP中系统提供了多种定义数组的方式：</p> 
<p>1、使用array关键字：最常用的</p> 
<p>$变量 = array(元素1,元素2,元素3…);</p> 
<p>2、可以使用中括号来包裹数据：</p> 
<p>$变量 = [元素1,元素2…];</p> 
<p>3、隐形定义数组：给变量增加一个中括号，系统自动变成数组</p> 
<p>$变量[] = 值1; //如果不提供下标也可以，系统自动生成（数字：从0开始，且从当前前面最大的开始）</p> 
<p>$变量[下标] = 值; //中括号里面的内容称之为下标key，该下标可以是字母（单词）或者数字，与变量命名的规则相似</p> 
<pre><code class="prism language-php"><span class="token comment">//定义数组：array</span>
<span class="token variable">$arr1</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'1'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$arr1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//array(3) { [0]=&gt; string(1) "1" [1]=&gt; int(2) [2]=&gt; string(5) "hello" }</span>
<span class="token comment">//定义数组：[]</span>
<span class="token variable">$arr2</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'1'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$arr2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//同上</span>
<span class="token comment">//隐形数组：</span>
<span class="token variable">$arr3</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token variable">$arr3</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token variable">$arr3</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'2'</span><span class="token punctuation">;</span>
<span class="token variable">$arr3</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">55</span><span class="token punctuation">;</span>
<span class="token variable">$arr3</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'key'</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$arr3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//array(5) { [0]=&gt; int(1) [10]=&gt; int(100) [11]=&gt; string(1) "2" [3]=&gt; int(55) ["key"]=&gt; string(3) "key" }</span>
</code></pre> 
<h4><a id="PHP_964"></a>PHP数组特点</h4> 
<p>1、可以整数下标或者字符串下标</p> 
<p>如果数组下标都为整数：索引数组</p> 
<p>如果数组下标都为字符串：关联数组</p> 
<p>2、不同下标可以混合存在：混合数组</p> 
<p>3、数组元素的顺序以放入顺序为准，跟下标无关</p> 
<p>4、数字下标的自增长特性：从0开始自动增长，如果中间手动出现较大的，那么后面的自增长元素从最大的值+1开始</p> 
<p>5、特殊值下标的自动转换</p> 
<p>布尔值：true和false</p> 
<p>空：NULL</p> 
<pre><code class="prism language-php"><span class="token variable">$arr4</span><span class="token punctuation">[</span><span class="token constant boolean">false</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
<span class="token variable">$arr4</span><span class="token punctuation">[</span><span class="token constant boolean">true</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
<span class="token variable">$arr4</span><span class="token punctuation">[</span><span class="token constant">NULL</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$arr4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//array(3) { [0]=&gt; bool(false) [1]=&gt; bool(true) [""]=&gt; NULL }</span>
</code></pre> 
<p>6、PHP中数组元素没有类型限制</p> 
<p>7、PHP中数组元素没有长度限制</p> 
<p>补充：PHP中的数组是很大的数据，所以存储是堆区，为当前数组分配一块连续的内存。</p> 
<h4><a id="_997"></a>多维数组</h4> 
<p>多维数组：数组里面的元素又是数组</p> 
<h5><a id="_1001"></a>二维数组</h5> 
<p>二维数组：数组中所有的元素都是一维数组</p> 
<pre><code class="prism language-php"><span class="token variable">$info</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
    <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Dim'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'age'</span> <span class="token operator">=&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tom'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'age'</span> <span class="token operator">=&gt;</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Lily'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'age'</span> <span class="token operator">=&gt;</span> <span class="token number">20</span><span class="token punctuation">)</span>        <span class="token comment">//最后一个元素，后面可以跟逗号不影响（不建议）</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$info</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="_1015"></a>多维数组</h5> 
<p>在第二维的数组元素中可以继续时数组，在PHP中没有维度限制（PHP本质并没有二维数组）</p> 
<p>但是：不建议使用超过三维以上的数组，会增加访问复杂度，降低访问效率。</p> 
<h5><a id="_1021"></a>异形数组（不规则数组）</h5> 
<p>异形数组：数组中的元素不规则，有普通基本变量也有数组</p> 
<p>在实际开发中，并不常用，尽量让数组袁术规则化（便于进行访问）</p> 
<h4><a id="_1027"></a>遍历数组</h4> 
<h5><a id="_1029"></a>遍历的基本含义</h5> 
<p>数组遍历：普通数组数据的访问都是通过数组元素的下标来实现访问，如果说数组中所有的数据都需要一次输出出来，就需要我们使用到一些简化的规则来实现自动获取下标以及输出数组元素。</p> 
<pre><code class="prism language-php"><span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token function">arry</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tom'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Jim'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//二维数组</span>
<span class="token comment">//访问一维元素：$arr[一维下标]</span>
<span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">//结果：array('name' =&gt; 'Tom')</span>
<span class="token comment">//访问二维元素：$arr[一维下标][二维下标]</span>
<span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span>；        <span class="token comment">//Jim</span>
</code></pre> 
<h5><a id="foreach_1041"></a>foreach遍历语法</h5> 
<p>基本语法：</p> 
<pre><code class="prism language-php"><span class="token keyword">foreach</span><span class="token punctuation">(</span>$数组变量 <span class="token keyword">as</span><span class="token punctuation">[</span>$下标 <span class="token operator">=&gt;</span><span class="token punctuation">]</span>$值<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//通过$下标访问元素的下标；通过$值访问元素的值</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>通常：如果时关联数组（字母下标），就需要下标，如果是数字下标就直接访问值</p> 
<pre><code class="prism language-php"><span class="token comment">//PHP数组遍历：foreach</span>
<span class="token comment">//定义数组</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//foreach循环</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$arr</span> <span class="token keyword">as</span> <span class="token variable">$v</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//$v随意命名</span>
    <span class="token keyword">echo</span> <span class="token variable">$v</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//1,2,3,4,5,6,7,8,9,10</span>
<span class="token punctuation">}</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$arr</span> <span class="token keyword">as</span> <span class="token variable">$k</span> <span class="token operator">=&gt;</span> <span class="token variable">$v</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//$v随意命名</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'key:'</span><span class="token punctuation">,</span><span class="token variable">$k</span><span class="token punctuation">,</span><span class="token string single-quoted-string">' == value:'</span><span class="token punctuation">,</span><span class="token variable">$v</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//key:0 == value:1</span>
                                                <span class="token comment">//key:1 == value:2</span>
                                                <span class="token comment">//key:2 == value:3</span>
                                                <span class="token comment">//key:3 == value:4</span>
                                                <span class="token comment">//key:4 == value:5</span>
                                                <span class="token comment">//key:5 == value:6</span>
                                                <span class="token comment">//key:6 == value:7</span>
                                                <span class="token comment">//key:7 == value:8</span>
                                                <span class="token comment">//key:8 == value:9</span>
                                                <span class="token comment">//key:9 == value:10</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在进行数据存储定义的时候，通常二维数组不会两个维度的key下标都为数字，一般时一维为数字（无意义），二维为字符串（数据库表字段），所以在进行遍历的时候，通常是只需要针对一维进行遍历，取得二维数组元素，然后二维数组元素通过下标去访问。</p> 
<pre><code class="prism language-php"><span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
    <span class="token number">0</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Dim'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'age'</span> <span class="token operator">=&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tom'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'age'</span> <span class="token operator">=&gt;</span> <span class="token number">28</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//通过foreach遍历一维元素</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$arr</span> <span class="token keyword">as</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//1、可以继续遍历：增加foreach遍历$value</span>
    <span class="token comment">//2、可以使用下标访问</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'name is:'</span><span class="token punctuation">,</span><span class="token variable">$value</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string single-quoted-string">' and age is:'</span><span class="token punctuation">,</span><span class="token variable">$value</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>            <span class="token comment">//name is:Dim and age is:30</span>
        <span class="token comment">//name is:Tom and age is:28</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="foreach_1093"></a>foreach遍历原理</h5> 
<p>foreach遍历的原理：本质时数组的内部有一颗指针，默认时指向数组元素的第一个元素，foreach就是利用指针去获取数据，同时移动指针。</p> 
<pre><code class="prism language-php"><span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$arr</span> <span class="token keyword">as</span> <span class="token variable">$k</span> <span class="token operator">=&gt;</span> <span class="token variable">$v</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//循环体</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>1、foreach会重置指针：让指针指向第一个元素；</p> 
<p>2、进入foreach循环：通过指针取得当前第一个元素，然后将下标取出放到对应的下标变量<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         k 
        
       
         中 
        
       
         （ 
        
       
         如 
        
       
         果 
        
       
         存 
        
       
         在 
        
       
         ） 
        
       
         ， 
        
       
         将 
        
       
         值 
        
       
         取 
        
       
         出 
        
       
         来 
        
       
         放 
        
       
         到 
        
       
         对 
        
       
         应 
        
       
         的 
        
       
         值 
        
       
         变 
        
       
         量 
        
       
      
        k中（如果存在），将值取出来放到对应的值变量 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mord cjk_fallback">中</span><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">如</span><span class="mord cjk_fallback">果</span><span class="mord cjk_fallback">存</span><span class="mord cjk_fallback">在</span><span class="mord cjk_fallback">）</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">将</span><span class="mord cjk_fallback">值</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">出</span><span class="mord cjk_fallback">来</span><span class="mord cjk_fallback">放</span><span class="mord cjk_fallback">到</span><span class="mord cjk_fallback">对</span><span class="mord cjk_fallback">应</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">值</span><span class="mord cjk_fallback">变</span><span class="mord cjk_fallback">量</span></span></span></span></span>v中；（指针下移）</p> 
<p>3、进入到循环内部（循环体），开始执行；</p> 
<p>4、重复2和3，直到在2的时候遇到指针取不到内容（指针指向数组最后）</p> 
<h5><a id="for_1111"></a>for循环遍历数组</h5> 
<p>for循环：基于已知边界条件（起始和结束）然后有条件的变化（规律）</p> 
<p>因此：for循环遍历数组有对应条件</p> 
<p>1、获取数组长度：count(数组)的阿斗数组元素的长度</p> 
<p>2、要求数组元素的下标时规律的数字</p> 
<pre><code class="prism language-php"><span class="token comment">//数组特点：索引数组，下标规律</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$len</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'key is:'</span><span class="token punctuation">,</span><span class="token variable">$i</span><span class="token punctuation">,</span><span class="token string single-quoted-string">' and value is:'</span><span class="token punctuation">,</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>
                <span class="token comment">//key is:0 and value is:1</span>
                <span class="token comment">//key is:1 and value is:2</span>
                <span class="token comment">//key is:2 and value is:3</span>
                <span class="token comment">//key is:3 and value is:4</span>
                <span class="token comment">//key is:4 and value is:5</span>
                <span class="token comment">//key is:5 and value is:6</span>
                <span class="token comment">//key is:6 and value is:7</span>
                <span class="token comment">//key is:7 and value is:10</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="whileeachlist_1137"></a>while配合each和list遍历数组</h5> 
<p>while实在外部定义边界条件，如果要实现可以和for循环实现</p> 
<p>each函数使用：each能够从一个数组中获取当前数组指针所指向的元素的下标和值，拿到之后将数组指针下移，同时将拿到的元素的下标和值以一个四个元素的数组返回：</p> 
<p>0下标 –&gt; 取得元素的下标值</p> 
<p>1下标 –&gt; 取得元素的值</p> 
<p>key下标 –&gt; 取得元素的下标值</p> 
<p>value下标 –&gt; 取得元素的值</p> 
<pre><code class="prism language-php"><span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tom'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'age'</span> <span class="token operator">=&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre/&gt;'</span><span class="token punctuation">;</span>
<span class="token comment">//each函数指针操作</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//Array([1] =&gt; 1 [value] =&gt; 1 [0] =&gt; 0 [key] =&gt; 0)</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//Array( [1] =&gt; Tom [value] =&gt; Tom [0] =&gt; name [key] =&gt; name)</span>
</code></pre> 
<p>如果each取不到结果（数组指针移到最后），返回false</p> 
<p>list函数使用：list是一种结构，不是一种函数（没有返回值），是list提供一堆变量去从一个数组中取得元素值，然后依次存放到对应的变量当中（批量为变量赋值：值来源于数组）：list必须从索引数组中去获取数据，而且必须从0开始。</p> 
<pre><code class="prism language-php"><span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">list</span><span class="token punctuation">(</span><span class="token variable">$first</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">;</span>
<span class="token keyword">list</span><span class="token punctuation">(</span><span class="token variable">$first</span><span class="token punctuation">,</span><span class="token variable">$second</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">;</span>    <span class="token comment">//错误：second变量对应的小标为元素小标1的，但是数组没有</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$first</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//int(1)</span>
</code></pre> 
<p>list和each配合特别好：each一定有两个元素就是0和1下标元素</p> 
<pre><code class="prism language-php"><span class="token keyword">list</span><span class="token punctuation">(</span>变量<span class="token number">1</span><span class="token punctuation">,</span>变量<span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">each</span><span class="token punctuation">(</span>数组<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//是一种赋值运算，但是可以得到false结果（each取不到正确的结果），整个表达式为false</span>

 
 
 
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tom'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'age'</span> <span class="token operator">=&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token keyword">list</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">each</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//输出</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'key is :'</span><span class="token punctuation">,</span><span class="token variable">$key</span><span class="token punctuation">,</span><span class="token string single-quoted-string">' value is:'</span><span class="token punctuation">,</span><span class="token variable">$value</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_1185"></a>数组的相关函数</h4> 
<p>1、排序函数：对数组元素进行排序，都是按照ASCII码进行比较，可以进行英文比较</p> 
<p>sort()：顺序排序（下标重排）</p> 
<pre><code class="prism language-php"><span class="token comment">//排序函数</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;'</span><span class="token punctuation">;</span>
<span class="token variable">$sort_arr</span> <span class="token operator">=</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ([0] =&gt; 0 [1] =&gt; 1 [2] =&gt; 2 [3] =&gt; 3 [4] =&gt; 5 )</span>
</code></pre> 
<p>rsort()：逆向排序（下标重排）</p> 
<p>asor()：顺序排序（下标保留）</p> 
<pre><code class="prism language-php"><span class="token variable">$asort_arr</span> <span class="token operator">=</span> <span class="token function">asort</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [4] =&gt; 0 [1] =&gt; 1 [3] =&gt; 2 [0] =&gt; 3 [2] =&gt; 5 )</span>
</code></pre> 
<p>arsor()：逆序排序（下标保留）</p> 
<p>ksort()：顺序排序：按照键名（下标）</p> 
<p>krsort()：逆序排序：按照键名（下标）</p> 
<pre><code class="prism language-php"><span class="token variable">$krsort_arr</span> <span class="token operator">=</span> <span class="token function">krsort</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [4] =&gt; 0 [3] =&gt; 2 [2] =&gt; 5 [1] =&gt; 1 [0] =&gt; 3 )</span>
</code></pre> 
<p>shuffle()：随机打乱数组元素</p> 
<pre><code class="prism language-php"><span class="token variable">$sort_arr</span> <span class="token operator">=</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$shuffle_arr</span> <span class="token operator">=</span> <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [0] =&gt; 3 [1] =&gt; 2 [2] =&gt; 0 [3] =&gt; 5 [4] =&gt; 1 )</span>
</code></pre> 
<p>2、指针函数</p> 
<p>reset()：重置指针，将数组指针回到首位</p> 
<p>end()：重置指针，将数组指针指到最后一个元素</p> 
<p>next()：指针下移，取得下一个元素的值</p> 
<p>prev()：指针上移，取得上一个元素的值</p> 
<p>current()：获得当前指针的元素值</p> 
<p>key()：获得当前指针的下标值</p> 
<pre><code class="prism language-php"><span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//指针函数</span>
<span class="token keyword">echo</span> <span class="token function">key</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>            <span class="token comment">//0</span>
<span class="token keyword">echo</span> <span class="token function">current</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//3</span>
<span class="token keyword">echo</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//1,5</span>
<span class="token keyword">echo</span> <span class="token function">prev</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//1</span>
<span class="token keyword">echo</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>            <span class="token comment">//0</span>
<span class="token keyword">echo</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//3</span>
</code></pre> 
<p>注意事项：next和prev会移动指针，有可能会导致指针移动到最前或者最后（离开数组），导致数组不能使用，通过next和prev不能回到正确的位置。只能通过end或者reset进行指针重置。</p> 
<p>3、其他函数</p> 
<p>count()：统计数组中元素的数量</p> 
<p>array_push()：往数组中加入一个元素（数组后面）</p> 
<p>array_pop()：从数组中取出一个元素（数组后面）</p> 
<p>array_shift()：从数组中取出一个元素（数组前面）</p> 
<p>array_unshift()：往数组中加入一个元素（数组前面）</p> 
<p>PHP模拟数据结构：</p> 
<p>栈：压栈，先进去后出来（FILO）</p> 
<p>队列：排队，先进去的先出去（FIFO）</p> 
<pre><code class="prism language-php"><span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//栈：先压栈后出栈：都是从一端出来</span>
<span class="token comment">//前面：array_shift/array_unshift</span>
<span class="token comment">//后面：array_push/array_pop</span>
<span class="token comment">//压栈</span>
<span class="token function">array_push</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">array_push</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">array_push</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [0] =&gt; 3 [1] =&gt; 2 [2] =&gt; 1 )</span>
<span class="token comment">//出栈</span>
<span class="token keyword">echo</span> <span class="token function">array_pop</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">array_pop</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">array_pop</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//1,2,3</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//队列：先排队，先出来，一端进，另外一端出</span>
<span class="token comment">//后进前出：array_push/array_shfit</span>
<span class="token comment">//前进后出：array_unshift/array_pop</span>
<span class="token comment">//入队</span>
<span class="token function">array_unshift</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">array_unshift</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">array_unshift</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 )</span>
<span class="token comment">//出队</span>
<span class="token keyword">echo</span> <span class="token function">array_pop</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">array_pop</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">array_pop</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'&lt;br/&gt;'</span><span class="token punctuation">;</span>        <span class="token comment">//3,2,1</span>
</code></pre> 
<p>array_reverse()：把数组元素反过来</p> 
<p>in_array()：判断一个元素在数组中是否存在</p> 
<p>array_keys()：获取一个数组的所有下标，返回一个索引数组</p> 
<p>array_values()：获取一个数组的所有值，返回一个索引数组</p> 
<pre><code class="prism language-php"><span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">array_reverse</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//Array ( [0] =&gt; 5 [1] =&gt; 4 [2] =&gt; 3 [3] =&gt; 2 [4] =&gt; 1 )</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//bool(true)</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//bool(false)</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">array_keys</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [0] =&gt; 0 [1] =&gt; 1 [2] =&gt; 2 [3] =&gt; 3 [4] =&gt; 4 )</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">array_values</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 4 [4] =&gt; 5 )</span>
<span class="token comment">//使用指针遍历数组</span>
<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token class-name type-declaration">php</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token operator">!==</span><span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token function">key</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">"=&gt;"</span><span class="token operator">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">"\n"</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    <span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_1322"></a>编程思想</h3> 
<p>编程思想：如何利用数学模式来解决对应的需求问题；然后利用代码实现对应的数据模型（逻辑）。</p> 
<p>算法：使用代码实现对应的数学模型，从而解决对应的业务问题。</p> 
<h4><a id="_1328"></a>递推算法</h4> 
<p>递推算法是一种简单的算法，即通过已知条件，利用特定关系得出中间推论，直至得到结果的算法。递推算法分为顺推和逆推两种。</p> 
<p>顺推：通过最简单的条件（已知），然后逐步推演结果</p> 
<p>逆推：通过结果找到规律，然后推到已知条件</p> 
<p>斐波那契数列：1 1 2 3 5 8 13 …，通常需求：请求得指定位置N所对应的值是多少</p> 
<p>找规律：</p> 
<p>1、第一个数是1</p> 
<p>2、第二个数也是1</p> 
<p>3、从第三位开始：属于前两个数的和</p> 
<p>代码解决思路：</p> 
<p>1、如果数字位置为1和2，结果都是1</p> 
<p>2、从第三个开始，想办法得到前两个结果，就可以得到</p> 
<p>终极解决办法：想办法要求的位置之前的所有的值都列出来，那么要求的数就可以通过前两个数之和计算出来：使用数组存储所有结果即可。</p> 
<p>递推算法求斐波那契序列：</p> 
<pre><code class="prism language-php"><span class="token comment">//需求：规律1  1  2  3  5...</span>
<span class="token comment">//求出指定位数对应的值</span>
<span class="token comment">//已知条件：第一个和第二个数都为1，第三个开始为前两个之和</span>
<span class="token keyword">function</span> <span class="token function">my_recursive</span><span class="token punctuation">(</span><span class="token variable">$dse</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$des</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token variable">$des</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//开始计算</span>
    <span class="token variable">$f</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token variable">$f</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>     <span class="token comment">//如果想要第一个或者第二个结果，那么可以直接给出</span>
    <span class="token variable">$des</span> <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;=</span> <span class="token variable">$des</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token variable">$f</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$f</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token variable">$f</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//查看</span>
    <span class="token keyword">return</span> <span class="token variable">$f</span><span class="token punctuation">[</span><span class="token variable">$des</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">my_recursive</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//610</span>
</code></pre> 
<h4><a id="_1375"></a>递归算法</h4> 
<p>递推算法是把问题转化为规模小了的同类问题的子问题。然后递归调用函数（或过程）来表示问题的解。</p> 
<p>1、简化问题：找到最优子问题（不能再小）</p> 
<p>2、函数自己调用自己</p> 
<p>斐波那契数列：1 1 2 3 5 8 13 …</p> 
<p>需求：请求得指定位置N所对应的值是多少</p> 
<p>规律：第一和第二个数为1，从第三个开始为前两个数之和</p> 
<p>F(N) = F(N-1) + F(N-2);</p> 
<p>F(N-1) = F(N-2) + F(N-3);</p> 
<p>…</p> 
<p>F(2) = F(1) = 1;</p> 
<p>递归思想中：量两个非常重要的点</p> 
<p>递归点：发现当前问题又解决当前问题的函数，取解决规模比当前小一点的问题来解决F(N) = F(N-1) + F(N-2)</p> 
<p>递归出口：当问题解决的时候，已经到达（必须有）最优子问题，不能再次调用函数</p> 
<p>如果一个函数递归调用自己而没有递归出口：就是死循环</p> 
<p>递归的本质是函数调用函数：一个函数需要开辟一块内存空间，递归会出现同时调用N多个函数（自己）：递归的本质是利用空间换时间。</p> 
<pre><code class="prism language-php"><span class="token comment">//递归一定有函数</span>
<span class="token keyword">function</span> <span class="token function">recursion</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//递归出口</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$n</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token variable">$n</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//递归点：求N的值，与求N-1的值一模一样，只是N-1的规模比N小</span>
    <span class="token keyword">return</span> <span class="token function">recursion</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">recursion</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">recursion</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//610</span>
</code></pre> 
<h4><a id="_1418"></a>数组排序算法</h4> 
<h5><a id="_1420"></a>冒泡排序</h5> 
<p>冒泡排序（bubble sort），是一种计算机科学领域的比较简单的排序算法。</p> 
<p>他重复地走访过要排序的序列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。</p> 
<p>走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。</p> 
<p>冒泡排序的算法思路：</p> 
<p>1、比较相邻的元素。如果第一个比第二个大，就交换他们两个。</p> 
<p>2、对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该回事最大的数。</p> 
<p>3、针对所有元素重复以上步骤，除了最后一个。</p> 
<p>4、持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。</p> 
<pre><code class="prism language-php"><span class="token comment">//数组排序算法：冒泡排序</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2、想办法让下面可以每次找出最大值的代码重复执行</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$len</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">,</span><span class="token variable">$len</span><span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//1、想办法将最大的值放到最右边去</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$j</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$j</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token variable">$j</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//判断：两两相比</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//左边比右边大：交换</span>
            <span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$temp</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;'</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 4 [3] =&gt; 5 [4] =&gt; 7 [5] =&gt; 8 [6] =&gt; 9 )</span>
</code></pre> 
<h5><a id="_1458"></a>选择排序</h5> 
<p>选择排序（selection sort）是一种简单直观的排序算法。他的工作原理是每一次从待排序的数据元素中选出最小（或最大）的一个元素，存放在序列的起始位置，直到全部待排序的数据元素排完。选择排序是不稳定的排序方法（比如序列[5,5,3]第一次就将第一个[5]与[3]交换，导致第一个5挪动到第二个5后面）。</p> 
<p>选择排序的思路：</p> 
<p>1、假设第一个元素为最小元素，记下下标。</p> 
<p>2、寻找右侧剩余的元素，如果有更小的，重新记下最新的下标。</p> 
<p>3、如果又新的最小的，交换两个元素。</p> 
<p>4、往右重复以上步骤，直到元素本身为最后一个。</p> 
<pre><code class="prism language-php"><span class="token comment">//数组排序算法：选择排序</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1、确定要交换多少次：一次只能找到最小的，需要找到数组长度对应的次数</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">$len</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//2、假设当前第一个已经排好序了</span>
    <span class="token variable">$min</span> <span class="token operator">=</span> <span class="token variable">$i</span><span class="token punctuation">;</span>
    <span class="token comment">//3、拿该最小的取比较剩余的其他</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$j</span> <span class="token operator">=</span> <span class="token variable">$i</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token variable">$j</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span><span class="token punctuation">;</span><span class="token variable">$j</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//4、比较：比较当前元素与选定的最小元素</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$min</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//说明当前指定的$min不合适</span>
            <span class="token variable">$min</span> <span class="token operator">=</span> <span class="token variable">$j</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//5、交换当前选定的值与实际最小的元素值</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$min</span> <span class="token operator">!=</span> <span class="token variable">$i</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$min</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$min</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$temp</span><span class="token punctuation">;</span>        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;'</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 4 [4] =&gt; 5 [5] =&gt; 6 [6] =&gt; 9 )</span>
</code></pre> 
<h5><a id="_1498"></a>插入排序</h5> 
<p>插入排序（insert sort），插入排序的基本操作就是将一个数据插入到已经排好序的有序数据中，从而得到一个新的、个数加一的有序数据，算法适用于少量数据的排序，是稳定的排序方法。插入算法把要排序的数组分为两部分：第一部分包含了这个数组的所有元素，但将最后一个元素除外（让数组多一个空间才有插入的位置），而第二部分就只包含这一个元素（即待插入元素）。在第一部分排序完成后，再将这个最后元素插入到已排好序的第一部分中。</p> 
<p>插入排序的基本思想是：每步将一个待排序的记录，按其关键码值的大小插入前面已经排序的文件中适当的位置上，直到全部插入完为止。</p> 
<p>插入排序的算法思路：</p> 
<p>1、设置监视哨r[0]，将待插入记录的值赋值给r[0]；</p> 
<p>2、设置开始查找的位置j</p> 
<p>3、再数组中进行搜索，搜索中将第j个记录后移，直至r[0].key &gt;= r[j].key为止；</p> 
<p>4、讲r[0]插入r[j+1]的位置上</p> 
<p>通俗来讲：</p> 
<p>1、认定第一个元素已经排好序</p> 
<p>2、取出第二个元素，作为待插入数据</p> 
<p>3、与已经排好序的数组的最右侧元素开始比较</p> 
<p>4、如果后面的小于前面的：说明前面已经排好序的那个数组元素不再对的位置（向后移一个），然后让新的元素填充进去（继续向前比：高级）</p> 
<p>5、重复前面的步骤：直到当前元素插入到对的位置</p> 
<p>6、重复以上步骤，直到所有的数组元素都插入到对的位置</p> 
<pre><code class="prism language-php"><span class="token comment">//数组排序：插入排序</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1、确定要插入多少回（假设一个数字一次性插入到对的位置，同时第一个位置是假设对的）</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">$len</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//2、取出当前要插入的元素的值</span>
    <span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//3、让该数据与前面已经拍好序的数组元素重复比较（挨个比较），直到对的位置（交换）</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$j</span> <span class="token operator">=</span> <span class="token variable">$i</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token variable">$j</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$j</span><span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//4、比较</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token variable">$temp</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//说明当前要插入的元素，比前面的已经排好序的元素的值要小：交换位置</span>
            <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$temp</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//说明当前待插入元素，比前面的元素要大：说明位置正确</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;'</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [0] =&gt; 2 [1] =&gt; 4 [2] =&gt; 5 [3] =&gt; 6 [4] =&gt; 8 [5] =&gt; 9 )</span>
</code></pre> 
<p>优化代码：找到对的位置交换一次即可</p> 
<pre><code class="prism language-php"><span class="token comment">//数组排序：插入排序（优化）</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1、确定要插入多少回（假设一个数字一次性插入到对的位置，同时第一个位置是假设对的）</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">$len</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//2、取出当前要插入的元素的值</span>
    <span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$change</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">//3、让该数据与前面已经拍好序的数组元素重复比较（挨个比较），直到对的位置（交换）</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$j</span> <span class="token operator">=</span> <span class="token variable">$i</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token variable">$j</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$j</span><span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//4、比较</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token variable">$temp</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//说明当前要插入的元素，比前面的已经排好序的元素的值要小：交换位置</span>
            <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">//说明前面要插入的元素，比前面已经排好序的元素的值要小：交换位置</span>
            <span class="token variable">$change</span> <span class="token operator">=</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//说明当前待插入元素，比前面的元素要大：说明位置正确</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//判断位置需要变动</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$change</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//有数据移动：占错位置了</span>
        <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$temp</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;'</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [0] =&gt; 2 [1] =&gt; 4 [2] =&gt; 5 [3] =&gt; 6 [4] =&gt; 8 [5] =&gt; 9 )</span>
</code></pre> 
<h5><a id="_1585"></a>快速排序</h5> 
<p>快速排序（quick sort）是对冒泡排序的一种改进。通过一趟排序将要排序的数据分隔成独立的两部分，其中一部分的所有数据都比另一部分的所有数据都要小，然后再按次方法对这两部分数据分别进行快速排序，整个排序过程可以递归进行，以此达到整个数据变成有序序列。（递归）</p> 
<p>设要排序的数组是A[0]……A[N-1]，首先任意选取一个数据（通常选用数组的第一个数）作为关键数据，然后将所有比它小的数据都放到它前面，所有比它大的数据都放到它后面，这个过程称为一趟快速排序。值得注意的是，快速排序不是一种稳定的排序算法，也就是说，多个相同的值的相对位置也许会再算法结束时产生变动。</p> 
<p>快速排序的算法是：</p> 
<p>1、从数组中选出一个元素（通常第一个），作为参照对象。</p> 
<p>2、定义两个数组，将目标数组中剩余的元素与参照元素挨个比较：小的放到一个数组，大的放到另外一个数组。</p> 
<p>3、第二步执行完之后，前后的数组顺序不确定，但是确定了自己的位置。</p> 
<p>4、将得到的小数组按照第1到第3步重复操作（子问题）。</p> 
<p>5、回溯最小数组（一个元素）</p> 
<pre><code class="prism language-php"><span class="token comment">//数组排序：快速排序</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//递归出口</span>
    <span class="token variable">$len</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$len</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token variable">$arr</span><span class="token punctuation">;</span>
    <span class="token comment">//取出某个元素，然后将剩余的数组元素，分散到两个不同的数组中</span>
    <span class="token variable">$left</span> <span class="token operator">=</span> <span class="token variable">$right</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//第一个元素作为比较元素</span>
        <span class="token comment">//比较：小的放left中，大的放right中</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token variable">$left</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            <span class="token variable">$right</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//$left和$right数组元素没有排好序：递归点</span>
    <span class="token variable">$left</span> <span class="token operator">=</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span><span class="token variable">$left</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$right</span> <span class="token operator">=</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span><span class="token variable">$right</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//合并三个“数”组</span>
    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span><span class="token variable">$left</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword type-casting">array</span><span class="token punctuation">)</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token variable">$right</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;'</span><span class="token punctuation">;</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">quick_sort</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [0] =&gt; 2 [1] =&gt; 3 [2] =&gt; 4 [3] =&gt; 5 [4] =&gt; 6 [5] =&gt; 7 [6] =&gt; 8 [7] =&gt; 9 )</span>
</code></pre> 
<h5><a id="_1631"></a>归并排序</h5> 
<p>归并排序（merge sort）是建立在归并操作上的一种有效的排序算法，该算法是采用分治法（Divide and Conquer）的一个非常典型的应用。将已有序的子序列合并，得到完全有序的序列；即先使每个子序列有序，再使子序列段间有序。若将两个有序表合并成一个有序表，称为二路归并。</p> 
<pre><code class="prism language-php"><span class="token comment">//二路归并</span>
<span class="token variable">$arr1</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$arr2</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//取出一个空数组用于归并空间</span>
<span class="token variable">$arr3</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//只要$arr1和$arr2里面还有元素，就进行循环</span>
    <span class="token comment">//取出每个数组的第一个元素：进行比较</span>
    <span class="token variable">$arr3</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$arr1</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token variable">$arr2</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token function">array_shift</span><span class="token punctuation">(</span><span class="token variable">$arr1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span><span class="token class-name return-type">array_shift</span><span class="token punctuation">(</span><span class="token variable">$arr2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>
<span class="token comment">//合并结果</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">array_merge</span><span class="token punctuation">(</span><span class="token variable">$arr3</span><span class="token punctuation">,</span><span class="token variable">$arr1</span><span class="token punctuation">,</span><span class="token variable">$arr2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>归并排序的算法是：</p> 
<p>1、将数组拆分成两个数组</p> 
<p>2、重复步骤1将数组拆分成最小单元</p> 
<p>3、申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列。</p> 
<p>4、设定两个指针，最初位置分别为两个已经排序序列的起始位置。</p> 
<p>5、比较两个指针所所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置</p> 
<p>6、重复步骤3直到某一指针超出序列尾</p> 
<p>7、将另一序列所剩下的所有元素直接赋值到合并序列尾</p> 
<pre><code class="prism language-php"><span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//数组排序：归并排序</span>
<span class="token keyword">function</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//递归出口</span>
    <span class="token variable">$len</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$len</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token variable">$arr</span><span class="token punctuation">;</span>
    <span class="token comment">//拆分</span>
    <span class="token variable">$middle</span> <span class="token operator">=</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token variable">$len</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$left</span> <span class="token operator">=</span> <span class="token function">array_slice</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$middle</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$right</span> <span class="token operator">=</span> <span class="token function">array_slice</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token variable">$middle</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//递归点：$left和$right都没有排好序：而且可能是多个元素的数组</span>
    <span class="token variable">$left</span> <span class="token operator">=</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span><span class="token variable">$left</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$right</span> <span class="token operator">=</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span><span class="token variable">$right</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//假设左边和右边都已经排好序：二路归并</span>
    <span class="token variable">$m</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$left</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$right</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//只要$arr1和$arr2里面还有元素，就进行循环</span>
        <span class="token comment">//取出每个数组的第一个元素：进行比较</span>
        <span class="token variable">$m</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$left</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token variable">$right</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token function">array_shift</span><span class="token punctuation">(</span><span class="token variable">$left</span><span class="token punctuation">)</span> <span class="token punctuation">:</span><span class="token class-name return-type">array_shift</span><span class="token punctuation">(</span><span class="token variable">$right</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token punctuation">}</span>
    <span class="token comment">//返回结果</span>
    <span class="token keyword">return</span> <span class="token function">array_merge</span><span class="token punctuation">(</span><span class="token variable">$m</span><span class="token punctuation">,</span><span class="token variable">$left</span><span class="token punctuation">,</span><span class="token variable">$right</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 4 [4] =&gt; 5 [5] =&gt; 7 [6] =&gt; 9 )</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_1691"></a>查找算法</h4> 
<h5><a id="_1693"></a>查找算法含义</h5> 
<p>查找实在大量的信息中寻找一个特定的信息元素，再计算机应用中，查找是基本运算。查找算法是指实现查找过程对应的代码结。就是在大型数组中取快速定位到想要的元素。</p> 
<h5><a id="_1697"></a>顺序查找算法</h5> 
<p>顺序查找也称为线形查找，从数据结构线形表的一端开始，顺序扫描，一次将扫描到的结点关键字与给定值k相比较，若相等则表示查找成功，若扫描结束仍然没有找到关键字等于k的结点，表示查找失败。</p> 
<pre><code class="prism language-php"><span class="token comment">//查找算法：顺序查找</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">68</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//顺序查找：从数组第一个元素开始，挨个匹配</span>
<span class="token keyword">function</span> <span class="token function">check_order</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token variable">$num</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//全部匹配</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$len</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//判断</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token variable">$num</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token variable">$i</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">check_order</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//bool(false)</span>
</code></pre> 
<h5><a id="_1718"></a>二分查找算法</h5> 
<p>二分查找算法要求线形表中的结点按关键字值升序或者降序排列，用给定值k与中间结点的关键字比较，中间结点把线形表分成两个子表，若相等则查找成功；若不相等，再根据k与该中间结点关键字的比较结果确定下一步查找哪个子表，这样递归进行，直到查找到或查找结束。</p> 
<p>折半算法思路：</p> 
<p>1、计算数组长度</p> 
<p>2、确定左右两边的指针位置</p> 
<p>3、找到中间位置</p> 
<p>4、匹配</p> 
<p>5、然后根据大小重定边界</p> 
<pre><code class="prism language-php"><span class="token comment">//查找算法：二分查找算法</span>
<span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">68</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">check_break</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token variable">$res</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//1、得到数组的边界</span>
    <span class="token variable">$right</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$left</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">//循环匹配</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$left</span> <span class="token operator">&lt;=</span> <span class="token variable">$right</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//3、得到中间位置</span>
        <span class="token variable">$middle</span> <span class="token operator">=</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$left</span> <span class="token operator">+</span> <span class="token variable">$right</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4、匹配数据</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$middle</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token variable">$res</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token variable">$middle</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//5、没有找到</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">[</span><span class="token variable">$middle</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token variable">$res</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//值在右边</span>
            <span class="token variable">$left</span> <span class="token operator">=</span> <span class="token variable">$middle</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//值在左边</span>
            <span class="token variable">$right</span> <span class="token operator">=</span> <span class="token variable">$middle</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">check_break</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//float(6)</span>
</code></pre> 
<h3><a id="PHP_1763"></a>PHP面向对象</h3> 
<ul><li><strong>类</strong> − 定义了一件事物的抽象特点。类的定义包含了数据的形式以及对数据的操作。</li><li><strong>对象</strong> − 是类的实例。</li><li><strong>成员变量</strong> − 定义在类内部的变量。该变量的值对外是不可见的，但是可以通过成员函数访问，在类被实例化为对象后，该变量即可成为对象的属性。</li><li><strong>成员函数</strong> − 定义在类的内部，可用于访问对象的数据。</li><li><strong>继承</strong> − 继承性是子类自动共享父类数据结构和方法的机制，这是类之间的一种关系。在定义和实现一个类的时候，可以在一个已经存在的类的基础之上来进行，把这个已经存在的类所定义的内容作为自己的内容，并加入若干新的内容。</li><li><strong>父类</strong> − 一个类被其他类继承，可将该类称为父类，或基类，或超类。</li><li><strong>子类</strong> − 一个类继承其他类称为子类，也可称为派生类。</li><li><strong>多态</strong> − 多态性是指相同的函数或方法可作用于多种类型的对象上并获得不同的结果。不同的对象，收到同一消息可以产生不同的结果，这种现象称为多态性。</li><li><strong>重载</strong> − 简单说，就是函数或者方法有同样的名称，但是参数列表不相同的情形，这样的同名不同参数的函数或者方法之间，互相称之为重载函数或者方法。</li><li><strong>抽象性</strong> − 抽象性是指将具有一致的数据结构（属性）和行为（操作）的对象抽象成类。一个类就是这样一种抽象，它反映了与应用有关的重要性质，而忽略其他一些无关内容。任何类的划分都是主观的，但必须与具体的应用有关。</li><li><strong>封装</strong> − 封装是指将现实世界中存在的某个客体的属性与行为绑定在一起，并放置在一个逻辑单元内。</li><li><strong>构造函数</strong> − 主要用来在创建对象时初始化对象， 即为对象成员变量赋初始值，总与new运算符一起使用在创建对象的语句中。</li><li><strong>析构函数</strong> − 析构函数(destructor) 与构造函数相反，当对象结束其生命周期时（例如对象所在的函数已调用完毕），系统自动执行析构函数。析构函数往往用来做"清理善后" 的工作（例如在建立对象时用new开辟了一片内存空间，应在退出前在析构函数中用delete释放）。</li></ul> 
<h4><a id="_1779"></a>构造函数</h4> 
<p>PHP 5 允许开发者在一个类中定义一个方法作为构造函数，语法格式如下：</p> 
<pre><code class="prism language-php"><span class="token keyword type-declaration">void</span> <span class="token function">__construct </span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token keyword type-declaration">mixed</span> <span class="token variable">$args</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> $<span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_1787"></a>析构函数</h4> 
<p>析构函数(destructor) 与构造函数相反，当对象结束其生命周期时（例如对象所在的函数已调用完毕），系统自动执行析构函数。</p> 
<p>PHP 5 引入了析构函数的概念，这类似于其它面向对象的语言，其语法格式如下：</p> 
<pre><code class="prism language-php"><span class="token keyword type-declaration">void</span> <span class="token function">__destruct </span><span class="token punctuation">(</span> <span class="token keyword type-declaration">void</span> <span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_1797"></a>继承</h4> 
<p>PHP 使用关键字 <strong>extends</strong> 来继承一个类，PHP 不支持多继承，格式如下：</p> 
<pre><code>class Child extends Parent {
   // 代码部分
}
</code></pre> 
<p>子类继承父类的属性和方法，也就是说子类拥有父类所有的东西，包括 public(公有)、protected(保护)和private(私有)的。但是父类私有的属性和方法不能让子类直接调用，并不是说没有继承过来，而是继承过来了，但是要调用父类的私有属性和方法的话还是需要通过父类的 public、protected 方法调用。</p> 
<h4><a id="_1809"></a>方法重写</h4> 
<p>如果从父类继承的方法不能满足子类的需求，可以对其进行改写，这个过程叫方法的覆盖（override），也称为方法的重写。</p> 
<p>实例中重写了 getUrl 与 getTitle 方法：</p> 
<h4><a id="_1815"></a>访问控制</h4> 
<p>PHP 对属性或方法的访问控制，是通过在前面添加关键字 public（公有），protected（受保护）或 private（私有）来实现的。</p> 
<ul><li>**public（公有）：**公有的类成员可以在任何地方被访问。</li><li>**protected（受保护）：**受保护的类成员则可以被其自身以及其子类和父类访问。</li><li>**private（私有）：**私有的类成员则只能被其定义所在的类访问。</li></ul> 
<h4><a id="_1823"></a>接口</h4> 
<p>使用接口（interface），可以指定某个类必须实现哪些方法，但不需要定义这些方法的具体内容。</p> 
<p>接口是通过 <strong>interface</strong> 关键字来定义的，就像定义一个标准的类一样，但其中定义所有的方法都是空的。</p> 
<p>接口中定义的所有方法都必须是公有，这是接口的特性。</p> 
<p>要实现一个接口，使用 <strong>implements</strong> 操作符。类中必须实现接口中定义的所有方法，否则会报一个致命错误。类可以实现多个接口，用逗号来分隔多个接口的名称。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token comment">// 声明一个'iTemplate'接口</span>
<span class="token keyword">interface</span> <span class="token class-name">iTemplate</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token variable">$template</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// 实现接口</span>
<span class="token keyword">class</span> <span class="token class-name">Template</span> <span class="token keyword">implements</span> <span class="token class-name">iTemplate</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token variable">$vars</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$var</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">vars</span><span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$var</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token variable">$template</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">vars</span> <span class="token keyword">as</span> <span class="token variable">$name</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token variable">$template</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'{'</span> <span class="token operator">.</span> <span class="token variable">$name</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'}'</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$template</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token keyword">return</span> <span class="token variable">$template</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_1865"></a>常量</h4> 
<p>可以把在类中始终保持不变的值定义为常量。在定义和使用常量的时候不需要使用 $ 符号。</p> 
<p>常量的值必须是一个定值，不能是变量，类属性，数学运算的结果或函数调用。</p> 
<p>自 PHP 5.3.0 起，可以用一个变量来动态调用类。但该变量的值不能为关键字（如 self，parent 或 static）。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> constant <span class="token operator">=</span> <span class="token string single-quoted-string">'常量值'</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">showConstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span>  <span class="token keyword static-context">self</span><span class="token operator">::</span>constant <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">echo</span> <span class="token class-name static-context">MyClass</span><span class="token operator">::</span>constant <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>

<span class="token variable">$classname</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"MyClass"</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$classname</span><span class="token operator">::</span>constant <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span> <span class="token comment">// 自 5.3.0 起</span>

<span class="token variable">$class</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$class</span><span class="token operator">-&gt;</span><span class="token function">showConstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token variable">$class</span><span class="token operator">::</span>constant <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span> <span class="token comment">// 自 PHP 5.3.0 起</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="_1896"></a>抽象类</h4> 
<p>任何一个类，如果它里面至少有一个方法是被声明为抽象的，那么这个类就必须被声明为抽象的。</p> 
<p>定义为抽象的类不能被实例化。</p> 
<p>被定义为抽象的方法只是声明了其调用方式（参数），不能定义其具体的功能实现。</p> 
<p>继承一个抽象类的时候，子类必须定义父类中的所有抽象方法；另外，这些方法的访问控制必须和父类中一样（或者更为宽松）。例如某个抽象方法被声明为受保护的，那么子类中实现的方法就应该声明为受保护的或者公有的，而不能定义为私有的。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractClass</span>
<span class="token punctuation">{<!-- --></span>
 <span class="token comment">// 强制要求子类定义这些方法</span>
    <span class="token keyword">abstract</span> <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">prefixValue</span><span class="token punctuation">(</span><span class="token variable">$prefix</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 普通方法（非抽象方法）</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">printOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">print</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteClass1</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string double-quoted-string">"ConcreteClass1"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">prefixValue</span><span class="token punctuation">(</span><span class="token variable">$prefix</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string double-quoted-string">"<span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token variable">$prefix</span><span class="token punctuation">}</span></span>ConcreteClass1"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteClass2</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string double-quoted-string">"ConcreteClass2"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">prefixValue</span><span class="token punctuation">(</span><span class="token variable">$prefix</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string double-quoted-string">"<span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token variable">$prefix</span><span class="token punctuation">}</span></span>ConcreteClass2"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token variable">$class1</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass1</span><span class="token punctuation">;</span>
<span class="token variable">$class1</span><span class="token operator">-&gt;</span><span class="token function">printOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$class1</span><span class="token operator">-&gt;</span><span class="token function">prefixValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'FOO_'</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>

<span class="token variable">$class2</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass2</span><span class="token punctuation">;</span>
<span class="token variable">$class2</span><span class="token operator">-&gt;</span><span class="token function">printOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$class2</span><span class="token operator">-&gt;</span><span class="token function">prefixValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'FOO_'</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>

<span class="token comment">//输出</span>
ConcreteClass1
FOO_ConcreteClass1
ConcreteClass2
FOO_ConcreteClass2
</code></pre> 
<p>此外，子类方法可以包含父类抽象方法中不存在的可选参数。</p> 
<p>例如，子类定义了一个可选参数，而父类抽象方法的声明里没有，则也是可以正常运行的。</p> 
<h4><a id="Static__1962"></a>Static 关键字</h4> 
<p>声明类属性或方法为 static(静态)，就可以不实例化类而直接访问。</p> 
<p>静态属性不能通过一个类已实例化的对象来访问（但静态方法可以）。</p> 
<p>由于静态方法不需要通过对象即可调用，所以伪变量 $this 在静态方法中不可用。</p> 
<p>静态属性不可以由对象通过 -&gt; 操作符来访问。</p> 
<p>自 PHP 5.3.0 起，可以用一个变量来动态调用类。但该变量的值不能为关键字 self，parent 或 static</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$my_static</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">;</span>
  
  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">staticValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">return</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token variable">$my_static</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">print</span> <span class="token class-name static-context">Foo</span><span class="token operator">::</span><span class="token variable">$my_static</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token variable">$foo</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">print</span> <span class="token variable">$foo</span><span class="token operator">-&gt;</span><span class="token function">staticValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>    

  <span class="token comment">//输出</span>
  <span class="token comment">//foo</span>
  <span class="token comment">//foo</span>
</code></pre> 
<h4><a id="Final__1995"></a>Final 关键字</h4> 
<p>PHP 5 新增了一个 final 关键字。如果父类中的方法被声明为 final，则子类无法覆盖该方法。如果一个类被声明为 final，则不能被继承。</p> 
<p>以下代码执行会报错：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">BaseClass</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">echo</span> <span class="token string double-quoted-string">"BaseClass::test() called"</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   
   <span class="token keyword">final</span> <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">moreTesting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">echo</span> <span class="token string double-quoted-string">"BaseClass::moreTesting() called"</span>  <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ChildClass</span> <span class="token keyword">extends</span> <span class="token class-name">BaseClass</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">moreTesting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">echo</span> <span class="token string double-quoted-string">"ChildClass::moreTesting() called"</span>  <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 报错信息 Fatal error: Cannot override final method BaseClass::moreTesting()</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="_2022"></a>调用父类构造方法</h4> 
<p>PHP 不会在子类的构造方法中自动的调用父类的构造方法。要执行父类的构造方法，需要在子类的构造方法中调用 <strong>parent::__construct()</strong> 。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">BaseClass</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">print</span> <span class="token string double-quoted-string">"BaseClass 类中构造方法"</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">SubClass</span> <span class="token keyword">extends</span> <span class="token class-name">BaseClass</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 子类构造方法不能自动调用父类的构造方法</span>
       <span class="token keyword">print</span> <span class="token string double-quoted-string">"SubClass 类中构造方法"</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">OtherSubClass</span> <span class="token keyword">extends</span> <span class="token class-name">BaseClass</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 继承 BaseClass 的构造方法</span>
<span class="token punctuation">}</span>

<span class="token comment">// 调用 BaseClass 构造方法</span>
<span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BaseClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 调用 BaseClass、SubClass 构造方法</span>
<span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 调用 BaseClass 构造方法</span>
<span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OtherSubClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
 
<span class="token comment">//输出</span>
BaseClass 类中构造方法
BaseClass 类中构造方法
SubClass 类中构造方法
BaseClass 类中构造方法
</code></pre> 
<h2><a id="PHP_2060"></a>PHP表单</h2> 
<p>PHP 中的 $_GET 和 $_POST 变量用于检索表单中的信息，比如用户输入。</p> 
<h3><a id="PHP__2064"></a>PHP 表单处理</h3> 
<p>有一点很重要的事情值得注意，当处理 HTML 表单时，PHP 能把来自 HTML 页面中的表单元素自动变成可供 PHP 脚本使用。</p> 
<h3><a id="PHP__2068"></a>PHP 获取下拉菜单的数据</h3> 
<h4><a id="PHP__2070"></a>PHP 下拉菜单单选</h4> 
<p>以下实例我们设置了下拉菜单三个选项，表单使用 GET 方式获取数据，action 属性值为空表示提交到当前脚本，我们可以通过 select 的 name 属性获取下拉菜单的值：</p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test01.php<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>q<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>选择一个国家<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CHINA<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>China<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>USA<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>USA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UK<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>UK<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-php"><span class="token comment">//test01.php</span>
<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token class-name type-declaration">php</span>
<span class="token variable">$q</span> <span class="token operator">=</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'q'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'q'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$q</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$q</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'CHINA'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"你的国家选择了中国"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token variable">$q</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'USA'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"你的国家选择了美国"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token variable">$q</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'UK'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"你的国家选择了英国"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"选择有误！"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>

<span class="token comment">//htmlspecialchars() 函数把预定义的字符转换为 HTML 实体。</span>
</code></pre> 
<h4><a id="PHP__2115"></a>PHP 下拉菜单多选</h4> 
<p>如果下拉菜单是多选的（ multiple=“multiple”），我们可以通过将设置 select <strong>name=“q[]”</strong> 以数组的方式获取，以下使用 POST 方式提交，代码如下所示：</p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test01.php<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">multiple</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multiple<span class="token punctuation">"</span></span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>q[]<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>选择一个国家<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CHINA<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>China<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>USA<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>USA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UK<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>UK<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$q</span> <span class="token operator">=</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'q'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'q'</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$q</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token variable">$sites</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token string single-quoted-string">'CHINA'</span><span class="token operator">=&gt;</span><span class="token string single-quoted-string">'你选择了中国'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'USA'</span><span class="token operator">=&gt;</span><span class="token string single-quoted-string">'你选择了美国'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'UK'</span><span class="token operator">=&gt;</span><span class="token string single-quoted-string">'你选择了英国'</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$q</span> <span class="token keyword">as</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token variable">$sites</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"选择有误！"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p><strong><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
          
         
           G 
          
         
        
          E 
         
        
          T 
         
        
          、 
         
        
       
         _GET、 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class=""></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">G</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord cjk_fallback">、</span></span></span></span></span>_POST 和 $_REQUEST 的区别？</strong></p> 
<p><strong>$_GET</strong> 变量接受所有以 <strong>get</strong> 方式发送的请求，及浏览器地址栏中的 <strong>?</strong> 之后的内容。</p> 
<p><strong>$_POS</strong>T 变量接受所有以 post 方式发送的请求，例如，一个 form 以 <strong>method=post</strong> 提交，提交后 php 会处理 post 过来的全部变量。</p> 
<p><strong>$_REQUEST</strong> 支持两种方式发送过来的请求，即 <strong>post</strong> 和 <strong>get</strong> 它都可以接受，显示不显示要看传递方法，get 会显示在 url 中（有字符数限制），post 不会在 url 中显示，可以传递任意多的数据（只要服务器支持）。</p> 
<h3><a id="PHP_2166"></a>PHP表单验证</h3> 
<p>我们应该尽可能的对用户的输入进行验证（通过客户端脚本）。浏览器验证速度更快，并且可以减轻服务器的压力。</p> 
<p>如果用户输入需要插入数据库，您应该考虑使用服务器验证。在服务器验证表单的一种好的方式是，把表单的数据传给当前页面（异步提交的方式更好），而不是跳转到不同的页面。这样用户就可以在同一张表单页面得到错误信息。用户也就更容易发现错误了。</p> 
<p>下面贴一段常规的表单验证代码</p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">HTML</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>菜鸟教程(runoob.com)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.error</span> <span class="token punctuation">{<!-- --></span><span class="token property">color</span><span class="token punctuation">:</span> #FF0000<span class="token punctuation">;</span><span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span> 

<span class="token prolog">&lt;?php
// 定义变量并默认设置为空值
$nameErr = $emailErr = $genderErr = $websiteErr = "";
$name = $email = $gender = $comment = $website = "";

if ($_SERVER["REQUEST_METHOD"] == "POST")
{
    if (empty($_POST["name"]))
    {
        $nameErr = "名字是必需的";
    }
    else
    {
        $name = test_input($_POST["name"]);
        // 检测名字是否只包含字母跟空格
        if (!preg_match("/^[a-zA-Z ]*$/",$name))
        {
            $nameErr = "只允许字母和空格"; 
        }
    }
    
    if (empty($_POST["email"]))
    {
      $emailErr = "邮箱是必需的";
    }
    else
    {
        $email = test_input($_POST["email"]);
        // 检测邮箱是否合法
        if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/",$email))
        {
            $emailErr = "非法邮箱格式"; 
        }
    }
    
    if (empty($_POST["website"]))
    {
        $website = "";
    }
    else
    {
        $website = test_input($_POST["website"]);
        // 检测 URL 地址是否合法
        if (!preg_match("/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/%=~_|]/i",$website))
        {
            $websiteErr = "非法的 URL 的地址"; 
        }
    }
    
    if (empty($_POST["comment"]))
    {
        $comment = "";
    }
    else
    {
        $comment = test_input($_POST["comment"]);
    }
    
    if (empty($_POST["gender"]))
    {
        $genderErr = "性别是必需的";
    }
    else
    {
        $gender = test_input($_POST["gender"]);
    }
}

function test_input($data)
{
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    return $data;
}
?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>PHP 表单验证实例<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>* 必需字段。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;?php echo htmlspecialchars($_SERVER[<span class="token punctuation">"</span></span><span class="token attr-name">PHP_SELF"]);?</span><span class="token punctuation">&gt;</span></span>"&gt; 
   名字: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;?php echo $name;?&gt;<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>* <span class="token prolog">&lt;?php echo $nameErr;?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
   E-mail: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;?php echo $email;?&gt;<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>* <span class="token prolog">&lt;?php echo $emailErr;?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
   网址: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>website<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;?php echo $website;?&gt;<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token prolog">&lt;?php echo $websiteErr;?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
   备注: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token prolog">&lt;?php echo $comment;?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
   性别:
   &lt;input type="radio" name="gender" <span class="token prolog">&lt;?php if (isset($gender) &amp;&amp; $gender=="female") echo "checked";?&gt;</span>  value="female"&gt;女
   &lt;input type="radio" name="gender" <span class="token prolog">&lt;?php if (isset($gender) &amp;&amp; $gender=="male") echo "checked";?&gt;</span>  value="male"&gt;男
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>* <span class="token prolog">&lt;?php echo $genderErr;?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token prolog">&lt;?php
echo "&lt;h2&gt;您输入的内容是:&lt;/h2&gt;";
echo $name;
echo "&lt;br&gt;";
echo $email;
echo "&lt;br&gt;";
echo $website;
echo "&lt;br&gt;";
echo $comment;
echo "&lt;br&gt;";
echo $gender;
?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4d/07/1OHAHobG_o.png" alt="image-20220128193031841"></p> 
<h3><a id="_2304"></a>文本字段</h3> 
<p>“名字”, “E-mail”, 及"网址"字段为文本输入元素，"备注"字段是 textarea。HTML代码如下所示:</p> 
<pre><code class="prism language-html">“名字”: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
E-mail: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
网址: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>website<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
备注: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="_2315"></a>单选按钮</h3> 
<p>"性别"字段是单选按钮，HTML代码如下所示：</p> 
<pre><code class="prism language-html">性别:
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>female<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>女
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>male<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>男
</code></pre> 
<h3><a id="_2325"></a>表单元素</h3> 
<p>HTML 表单代码如下所示:</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;?php echo htmlspecialchars($_SERVER[<span class="token punctuation">"</span></span><span class="token attr-name">PHP_SELF"]);?</span><span class="token punctuation">&gt;</span></span>"&gt;
</code></pre> 
<table><thead><tr><th><img src="https://images2.imgbox.com/48/14/GwZrqW6Z_o.png" alt="Note"></th><th><strong>什么是 $_SERVER[“PHP_SELF”] 变量?</strong> $_SERVER[“PHP_SELF”]是超级全局变量，返回当前正在执行脚本的文件名，与 document root相关。</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table> 
<p>所以， $_SERVER[“PHP_SELF”] 会发送表单数据到当前页面，而不是跳转到不同的页面。</p> 
<table><thead><tr><th><img src="https://images2.imgbox.com/4c/ff/euuVkFYR_o.png" alt="Note"></th><th><strong>什么是 htmlspecialchars()方法?</strong> htmlspecialchars() 函数把一些预定义的字符转换为 HTML 实体。预定义的字符是：&amp; （和号） 成为 &amp;" （双引号） 成为 "’ （单引号） 成为 '&lt; （小于） 成为 &lt;&gt; （大于） 成为 &gt;</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table> 
<h3><a id="PHP_2343"></a>PHP表单中需引起注重的地方？</h3> 
<p>$_SERVER[“PHP_SELF”] 变量有可能会被黑客使用！</p> 
<p>当黑客使用跨网站脚本的HTTP链接来攻击时，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
         
        
          S 
         
        
       
         E 
        
       
         R 
        
       
         V 
        
       
         E 
        
       
         R 
        
       
         [ 
        
       
         " 
        
       
         P 
        
       
         H 
        
        
        
          P 
         
        
          S 
         
        
       
         E 
        
       
         L 
        
       
         F 
        
       
         " 
        
       
         ] 
        
       
         服 
        
       
         务 
        
       
         器 
        
       
         变 
        
       
         量 
        
       
         也 
        
       
         会 
        
       
         被 
        
       
         植 
        
       
         入 
        
       
         脚 
        
       
         本 
        
       
         。 
        
       
         原 
        
       
         因 
        
       
         就 
        
       
         是 
        
       
         跨 
        
       
         网 
        
       
         站 
        
       
         脚 
        
       
         本 
        
       
         是 
        
       
         附 
        
       
         在 
        
       
         执 
        
       
         行 
        
       
         文 
        
       
         件 
        
       
         的 
        
       
         路 
        
       
         径 
        
       
         后 
        
       
         面 
        
       
         的 
        
       
         ， 
        
       
         因 
        
       
         此 
        
       
      
        _SERVER["PHP_SELF"]服务器变量也会被植入脚本。原因就是跨网站脚本是附在执行文件的路径后面的，因此 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class=""></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mord mathdefault" style="margin-right: 0.22222em;">V</span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mopen">[</span><span class="mord">"</span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="mord">"</span><span class="mclose">]</span><span class="mord cjk_fallback">服</span><span class="mord cjk_fallback">务</span><span class="mord cjk_fallback">器</span><span class="mord cjk_fallback">变</span><span class="mord cjk_fallback">量</span><span class="mord cjk_fallback">也</span><span class="mord cjk_fallback">会</span><span class="mord cjk_fallback">被</span><span class="mord cjk_fallback">植</span><span class="mord cjk_fallback">入</span><span class="mord cjk_fallback">脚</span><span class="mord cjk_fallback">本</span><span class="mord cjk_fallback">。</span><span class="mord cjk_fallback">原</span><span class="mord cjk_fallback">因</span><span class="mord cjk_fallback">就</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">跨</span><span class="mord cjk_fallback">网</span><span class="mord cjk_fallback">站</span><span class="mord cjk_fallback">脚</span><span class="mord cjk_fallback">本</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">附</span><span class="mord cjk_fallback">在</span><span class="mord cjk_fallback">执</span><span class="mord cjk_fallback">行</span><span class="mord cjk_fallback">文</span><span class="mord cjk_fallback">件</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">路</span><span class="mord cjk_fallback">径</span><span class="mord cjk_fallback">后</span><span class="mord cjk_fallback">面</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">因</span><span class="mord cjk_fallback">此</span></span></span></span></span>_SERVER[“PHP_SELF”]的字符串就会包含HTTP链接后面的JavaScript程序代码。</p> 
<table><thead><tr><th><img src="https://images2.imgbox.com/b2/1f/72JixVhJ_o.png" alt="Note"></th><th><strong>XSS又叫 CSS (Cross-Site Script) ,跨站脚本攻击。恶意攻击者往Web页面里插入恶意html代码，当用户浏览该页之时，嵌入其中Web里面的html代码会被执行，从而达到恶意用户的特殊目的。</strong></th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table> 
<p>指定以下表单文件名为 “test_form.php”:</p> 
<pre><code>&lt;form method="post" action="&lt;?php echo $_SERVER["PHP_SELF"];?&gt;"&gt;
</code></pre> 
<p>现在，我们使用URL来指定提交地址 “test_form.php”,以上代码修改为如下所示:</p> 
<pre><code>&lt;form method="post" action="test_form.php"&gt;
</code></pre> 
<p>这样做就很好了。</p> 
<p>但是，考虑到用户会在浏览器地址栏中输入以下地址:</p> 
<pre><code>http://www.runoob.com/test_form.php/%22%3E%3Cscript%3Ealert('hacked')%3C/script%3E
</code></pre> 
<p>以上的 URL 中，将被解析为如下代码并执行：</p> 
<pre><code>&lt;form method="post" action="test_form.php/"&gt;&lt;script&gt;alert('hacked')&lt;/script&gt;
</code></pre> 
<p>代码中添加了 script 标签，并添加了alert命令。 当页面载入时会执行该Javascript代码（用户会看到弹出框）。 这仅仅只是一个简单的实例来说明PHP_SELF变量会被黑客利用。</p> 
<p>请注意， <strong>任何JavaScript代码可以添加在</strong></p> 
<h3><a id="__SERVERPHP_SELF__2383"></a>如何避免 $_SERVER[“PHP_SELF”] 被利用?</h3> 
<p>$_SERVER[“PHP_SELF”] 可以通过 htmlspecialchars() 函数来避免被利用。</p> 
<p>form 代码如下所示：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;?php echo htmlspecialchars($_SERVER[<span class="token punctuation">"</span></span><span class="token attr-name">PHP_SELF"]);?</span><span class="token punctuation">&gt;</span></span>"&gt;
</code></pre> 
<p>htmlspecialchars() 把一些预定义的字符转换为 HTML 实体。现在如果用户想利用 PHP_SELF 变量, 结果将输出如下所示：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test_form.php/<span class="token entity named-entity" title='"'>&amp;quot;</span><span class="token entity named-entity" title="&gt;">&amp;gt;</span><span class="token entity named-entity" title="&lt;">&amp;lt;</span>script<span class="token entity named-entity" title="&gt;">&amp;gt;</span>alert(<span class="token punctuation">'</span>hacked<span class="token punctuation">'</span>)<span class="token entity named-entity" title="&lt;">&amp;lt;</span>/script<span class="token entity named-entity" title="&gt;">&amp;gt;</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>尝试该漏洞失败！</p> 
<h3><a id="_PHP__2401"></a>使用 PHP 验证表单数据</h3> 
<p>首先我们对用户所有提交的数据都通过 PHP 的 htmlspecialchars() 函数处理。</p> 
<p>当我们使用 htmlspecialchars() 函数时，在用户尝试提交以下文本域:</p> 
<pre><code>&lt;script&gt;location.href('http://www.runoob.com')&lt;/script&gt;
</code></pre> 
<p>该代码将不会被执行，因为它会被保存为HTML转义代码，如下所示：</p> 
<pre><code>&amp;lt;script&amp;gt;location.href('http://www.runoob.com')&amp;lt;/script&amp;gt;
</code></pre> 
<p>以上代码是安全的，可以正常在页面显示或者插入邮件中。</p> 
<p>当用户提交表单时，我们将做以下两件事情：</p> 
<ol><li>使用 PHP trim() 函数去除用户输入数据中不必要的字符 (如：空格，tab，换行)。</li><li>使用PHP stripslashes()函数去除用户输入数据中的反斜杠 ()</li></ol> 
<p>接下来让我们将这些过滤的函数写在一个我们自己定义的函数中，这样可以大大提高代码的复用性。</p> 
<p>将函数命名为 test_input()。</p> 
<p>现在，我们可以通过test_input()函数来检测 $_POST 中的所有变量, 脚本代码如下所示：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 定义变量并默认设置为空值</span>
<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$email</span> <span class="token operator">=</span> <span class="token variable">$gender</span> <span class="token operator">=</span> <span class="token variable">$comment</span> <span class="token operator">=</span> <span class="token variable">$website</span> <span class="token operator">=</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">;</span>
 
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"REQUEST_METHOD"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">"POST"</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token function">test_input</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$email</span> <span class="token operator">=</span> <span class="token function">test_input</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"email"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$website</span> <span class="token operator">=</span> <span class="token function">test_input</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"website"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$comment</span> <span class="token operator">=</span> <span class="token function">test_input</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"comment"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$gender</span> <span class="token operator">=</span> <span class="token function">test_input</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"gender"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">function</span> <span class="token function">test_input</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">stripslashes</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token variable">$data</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>注意我们在执行以上脚本时，会通过$_SERVER[“REQUEST_METHOD”]来检测表单是否被提交 。如果 REQUEST_METHOD 是 POST, 表单将被提交 - 数据将被验证。如果表单未提交将跳过验证并显示空白。</p> 
<p>在以上实例中使用输入项都是可选的，即使用户不输入任何数据也可以正常显示。</p> 
<h3><a id="_GET__2458"></a>$_GET 变量</h3> 
<p>预定义的 $_GET 变量用于收集来自 method=“get” 的表单中的值。</p> 
<p>从带有 GET 方法的表单发送的信息，对任何人都是可见的（会显示在浏览器的地址栏），并且对发送信息的量也有限制。</p> 
<p>在 HTML 表单中使用 method=“get” 时，所有的变量名和值都会显示在 URL 中。</p> 
<p>**注释：**所以在发送密码或其他敏感信息时，不应该使用这个方法！</p> 
<p>然而，正因为变量显示在 URL 中，因此可以在收藏夹中收藏该页面。在某些情况下，这是很有用的。</p> 
<p>**注释：**HTTP GET 方法不适合大型的变量值。它的值是不能超过 2000 个字符的。</p> 
<h3><a id="_POST__2472"></a>$_POST 变量</h3> 
<p>预定义的 $_POST 变量用于收集来自 method=“post” 的表单中的值。</p> 
<p>从带有 POST 方法的表单发送的信息，对任何人都是不可见的（不会显示在浏览器的地址栏），并且对发送信息的量也没有限制。</p> 
<p>**注释：**然而，默认情况下，POST 方法的发送信息的量最大值为 8 MB（可通过设置 php.ini 文件中的 post_max_size 进行更改）。</p> 
<h3><a id="_REQUEST__2480"></a>$_REQUEST 变量</h3> 
<p>预定义的 $_REQUEST 变量包含了 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
         
        
          G 
         
        
       
         E 
        
       
         T 
        
       
         、 
        
       
      
        _GET、 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class=""></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">G</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord cjk_fallback">、</span></span></span></span></span>_POST 和 $_COOKIE 的内容。</p> 
<p>$_REQUEST 变量可用来收集通过 GET 和 POST 方法发送的表单数据。</p> 
<h2><a id="PHP___2486"></a>PHP - 多维数组</h2> 
<p>多维数组是包含一个或多个数组的数组。</p> 
<p>在多维数组中，主数组中的每一个元素也可以是一个数组，子数组中的每一个元素也可以是一个数组。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$sites</span> <span class="token operator">=</span> <span class="token keyword">array</span>
<span class="token punctuation">(</span>
    <span class="token string double-quoted-string">"runoob"</span><span class="token operator">=&gt;</span><span class="token keyword">array</span>
    <span class="token punctuation">(</span>
        <span class="token string double-quoted-string">"菜鸟教程"</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">"http://www.runoob.com"</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string double-quoted-string">"google"</span><span class="token operator">=&gt;</span><span class="token keyword">array</span>
    <span class="token punctuation">(</span>
        <span class="token string double-quoted-string">"Google 搜索"</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">"http://www.google.com"</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string double-quoted-string">"taobao"</span><span class="token operator">=&gt;</span><span class="token keyword">array</span>
    <span class="token punctuation">(</span>
        <span class="token string double-quoted-string">"淘宝"</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">"http://www.taobao.com"</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"&lt;pre&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 格式化输出数组</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$sites</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"&lt;/pre&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="PHP_date__2518"></a>PHP date() 函数</h2> 
<p>PHP date() 函数用于格式化时间/日期。</p> 
<h3><a id="PHP_date__2522"></a>PHP date() 函数</h3> 
<p>PHP date() 函数可把时间戳格式化为可读性更好的日期和时间。</p> 
<p><img src="https://images2.imgbox.com/d0/aa/biQlv5Gg_o.gif" alt="Tip">时间戳是一个字符序列，表示一定的事件发生的日期/时间。</p> 
<h4><a id="_2528"></a>语法</h4> 
<pre><code>string date ( string $format [, int $timestamp ] )
</code></pre> 
<table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">format</td><td align="left">必需。规定时间戳的格式。</td></tr><tr><td align="left">timestamp</td><td align="left">可选。规定时间戳。默认是当前的日期和时间。</td></tr></tbody></table> 
<hr> 
<h3><a id="PHP_Date___2543"></a>PHP Date() - 格式化日期</h3> 
<p>date() 函数的第一个必需参数 <em>format</em> 规定了如何格式化日期/时间。</p> 
<p>这里列出了一些可用的字符：</p> 
<ul><li>d - 代表月中的天 (01 - 31)</li><li>m - 代表月 (01 - 12)</li><li>Y - 代表年 (四位数)</li></ul> 
<p>如需了解 <em>format</em> 参数中可用的所有字符列表，请查阅我们的 PHP Date 参考手册，<a href="https://www.runoob.com/php/func-date-date.html" rel="nofollow">date() 函数</a>。</p> 
<p>可以在字母之间插入其他字符，比如 “/”、"." 或者 “-”，这样就可以增加附加格式了：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Y/m/d"</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Y.m.d"</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Y-m-d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>上面代码的输出如下所示：</p> 
<pre><code>2016/10/21
2016.10.21
2016-10-21
</code></pre> 
<table><thead><tr><th align="left"><code>format</code> 字符</th><th align="left">说明</th><th align="left">返回值例子</th></tr></thead><tbody><tr><td align="left"><em>日</em></td><td align="left">—</td><td align="left">—</td></tr><tr><td align="left"><em>d</em></td><td align="left">月份中的第几天，有前导零的 2 位数字</td><td align="left"><em>01</em> 到 <em>31</em></td></tr><tr><td align="left"><em>D</em></td><td align="left">星期中的第几天，文本表示，3 个字母</td><td align="left"><em>Mon</em> 到 <em>Sun</em></td></tr><tr><td align="left"><em>j</em></td><td align="left">月份中的第几天，没有前导零</td><td align="left"><em>1</em> 到 <em>31</em></td></tr><tr><td align="left"><em>l</em>（"L"的小写字母）</td><td align="left">星期几，完整的文本格式</td><td align="left"><em>Sunday</em> 到 <em>Saturday</em></td></tr><tr><td align="left"><em>N</em></td><td align="left">ISO-8601 格式数字表示的星期中的第几天（PHP 5.1.0 新加）</td><td align="left"><em>1</em>（表示星期一）到 <em>7</em>（表示星期天）</td></tr><tr><td align="left"><em>S</em></td><td align="left">每月天数后面的英文后缀，2 个字符</td><td align="left"><em>st</em>，<em>nd</em>，<em>rd</em> 或者 <em>th</em>。可以和 <em>j</em> 一起用</td></tr><tr><td align="left"><em>w</em></td><td align="left">星期中的第几天，数字表示</td><td align="left"><em>0</em>（表示星期天）到 <em>6</em>（表示星期六）</td></tr><tr><td align="left"><em>z</em></td><td align="left">年份中的第几天</td><td align="left"><em>0</em> 到 <em>365</em></td></tr><tr><td align="left"><em>星期</em></td><td align="left">—</td><td align="left">—</td></tr><tr><td align="left"><em>W</em></td><td align="left">ISO-8601 格式年份中的第几周，每周从星期一开始（PHP 4.1.0 新加的）</td><td align="left">例如：<em>42</em>（当年的第 42 周）</td></tr><tr><td align="left"><em>月</em></td><td align="left">—</td><td align="left">—</td></tr><tr><td align="left"><em>F</em></td><td align="left">月份，完整的文本格式，例如 January 或者 March</td><td align="left"><em>January</em> 到 <em>December</em></td></tr><tr><td align="left"><em>m</em></td><td align="left">数字表示的月份，有前导零</td><td align="left"><em>01</em> 到 <em>12</em></td></tr><tr><td align="left"><em>M</em></td><td align="left">三个字母缩写表示的月份</td><td align="left"><em>Jan</em> 到 <em>Dec</em></td></tr><tr><td align="left"><em>n</em></td><td align="left">数字表示的月份，没有前导零</td><td align="left"><em>1</em> 到 <em>12</em></td></tr><tr><td align="left"><em>t</em></td><td align="left">给定月份所应有的天数</td><td align="left"><em>28</em> 到 <em>31</em></td></tr><tr><td align="left"><em>年</em></td><td align="left">—</td><td align="left">—</td></tr><tr><td align="left"><em>L</em></td><td align="left">是否为闰年</td><td align="left">如果是闰年为 <em>1</em>，否则为 <em>0</em></td></tr><tr><td align="left"><em>o</em></td><td align="left">ISO-8601 格式年份数字。这和 <em>Y</em> 的值相同，只除了如果 ISO 的星期数（<em>W</em>）属于前一年或下一年，则用那一年。（PHP 5.1.0 新加）</td><td align="left">Examples: <em>1999</em> or <em>2003</em></td></tr><tr><td align="left"><em>Y</em></td><td align="left">4 位数字完整表示的年份</td><td align="left">例如：<em>1999</em> 或 <em>2003</em></td></tr><tr><td align="left"><em>y</em></td><td align="left">2 位数字表示的年份</td><td align="left">例如：<em>99</em> 或 <em>03</em></td></tr><tr><td align="left"><em>时间</em></td><td align="left">—</td><td align="left">—</td></tr><tr><td align="left"><em>a</em></td><td align="left">小写的上午和下午值</td><td align="left"><em>am</em> 或 <em>pm</em></td></tr><tr><td align="left"><em>A</em></td><td align="left">大写的上午和下午值</td><td align="left"><em>AM</em> 或 <em>PM</em></td></tr><tr><td align="left"><em>B</em></td><td align="left">Swatch Internet 标准时</td><td align="left"><em>000</em> 到 <em>999</em></td></tr><tr><td align="left"><em>g</em></td><td align="left">小时，12 小时格式，没有前导零</td><td align="left"><em>1</em> 到 <em>12</em></td></tr><tr><td align="left"><em>G</em></td><td align="left">小时，24 小时格式，没有前导零</td><td align="left"><em>0</em> 到 <em>23</em></td></tr><tr><td align="left"><em>h</em></td><td align="left">小时，12 小时格式，有前导零</td><td align="left"><em>01</em> 到 <em>12</em></td></tr><tr><td align="left"><em>H</em></td><td align="left">小时，24 小时格式，有前导零</td><td align="left"><em>00</em> 到 <em>23</em></td></tr><tr><td align="left"><em>i</em></td><td align="left">有前导零的分钟数</td><td align="left"><em>00</em> 到 <em>59</em>&gt;</td></tr><tr><td align="left"><em>s</em></td><td align="left">秒数，有前导零</td><td align="left"><em>00</em> 到 <em>59</em>&gt;</td></tr><tr><td align="left"><em>u</em></td><td align="left">毫秒 （PHP 5.2.2 新加）。需要注意的是 <strong>date()</strong> 函数总是返回 <em>000000</em> 因为它只接受 integer 参数， 而 DateTime::format() 才支持毫秒。</td><td align="left">示例: <em>654321</em></td></tr><tr><td align="left"><em>时区</em></td><td align="left">—</td><td align="left">—</td></tr><tr><td align="left"><em>e</em></td><td align="left">时区标识（PHP 5.1.0 新加）</td><td align="left">例如：<em>UTC</em>，<em>GMT</em>，<em>Atlantic/Azores</em></td></tr><tr><td align="left"><em>I</em></td><td align="left">是否为夏令时</td><td align="left">如果是夏令时为 <em>1</em>，否则为 <em>0</em></td></tr><tr><td align="left"><em>O</em></td><td align="left">与格林威治时间相差的小时数</td><td align="left">例如：<em>+0200</em></td></tr><tr><td align="left"><em>P</em></td><td align="left">与格林威治时间（GMT）的差别，小时和分钟之间有冒号分隔（PHP 5.1.3 新加）</td><td align="left">例如：<em>+02:00</em></td></tr><tr><td align="left"><em>T</em></td><td align="left">本机所在的时区</td><td align="left">例如：<em>EST</em>，<em>MDT</em>（【译者注】在 Windows 下为完整文本格式，例如"Eastern Standard Time"，中文版会显示"中国标准时间"）。</td></tr><tr><td align="left"><em>Z</em></td><td align="left">时差偏移量的秒数。UTC 西边的时区偏移量总是负的，UTC 东边的时区偏移量总是正的。</td><td align="left"><em>-43200</em> 到 <em>43200</em></td></tr><tr><td align="left"><em>完整的日期／时间</em></td><td align="left">—</td><td align="left">—</td></tr><tr><td align="left"><em>c</em></td><td align="left">ISO 8601 格式的日期（PHP 5 新加）</td><td align="left">2004-02-12T15:19:21+00:00</td></tr><tr><td align="left"><em>r</em></td><td align="left">RFC 822 格式的日期</td><td align="left">例如：<em>Thu, 21 Dec 2000 16:01:07 +0200</em></td></tr><tr><td align="left"><em>U</em></td><td align="left">从 Unix 纪元（January 1 1970 00:00:00 GMT）开始至今的秒数</td><td align="left">参见 time()</td></tr></tbody></table> 
<h2><a id="PHP__2620"></a>PHP 包含文件</h2> 
<hr> 
<h3><a id="PHP_include__require__2624"></a>PHP include 和 require 语句</h3> 
<p>在 PHP 中，您可以在服务器执行 PHP 文件之前在该文件中插入一个文件的内容。</p> 
<p>include 和 require 语句用于在执行流中插入写在其他文件中的有用的代码。</p> 
<p><strong>include 和 require 除了处理错误的方式不同之外，在其他方面都是相同的：</strong></p> 
<ul><li>require 生成一个致命错误（E_COMPILE_ERROR），在错误发生后脚本会停止执行。</li><li>include 生成一个警告（E_WARNING），在错误发生后脚本会继续执行。</li></ul> 
<p>因此，如果您希望继续执行，并向用户输出结果，即使包含文件已丢失，那么请使用 include。否则，在框架、CMS 或者复杂的 PHP 应用程序编程中，请始终使用 require 向执行流引用关键文件。这有助于提高应用程序的安全性和完整性，在某个关键文件意外丢失的情况下。</p> 
<p>包含文件省去了大量的工作。这意味着您可以为所有网页创建标准页头、页脚或者菜单文件。然后，在页头需要更新时，您只需更新这个页头包含文件即可。</p> 
<h2><a id="PHP__2639"></a>PHP 文件处理</h2> 
<hr> 
<p>fopen() 函数用于在 PHP 中打开文件。</p> 
<hr> 
<h3><a id="_2647"></a>打开文件</h3> 
<p>fopen() 函数用于在 PHP 中打开文件。</p> 
<p>此函数的第一个参数含有要打开的文件的名称，第二个参数规定了使用哪种模式来打开文件：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token prolog">&lt;?php
$file=fopen("welcome.txt","r");
?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>文件可能通过下列模式来打开：</p> 
<table><thead><tr><th align="left">模式</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">r</td><td align="left">只读。在文件的开头开始。</td></tr><tr><td align="left">r+</td><td align="left">读/写。在文件的开头开始。</td></tr><tr><td align="left">w</td><td align="left">只写。打开并清空文件的内容；如果文件不存在，则创建新文件。</td></tr><tr><td align="left">w+</td><td align="left">读/写。打开并清空文件的内容；如果文件不存在，则创建新文件。</td></tr><tr><td align="left">a</td><td align="left">追加。打开并向文件末尾进行写操作，如果文件不存在，则创建新文件。</td></tr><tr><td align="left">a+</td><td align="left">读/追加。通过向文件末尾写内容，来保持文件内容。</td></tr><tr><td align="left">x</td><td align="left">只写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。</td></tr><tr><td align="left">x+</td><td align="left">读/写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。</td></tr></tbody></table> 
<p>**注释：**如果 fopen() 函数无法打开指定文件，则返回 0 (false)。</p> 
<h3><a id="_2680"></a>关闭文件</h3> 
<p>fclose() 函数用于关闭打开的文件：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"test.txt"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//执行一些代码</span>

<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="EOF_2694"></a>检测文件末尾（EOF）</h3> 
<p>feof() 函数检测是否已到达文件末尾（EOF）。</p> 
<p>在循环遍历未知长度的数据时，feof() 函数很有用。</p> 
<p>**注释：**在 w 、a 和 x 模式下，您无法读取打开的文件！</p> 
<pre><code>if (feof($file)) echo "文件结尾";
</code></pre> 
<h3><a id="_2706"></a>逐行读取文件</h3> 
<p>fgets() 函数用于从文件中逐行读取文件。</p> 
<p>**注释：**在调用该函数之后，文件指针会移动到下一行。</p> 
<h4><a id="_2712"></a>实例</h4> 
<p>下面的实例逐行读取文件，直到文件末尾为止：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"welcome.txt"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"无法打开文件!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取文件每一行，直到文件结尾</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">echo</span> <span class="token function">fgets</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_2728"></a>逐字符读取文件</h3> 
<p>fgetc() 函数用于从文件中逐字符地读取文件。</p> 
<p>**注释：**在调用该函数之后，文件指针会移动到下一个字符。</p> 
<h4><a id="_2734"></a>实例</h4> 
<p>下面的实例逐字符地读取文件，直到文件末尾为止：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$file</span><span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"welcome.txt"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"无法打开文件!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">echo</span> <span class="token function">fgetc</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="PHP__2749"></a>PHP 文件上传</h2> 
<hr> 
<p>通过 PHP，可以把文件上传到服务器。</p> 
<p>本章节实例在 test 项目下完成，目录结构为：</p> 
<pre><code>test
|-----upload             # 文件上传的目录
|-----form.html          # 表单文件
|-----upload_file.php    # php 上传代码
</code></pre> 
<h3><a id="_2764"></a>创建一个文件上传表单</h3> 
<p>允许用户从表单上传文件是非常有用的。</p> 
<p>请看下面这个供上传文件的 HTML 表单：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>菜鸟教程(runoob.com)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload_file.php<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>文件名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>将以上代码保存到 form.html 文件中。</p> 
<p>有关上面的 HTML 表单的一些注意项列举如下：</p> 
<ul><li><strong></strong> 标签的 <strong>enctype</strong> 属性规定了在提交表单时要使用哪种内容类型。在表单需要二进制数据时，比如文件内容，请使用 “<strong>multipart/form-data</strong>”。</li><li><strong></strong> 标签的 <strong>type=“file”</strong> 属性规定了应该把输入作为文件来处理。举例来说，当在浏览器中预览时，会看到输入框旁边有一个浏览按钮。</li></ul> 
<p>**注释：**允许用户上传文件是一个巨大的安全风险。请仅仅允许可信的用户执行文件上传操作。</p> 
<hr> 
<h3><a id="_2799"></a>创建上传脚本</h3> 
<p>“upload_file.php” 文件含有供上传文件的代码：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"error"</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"错误："</span> <span class="token operator">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"error"</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"上传文件名: "</span> <span class="token operator">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"name"</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"文件类型: "</span> <span class="token operator">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"type"</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"文件大小: "</span> <span class="token operator">.</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"size"</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">" kB&lt;br&gt;"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"文件临时存储的位置: "</span> <span class="token operator">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"tmp_name"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>通过使用 PHP 的全局数组 $_FILES，你可以从客户计算机向远程服务器上传文件。</p> 
<p>第一个参数是表单的 input name，第二个下标可以是 “name”、“type”、“size”、“tmp_name” 或 “error”。如下所示：</p> 
<ul><li>$_FILES[“file”][“name”] - 上传文件的名称</li><li>$_FILES[“file”][“type”] - 上传文件的类型</li><li>$_FILES[“file”][“size”] - 上传文件的大小，以字节计</li><li>$_FILES[“file”][“tmp_name”] - 存储在服务器的文件的临时副本的名称</li><li>$_FILES[“file”][“error”] - 由文件上传导致的错误代码</li></ul> 
<p>这是一种非常简单文件上传方式。基于安全方面的考虑，您应当增加有关允许哪些用户上传文件的限制。</p> 
<h3><a id="_2831"></a>上传限制</h3> 
<p>在这个脚本中，我们增加了对文件上传的限制。用户只能上传 .gif、.jpeg、.jpg、.png 文件，文件大小必须小于 200 kB：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 允许上传的图片后缀</span>
<span class="token variable">$allowedExts</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"gif"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"jpeg"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"jpg"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"."</span><span class="token punctuation">,</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$extension</span> <span class="token operator">=</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token variable">$temp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 获取文件后缀名</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"type"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">"image/gif"</span><span class="token punctuation">)</span>
<span class="token operator">||</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"type"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">"image/jpeg"</span><span class="token punctuation">)</span>
<span class="token operator">||</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"type"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">"image/jpg"</span><span class="token punctuation">)</span>
<span class="token operator">||</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"type"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">"image/pjpeg"</span><span class="token punctuation">)</span>
<span class="token operator">||</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"type"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">"image/x-png"</span><span class="token punctuation">)</span>
<span class="token operator">||</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"type"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">"image/png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"size"</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">204800</span><span class="token punctuation">)</span>    <span class="token comment">// 小于 200 kb</span>
<span class="token operator">&amp;&amp;</span> <span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$extension</span><span class="token punctuation">,</span> <span class="token variable">$allowedExts</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"error"</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"错误：: "</span> <span class="token operator">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"error"</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"上传文件名: "</span> <span class="token operator">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"name"</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"文件类型: "</span> <span class="token operator">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"type"</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br&gt;"</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"文件大小: "</span> <span class="token operator">.</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"size"</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">" kB&lt;br&gt;"</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"文件临时存储的位置: "</span> <span class="token operator">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"tmp_name"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"非法的文件格式"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<hr> 
<h3><a id="_2873"></a>保存被上传的文件</h3> 
<p>上面的实例在服务器的 PHP 临时文件夹中创建了一个被上传文件的临时副本。</p> 
<p>这个临时的副本文件会在脚本结束时消失。要保存被上传的文件，我们需要把它拷贝到另外的位置：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">//1、提取文件后缀名</span>
<span class="token variable">$allowExts</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'gif'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'jpg'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'png'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'jpeg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//允许上传的文件后缀</span>
<span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'.'</span><span class="token punctuation">,</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$extension</span> <span class="token operator">=</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token variable">$temp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2、判断文件是否符合上传</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'image/gif'</span><span class="token punctuation">)</span>
    <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'image/jpg'</span><span class="token punctuation">)</span>
    <span class="token operator">||</span><span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'image/jpeg'</span><span class="token punctuation">)</span>
    <span class="token operator">||</span><span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'image/png'</span><span class="token punctuation">)</span>
    <span class="token operator">||</span><span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'image/x-png'</span><span class="token punctuation">)</span>
    <span class="token operator">||</span><span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'image/pjpeg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'size'</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">4092000</span><span class="token punctuation">)</span> <span class="token comment">//小于4MB</span>
    <span class="token operator">&amp;&amp;</span> <span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$extension</span><span class="token punctuation">,</span><span class="token variable">$allowExts</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//3、符合：</span>
    <span class="token comment">//  判断文件有错误</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'error'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'文件错误：'</span><span class="token operator">.</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'error'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;br&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//  打印文件信息</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'上传文件名：'</span><span class="token operator">.</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;br&gt;'</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'文件类型：'</span><span class="token operator">.</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;br&gt;'</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'文件大小：'</span><span class="token operator">.</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'size'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'B'</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;br&gt;'</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'文件临时存储的位置：'</span><span class="token operator">.</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tmp_name'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;br&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//  复制文件到upload目录下</span>
    <span class="token comment">//先判断当前目录下的upload目录是否存在该文件</span>
    <span class="token comment">//若不存在upload目录，则需创建upload目录，并赋予权限为777</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">file_exists</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'../upload'</span><span class="token operator">.</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'文件已经存在'</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;br&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//如果upload目录不存在该文件，则将该文件上传到upload目录下</span>
        <span class="token function">move_uploaded_file</span><span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tmp_name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'../upload/'</span><span class="token operator">.</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'文件存储于'</span><span class="token operator">.</span><span class="token string single-quoted-string">'../upload/'</span><span class="token operator">.</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//4、不符合则打印非法文件格式</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'文件格式错误！'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/af/b8/92ZdONIv_o.png" alt="image-20220130133348305"></p> 
<h2><a id="PHP_Cookie_2934"></a>PHP Cookie</h2> 
<hr> 
<p>cookie 常用于识别用户。</p> 
<hr> 
<h3><a id="Cookie__2942"></a>Cookie 是什么？</h3> 
<p>cookie 常用于识别用户。cookie 是一种服务器留在用户计算机上的小文件。每当同一台计算机通过浏览器请求页面时，这台计算机将会发送 cookie。通过 PHP，您能够创建并取回 cookie 的值。</p> 
<hr> 
<h3><a id="_Cookie_2948"></a>如何创建 Cookie？</h3> 
<p>setcookie() 函数用于设置 cookie。</p> 
<p>**注释：**setcookie() 函数必须位于 标签之前。</p> 
<h4><a id="_2954"></a>语法</h4> 
<pre><code>setcookie(name, value, expire, path, domain);
</code></pre> 
<h4><a id="_1_2960"></a>实例 1</h4> 
<p>在下面的例子中，我们将创建名为 “user” 的 cookie，并为它赋值 “runoob”。我们也规定了此 cookie 在一小时后过期：</p> 
<pre><code>&lt;?php
setcookie("user", "runoob", time()+3600);
?&gt;

&lt;html&gt;
.....
</code></pre> 
<p>**注释：**在发送 cookie 时，cookie 的值会自动进行 URL 编码，在取回时进行自动解码。（为防止 URL 编码，请使用 setrawcookie() 取而代之。）</p> 
<h4><a id="_2_2975"></a>实例 2</h4> 
<p>您还可以通过另一种方式设置 cookie 的过期时间。这也许比使用秒表示的方式简单。</p> 
<pre><code>&lt;?php
$expire=time()+60*60*24*30;
setcookie("user", "runoob", $expire);
?&gt;

&lt;html&gt;
.....
</code></pre> 
<p>在上面的实例中，过期时间被设置为一个月（<em>60 秒 * 60 分 * 24 小时 * 30 天</em>）。</p> 
<h3><a id="_Cookie__2991"></a>如何取回 Cookie 的值？</h3> 
<p>PHP 的 $_COOKIE 变量用于取回 cookie 的值。</p> 
<p>在下面的实例中，我们取回了名为 “user” 的 cookie 的值，并把它显示在了页面上：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 输出 cookie 值</span>
<span class="token keyword">echo</span> <span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"user"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 查看所有 cookie</span>
<span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$_COOKIE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>在下面的实例中，我们使用 isset() 函数来确认是否已设置了 cookie：</p> 
<pre><code class="prism language-php+HTML">&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;?php
if (isset($_COOKIE["user"]))
    echo "欢迎 " . $_COOKIE["user"] . "!&lt;br&gt;";
else
    echo "普通访客!&lt;br&gt;";
?&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<h3><a id="_Cookie_3028"></a>如何删除 Cookie？</h3> 
<p>当删除 cookie 时，您应当使过期日期变更为过去的时间点。</p> 
<p>删除的实例：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 设置 cookie 过期时间为过去 1 小时</span>
<span class="token function">setcookie</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"user"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">,</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_Cookie__3041"></a>如果浏览器不支持 Cookie 该怎么办？</h3> 
<p>如果您的应用程序需要与不支持 cookie 的浏览器打交道，那么您不得不使用其他的办法在您的应用程序中的页面之间传递信息。一种方式是通过表单传递数据（有关表单和用户输入的内容，在本教程的前面章节中我们已经介绍过了）。</p> 
<p>下面的表单在用户单点击 “Submit” 按钮时，向 “welcome.php” 提交了用户输入：</p> 
<pre><code class="prism language-php+HTML">&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;form action="welcome.php" method="post"&gt;
名字: &lt;input type="text" name="name"&gt;
年龄: &lt;input type="text" name="age"&gt;
&lt;input type="submit"&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>取回 “welcome.php” 文件中的值，如下所示：</p> 
<pre><code class="prism language-php+HTML">&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

欢迎 &lt;?php echo $_POST["name"]; ?&gt;.&lt;br&gt;
你 &lt;?php echo $_POST["age"]; ?&gt; 岁了。

&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<h2><a id="PHP_Session_3082"></a>PHP Session</h2> 
<hr> 
<p>PHP session 变量用于存储关于用户会话（session）的信息，或者更改用户会话（session）的设置。Session 变量存储单一用户的信息，并且对于应用程序中的所有页面都是可用的。</p> 
<h3><a id="PHP_Session__3088"></a>PHP Session 变量</h3> 
<p>您在计算机上操作某个应用程序时，您打开它，做些更改，然后关闭它。这很像一次对话（Session）。计算机知道您是谁。它清楚您在何时打开和关闭应用程序。然而，在因特网上问题出现了：由于 HTTP 地址无法保持状态，Web 服务器并不知道您是谁以及您做了什么。</p> 
<p>PHP session 解决了这个问题，它通过在服务器上存储用户信息以便随后使用（比如用户名称、购买商品等）。然而，会话信息是临时的，在用户离开网站后将被删除。如果您需要永久存储信息，可以把数据存储在数据库中。</p> 
<p>Session 的工作机制是：为每个访客创建一个唯一的 id (UID)，并基于这个 UID 来存储变量。UID 存储在 cookie 中，或者通过 URL 进行传导。</p> 
<hr> 
<h3><a id="_PHP_Session_3098"></a>开始 PHP Session</h3> 
<p>在您把用户信息存储到 PHP session 中之前，首先必须启动会话。</p> 
<p>**注释：**session_start() 函数必须位于 标签之前：</p> 
<h3><a id="_3104"></a>实例</h3> 
<pre><code class="prism language-php+HTML">&lt;?php session_start(); ?&gt;
 
&lt;html&gt;
&lt;body&gt;
 
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>上面的代码会向服务器注册用户的会话，以便您可以开始保存用户信息，同时会为用户会话分配一个 UID。</p> 
<h3><a id="_Session__3118"></a>存储 Session 变量</h3> 
<p>存储和取回 session 变量的正确方法是使用 PHP $_SESSION 变量：</p> 
<pre><code class="prism language-php+HTML">&lt;?php
session_start();
// 存储 session 数据
$_SESSION['views']=1;
?&gt;
 
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
 
&lt;?php
// 检索 session 数据
echo "浏览量：". $_SESSION['views'];
?&gt;
 
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<h3><a id="_Session_3145"></a>销毁 Session</h3> 
<p>如果您希望删除某些 session 数据，可以使用 unset() 或 session_destroy() 函数。</p> 
<p>unset() 函数用于释放指定的 session 变量,session_destroy() 函数彻底销毁 session：：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'views'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">unset</span><span class="token punctuation">(</span><span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'views'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//session_destroy();</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>关于验证登陆用户是否有 admin 权限的例子。</p> 
<p>如果用户成功登陆的话，储存一个登陆成功的凭证的 session，即<strong>admin=true</strong>：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">//  表单提交后...</span>
<span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">;</span>
<span class="token comment">//  清除一些空白符号</span>
<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$posts</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token variable">$posts</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$password</span> <span class="token operator">=</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$posts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"password"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$username</span> <span class="token operator">=</span> <span class="token variable">$posts</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"username"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 

<span class="token variable">$query</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT `username` FROM `user` WHERE `password` = '<span class="token interpolation"><span class="token variable">$password</span></span>' AND `username` = '<span class="token interpolation"><span class="token variable">$username</span></span>'"</span><span class="token punctuation">;</span>
<span class="token comment">//  取得查询结果</span>
<span class="token variable">$userInfo</span> <span class="token operator">=</span> <span class="token variable">$DB</span><span class="token operator">-&gt;</span><span class="token function">getRow</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$userInfo</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//  当验证通过后，启动 Se</span>
index<span class="token operator">.</span>html

<span class="token operator">&gt;</span> 验证 session里的<span class="token string backtick-quoted-string">`admin`</span>是否为 <span class="token string backtick-quoted-string">`true`</span>

<span class="token operator">&lt;</span><span class="token operator">?</span>php
<span class="token comment">//  防止全局变量造成安全隐患</span>
<span class="token variable">$admin</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
<span class="token comment">//  启动会话，这步必不可少</span>
<span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  判断是否登陆</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"admin"</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"admin"</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"您已经成功登陆"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//  验证失败，将 $_SESSION["admin"] 置为 false</span>
    <span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"admin"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"您无权访问"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="PHP_Secure_Emails_3203"></a>PHP Secure E-mails</h2> 
<h3><a id="PHP_Email__3205"></a>PHP E-mail 注入</h3> 
<p>首先，请看未经过安全过滤的 PHP 代码：</p> 
<pre><code class="prism language-php+HTML">&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;?php
if (isset($_REQUEST['email'])) { // 如果接收到邮箱参数则发送邮件
    // 发送邮件
    $email = $_REQUEST['email'] ;
    $subject = $_REQUEST['subject'] ;
    $message = $_REQUEST['message'] ;
    mail("someone@example.com", $subject,
    $message, "From:" . $email);
    echo "邮件发送成功";
} else { // 如果没有邮箱参数则显示表单
    echo "&lt;form method='post' action='mailform.php'&gt;
    Email: &lt;input name='email' type='text'&gt;&lt;br&gt;
    Subject: &lt;input name='subject' type='text'&gt;&lt;br&gt;
    Message:&lt;br&gt;
    &lt;textarea name='message' rows='15' cols='40'&gt;
    &lt;/textarea&gt;&lt;br&gt;
    &lt;input type='submit'&gt;
    &lt;/form&gt;";
}
?&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>以上代码存在的问题是，未经授权的用户可通过输入表单在邮件头部插入数据。</p> 
<p>假如用户在表单中的输入框内加入如下文本到电子邮件中，会出现什么情况呢？</p> 
<pre><code>someone@example.com%0ACc:person2@example.com
%0ABcc:person3@example.com,person3@example.com,
anotherperson4@example.com,person5@example.com
%0ABTo:person6@example.com
</code></pre> 
<p>与往常一样，mail() 函数把上面的文本放入邮件头部，那么现在头部有了额外的 Cc:、Bcc: 和 To: 字段。当用户点击提交按钮时，这封 e-mail 会被发送到上面所有的地址！</p> 
<h3><a id="PHP__Email__3255"></a>PHP 防止 E-mail 注入</h3> 
<p>防止 e-mail 注入的最好方法是对输入进行验证。</p> 
<p>下面的代码与上一章中的类似，不过这里我们已经增加了检测表单中 email 字段的输入验证程序：</p> 
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
function spamcheck($field)
{
    // filter_var() 过滤 e-mail
    // 使用 FILTER_SANITIZE_EMAIL
    $field=filter_var($field, FILTER_SANITIZE_EMAIL);

    //filter_var() 过滤 e-mail
    // 使用 FILTER_VALIDATE_EMAIL
    if(filter_var($field, FILTER_VALIDATE_EMAIL))
    {
        return TRUE;
    }
    else
    {
        return FALSE;
    }
}

if (isset($_REQUEST['email']))
{
    // 如果接收到邮箱参数则发送邮件

    // 判断邮箱是否合法
    $mailcheck = spamcheck($_REQUEST['email']);
    if ($mailcheck==FALSE)
    {
        echo "非法输入";
    }
    else
    {    
        // 发送邮件
        $email = $_REQUEST['email'] ;
        $subject = $_REQUEST['subject'] ;
        $message = $_REQUEST['message'] ;
        mail("someone@example.com", "Subject: $subject",
        $message, "From: $email" );
        echo "Thank you for using our mail form";
    }
}
else
{ 
    // 如果没有邮箱参数则显示表单
    echo "&lt;form method='post' action='mailform.php'&gt;
    Email: &lt;input name='email' type='text'&gt;&lt;br&gt;
    Subject: &lt;input name='subject' type='text'&gt;&lt;br&gt;
    Message:&lt;br&gt;
    &lt;textarea name='message' rows='15' cols='40'&gt;
    &lt;/textarea&gt;&lt;br&gt;
    &lt;input type='submit'&gt;
    &lt;/form&gt;";
}
?&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>在上面的代码中，我们使用了 PHP 过滤器来对输入进行验证：</p> 
<ul><li>FILTER_SANITIZE_EMAIL 过滤器从字符串中删除电子邮件的非法字符</li><li>FILTER_VALIDATE_EMAIL 过滤器验证电子邮件地址的值</li></ul> 
<h2><a id="PHP__3331"></a>PHP 错误处理</h2> 
<hr> 
<p>在 PHP 中，默认的错误处理很简单。一条错误消息会被发送到浏览器，这条消息带有文件名、行号以及描述错误的消息。</p> 
<hr> 
<h3><a id="PHP__3339"></a>PHP 错误处理</h3> 
<p>在创建脚本和 Web 应用程序时，错误处理是一个重要的部分。如果您的代码缺少错误检测编码，那么程序看上去很不专业，也为安全风险敞开了大门。</p> 
<p>本教程介绍了 PHP 中一些最为重要的错误检测方法。</p> 
<p>我们将为您讲解不同的错误处理方法：</p> 
<ul><li>简单的 “die()” 语句</li><li>自定义错误和错误触发器</li><li>错误报告</li></ul> 
<hr> 
<h3><a id="_die__3353"></a>基本的错误处理：使用 die() 函数</h3> 
<p>第一个实例展示了一个打开文本文件的简单脚本：</p> 
<p>第一个实例展示了一个打开文本文件的简单脚本：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$file</span><span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"welcome.txt"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>如果文件不存在，您会得到类似这样的错误：</p> 
<pre><code>Warning: fopen(welcome.txt) [function.fopen]: failed to open stream:
No such file or directory in /www/runoob/test/test.php on line 2
</code></pre> 
<p>为了避免用户得到类似上面的错误消息，我们在访问文件之前检测该文件是否存在：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">file_exists</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"welcome.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"文件不存在"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token variable">$file</span><span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"welcome.txt"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>现在，如果文件不存在，您会得到类似这样的错误消息：</p> 
<pre><code>文件不存在
</code></pre> 
<h3><a id="_3393"></a>创建自定义错误处理器</h3> 
<p>创建一个自定义的错误处理器非常简单。我们很简单地创建了一个专用函数，可以在 PHP 中发生错误时调用该函数。</p> 
<p>该函数必须有能力处理至少两个参数 (error level 和 error message)，但是可以接受最多五个参数（可选的：file, line-number 和 error context）：</p> 
<h3><a id="_3399"></a>语法</h3> 
<pre><code>error_function(error_level,error_message,
error_file,error_line,error_context)
</code></pre> 
<table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">error_level</td><td align="left">必需。为用户定义的错误规定错误报告级别。必须是一个数字。参见下面的表格：错误报告级别。</td></tr><tr><td align="left">error_message</td><td align="left">必需。为用户定义的错误规定错误消息。</td></tr><tr><td align="left">error_file</td><td align="left">可选。规定错误发生的文件名。</td></tr><tr><td align="left">error_line</td><td align="left">可选。规定错误发生的行号。</td></tr><tr><td align="left">error_context</td><td align="left">可选。规定一个数组，包含了当错误发生时在用的每个变量以及它们的值。</td></tr></tbody></table> 
<h3><a id="_3414"></a>错误报告级别</h3> 
<p>这些错误报告级别是用户自定义的错误处理程序处理的不同类型的错误：</p> 
<table><thead><tr><th align="left">值</th><th align="left">常量</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">2</td><td align="left">E_WARNING</td><td align="left">非致命的 run-time 错误。不暂停脚本执行。</td></tr><tr><td align="left">8</td><td align="left">E_NOTICE</td><td align="left">run-time 通知。在脚本发现可能有错误时发生，但也可能在脚本正常运行时发生。</td></tr><tr><td align="left">256</td><td align="left">E_USER_ERROR</td><td align="left">致命的用户生成的错误。这类似于程序员使用 PHP 函数 trigger_error() 设置的 E_ERROR。</td></tr><tr><td align="left">512</td><td align="left">E_USER_WARNING</td><td align="left">非致命的用户生成的警告。这类似于程序员使用 PHP 函数 trigger_error() 设置的 E_WARNING。</td></tr><tr><td align="left">1024</td><td align="left">E_USER_NOTICE</td><td align="left">用户生成的通知。这类似于程序员使用 PHP 函数 trigger_error() 设置的 E_NOTICE。</td></tr><tr><td align="left">4096</td><td align="left">E_RECOVERABLE_ERROR</td><td align="left">可捕获的致命错误。类似 E_ERROR，但可被用户定义的处理程序捕获。（参见 set_error_handler()）</td></tr><tr><td align="left">8191</td><td align="left">E_ALL</td><td align="left">所有错误和警告。（在 PHP 5.4 中，E_STRICT 成为 E_ALL 的一部分）</td></tr></tbody></table> 
<p>现在，让我们创建一个处理错误的函数：</p> 
<pre><code>function customError($errno, $errstr)
{
    echo "&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr&lt;br&gt;";
    echo "脚本结束";
    die();
}
</code></pre> 
<p>上面的代码是一个简单的错误处理函数。当它被触发时，它会取得错误级别和错误消息。然后它会输出错误级别和消息，并终止脚本。</p> 
<p>现在，我们已经创建了一个错误处理函数，我们需要确定在何时触发该函数。</p> 
<h3><a id="_3443"></a>设置错误处理程序</h3> 
<p>PHP 的默认错误处理程序是内建的错误处理程序。我们打算把上面的函数改造为脚本运行期间的默认错误处理程序。</p> 
<p>可以修改错误处理程序，使其仅应用到某些错误，这样脚本就能以不同的方式来处理不同的错误。然而，在本例中，我们打算针对所有错误来使用我们自定义的错误处理程序：</p> 
<pre><code>set_error_handler("customError");
</code></pre> 
<p>由于我们希望我们的自定义函数能处理所有错误，set_error_handler() 仅需要一个参数，可以添加第二个参数来规定错误级别。</p> 
<h3><a id="_3455"></a>实例</h3> 
<p>通过尝试输出不存在的变量，来测试这个错误处理程序：</p> 
<pre><code>&lt;?php
// 错误处理函数
function customError($errno, $errstr)
{
    echo "&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr";
}

// 设置错误处理函数
set_error_handler("customError");

// 触发错误
echo($test);
?&gt;
</code></pre> 
<p>以上代码的输出如下所示：</p> 
<pre><code>Error: [8] Undefined variable: test
</code></pre> 
<hr> 
<h3><a id="_3485"></a>触发错误</h3> 
<p>在脚本中用户输入数据的位置，当用户的输入无效时触发错误是很有用的。在 PHP 中，这个任务由 trigger_error() 函数完成。</p> 
<h3><a id="_3489"></a>实例</h3> 
<p>在本例中，如果 “test” 变量大于 “1”，就会发生错误：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$test</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$test</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">trigger_error</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"变量值必须小于等于 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上代码的输出如下所示：</p> 
<pre><code>Notice: 变量值必须小于等于 1
in /www/test/runoob.php on line 5
</code></pre> 
<p>您可以在脚本中任何位置触发错误，通过添加的第二个参数，您能够规定所触发的错误类型。</p> 
<p>可能的错误类型：</p> 
<ul><li>E_USER_ERROR - 致命的用户生成的 run-time 错误。错误无法恢复。脚本执行被中断。</li><li>E_USER_WARNING - 非致命的用户生成的 run-time 警告。脚本执行不被中断。</li><li>E_USER_NOTICE - 默认。用户生成的 run-time 通知。在脚本发现可能有错误时发生，但也可能在脚本正常运行时发生。</li></ul> 
<h3><a id="_3518"></a>实例</h3> 
<p>在本例中，如果 “test” 变量大于 “1”，则发生 E_USER_WARNING 错误。如果发生了 E_USER_WARNING，我们将使用我们自定义的错误处理程序并结束脚本：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 错误处理函数</span>
<span class="token keyword">function</span> <span class="token function">customError</span><span class="token punctuation">(</span><span class="token variable">$errno</span><span class="token punctuation">,</span> <span class="token variable">$errstr</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;b&gt;Error:&lt;/b&gt; [<span class="token interpolation"><span class="token variable">$errno</span></span>] <span class="token interpolation"><span class="token variable">$errstr</span></span>&lt;br&gt;"</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"脚本结束"</span><span class="token punctuation">;</span>
    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 设置错误处理函数</span>
<span class="token function">set_error_handler</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"customError"</span><span class="token punctuation">,</span><span class="token constant">E_USER_WARNING</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 触发错误</span>
<span class="token variable">$test</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$test</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">trigger_error</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"变量值必须小于等于 1"</span><span class="token punctuation">,</span><span class="token constant">E_USER_WARNING</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上代码的输出如下所示：</p> 
<pre><code>Error: [512] 变量值必须小于等于 1
脚本结束
</code></pre> 
<p>现在，我们已经学习了如何创建自己的 error，以及如何触发它们，接下来我们研究一下错误记录。</p> 
<h2><a id="PHP__3553"></a>PHP 异常处理</h2> 
<hr> 
<p>异常用于在指定的错误发生时改变脚本的正常流程。</p> 
<hr> 
<h3><a id="_3561"></a>异常是什么</h3> 
<p>PHP 5 提供了一种新的面向对象的错误处理方法。</p> 
<p>异常处理用于在指定的错误（异常）情况发生时改变脚本的正常流程。这种情况称为异常。</p> 
<p>当异常被触发时，通常会发生：</p> 
<ul><li>当前代码状态被保存</li><li>代码执行被切换到预定义（自定义）的异常处理器函数</li><li>根据情况，处理器也许会从保存的代码状态重新开始执行代码，终止脚本执行，或从代码中另外的位置继续执行脚本</li></ul> 
<p>我们将展示不同的错误处理方法：</p> 
<ul><li>异常的基本使用</li><li>创建自定义的异常处理器</li><li>多个异常</li><li>重新抛出异常</li><li>设置顶层异常处理器</li></ul> 
<p>**注释：**异常应该仅仅在错误情况下使用，而不应该用于在一个指定的点跳转到代码的另一个位置。</p> 
<hr> 
<h3><a id="_3585"></a>异常的基本使用</h3> 
<p>当异常被抛出时，其后的代码不会继续执行，PHP 会尝试查找匹配的 “catch” 代码块。</p> 
<p>如果异常没有被捕获，而且又没用使用 set_exception_handler() 作相应的处理的话，那么将发生一个严重的错误（致命错误），并且输出 “Uncaught Exception” （未捕获异常）的错误消息。</p> 
<p>让我们尝试抛出一个异常，同时不去捕获它：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 创建一个有异常处理的函数</span>
<span class="token keyword">function</span> <span class="token function">checkNum</span><span class="token punctuation">(</span><span class="token variable">$number</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$number</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Value must be 1 or below"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// 触发异常</span>
<span class="token function">checkNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>上面的代码会得到类似这样的一个错误：</p> 
<pre><code>Fatal error: Uncaught exception 'Exception' with message 'Value must be 1 or below' in /www/runoob/test/test.php:7 Stack trace: #0 /www/runoob/test/test.php(13): checkNum(2) #1 {main} thrown in /www/runoob/test/test.php on line 7
</code></pre> 
<h3><a id="Trythrow__catch_3616"></a>Try、throw 和 catch</h3> 
<p>要避免上面实例中出现的错误，我们需要创建适当的代码来处理异常。</p> 
<p>适当的处理异常代码应该包括：</p> 
<ol><li>Try - 使用异常的函数应该位于 “try” 代码块内。如果没有触发异常，则代码将照常继续执行。但是如果异常被触发，会抛出一个异常。</li><li>Throw - 里规定如何触发异常。每一个 “throw” 必须对应至少一个 “catch”。</li><li>Catch - “catch” 代码块会捕获异常，并创建一个包含异常信息的对象。</li></ol> 
<p>让我们触发一个异常：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 创建一个有异常处理的函数</span>
<span class="token keyword">function</span> <span class="token function">checkNum</span><span class="token punctuation">(</span><span class="token variable">$number</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$number</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"变量值必须小于等于 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    
<span class="token comment">// 在 try 块 触发异常</span>
<span class="token keyword">try</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">checkNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果抛出异常，以下文本不会输出</span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'如果输出该内容，说明 $number 变量'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 捕获异常</span>
<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> <span class="token variable">$e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Message: '</span> <span class="token operator">.</span><span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>上面代码将得到类似这样一个错误：</p> 
<pre><code>Message: 变量值必须小于等于 1
</code></pre> 
<h3><a id="_3661"></a>实例解释：</h3> 
<p>上面的代码抛出了一个异常，并捕获了它：</p> 
<ol><li>创建 checkNum() 函数。它检测数字是否大于 1。如果是，则抛出一个异常。</li><li>在 “try” 代码块中调用 checkNum() 函数。</li><li>checkNum() 函数中的异常被抛出。</li><li>“catch” 代码块接收到该异常，并创建一个包含异常信息的对象 ($e)。</li><li>通过从这个 exception 对象调用 $e-&gt;getMessage()，输出来自该异常的错误消息。</li></ol> 
<p>然而，为了遵循 “每个 throw 必须对应一个 catch” 的原则，可以设置一个顶层的异常处理器来处理漏掉的错误。</p> 
<h3><a id="_Exception__3673"></a>创建一个自定义的 Exception 类</h3> 
<p>创建自定义的异常处理程序非常简单。我们简单地创建了一个专门的类，当 PHP 中发生异常时，可调用其函数。该类必须是 exception 类的一个扩展。</p> 
<p>这个自定义的 customException 类继承了 PHP 的 exception 类的所有属性，您可向其添加自定义的函数。</p> 
<p>我们开始创建 customException 类：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">customException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">errorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 错误信息</span>
        <span class="token variable">$errorMsg</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'错误行号 '</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">' in '</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">.</span><span class="token string single-quoted-string">': &lt;b&gt;'</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;/b&gt; 不是一个合法的 E-Mail 地址'</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$errorMsg</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token variable">$email</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"someone@example...com"</span><span class="token punctuation">;</span>
 
<span class="token keyword">try</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 检测邮箱</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">,</span> <span class="token constant">FILTER_VALIDATE_EMAIL</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 如果是个不合法的邮箱地址，抛出异常</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">customException</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">customException</span> <span class="token variable">$e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
<span class="token comment">//display custom message</span>
<span class="token keyword">echo</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">errorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>这个新的类是旧的 exception 类的副本，外加 errorMessage() 函数。正因为它是旧类的副本，因此它从旧类继承了属性和方法，我们可以使用 exception 类的方法，比如 getLine()、getFile() 和 getMessage()。</p> 
<h3><a id="_3716"></a>实例解释：</h3> 
<p>上面的代码抛出了一个异常，并通过一个自定义的 exception 类来捕获它：</p> 
<ol><li>customException() 类是作为旧的 exception 类的一个扩展来创建的。这样它就继承了旧的 exception 类的所有属性和方法。</li><li>创建 errorMessage() 函数。如果 e-mail 地址不合法，则该函数返回一条错误消息。</li><li>把 $email 变量设置为不合法的 e-mail 地址字符串。</li><li>执行 “try” 代码块，由于 e-mail 地址不合法，因此抛出一个异常。</li><li>“catch” 代码块捕获异常，并显示错误消息。</li></ol> 
<hr> 
<h3><a id="_3728"></a>多个异常</h3> 
<p>可以为一段脚本使用多个异常，来检测多种情况。</p> 
<p>可以使用多个 if…else 代码块，或一个 switch 代码块，或者嵌套多个异常。这些异常能够使用不同的 exception 类，并返回不同的错误消息：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">customException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">errorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 错误信息</span>
        <span class="token variable">$errorMsg</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'错误行号 '</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">' in '</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">.</span><span class="token string single-quoted-string">': &lt;b&gt;'</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'&lt;/b&gt; 不是一个合法的 E-Mail 地址'</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$errorMsg</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token variable">$email</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"someone@example.com"</span><span class="token punctuation">;</span>
 
<span class="token keyword">try</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 检测邮箱</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">,</span> <span class="token constant">FILTER_VALIDATE_EMAIL</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 如果是个不合法的邮箱地址，抛出异常</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">customException</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 检测 "example" 是否在邮箱地址中</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strpos</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"example"</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$email</span></span> 是 example 邮箱"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">customException</span> <span class="token variable">$e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">errorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> <span class="token variable">$e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_3776"></a>实例解释：</h3> 
<p>上面的代码测试了两种条件，如果其中任何一个条件不成立，则抛出一个异常：</p> 
<ol><li>customException() 类是作为旧的 exception 类的一个扩展来创建的。这样它就继承了旧的 exception 类的所有属性和方法。</li><li>创建 errorMessage() 函数。如果 e-mail 地址不合法，则该函数返回一个错误消息。</li><li>把 $email 变量设置为一个字符串，该字符串是一个有效的 e-mail 地址，但包含字符串 “example”。</li><li>执行 “try” 代码块，在第一个条件下，不会抛出异常。</li><li>由于 e-mail 含有字符串 “example”，第二个条件会触发异常。</li><li>“catch” 代码块会捕获异常，并显示恰当的错误消息。</li></ol> 
<p>如果 customException 类抛出了异常，但没有捕获 customException，仅仅捕获了 base exception，则在那里处理异常。</p> 
<h3><a id="_3789"></a>重新抛出异常</h3> 
<p>有时，当异常被抛出时，您也许希望以不同于标准的方式对它进行处理。可以在一个 “catch” 代码块中再次抛出异常。</p> 
<p>脚本应该对用户隐藏系统错误。对程序员来说，系统错误也许很重要，但是用户对它们并不感兴趣。为了让用户更容易使用，您可以再次抛出带有对用户比较友好的消息的异常：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">customException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">errorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 错误信息</span>
        <span class="token variable">$errorMsg</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">' 不是一个合法的 E-Mail 地址。'</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$errorMsg</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token variable">$email</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"someone@example.com"</span><span class="token punctuation">;</span>
 
<span class="token keyword">try</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 检测 "example" 是否在邮箱地址中</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strpos</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"example"</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 如果是个不合法的邮箱地址，抛出异常</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> <span class="token variable">$e</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 重新抛出异常</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">customException</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">customException</span> <span class="token variable">$e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 显示自定义信息</span>
    <span class="token keyword">echo</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">errorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_3836"></a>实例解释：</h3> 
<p>上面的代码检测在邮件地址中是否含有字符串 “example”。如果有，则再次抛出异常：</p> 
<ol><li>customException() 类是作为旧的 exception 类的一个扩展来创建的。这样它就继承了旧的 exception 类的所有属性和方法。</li><li>创建 errorMessage() 函数。如果 e-mail 地址不合法，则该函数返回一个错误消息。</li><li>把 $email 变量设置为一个字符串，该字符串是一个有效的 e-mail 地址，但包含字符串 “example”。</li><li>“try” 代码块包含另一个 “try” 代码块，这样就可以再次抛出异常。</li><li>由于 e-mail 包含字符串 “example”，因此触发异常。</li><li>“catch” 代码块捕获到该异常，并重新抛出 “customException”。</li><li>捕获到 “customException”，并显示一条错误消息。</li></ol> 
<p>如果在当前的 “try” 代码块中异常没有被捕获，则它将在更高层级上查找 catch 代码块。</p> 
<hr> 
<h3><a id="_3852"></a>设置顶层异常处理器</h3> 
<p>set_exception_handler() 函数可设置处理所有未捕获异常的用户定义函数。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function">myException</span><span class="token punctuation">(</span><span class="token variable">$exception</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;b&gt;Exception:&lt;/b&gt; "</span> <span class="token punctuation">,</span> <span class="token variable">$exception</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token function">set_exception_handler</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'myException'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Uncaught Exception occurred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上代码的输出如下所示：</p> 
<pre><code>Exception: Uncaught Exception occurred
</code></pre> 
<p>在上面的代码中，不存在 “catch” 代码块，而是触发顶层的异常处理程序。应该使用此函数来捕获所有未被捕获的异常。</p> 
<hr> 
<h3><a id="_3879"></a>异常的规则</h3> 
<ul><li>需要进行异常处理的代码应该放入 try 代码块内，以便捕获潜在的异常。</li><li>每个 try 或 throw 代码块必须至少拥有一个对应的 catch 代码块。</li><li>使用多个 catch 代码块可以捕获不同种类的异常。</li><li>可以在 try 代码块内的 catch 代码块中抛出（再次抛出）异常。</li></ul> 
<p>简而言之：如果抛出了异常，就必须捕获它。</p> 
<h2><a id="PHP__3888"></a>PHP 过滤器</h2> 
<hr> 
<p>PHP 过滤器用于验证和过滤来自非安全来源的数据，比如用户的输入。</p> 
<hr> 
<h3><a id="_PHP__3896"></a>什么是 PHP 过滤器？</h3> 
<p>PHP 过滤器用于验证和过滤来自非安全来源的数据。</p> 
<p>测试、验证和过滤用户输入或自定义数据是任何 Web 应用程序的重要组成部分。</p> 
<p>PHP 的过滤器扩展的设计目的是使数据过滤更轻松快捷。</p> 
<hr> 
<h3><a id="_3906"></a>为什么使用过滤器？</h3> 
<p>几乎所有的 Web 应用程序都依赖外部的输入。这些数据通常来自用户或其他应用程序（比如 web 服务）。通过使用过滤器，您能够确保应用程序获得正确的输入类型。</p> 
<p><strong>您应该始终对外部数据进行过滤！</strong></p> 
<p>输入过滤是最重要的应用程序安全课题之一。</p> 
<p>什么是外部数据？</p> 
<ul><li>来自表单的输入数据</li><li>Cookies</li><li>Web services data</li><li>服务器变量</li><li>数据库查询结果</li></ul> 
<hr> 
<h3><a id="_3924"></a>函数和过滤器</h3> 
<p>如需过滤变量，请使用下面的过滤器函数之一：</p> 
<ul><li>filter_var() - 通过一个指定的过滤器来过滤单一的变量</li><li>filter_var_array() - 通过相同的或不同的过滤器来过滤多个变量</li><li>filter_input - 获取一个输入变量，并对它进行过滤</li><li>filter_input_array - 获取多个输入变量，并通过相同的或不同的过滤器对它们进行过滤</li></ul> 
<p>在下面的实例中，我们用 filter_var() 函数验证了一个整数：</p> 
<h3><a id="_3935"></a>实例</h3> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$int</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
 
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$int</span><span class="token punctuation">,</span> <span class="token constant">FILTER_VALIDATE_INT</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"不是一个合法的整数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"是个合法的整数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>上面的代码使用了 “FILTER_VALIDATE_INT” 过滤器来过滤变量。</p> 
<h3><a id="Validating__Sanitizing_3954"></a>Validating 和 Sanitizing</h3> 
<p>有两种过滤器：</p> 
<p>Validating 过滤器：</p> 
<ul><li>用于验证用户输入</li><li>严格的格式规则（比如 URL 或 E-Mail 验证）</li><li>如果成功则返回预期的类型，如果失败则返回 FALSE</li></ul> 
<p>Sanitizing 过滤器：</p> 
<ul><li>用于允许或禁止字符串中指定的字符</li><li>无数据格式规则</li><li>始终返回字符串</li></ul> 
<h3><a id="_3970"></a>选项和标志</h3> 
<p>选项和标志用于向指定的过滤器添加额外的过滤选项。</p> 
<p>不同的过滤器有不同的选项和标志。</p> 
<p>在下面的实例中，我们用 filter_var() 和 “min_range” 以及 “max_range” 选项验证了一个整数：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$var</span><span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">;</span>
 
<span class="token variable">$int_options</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
    <span class="token string double-quoted-string">"options"</span><span class="token operator">=&gt;</span><span class="token keyword">array</span>
    <span class="token punctuation">(</span>
        <span class="token string double-quoted-string">"min_range"</span><span class="token operator">=&gt;</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">"max_range"</span><span class="token operator">=&gt;</span><span class="token number">256</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$var</span><span class="token punctuation">,</span> <span class="token constant">FILTER_VALIDATE_INT</span><span class="token punctuation">,</span> <span class="token variable">$int_options</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"不是一个合法的整数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"是个合法的整数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>就像上面的代码一样，选项必须放入一个名为 “options” 的相关数组中。如果使用标志，则不需在数组内。</p> 
<p>由于整数是 “300”，它不在指定的范围内，以上代码的输出将是：</p> 
<pre><code>不是一个合法的整数
</code></pre> 
<h3><a id="_4009"></a>验证输入</h3> 
<p>让我们试着验证来自表单的输入。</p> 
<p>我们需要做的第一件事情是确认是否存在我们正在查找的输入数据。</p> 
<p>然后我们用 filter_input() 函数过滤输入的数据。</p> 
<p>在下面的实例中，输入变量 “email” 被传到 PHP 页面：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">filter_has_var</span><span class="token punctuation">(</span><span class="token constant">INPUT_GET</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"没有 email 参数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">filter_input</span><span class="token punctuation">(</span><span class="token constant">INPUT_GET</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"email"</span><span class="token punctuation">,</span> <span class="token constant">FILTER_VALIDATE_EMAIL</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"不是一个合法的 E-Mail"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"是一个合法的 E-Mail"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>上面的实例有一个通过 “GET” 方法传送的输入变量 (email)：</p> 
<ol><li>检测是否存在 “GET” 类型的 “email” 输入变量</li><li>如果存在输入变量，检测它是否是有效的 e-mail 地址</li></ol> 
<h3><a id="_4044"></a>净化输入</h3> 
<p>让我们试着清理一下从表单传来的 URL。</p> 
<p>首先，我们要确认是否存在我们正在查找的输入数据。</p> 
<p>然后，我们用 filter_input() 函数来净化输入数据。</p> 
<p>在下面的实例中，输入变量 “url” 被传到 PHP 页面：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">filter_has_var</span><span class="token punctuation">(</span><span class="token constant">INPUT_GET</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"没有 url 参数"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token variable">$url</span> <span class="token operator">=</span> <span class="token function">filter_input</span><span class="token punctuation">(</span><span class="token constant">INPUT_GET</span><span class="token punctuation">,</span> 
    <span class="token string double-quoted-string">"url"</span><span class="token punctuation">,</span> <span class="token constant">FILTER_SANITIZE_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token variable">$url</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_4069"></a>实例解释</h3> 
<p>上面的实例有一个通过 “GET” 方法传送的输入变量 (url)：</p> 
<ol><li>检测是否存在 “GET” 类型的 “url” 输入变量</li><li>如果存在此输入变量，对其进行净化（删除非法字符），并将其存储在 $url 变量中</li></ol> 
<p>假如输入变量是一个类似这样的字符串：“http://www.ruåånoøøob.com/”，则净化后的 $url 变量如下所示：</p> 
<p><img src="https://images2.imgbox.com/d8/67/ITuOHOUO_o.png" alt="img"></p> 
<hr> 
<h3><a id="_4084"></a>过滤多个输入</h3> 
<p>表单通常由多个输入字段组成。为了避免对 filter_var 或 filter_input 函数重复调用，我们可以使用 filter_var_array 或 the filter_input_array 函数。</p> 
<p>在本例中，我们使用 filter_input_array() 函数来过滤三个 GET 变量。接收到的 GET 变量是一个名字、一个年龄以及一个 e-mail 地址：</p> 
<h3><a id="_4090"></a>实例</h3> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$filters</span> <span class="token operator">=</span> <span class="token keyword">array</span>
<span class="token punctuation">(</span>
    <span class="token string double-quoted-string">"name"</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span>
    <span class="token punctuation">(</span>
        <span class="token string double-quoted-string">"filter"</span><span class="token operator">=&gt;</span><span class="token constant">FILTER_SANITIZE_STRING</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string double-quoted-string">"age"</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span>
    <span class="token punctuation">(</span>
        <span class="token string double-quoted-string">"filter"</span><span class="token operator">=&gt;</span><span class="token constant">FILTER_VALIDATE_INT</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">"options"</span><span class="token operator">=&gt;</span><span class="token keyword">array</span>
        <span class="token punctuation">(</span>
            <span class="token string double-quoted-string">"min_range"</span><span class="token operator">=&gt;</span><span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token string double-quoted-string">"max_range"</span><span class="token operator">=&gt;</span><span class="token number">120</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string double-quoted-string">"email"</span><span class="token operator">=&gt;</span> <span class="token constant">FILTER_VALIDATE_EMAIL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">filter_input_array</span><span class="token punctuation">(</span><span class="token constant">INPUT_GET</span><span class="token punctuation">,</span> <span class="token variable">$filters</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"age"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"年龄必须在 1 到 120 之间。&lt;br&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"email"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"E-Mail 不合法&lt;br&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"输入正确"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_4131"></a>实例解释</h3> 
<p>上面的实例有三个通过 “GET” 方法传送的输入变量 (name、age 和 email)：</p> 
<ol><li>设置一个数组，其中包含了输入变量的名称和用于指定的输入变量的过滤器</li><li>调用 filter_input_array() 函数，参数包括 GET 输入变量及刚才设置的数组</li><li>检测 $result 变量中的 “age” 和 “email” 变量是否有非法的输入。（如果存在非法输入，在使用 filter_input_array() 函数之后，输入变量为 FALSE。）</li></ol> 
<p>filter_input_array() 函数的第二个参数可以是数组或单一过滤器的 ID。</p> 
<p>如果该参数是单一过滤器的 ID，那么这个指定的过滤器会过滤输入数组中所有的值。</p> 
<p>如果该参数是一个数组，那么此数组必须遵循下面的规则：</p> 
<ul><li>必须是一个关联数组，其中包含的输入变量是数组的键（比如 “age” 输入变量）</li><li>此数组的值必须是过滤器的 ID ，或者是规定了过滤器、标志和选项的数组</li></ul> 
<hr> 
<h3><a id="_Filter_Callback_4150"></a>使用 Filter Callback</h3> 
<p>通过使用 FILTER_CALLBACK 过滤器，可以调用自定义的函数，把它作为一个过滤器来使用。这样，我们就拥有了数据过滤的完全控制权。</p> 
<p>您可以创建自己的自定义函数，也可以使用已存在的 PHP 函数。</p> 
<p>将您准备用到的过滤器的函数，按指定选项的规定方法进行规定。在关联数组中，带有名称 “options”。</p> 
<p>在下面的实例中，我们使用了一个自定义的函数把所有 “_” 转换为 “.”：</p> 
<h3><a id="_4160"></a>实例</h3> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function">convertSpace</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"_"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"."</span><span class="token punctuation">,</span> <span class="token variable">$string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token variable">$string</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"www_runoob_com!"</span><span class="token punctuation">;</span>
 
<span class="token keyword">echo</span> <span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token constant">FILTER_CALLBACK</span><span class="token punctuation">,</span>
<span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"options"</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">"convertSpace"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>上面代码的结果如下所示：</p> 
<p><img src="https://images2.imgbox.com/80/62/RJva7idM_o.png" alt="img"></p> 
<h3><a id="_4182"></a>实例解释</h3> 
<p>上面的实例把所有 “_” 转换成 “.” ：</p> 
<ol><li>创建一个把 “_” 替换为 “.” 的函数</li><li>调用 filter_var() 函数，它的参数是 FILTER_CALLBACK 过滤器以及包含我们的函数的数组</li></ol> 
<h2><a id="PHP__4189"></a>PHP 高级过滤器</h2> 
<hr> 
<h3><a id="_4193"></a>检测一个数字是否在一个范围内</h3> 
<p>以下实例使用了 filter_var() 函数来检测一个 INT 型的变量是否在 1 到 200 内:</p> 
<h3><a id="_4197"></a>实例</h3> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$int</span> <span class="token operator">=</span> <span class="token number">122</span><span class="token punctuation">;</span>
<span class="token variable">$min</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token variable">$max</span> <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$int</span><span class="token punctuation">,</span> <span class="token constant">FILTER_VALIDATE_INT</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"options"</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"min_range"</span><span class="token operator">=&gt;</span><span class="token variable">$min</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"max_range"</span><span class="token operator">=&gt;</span><span class="token variable">$max</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"变量值不在合法范围内"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"变量值在合法范围内"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_IPv6__4213"></a>检测 IPv6 地址</h3> 
<p>以下实例使用了 filter_var() 函数来检测一个 $ip 变量是否是 IPv6 地址:</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$ip</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"2001:0db8:85a3:08d3:1319:8a2e:0370:7334"</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$ip</span><span class="token punctuation">,</span> <span class="token constant">FILTER_VALIDATE_IP</span><span class="token punctuation">,</span> <span class="token constant">FILTER_FLAG_IPV6</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$ip</span></span> 是一个 IPv6 地址"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$ip</span></span> 不是一个 IPv6 地址"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>

</code></pre> 
<h3><a id="_URL__QUERY_STRING_4230"></a>检测 URL - 必须包含QUERY_STRING（查询字符串）</h3> 
<p>以下实例使用了 filter_var() 函数来检测 $url 是否包含查询字符串：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$url</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"http://www.runoob.com"</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">,</span> <span class="token constant">FILTER_VALIDATE_URL</span><span class="token punctuation">,</span> <span class="token constant">FILTER_FLAG_QUERY_REQUIRED</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$url</span></span> 是一个合法的 URL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$url</span></span> 不是一个合法的 URL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_ASCII__127__4246"></a>移除 ASCII 值大于 127 的字符</h3> 
<p>以下实例使用了 filter_var() 函数来移除字符串中 ASCII 值大于 127 的字符，同样它也能移除 HTML 标签：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"&lt;h1&gt;Hello WorldÆØÅ!&lt;/h1&gt;"</span><span class="token punctuation">;</span>

<span class="token variable">$newstr</span> <span class="token operator">=</span> <span class="token function">filter_var</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span> <span class="token constant">FILTER_SANITIZE_STRING</span><span class="token punctuation">,</span> <span class="token constant">FILTER_FLAG_STRIP_HIGH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$newstr</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="PHP_JSON_4259"></a>PHP JSON</h2> 
<p>本章节我们将为大家介绍如何使用 PHP 语言来编码和解码 JSON 对象。</p> 
<hr> 
<h3><a id="_4265"></a>环境配置</h3> 
<p>在 php5.2.0 及以上版本已经内置 JSON 扩展。</p> 
<h3><a id="JSON__4269"></a>JSON 函数</h3> 
<table><thead><tr><th align="left">函数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">json_encode</td><td align="left">对变量进行 JSON 编码</td></tr><tr><td align="left">json_decode</td><td align="left">对 JSON 格式的字符串进行解码，转换为 PHP 变量</td></tr><tr><td align="left">json_last_error</td><td align="left">返回最后发生的错误</td></tr></tbody></table> 
<hr> 
<h3><a id="json_encode_4279"></a>json_encode</h3> 
<p>PHP json_encode() 用于对变量进行 JSON 编码，该函数如果执行成功返回 JSON 数据，否则返回 FALSE 。</p> 
<h4><a id="_4283"></a>语法</h4> 
<pre><code>string json_encode ( $value [, $options = 0 ] )
</code></pre> 
<h4><a id="_4289"></a>参数</h4> 
<ul><li> <p><strong>value</strong>: 要编码的值。该函数只对 UTF-8 编码的数据有效。</p> </li><li> <p><strong>options</strong>:由以下常量组成的二进制掩码 JSON_HEX_QUOT, JSON_HEX_TAG, JSON_HEX_AMP, JSON_HEX_APOS, JSON_NUMERIC_CHECK, JSON_PRETTY_PRINT, JSON_UNESCAPED_SLASHES, JSON_FORCE_OBJECT, JSON_PRESERVE_ZERO_FRACTION, JSON_UNESCAPED_UNICODE, JSON_PARTIAL_OUTPUT_ON_ERROR。</p> <p>要注意的是 JSON_UNESCAPED_UNICODE 选项，如果我们不希望中文被编码，可以添加该选项。</p> </li></ul> 
<h4><a id="_4297"></a>实例</h4> 
<p>以下实例演示了如何将 PHP 数组转换为 JSON 格式数据：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
   <span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'a'</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'b'</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'c'</span> <span class="token operator">=&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'d'</span> <span class="token operator">=&gt;</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'e'</span> <span class="token operator">=&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">echo</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上代码执行结果为：</p> 
<pre><code>{"a":1,"b":2,"c":3,"d":4,"e":5}
</code></pre> 
<p>以下实例演示了如何将 PHP 对象转换为 JSON 格式数据：</p> 
<h3><a id="_4316"></a>实例</h3> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
  <span class="token keyword">class</span> <span class="token class-name">Emp</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$hobbies</span> <span class="token operator">=</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$birthdate</span> <span class="token operator">=</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token variable">$e</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"sachin"</span><span class="token punctuation">;</span>
  <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token property">hobbies</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"sports"</span><span class="token punctuation">;</span>
  <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token property">birthdate</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'m/d/Y h:i:s a'</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"8/5/1974 12:20:03 p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token property">birthdate</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'m/d/Y h:i:s a'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"8/5/1974 12:20:03"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">echo</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$e</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上代码执行结果为：</p> 
<pre><code>{"name":"sachin","hobbies":"sports","birthdate":"08\/05\/1974 12:20:03 pm"}
</code></pre> 
<h3><a id="_JSON_UNESCAPED_UNICODE__4341"></a>使用 JSON_UNESCAPED_UNICODE 选项</h3> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
   <span class="token variable">$arr</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'runoob'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'菜鸟教程'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'taobao'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'淘宝网'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">echo</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 编码中文</span>
   <span class="token keyword">echo</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>  <span class="token comment">// 换行符</span>
   <span class="token keyword">echo</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">,</span> <span class="token constant">JSON_UNESCAPED_UNICODE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 不编码中文</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上代码执行结果为：</p> 
<pre><code>{"runoob":"\u83dc\u9e1f\u6559\u7a0b","taobao":"\u6dd8\u5b9d\u7f51"}
{"runoob":"菜鸟教程","taobao":"淘宝网"}
</code></pre> 
<hr> 
<h3><a id="json_decode_4361"></a>json_decode</h3> 
<p>PHP json_decode() 函数用于对 JSON 格式的字符串进行解码，并转换为 PHP 变量。</p> 
<h4><a id="_4365"></a>语法</h4> 
<pre><code>mixed json_decode ($json_string [,$assoc = false [, $depth = 512 [, $options = 0 ]]])
</code></pre> 
<h4><a id="_4371"></a>参数</h4> 
<ul><li><strong>json_string</strong>: 待解码的 JSON 字符串，必须是 UTF-8 编码数据</li><li><strong>assoc</strong>: 当该参数为 TRUE 时，将返回数组，FALSE 时返回对象。</li><li><strong>depth</strong>: 整数类型的参数，它指定递归深度</li><li><strong>options</strong>: 二进制掩码，目前只支持 JSON_BIGINT_AS_STRING 。</li></ul> 
<h4><a id="_4378"></a>实例</h4> 
<p>以下实例演示了如何解码 JSON 数据：</p> 
<h3><a id="_4382"></a>实例</h3> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
  <span class="token variable">$json</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'{"a":1,"b":2,"c":3,"d":4,"e":5}'</span><span class="token punctuation">;</span>

  <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$json</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$json</span><span class="token punctuation">,</span> <span class="token operator">**</span><span class="token constant boolean">true</span><span class="token operator">**</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上代码执行结果为：</p> 
<pre><code>object(stdClass)#1 (5) {
    ["a"] =&gt; int(1)
    ["b"] =&gt; int(2)
    ["c"] =&gt; int(3)
    ["d"] =&gt; int(4)
    ["e"] =&gt; int(5)
}

array(5) {
    ["a"] =&gt; int(1)
    ["b"] =&gt; int(2)
    ["c"] =&gt; int(3)
    ["d"] =&gt; int(4)
    ["e"] =&gt; int(5)
}
</code></pre> 
<h2><a id="PHP7_4413"></a>PHP7新特性</h2> 
<h2><a id="PHP__4415"></a>PHP 标量类型与返回值类型声明</h2> 
<h3><a id="_4417"></a>标量类型声明</h3> 
<p>默认情况下，所有的PHP文件都处于弱类型校验模式。</p> 
<p>PHP 7 增加了标量类型声明的特性，标量类型声明有两种模式:</p> 
<ul><li>强制模式 (默认)</li><li>严格模式</li></ul> 
<p>标量类型声明语法格式：</p> 
<pre><code>declare(strict_types=1); 
</code></pre> 
<p>代码中通过指定 strict_types的值（1或者0），1表示严格类型校验模式，作用于函数调用和返回语句；0表示弱类型校验模式。</p> 
<p>可以使用的类型参数有：</p> 
<ul><li>int</li><li>float</li><li>bool</li><li>string</li><li>interfaces</li><li>array</li><li>callable</li></ul> 
<h4><a id="_4444"></a>强制模式实例</h4> 
<h3><a id="_4446"></a>实例</h3> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 强制模式</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword type-declaration">int</span> <span class="token operator">...</span><span class="token variable">$ints</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$ints</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'3'</span><span class="token punctuation">,</span> <span class="token number">4.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>9
</code></pre> 
<p>实例汇总将参数 4.1 转换为整数 4 后再相加。</p> 
<h4><a id="_4468"></a>严格模式实例</h4> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 严格模式</span>
<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword type-declaration">int</span> <span class="token operator">...</span><span class="token variable">$ints</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$ints</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'3'</span><span class="token punctuation">,</span> <span class="token number">4.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序由于采用了严格模式，所以如果参数中出现不适整数的类型会报错，执行输出结果为：</p> 
<pre><code>PHP Fatal error:  Uncaught TypeError: Argument 2 passed to sum() must be of the type integer, string given, called in……
</code></pre> 
<h3><a id="_4490"></a>返回类型声明</h3> 
<p>PHP 7 增加了对返回类型声明的支持，返回类型声明指明了函数返回值的类型。</p> 
<p>可以声明的返回类型有：</p> 
<ul><li>int</li><li>float</li><li>bool</li><li>string</li><li>interfaces</li><li>array</li><li>callable</li></ul> 
<h4><a id="_4504"></a>返回类型声明实例</h4> 
<p>实例中，要求返回结果为整数：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">returnIntValue</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token function">returnIntValue</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>5
</code></pre> 
<h3><a id="_4527"></a>特殊情况</h3> 
<p>对于标量类型声明：在严格模式下，有一种例外的情况是：当函数参数为float时，传入int型变量不会跑出typeerror，而是正常执行，在返回类型声明中，也是同样的:</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test </span><span class="token punctuation">(</span><span class="token keyword type-hint">float</span> <span class="token variable">$inter</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$inter</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">echo</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为2</span>

<span class="token keyword">function</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$inte</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword return-type">float</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$inte</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为1</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="PHP__4547"></a>PHP 常量数组</h2> 
<p>在 PHP 5.6 中仅能通过 const 定义常量数组，PHP 7 可以通过 define() 来定义。</p> 
<h4><a id="_4551"></a>实例</h4> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 使用 define 函数来定义数组</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'sites'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
   <span class="token string single-quoted-string">'Google'</span><span class="token punctuation">,</span>
   <span class="token string single-quoted-string">'Runoob'</span><span class="token punctuation">,</span>
   <span class="token string single-quoted-string">'Taobao'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>sites<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>Runoob
</code></pre> 
<h2><a id="PHP_Closurecall_4572"></a>PHP Closure::call()</h2> 
<p>PHP 7 的 Closure::call() 有着更好的性能，将一个闭包函数动态绑定到一个新的对象实例并调用执行该函数。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">private</span> <span class="token variable">$x</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// PHP 7 之前版本定义闭包函数代码</span>
<span class="token variable">$getXCB</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">x</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 闭包函数绑定到类 A 上</span>
<span class="token variable">$getX</span> <span class="token operator">=</span> <span class="token variable">$getXCB</span><span class="token operator">-&gt;</span><span class="token function">bindTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">echo</span> <span class="token variable">$getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token constant">PHP_EOL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// PHP 7+ 代码</span>
<span class="token variable">$getX</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">x</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$getX</span><span class="token operator">-&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>1
1
</code></pre> 
<h2><a id="PHP__unserialize_4608"></a>PHP 过滤 unserialize()</h2> 
<p>PHP 7 增加了可以为 unserialize() 提供过滤的特性，可以防止非法数据进行代码注入，提供了更安全的反序列化数据。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass1</span> <span class="token punctuation">{<!-- --></span> 
   <span class="token keyword">public</span> <span class="token variable">$obj1prop</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass2</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">public</span> <span class="token variable">$obj2prop</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token variable">$obj1</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$obj1</span><span class="token operator">-&gt;</span><span class="token property">obj1prop</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token variable">$obj2</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$obj2</span><span class="token operator">-&gt;</span><span class="token property">obj2prop</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token variable">$serializedObj1</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$obj1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$serializedObj2</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$obj2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 默认行为是接收所有类</span>
<span class="token comment">// 第二个参数可以忽略</span>
<span class="token comment">// 如果 allowed_classes 设置为 false, unserialize 会将所有对象转换为 __PHP_Incomplete_Class 对象</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$serializedObj1</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"allowed_classes"</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 转换所有对象到 __PHP_Incomplete_Class 对象，只允许 MyClass1 和 MyClass2 转换到 __PHP_Incomplete_Class</span>
<span class="token variable">$data2</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$serializedObj2</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"allowed_classes"</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"MyClass1"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"MyClass2"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token operator">-&gt;</span><span class="token property">obj1prop</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token constant">PHP_EOL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token variable">$data2</span><span class="token operator">-&gt;</span><span class="token property">obj2prop</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>1
2
</code></pre> 
<h2><a id="PHP_7__4651"></a>PHP 7 异常</h2> 
<p>PHP 7 异常用于向下兼容及增强旧的assert()函数。它能在生产环境中实现零成本的断言，并且提供抛出自定义异常及错误的能力。</p> 
<p>老版本的API出于兼容目的将继续被维护，assert()现在是一个语言结构，它允许第一个参数是一个表达式，而不仅仅是一个待计算的 string或一个待测试的boolean。</p> 
<hr> 
<h3><a id="assert__4659"></a>assert() 配置</h3> 
<table><thead><tr><th align="left">配置项</th><th align="left">默认值</th><th align="left">可选值</th></tr></thead><tbody><tr><td align="left">zend.assertions</td><td align="left">1</td><td align="left"><strong>1</strong> - 生成和执行代码 (开发模式)<strong>0</strong> - 生成代码，但在执行时跳过它**-1** - 不生成代码 (生产环境)</td></tr><tr><td align="left">assert.exception</td><td align="left">0</td><td align="left"><strong>1</strong> - 断言失败时抛出，可以抛出异常对象，如果没有提供异常，则抛出 AssertionError 对象实例。<strong>0</strong> - 使用或生成 Throwable, 仅仅是基于对象生成的警告而不是抛出对象(与 PHP 5 兼容)</td></tr></tbody></table> 
<h4><a id="_4666"></a>参数</h4> 
<ul><li> <p><strong>assertion</strong></p> <p>断言。在 PHP 5 中，是一个用于执行的字符串或者用于测试的布尔值。在 PHP 7 中，可以是一个返回任何值的表达式， 它将被执行结果用于指明断言是否成功。</p> </li><li> <p><strong>description</strong></p> <p>如果 <code>assertion</code> 失败了，选项 description 将会包括在失败信息里。</p> </li><li> <p><strong>exception</strong></p> <p>在 PHP 7 中，第二个参数可以是一个 <strong>Throwable</strong> 对象，而不是一个字符串，如果断言失败且启用了 assert.exception 该对象将被抛出。</p> </li></ul> 
<h4><a id="_4680"></a>实例</h4> 
<p>将 zend.assertions 设置为 0：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'zend.assertions'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">assert</span><span class="token punctuation">(</span><span class="token constant boolean">true</span> <span class="token operator">==</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'Hi!'</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>Hi!
</code></pre> 
<p>将 zend.assertions 设置为 1，assert.exception 设置为 1：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'zend.assertions'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'assert.exception'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">assert</span><span class="token punctuation">(</span><span class="token constant boolean">true</span> <span class="token operator">==</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'Hi!'</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>Fatal error: Uncaught AssertionError: assert(true == false) in -:2
Stack trace:
#0 -(2): assert(false, 'assert(true == ...')
#1 {main}
  thrown in - on line 2
</code></pre> 
<h2><a id="PHP_7_Session__4721"></a>PHP 7 Session 选项</h2> 
<p>PHP 7 session_start() 函数可以接收一个数组作为参数，可以覆盖 php.ini 中 session 的配置项。</p> 
<p>这个特性也引入了一个新的 php.ini 设置（session.lazy_write）, 默认情况下设置为 true，意味着 session 数据只在发生变化时才写入。</p> 
<p>除了常规的会话配置指示项， 还可以在此数组中包含 read_and_close 选项。如果将此选项的值设置为 TRUE， 那么会话文件会在读取完毕之后马上关闭， 因此，可以在会话数据没有变动的时候，避免不必要的文件锁。</p> 
<h4><a id="_4729"></a>实例</h4> 
<p>把 cache_limiter 设置为私有的，同时在阅读完 session 后立即关闭。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
   <span class="token string single-quoted-string">'cache_limiter'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'private'</span><span class="token punctuation">,</span>
   <span class="token string single-quoted-string">'read_and_close'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<ul><li>bool</li><li>string</li><li>interfaces</li><li>array</li><li>callable</li></ul> 
<h4><a id="_4748"></a>强制模式实例</h4> 
<h3><a id="_4750"></a>实例</h3> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 强制模式</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword type-declaration">int</span> <span class="token operator">...</span><span class="token variable">$ints</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$ints</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'3'</span><span class="token punctuation">,</span> <span class="token number">4.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>9
</code></pre> 
<p>实例汇总将参数 4.1 转换为整数 4 后再相加。</p> 
<h4><a id="_4772"></a>严格模式实例</h4> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 严格模式</span>
<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword type-declaration">int</span> <span class="token operator">...</span><span class="token variable">$ints</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">array_sum</span><span class="token punctuation">(</span><span class="token variable">$ints</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'3'</span><span class="token punctuation">,</span> <span class="token number">4.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序由于采用了严格模式，所以如果参数中出现不适整数的类型会报错，执行输出结果为：</p> 
<pre><code>PHP Fatal error:  Uncaught TypeError: Argument 2 passed to sum() must be of the type integer, string given, called in……
</code></pre> 
<h3><a id="_4794"></a>返回类型声明</h3> 
<p>PHP 7 增加了对返回类型声明的支持，返回类型声明指明了函数返回值的类型。</p> 
<p>可以声明的返回类型有：</p> 
<ul><li>int</li><li>float</li><li>bool</li><li>string</li><li>interfaces</li><li>array</li><li>callable</li></ul> 
<h4><a id="_4808"></a>返回类型声明实例</h4> 
<p>实例中，要求返回结果为整数：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">returnIntValue</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">return</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token function">returnIntValue</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>5
</code></pre> 
<h3><a id="_4831"></a>特殊情况</h3> 
<p>对于标量类型声明：在严格模式下，有一种例外的情况是：当函数参数为float时，传入int型变量不会跑出typeerror，而是正常执行，在返回类型声明中，也是同样的:</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test </span><span class="token punctuation">(</span><span class="token keyword type-hint">float</span> <span class="token variable">$inter</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$inter</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">echo</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为2</span>

<span class="token keyword">function</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$inte</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword return-type">float</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token variable">$inte</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">echo</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为1</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="PHP__4851"></a>PHP 常量数组</h2> 
<p>在 PHP 5.6 中仅能通过 const 定义常量数组，PHP 7 可以通过 define() 来定义。</p> 
<h4><a id="_4855"></a>实例</h4> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 使用 define 函数来定义数组</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'sites'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
   <span class="token string single-quoted-string">'Google'</span><span class="token punctuation">,</span>
   <span class="token string single-quoted-string">'Runoob'</span><span class="token punctuation">,</span>
   <span class="token string single-quoted-string">'Taobao'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>sites<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>Runoob
</code></pre> 
<h2><a id="PHP_Closurecall_4876"></a>PHP Closure::call()</h2> 
<p>PHP 7 的 Closure::call() 有着更好的性能，将一个闭包函数动态绑定到一个新的对象实例并调用执行该函数。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">private</span> <span class="token variable">$x</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// PHP 7 之前版本定义闭包函数代码</span>
<span class="token variable">$getXCB</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">x</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 闭包函数绑定到类 A 上</span>
<span class="token variable">$getX</span> <span class="token operator">=</span> <span class="token variable">$getXCB</span><span class="token operator">-&gt;</span><span class="token function">bindTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">echo</span> <span class="token variable">$getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token constant">PHP_EOL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// PHP 7+ 代码</span>
<span class="token variable">$getX</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">x</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$getX</span><span class="token operator">-&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>1
1
</code></pre> 
<h2><a id="PHP__unserialize_4912"></a>PHP 过滤 unserialize()</h2> 
<p>PHP 7 增加了可以为 unserialize() 提供过滤的特性，可以防止非法数据进行代码注入，提供了更安全的反序列化数据。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass1</span> <span class="token punctuation">{<!-- --></span> 
   <span class="token keyword">public</span> <span class="token variable">$obj1prop</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass2</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">public</span> <span class="token variable">$obj2prop</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token variable">$obj1</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$obj1</span><span class="token operator">-&gt;</span><span class="token property">obj1prop</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token variable">$obj2</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$obj2</span><span class="token operator">-&gt;</span><span class="token property">obj2prop</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token variable">$serializedObj1</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$obj1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$serializedObj2</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$obj2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 默认行为是接收所有类</span>
<span class="token comment">// 第二个参数可以忽略</span>
<span class="token comment">// 如果 allowed_classes 设置为 false, unserialize 会将所有对象转换为 __PHP_Incomplete_Class 对象</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$serializedObj1</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"allowed_classes"</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 转换所有对象到 __PHP_Incomplete_Class 对象，只允许 MyClass1 和 MyClass2 转换到 __PHP_Incomplete_Class</span>
<span class="token variable">$data2</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$serializedObj2</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"allowed_classes"</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string double-quoted-string">"MyClass1"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"MyClass2"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token operator">-&gt;</span><span class="token property">obj1prop</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token constant">PHP_EOL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token variable">$data2</span><span class="token operator">-&gt;</span><span class="token property">obj2prop</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>1
2
</code></pre> 
<h2><a id="PHP_7__4955"></a>PHP 7 异常</h2> 
<p>PHP 7 异常用于向下兼容及增强旧的assert()函数。它能在生产环境中实现零成本的断言，并且提供抛出自定义异常及错误的能力。</p> 
<p>老版本的API出于兼容目的将继续被维护，assert()现在是一个语言结构，它允许第一个参数是一个表达式，而不仅仅是一个待计算的 string或一个待测试的boolean。</p> 
<hr> 
<h3><a id="assert__4963"></a>assert() 配置</h3> 
<table><thead><tr><th align="left">配置项</th><th align="left">默认值</th><th align="left">可选值</th></tr></thead><tbody><tr><td align="left">zend.assertions</td><td align="left">1</td><td align="left"><strong>1</strong> - 生成和执行代码 (开发模式)<strong>0</strong> - 生成代码，但在执行时跳过它**-1** - 不生成代码 (生产环境)</td></tr><tr><td align="left">assert.exception</td><td align="left">0</td><td align="left"><strong>1</strong> - 断言失败时抛出，可以抛出异常对象，如果没有提供异常，则抛出 AssertionError 对象实例。<strong>0</strong> - 使用或生成 Throwable, 仅仅是基于对象生成的警告而不是抛出对象(与 PHP 5 兼容)</td></tr></tbody></table> 
<h4><a id="_4970"></a>参数</h4> 
<ul><li> <p><strong>assertion</strong></p> <p>断言。在 PHP 5 中，是一个用于执行的字符串或者用于测试的布尔值。在 PHP 7 中，可以是一个返回任何值的表达式， 它将被执行结果用于指明断言是否成功。</p> </li><li> <p><strong>description</strong></p> <p>如果 <code>assertion</code> 失败了，选项 description 将会包括在失败信息里。</p> </li><li> <p><strong>exception</strong></p> <p>在 PHP 7 中，第二个参数可以是一个 <strong>Throwable</strong> 对象，而不是一个字符串，如果断言失败且启用了 assert.exception 该对象将被抛出。</p> </li></ul> 
<h4><a id="_4984"></a>实例</h4> 
<p>将 zend.assertions 设置为 0：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'zend.assertions'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">assert</span><span class="token punctuation">(</span><span class="token constant boolean">true</span> <span class="token operator">==</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'Hi!'</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>Hi!
</code></pre> 
<p>将 zend.assertions 设置为 1，assert.exception 设置为 1：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'zend.assertions'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'assert.exception'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">assert</span><span class="token punctuation">(</span><span class="token constant boolean">true</span> <span class="token operator">==</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'Hi!'</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>以上程序执行输出结果为：</p> 
<pre><code>Fatal error: Uncaught AssertionError: assert(true == false) in -:2
Stack trace:
#0 -(2): assert(false, 'assert(true == ...')
#1 {main}
  thrown in - on line 2
</code></pre> 
<h2><a id="PHP_7_Session__5025"></a>PHP 7 Session 选项</h2> 
<p>PHP 7 session_start() 函数可以接收一个数组作为参数，可以覆盖 php.ini 中 session 的配置项。</p> 
<p>这个特性也引入了一个新的 php.ini 设置（session.lazy_write）, 默认情况下设置为 true，意味着 session 数据只在发生变化时才写入。</p> 
<p>除了常规的会话配置指示项， 还可以在此数组中包含 read_and_close 选项。如果将此选项的值设置为 TRUE， 那么会话文件会在读取完毕之后马上关闭， 因此，可以在会话数据没有变动的时候，避免不必要的文件锁。</p> 
<h4><a id="_5033"></a>实例</h4> 
<p>把 cache_limiter 设置为私有的，同时在阅读完 session 后立即关闭。</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
   <span class="token string single-quoted-string">'cache_limiter'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'private'</span><span class="token punctuation">,</span>
   <span class="token string single-quoted-string">'read_and_close'</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/eb8e9ee6155c31f5a986fd0aa7ddf349/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python沙箱逃逸总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ec378d61604d6536cc3550f5a4552efa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mac弱网测试工具</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>