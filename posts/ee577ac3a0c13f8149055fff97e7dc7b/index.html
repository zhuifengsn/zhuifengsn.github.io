<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux 常用命令指南 - vino命令 vnc服务端 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux 常用命令指南 - vino命令 vnc服务端" />
<meta property="og:description" content="Linux 常用命令指南 - vino命令 vnc服务端 文章目录 Linux 常用命令指南 - vino命令 vnc服务端一、vino 是什么？二、vino 使用场景2.1 vino 安装2.2 vino 启动服务端2.3 vino 服务端配置 三、总结 一、vino 是什么？ vino 是linux上一个用于远程桌面连接的 VNC 服务端。
二、vino 使用场景 2.1 vino 安装 ubuntu 环境安装 vino :
$ sudo apt install vino $ sudo apt install dconf-editor # 非必需，查看gsettings 软件包 2.2 vino 启动服务端 查看 vino 服务配置 /usr/lib/systemd/user/vino-server.service 内容如下：
[Unit] Description=Vino VNC Server [Server] Type=dbus BusName=org.gnome.Vino ExecStart=/usr/lib/vino/vino-server Restart=on-abnormal 可通过 systemctl 命令启动：
$ systemctl --user restart vino-server." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/ee577ac3a0c13f8149055fff97e7dc7b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-10T19:04:42+08:00" />
<meta property="article:modified_time" content="2023-11-10T19:04:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux 常用命令指南 - vino命令 vnc服务端</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Linux___vino_vnc_0"></a>Linux 常用命令指南 - vino命令 vnc服务端</h2> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Linux___vino_vnc_0" rel="nofollow">Linux 常用命令指南 - vino命令 vnc服务端</a></li><li><a href="#vino__10" rel="nofollow">一、vino 是什么？</a></li><li><a href="#vino__14" rel="nofollow">二、vino 使用场景</a></li><li><ul><li><a href="#21_vino__16" rel="nofollow">2.1 vino 安装</a></li><li><a href="#22_vino__25" rel="nofollow">2.2 vino 启动服务端</a></li><li><a href="#23_vino__47" rel="nofollow">2.3 vino 服务端配置</a></li></ul> 
  </li><li><a href="#_140" rel="nofollow">三、总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="vino__10"></a>一、vino 是什么？</h2> 
<p>vino 是linux上一个用于远程桌面连接的 VNC 服务端。</p> 
<h2><a id="vino__14"></a>二、vino 使用场景</h2> 
<h3><a id="21_vino__16"></a>2.1 vino 安装</h3> 
<p>ubuntu 环境安装 vino :</p> 
<pre><code class="prism language-bash">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> vino
$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> dconf-editor <span class="token comment"># 非必需，查看gsettings 软件包</span>
</code></pre> 
<h3><a id="22_vino__25"></a>2.2 vino 启动服务端</h3> 
<p>查看 vino 服务配置 <code>/usr/lib/systemd/user/vino-server.service</code> 内容如下：</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Vino VNC Server

<span class="token punctuation">[</span>Server<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>dbus
<span class="token assign-left variable">BusName</span><span class="token operator">=</span>org.gnome.Vino
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/lib/vino/vino-server
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-abnormal
</code></pre> 
<p>可通过 <code>systemctl </code> 命令启动：</p> 
<pre><code class="prism language-bash">$ systemctl <span class="token parameter variable">--user</span> restart vino-server.service  <span class="token comment"># 启动 vino 服务</span>
$ systemctl <span class="token parameter variable">--user</span> status
</code></pre> 
<h3><a id="23_vino__47"></a>2.3 vino 服务端配置</h3> 
<p>vino 服务端可以通过 <code>gsettings</code> 进行控制。</p> 
<p>gsettings 配置文件如果想修改并生效可按如下操作：</p> 
<pre><code class="prism language-bash"><span class="token comment"># vino gsettings 配置文件所在目录</span>
$ <span class="token function">sudo</span> <span class="token function">vim</span> /usr/share/glib-2.0/schemas/org.gnome.Vino.gschema.xml
<span class="token comment"># gnome glib schema 编译使gsettings配置文件生效</span>
$ <span class="token function">sudo</span> glib-compile-schemas /usr/share/glib-2.0/schemas

获取 vino 的所有 gsettings 键值对：

``<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span>
$ gsettings list-recursively org.gnome.Vino

<span class="token comment"># 5900端口号如果被防火墙阻挡，可以通过ufw执行以下操作运行5900可用</span>
<span class="token comment"># ufw enable ; ufw allow 5900</span><span class="token variable">`</span></span>
<span class="token comment"># vnc端口号为5900,有时该端口号也会被其他vnc服务抢占（如x11vnc），</span>
<span class="token comment"># 端口抢占后导致 vino 出现异常，可以更改端口号或者关闭其他vnc服务</span>
org.gnome.Vino alternative-port uint16 <span class="token number">5900</span> 

<span class="token comment"># 认证方式，当设置为 ['vnc']，同时 require-encryption 设置为true，即客户端连接vnc服务时，需要登陆密码。</span>
org.gnome.Vino authentication-methods <span class="token punctuation">[</span><span class="token string">'none'</span><span class="token punctuation">]</span> 

org.gnome.Vino disable-background <span class="token boolean">false</span>
org.gnome.Vino disable-xdamage <span class="token boolean">false</span>
org.gnome.Vino icon-visibility <span class="token string">'client'</span>
org.gnome.Vino lock-screen-on-disconnect <span class="token boolean">false</span>
org.gnome.Vino mailto <span class="token string">''</span>
org.gnome.Vino network-interface <span class="token string">''</span>
org.gnome.Vino notify-on-connect <span class="token boolean">true</span>

<span class="token comment"># true 代表客户端连接时，需要服务端手动确认</span>
org.gnome.Vino prompt-enabled <span class="token boolean">true</span> 

org.gnome.Vino require-encryption <span class="token boolean">true</span>
org.gnome.Vino use-alternative-port <span class="token boolean">false</span>
org.gnome.Vino use-upnp <span class="token boolean">false</span>

<span class="token comment"># true 代表只可以查看远程vnc远程桌面，不可编辑控制</span>
org.gnome.Vino view-only <span class="token boolean">false</span>

<span class="token comment"># 密码采用base64加解密，可以通过python3 base64库进行解析</span>
org.gnome.Vino vnc-password <span class="token string">'keyring'</span> 
</code></pre> 
<p>注： <code>vnc-password</code> 密码加解密可参考 <a href="https://yushuoqi-python3.readthedocs.io/en/latest/c06/p10_decode_encode_base64.html" rel="nofollow">Python3 编码解码Base64数据</a> ：</p> 
<pre><code class="prism language-python">$ python3
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> base64
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> w <span class="token operator">=</span> <span class="token string">b'1234567'</span> <span class="token comment"># vnc-password 想设置的密码明文</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token comment"># Encode as Base64</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> w_encode <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span>w<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;&gt;</span> <span class="token comment"># 经过base64编码的w_encode 为最终 vnc-password 设置的密码</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>w_encode<span class="token punctuation">)</span> 
<span class="token string">b'MTIzNDU2Nw=='</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>w_encode<span class="token punctuation">)</span>
<span class="token string">b'1234567'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre> 
<p>第一种设置 vino 服务方法，通过 gsettings 命令行设置：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 设置vnc连接服务密码</span>
$ gsettings <span class="token builtin class-name">set</span> org.gnome.Vino vnc-password <span class="token string">'MTIzNDU2Nw=='</span> 
</code></pre> 
<p>可以将相关 gsettings 设置写入一个脚本 <code>~/vino-set.sh</code> ：</p> 
<pre><code class="prism language-bash">$ <span class="token function">vi</span> ~/vino-set.sh <span class="token comment"># 加入以下内容</span>

<span class="token comment">#!/bin/bash</span>
<span class="token comment"># DISPLAY为需要展示的vnc 屏幕，对于多屏幕来说需要额外设置</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">DISPLAY</span></span><span class="token operator">=</span>:0 
gsettings <span class="token builtin class-name">set</span> org.gnome.Vino enabled <span class="token boolean">true</span>
gsettings <span class="token builtin class-name">set</span> org.gnome.Vino prompt-enabled <span class="token boolean">false</span>
gsettings <span class="token builtin class-name">set</span> org.gnome.Vino require-encryption <span class="token boolean">false</span>
xrandr <span class="token parameter variable">--fb</span> 1280x1024 <span class="token comment"># 设置分辨率</span>
/usr/lib/vino/vino-server <span class="token operator">&amp;</span>

$ <span class="token function">sudo</span> <span class="token function">chmod</span> +x ~/vino-set.sh <span class="token comment"># 赋予可执行权限</span>
$ ~/vino-set.sh <span class="token comment"># 设置并启动vino服务</span>
</code></pre> 
<p>第二种设置 vino 服务方法，通过启动 <code>dconf-editor</code> 进入 <code>/org/gnome/desktop/remote-access/</code> vino 所在gsettings 页面设置。</p> 
<p>当vino 默认分辨率比较模糊，除了xrandr可以设置分辨率，也通过客户端 <code>remmina</code> 设置 vnc 连接的分辨率为<code>良好</code>，这样就不会模糊了。</p> 
<h2><a id="_140"></a>三、总结</h2> 
<p>本文介绍了linux上一个用于远程桌面连接的 VNC 服务端。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d4fa167a1ef4d7225114ce0db2270a9f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">node插件MongoDB（四）—— 库mongoose 操作文档使用（新增、删除、更新、查看文档）（二）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/88b05bf26fbd611fda0a418790271f12/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Eelasticsearch字段数据类型</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>