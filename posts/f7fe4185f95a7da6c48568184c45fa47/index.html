<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[费用流]晨跑 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[费用流]晨跑" />
<meta property="og:description" content="题目描述 Elaxia最近迷恋上了空手道，他为自己设定了一套健身计划，比如俯卧撑、仰卧起坐等 等，不过到目前为止，他坚持下来的只有晨跑。 现在给出一张学校附近的地图，这张地图中包含N个十字路口和M条街道，Elaxia只能从 一个十字路口跑向另外一个十字路口，街道之间只在十字路口处相交。Elaxia每天从寝室出发 跑到学校，保证寝室编号为1，学校编号为N。 Elaxia的晨跑计划是按周期（包含若干天）进行的，由于他不喜欢走重复的路线，所以 在一个周期内，每天的晨跑路线都不会相交（在十字路口处），寝室和学校不算十字路 口。Elaxia耐力不太好，他希望在一个周期内跑的路程尽量短，但是又希望训练周期包含的天 数尽量长。 除了练空手道，Elaxia其他时间都花在了学习和找MM上面，所有他想请你帮忙为他设计 一套满足他要求的晨跑计划。
存在 1\rightarrow n1→n 的边存在。这种情况下，这条边只能走一次。
输入输出格式
输入格式： 第一行：两个数N,M。表示十字路口数和街道数。 接下来M行，每行3个数a,b,c，表示路口a和路口b之间有条长度为c的街道（单向）。
输出格式： 两个数，第一个数为最长周期的天数，第二个数为满足最长天数的条件下最短的路程长 度。
输入输出样例
输入样例 7 10 1 2 1 1 3 1 2 4 1 3 4 1 4 5 1 4 6 1 2 5 5 3 6 6 5 7 1 6 7 1 输出样例 2 11 说明
对于30%的数据，N ≤ 20，M ≤ 120。
对于100%的数据，N ≤ 200，M ≤ 20000。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/f7fe4185f95a7da6c48568184c45fa47/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-27T16:34:36+08:00" />
<meta property="article:modified_time" content="2018-06-27T16:34:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[费用流]晨跑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-kimbie-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="题目描述">题目描述</h2> 
<p>Elaxia最近迷恋上了空手道，他为自己设定了一套健身计划，比如俯卧撑、仰卧起坐等 等，不过到目前为止，他坚持下来的只有晨跑。 现在给出一张学校附近的地图，这张地图中包含N个十字路口和M条街道，Elaxia只能从 一个十字路口跑向另外一个十字路口，街道之间只在十字路口处相交。Elaxia每天从寝室出发 跑到学校，保证寝室编号为1，学校编号为N。 Elaxia的晨跑计划是按周期（包含若干天）进行的，由于他不喜欢走重复的路线，所以 在一个周期内，每天的晨跑路线都不会相交（在十字路口处），寝室和学校不算十字路 口。Elaxia耐力不太好，他希望在一个周期内跑的路程尽量短，但是又希望训练周期包含的天 数尽量长。 除了练空手道，Elaxia其他时间都花在了学习和找MM上面，所有他想请你帮忙为他设计 一套满足他要求的晨跑计划。</p> 
<p>存在 1\rightarrow n1→n 的边存在。这种情况下，这条边只能走一次。</p> 
<p>输入输出格式</p> 
<p>输入格式： <br> 第一行：两个数N,M。表示十字路口数和街道数。 接下来M行，每行3个数a,b,c，表示路口a和路口b之间有条长度为c的街道（单向）。</p> 
<p>输出格式： <br> 两个数，第一个数为最长周期的天数，第二个数为满足最长天数的条件下最短的路程长 度。</p> 
<p>输入输出样例</p> 
<p>输入样例 <br> 7 10 <br> 1 2 1 <br> 1 3 1 <br> 2 4 1 <br> 3 4 1 <br> 4 5 1 <br> 4 6 1 <br> 2 5 5 <br> 3 6 6 <br> 5 7 1 <br> 6 7 1 <br> 输出样例 <br> 2 11 <br> 说明</p> 
<p>对于30%的数据，N ≤ 20，M ≤ 120。</p> 
<p>对于100%的数据，N ≤ 200，M ≤ 20000。</p> 
<h4 id="分析">分析</h4> 
<p>对于最长周期和最短路径，容易想到费用流 <br> 然后每个点只能走一次，可以将点拆成入和出，中间连流量1费用0的边即可 <br> 其他照常</p> 
<pre class="prettyprint"><code class=" hljs cpp"><span class="hljs-preprocessor">#include &lt;cstdio&gt;</span>
<span class="hljs-preprocessor">#include &lt;queue&gt;</span>
<span class="hljs-preprocessor">#include &lt;memory.h&gt;</span>
<span class="hljs-preprocessor">#define rep(i,a,b) for (i=a;i&lt;=b;i++)</span>
<span class="hljs-preprocessor">#define inf 2147483647</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-keyword">struct</span> edge{
    <span class="hljs-keyword">int</span> u,v,c,w,nx;
}g[<span class="hljs-number">100011</span>];
<span class="hljs-keyword">int</span> <span class="hljs-built_in">list</span>[<span class="hljs-number">5001</span>],pre[<span class="hljs-number">5001</span>],dis[<span class="hljs-number">5001</span>];
<span class="hljs-keyword">int</span> cnt=<span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> s,t;
<span class="hljs-keyword">int</span> ans,costans;
<span class="hljs-keyword">int</span> n,m;

<span class="hljs-keyword">void</span> Add(<span class="hljs-keyword">int</span> u,<span class="hljs-keyword">int</span> v,<span class="hljs-keyword">int</span> c,<span class="hljs-keyword">int</span> w)
{
    g[++cnt].u=u;g[cnt].v=v;g[cnt].c=c;g[cnt].w=w;g[cnt].nx=<span class="hljs-built_in">list</span>[u];<span class="hljs-built_in">list</span>[u]=cnt;
    g[++cnt].u=v;g[cnt].v=u;g[cnt].c=<span class="hljs-number">0</span>;g[cnt].w=-w;g[cnt].nx=<span class="hljs-built_in">list</span>[v];<span class="hljs-built_in">list</span>[v]=cnt;
}

<span class="hljs-keyword">bool</span> Spfa(){
    <span class="hljs-stl_container"><span class="hljs-built_in">queue</span>&lt;<span class="hljs-keyword">int</span>&gt;</span> q;
    <span class="hljs-keyword">int</span> i;
    <span class="hljs-keyword">bool</span> b[<span class="hljs-number">5001</span>];
    <span class="hljs-built_in">memset</span>(b,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(b));
    <span class="hljs-built_in">memset</span>(pre,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(pre));
    rep(i,<span class="hljs-number">0</span>,<span class="hljs-number">5000</span>) dis[i]=inf;
    <span class="hljs-keyword">while</span> (!q.empty()) q.pop();
    q.push(s);
    dis[s]=<span class="hljs-number">0</span>;b[s]=<span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (!q.empty()){
        <span class="hljs-keyword">int</span> x=q.front();q.pop();
        i=<span class="hljs-built_in">list</span>[x];
        <span class="hljs-keyword">while</span> (i&gt;<span class="hljs-number">0</span>){
            <span class="hljs-keyword">if</span> (g[i].c&amp;&amp;dis[g[i].v]&gt;dis[x]+g[i].w){
                dis[g[i].v]=dis[x]+g[i].w;
                pre[g[i].v]=i;
                <span class="hljs-keyword">if</span> (!b[g[i].v]){
                    b[g[i].v]=<span class="hljs-number">1</span>;
                    q.push(g[i].v);
                }
            }
            i=g[i].nx;
        }
        b[x]=<span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">return</span> dis[t]&lt;inf;
}

<span class="hljs-keyword">int</span> Mcf(){
    <span class="hljs-keyword">int</span> f=inf,x=t;
    <span class="hljs-keyword">while</span> (pre[x]){
        f=min(f,g[pre[x]].c);
        x=g[pre[x]].u;
    }
    costans+=f*dis[t];x=t;
    <span class="hljs-keyword">while</span> (pre[x]){
        g[pre[x]].c-=f;
        g[pre[x]^<span class="hljs-number">1</span>].c+=f;
        x=g[pre[x]].u;
    }
    <span class="hljs-keyword">return</span> f;
}

<span class="hljs-keyword">void</span> Dinic(){
    <span class="hljs-keyword">int</span> i;
    <span class="hljs-keyword">while</span> (Spfa())
    ans+=Mcf();
}

<span class="hljs-keyword">int</span> main()
{
    <span class="hljs-keyword">int</span> i;
    <span class="hljs-keyword">int</span> u,v,cost;
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>,&amp;n,&amp;m);
    s=<span class="hljs-number">1</span>;t=n*<span class="hljs-number">2</span>;
    rep(i,<span class="hljs-number">1</span>,m){
        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;cost);
        <span class="hljs-keyword">if</span> (u==<span class="hljs-number">1</span>&amp;&amp;v==n)
        Add(u*<span class="hljs-number">2</span>,v*<span class="hljs-number">2</span>-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,cost);
        <span class="hljs-keyword">else</span>
        Add(u*<span class="hljs-number">2</span>,v*<span class="hljs-number">2</span>-<span class="hljs-number">1</span>,inf,cost);
    }
    rep(i,<span class="hljs-number">2</span>,n-<span class="hljs-number">1</span>) Add(i*<span class="hljs-number">2</span>-<span class="hljs-number">1</span>,i*<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>);
    Add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,inf,<span class="hljs-number">0</span>);
    Add(n*<span class="hljs-number">2</span>-<span class="hljs-number">1</span>,n*<span class="hljs-number">2</span>,inf,<span class="hljs-number">0</span>);
    Dinic();
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d %d"</span>,ans,costans);
}</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f6901f796fa67a2e02e2af9547031114/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【新手教程】手把手教你搭建腾讯云服务器，图文详细教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1971fd97cc95faf2901b8c2a75e1cea8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">unsigned short 和 int 赋值问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>