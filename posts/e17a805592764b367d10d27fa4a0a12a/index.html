<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>è´å¶æ–¯æ ¸æœºå™¨å›å½’æ‹“å±•RåŒ…ï¼šbkmrhat - è¿½é£å°‘å¹´çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="è´å¶æ–¯æ ¸æœºå™¨å›å½’æ‹“å±•RåŒ…ï¼šbkmrhat" />
<meta property="og:description" content="1.æ‘˜è¦ bkmrhatåŒ…æ˜¯ç”¨äºæ‰©å±•bkmråŒ…çš„è´å¶æ–¯æ ¸æœºå™¨å›å½’ï¼ˆBayesian Kernel Machine Regression, BKMRï¼‰åˆ†æå·¥å…·ï¼Œæ”¯æŒå¤šé“¾æ¨æ–­å’Œè¯Šæ–­ã€‚è¯¥åŒ…åˆ©ç”¨future, rstan, å’ŒcodaåŒ…çš„åŠŸèƒ½ï¼Œæä¾›äº†åœ¨è´å¶æ–¯åŠå‚æ•°å¹¿ä¹‰çº¿æ€§æ¨¡å‹ä¸‹è¿›è¡Œidentityé“¾æ¥å’Œ probit é“¾æ¥çš„æ–¹æ³•ã€‚
ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šå¤šé“¾åˆå¹¶ã€ç»§ç»­é‡‡æ ·ã€è¯Šæ–­å’Œé¢„æµ‹ç­‰ã€‚åŒ…å†…åŒ…å«å¤šç§å‡½æ•°ï¼Œå¦‚kmbayes_parallelç”¨äºå¹¶è¡Œè®¡ç®—å¤šä¸ªé“¾ï¼Œkmbayes_combineå’Œkmbayes_combine_lowmemç”¨äºåˆå¹¶é“¾ï¼Œas.mcmc.bkmrfitå°†bkmrfitå¯¹è±¡è½¬æ¢ä¸ºMCMCå¯¹è±¡ä»¥è¿›è¡Œè¯Šæ–­ï¼Œä»¥åŠpredict.bkmrfitç”¨äºç”Ÿæˆé¢„æµ‹ã€‚
2. å‡½æ•°ä»‹ç» 2.1 åŒ…ä»‹ç» æä¾›äº†æ‰©å±•bkmråŒ…çš„è´å¶æ–¯æ ¸æœºå™¨å›å½’å·¥å…·æ”¯æŒå¤šé“¾æ¨æ–­å’Œè¯Šæ–­åˆ©ç”¨future, rstan, codaåŒ… 2.2 as.mcmc.bkmrfit å‡½æ•°ä¹¦å†™æ ¼å¼ï¼šas.mcmc()å°†bkmrfitå¯¹è±¡è½¬æ¢ä¸ºcodaåŒ…çš„MCMCå¯¹è±¡coda åŒ…æ”¯æŒè®¸å¤šä¸åŒç±»å‹çš„å•é“¾ MCMC è¯Šæ–­ï¼ŒåŒ…æ‹¬ geweke.diagã€traceplot å’Œ effectiveSizeã€‚è¿˜å¯ä»¥ä½¿ç”¨åæ€»ç»“ï¼Œä¾‹å¦‚ HPDinterval å’Œsummary.mcmcã€‚ç”¨äºè¿›è¡Œå•é“¾MCMCè¯Šæ–­å’ŒåéªŒæ¦‚æ‹¬ ç¤ºä¾‹ä»£ç 1Â # åŠ è½½bkmrhatåŒ… library(bkmrhat) # ä¾‹å­ set.seed(111) #è®¾ç½®éšæœºæ•°ç§å­ library(coda) #åŠ è½½codaåŒ… # åŠ è½½bkmråŒ… library(bkmr) # ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ® dat &lt;- bkmr::SimData(n = 50, M = 4) # æå–æ•°æ® y &lt;- dat$y Z &lt;- dat$Z X &lt;- dat$X set.seed(111) # è¿è¡Œæ¨¡å‹ fitkm &lt;- kmbayes(y = y, Z = Z, X = X, iter = 500, verbose = FALSE, varsel = FALSE) # åº”ç”¨as." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/e17a805592764b367d10d27fa4a0a12a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-26T13:01:10+08:00" />
<meta property="article:modified_time" content="2024-02-26T13:01:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="è¿½é£å°‘å¹´çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">è¿½é£å°‘å¹´çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">è´å¶æ–¯æ ¸æœºå™¨å›å½’æ‹“å±•RåŒ…ï¼šbkmrhat</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="margin-left:0cm;"><strong><code>1.æ‘˜è¦</code></strong></h2> 
<blockquote> 
 <p style="margin-left:0cm;"><code>bkmrhat</code>åŒ…æ˜¯ç”¨äºæ‰©å±•<code>bkmr</code>åŒ…çš„è´å¶æ–¯æ ¸æœºå™¨å›å½’ï¼ˆBayesian Kernel Machine Regression, BKMRï¼‰åˆ†æå·¥å…·ï¼Œæ”¯æŒå¤šé“¾æ¨æ–­å’Œè¯Šæ–­ã€‚è¯¥åŒ…åˆ©ç”¨<code>future</code>, <code>rstan</code>, å’Œ<code>coda</code>åŒ…çš„åŠŸèƒ½ï¼Œæä¾›äº†åœ¨è´å¶æ–¯åŠå‚æ•°å¹¿ä¹‰çº¿æ€§æ¨¡å‹ä¸‹è¿›è¡Œidentityé“¾æ¥å’Œ probit é“¾æ¥çš„æ–¹æ³•ã€‚</p> 
 <p style="margin-left:0cm;">ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šå¤šé“¾åˆå¹¶ã€ç»§ç»­é‡‡æ ·ã€è¯Šæ–­å’Œé¢„æµ‹ç­‰ã€‚åŒ…å†…åŒ…å«å¤šç§å‡½æ•°ï¼Œå¦‚<code>kmbayes_parallel</code>ç”¨äºå¹¶è¡Œè®¡ç®—å¤šä¸ªé“¾ï¼Œ<code>kmbayes_combine</code>å’Œ<code>kmbayes_combine_lowmem</code>ç”¨äºåˆå¹¶é“¾ï¼Œ<code>as.mcmc.bkmrfit</code>å°†<code>bkmrfit</code>å¯¹è±¡è½¬æ¢ä¸ºMCMCå¯¹è±¡ä»¥è¿›è¡Œè¯Šæ–­ï¼Œä»¥åŠ<code>predict.bkmrfit</code>ç”¨äºç”Ÿæˆé¢„æµ‹ã€‚</p> 
</blockquote> 
<p>Â  </p> 
<h2 style="margin-left:0cm;">2. å‡½æ•°ä»‹ç»</h2> 
<h3 style="text-align:left;"><strong>2.1 åŒ…ä»‹ç»</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">æä¾›äº†æ‰©å±•<code>bkmr</code>åŒ…çš„è´å¶æ–¯æ ¸æœºå™¨å›å½’å·¥å…·</li><li style="text-align:left;">æ”¯æŒå¤šé“¾æ¨æ–­å’Œè¯Šæ–­</li><li style="text-align:left;">åˆ©ç”¨<code>future</code>, <code>rstan</code>, <code>coda</code>åŒ…</li></ul> 
</blockquote> 
<h3 style="text-align:left;"><strong>2.2 as.mcmc.bkmrfit</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">å‡½æ•°ä¹¦å†™æ ¼å¼ï¼šas.mcmc()</li><li style="text-align:left;">å°†<code>bkmrfit</code>å¯¹è±¡è½¬æ¢ä¸º<code>coda</code>åŒ…çš„MCMCå¯¹è±¡</li><li style="text-align:left;">coda åŒ…æ”¯æŒè®¸å¤šä¸åŒç±»å‹çš„å•é“¾ MCMC è¯Šæ–­ï¼ŒåŒ…æ‹¬ geweke.diagã€traceplot å’Œ effectiveSizeã€‚è¿˜å¯ä»¥ä½¿ç”¨åæ€»ç»“ï¼Œä¾‹å¦‚ HPDinterval å’Œsummary.mcmcã€‚</li><li style="text-align:left;">ç”¨äºè¿›è¡Œå•é“¾MCMCè¯Šæ–­å’ŒåéªŒæ¦‚æ‹¬</li></ul> 
</blockquote> 
<h5>ç¤ºä¾‹ä»£ç 1Â </h5> 
<pre><code class="language-R"># åŠ è½½bkmrhatåŒ…
library(bkmrhat)

# ä¾‹å­
set.seed(111) #è®¾ç½®éšæœºæ•°ç§å­
library(coda) #åŠ è½½codaåŒ…
# åŠ è½½bkmråŒ…
library(bkmr) 
# ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
dat &lt;- bkmr::SimData(n = 50, M = 4)
# æå–æ•°æ®
y &lt;- dat$y
Z &lt;- dat$Z
X &lt;- dat$X

set.seed(111)
#   è¿è¡Œæ¨¡å‹
fitkm &lt;- kmbayes(y = y, Z = Z, X = X, iter = 500, verbose = FALSE,
                 varsel = FALSE)
# åº”ç”¨as.mcmcå‡½æ•°
mcmcobj &lt;- as.mcmc(fitkm, iterstart=251)    
# ä»bkmrå¯¹è±¡ä¸­æå–MCMCé“¾,æ¨¡å‹å‚æ•°çš„åéªŒæ€»ç»“
summary(mcmcobj) 
# ä¸bkmråŒ…ä¸­çš„é»˜è®¤å€¼è¿›è¡Œæ¯”è¾ƒï¼Œè¯¥é»˜è®¤å€¼çœç•¥äº†é“¾çš„å‰1/2
summary(fitkm)</code></pre> 
<p>Â </p> 
<h3><strong>2.3 as.mcmc.list.bkmrfit.list</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">å‡½æ•°ä¹¦å†™æ ¼å¼ï¼šas.mcmc.list()</li><li style="text-align:left;">è½¬æ¢å¤šé“¾<code>bkmrfit</code>å¯¹è±¡ä¸º<code>coda</code>çš„<code>mcmc.list</code>å¯¹è±¡ï¼Œä»¥è¿›è¡Œ coda MCMC è¯Šæ–­</li><li style="text-align:left;">coda åŒ…æ”¯æŒè®¸å¤šä¸åŒç±»å‹çš„ MCMC è¯Šæ–­ï¼ŒåŒ…æ‹¬ geweke.diagã€traceplot å’Œ effectiveSizeã€‚è¿˜å¯ä»¥ä½¿ç”¨åæ€»ç»“ï¼Œä¾‹å¦‚ HPDinterval å’Œsummary.mcmcã€‚å¯¹äºæŸäº› MCMC è¯Šæ–­ï¼Œä¾‹å¦‚ gelman.diag å’Œ gelman.plotï¼Œéœ€è¦ä½¿ç”¨å¤šä¸ªé“¾</li><li style="text-align:left;"><strong>é€‚ç”¨äºå¤šé“¾MCMCè¯Šæ–­</strong></li></ul> 
</blockquote> 
<h5>ç¤ºä¾‹ä»£ç 2Â </h5> 
<pre><code class="language-R"># è¿è¡Œ 2 ä¸ªå¹¶è¡Œé©¬å°”å¯å¤«é“¾ï¼ˆé€šå¸¸æ›´å¥½ï¼‰
future::plan(strategy = future::multisession, workers=2)

# ä½¿ç”¨kmbayes_parallelå‡½æ•°è¿è¡Œé©¬å°”å¯å¤«é“¾
fitkm.list &lt;- kmbayes_parallel(nchains=2, y = y, Z = Z, X = X, iter = 1000, verbose = FALSE, varsel = FALSE)

# å°†ç»“æœè½¬æ¢ä¸ºmcmcå¯¹è±¡
mcmcobj = as.mcmc.list(fitkm.list)

# æ‰“å°é©¬å°”å¯å¤«é“¾çš„æ‘˜è¦ç»Ÿè®¡ä¿¡æ¯
summary(mcmcobj)</code></pre> 
<h3><strong>2.4 ExtractPIPs_parallel</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">å‡½æ•°ä¹¦å†™æ ¼å¼ï¼šExtractPIPs()</li><li style="text-align:left;">è®¡ç®—<strong>æ¯ä¸ªé“¾</strong>çš„åéªŒåŒ…å«æ¦‚ç‡</li><li style="text-align:left;">â€œPosterior inclusion probabilitiesâ€ ğŸ”¤åéªŒåŒ…å«æ¦‚ç‡ğŸ”¤</li></ul> 
</blockquote> 
<h5>ç¤ºä¾‹ä»£ç 3Â </h5> 
<pre><code class="language-R"># è®¾ç½®å¹¶è¡Œè®¡ç®—ç­–ç•¥ä¸ºå¤šä¼šè¯ï¼ˆmultisessionï¼‰ï¼Œä½¿ç”¨4ä¸ªå·¥ä½œè¿›ç¨‹
future::plan(strategy = future::multisession, workers=2)

# ä½¿ç”¨kmbayes_parallelå‡½æ•°è¿è¡Œå¹¶è¡Œé©¬å°”å¯å¤«é“¾ï¼Œç”Ÿæˆé©¬å°”å¯å¤«é“¾ç»“æœçš„åˆ—è¡¨fitkm.list
fitkm.list &lt;- kmbayes_parallel(nchains=2, y = y, Z = Z, X = X, iter = 500, verbose = FALSE, varsel = TRUE)

# å°†æ‰€æœ‰é©¬å°”å¯å¤«é“¾çš„ç»“æœåˆå¹¶
bigkm = kmbayes_combine(fitkm.list, excludeburnin=FALSE)

# ä»åˆå¹¶çš„é©¬å°”å¯å¤«é“¾ç»“æœä¸­æå–å‚æ•°ä¼°è®¡
ests = ExtractEsts(bigkm)  

# ä»åˆå¹¶çš„é©¬å°”å¯å¤«é“¾ç»“æœä¸­æå–å˜é‡é€‰æ‹©çš„åéªŒæ¦‚ç‡
ExtractPIPs(bigkm)</code></pre> 
<p style="text-align:left;"></p> 
<h3 style="background-color:transparent;"><strong>2.5 kmbayes_combine</strong></h3> 
<blockquote> 
 <ul><li>å‡½æ•°ä¹¦å†™æ ¼å¼ï¼š<strong>kmbayes_combine()</strong></li><li style="text-align:left;">åˆå¹¶å¤šä¸ª<code>bkmr</code>é“¾</li><li style="text-align:left;">ç»„åˆåŒ…å« BKMR çš„å¤šä¸ªé“¾é€‚åˆä¸åŒçš„èµ·å§‹å€¼</li><li style="text-align:left;">å¯è®¾ç½®è‡ªå®šä¹‰ç‡ƒçƒ§æœŸå’Œæ˜¯å¦æ’é™¤ç‡ƒçƒ§æœŸ</li><li style="text-align:left;"> <p>MCMCå®æ–½ä¸­çš„è‹¥å¹²æœ¯è¯­ï¼š</p> <p style="background-color:transparent;"><a class="has-card" href="https://blog.csdn.net/weixin_52505631/article/details/136207793" title="è´å¶æ–¯ç»Ÿè®¡â€”â€”6. è´å¶æ–¯ç»Ÿè®¡è®¡ç®—æ–¹æ³•-CSDNåšå®¢"><span class="link-card-box"><span class="link-title">è´å¶æ–¯ç»Ÿè®¡â€”â€”6. è´å¶æ–¯ç»Ÿè®¡è®¡ç®—æ–¹æ³•-CSDNåšå®¢</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/fa/bf/DEK1vVUA_o.png" alt="icon-default.png?t=N7T8">https://blog.csdn.net/weixin_52505631/article/details/136207793</span></span></a></p> <p></p> </li></ul> 
</blockquote> 
<table cellspacing="0"><tbody><tr><td style="vertical-align:bottom;width:54pt;"><span style="color:#000000;">å‚æ•°å</span></td><td style="vertical-align:bottom;width:54pt;"><span style="color:#000000;">å‚æ•°ç±»å‹</span></td><td style="vertical-align:bottom;width:54pt;"><span style="color:#000000;">ä¸­æ–‡è§£é‡Š</span></td></tr><tr><td style="vertical-align:bottom;"><span style="color:#000000;">fitkm.list</span></td><td style="vertical-align:bottom;"><span style="color:#000000;">output</span></td><td style="vertical-align:bottom;"><span style="color:#000000;">bkmrfit å¯¹è±¡çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ä¸ª MCMC é“¾çš„åéªŒ</span></td></tr><tr><td style="vertical-align:bottom;"><span style="color:#000000;">burnin</span></td><td style="vertical-align:bottom;"><span style="color:#000000;">numeric</span></td><td style="vertical-align:bottom;"> <p><span style="color:#000000;">è‡ªå®šä¹‰çš„ç‡ƒçƒ§æ•°ï¼ˆæ¯æ¡é“¾çš„ç‡ƒçƒ§è¿­ä»£æ•°ï¼‰ã€‚</span></p> <p><span style="color:#000000;">å¦‚æœä¸º NULLï¼Œåˆ™é»˜è®¤ä¸ºæ¯æ¡é“¾çš„ä¸€åŠ</span></p> </td></tr><tr><td style="vertical-align:bottom;"><span style="color:#000000;">excludeburnin</span></td><td style="vertical-align:bottom;"><span style="color:#000000;">logical</span></td><td style="vertical-align:bottom;"> <p><span style="color:#000000;">æ˜¯å¦ä»æœ€ç»ˆé“¾ä¸­æ’é™¤ç‡ƒçƒ§è¿­ä»£æ¬¡æ•°ï¼Ÿæ³¨æ„ï¼Œæ‰€æœ‰bkmråŒ…å‡½æ•°ä¼šè‡ªåŠ¨ä»è®¡ç®—</span></p> <p><span style="color:#000000;">ä¸­æ’é™¤ç‡ƒçƒ§è¿­ä»£æ¬¡æ•°</span></p> </td></tr><tr><td style="vertical-align:bottom;"><span style="color:#000000;">reorder</span></td><td style="vertical-align:bottom;"><span style="color:#000000;">logical</span></td><td style="vertical-align:bottom;"> <p><span style="color:#000000;">ç¡®ä¿åˆå¹¶é“¾çš„å‰åŠéƒ¨åˆ†åªåŒ…å«æ¯ä¸ªå•ç‹¬é“¾çš„å‰åŠéƒ¨åˆ† - è¿™å…è®¸ä½¿ç”¨bkmråŒ…ä¸­</span></p> <p><span style="color:#000000;">çš„æ ‡å‡†å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¼šè‡ªåŠ¨ä¿®å‰ªè¿­ä»£çš„å‰åŠéƒ¨åˆ†ã€‚è¿™å¯ç”¨äºåéªŒæ€»ç»“ï¼Œ</span></p> <p><span style="color:#000000;">ä½†æŸäº›è¯Šæ–­å¯èƒ½æ•ˆæœä¸å¥½ï¼ˆè‡ªç›¸å…³æ€§ï¼Œæœ‰æ•ˆæ ·æœ¬é‡ï¼‰ï¼Œå› æ­¤åº”åœ¨å•ç‹¬é“¾ä¸Š</span></p> <p><span style="color:#000000;">è¿›è¡Œè¯Šæ–­æ£€æµ‹</span></p> </td></tr></tbody></table> 
<h5 style="text-align:left;">ç¤ºä¾‹ä»£ç è§ç¤ºä¾‹ä»£ç 3</h5> 
<h3 style="background-color:transparent;"><strong>2.6 kmbayes_combine_lowmem</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">ç±»ä¼¼äº<code>kmbayes_combine</code>ï¼Œä½†é™ä½å†…å­˜éœ€æ±‚</li><li style="text-align:left;">åœ¨è¾ƒä½çš„å†…å­˜è®¾ç½®ä¸­ç»„åˆå¤šä¸ª BKMR é“¾</li><li style="text-align:left;">é€šè¿‡éƒ¨åˆ†å†™å…¥ç£ç›˜é¿å…å†…å­˜ä¸è¶³ã€‚æ­¤å‡½æ•°å°†ä¸€äº›ç»“æœå†™å…¥ç£ç›˜ï¼Œè€Œä¸æ˜¯å°è¯•åœ¨å†…å­˜ä¸­å®Œå…¨å¤„ç†ï¼Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹å°†é¿å… kmbayes_combine å¯èƒ½å‘ç”Ÿçš„â€œå†…å­˜ä¸è¶³ã€"out of memory"ã€‘â€é”™è¯¯</li></ul> 
</blockquote> 
<h5 style="background-color:transparent;text-align:left;">ç¤ºä¾‹ä»£ç 4</h5> 
<pre><code class="language-R"># è®¾ç½®å¹¶è¡Œè®¡ç®—ç­–ç•¥ä¸ºå¤šä¼šè¯ï¼ˆmultisessionï¼‰ï¼Œä½¿ç”¨2ä¸ªå·¥ä½œè¿›ç¨‹
future::plan(strategy = future::multisession, workers=2)

# ä½¿ç”¨kmbayes_parallelå‡½æ•°è¿è¡Œå¹¶è¡Œé©¬å°”å¯å¤«é“¾ï¼Œç”Ÿæˆé©¬å°”å¯å¤«é“¾ç»“æœçš„åˆ—è¡¨fitkm.list
fitkm.list &lt;- kmbayes_parallel(nchains=2, y = y, Z = Z, X = X, iter = 500, verbose = FALSE, varsel = TRUE)

# å°†æ‰€æœ‰é©¬å°”å¯å¤«é“¾çš„ç»“æœåˆå¹¶ï¼Œä½¿ç”¨kmbayes_combine_lowmemå‡½æ•°ï¼Œä¿ç•™å…¨éƒ¨æ ·æœ¬
bigkm = kmbayes_combine_lowmem(fitkm.list, excludeburnin=FALSE)

# ä»åˆå¹¶çš„é©¬å°”å¯å¤«é“¾ç»“æœä¸­æå–å‚æ•°ä¼°è®¡
ests = ExtractEsts(bigkm)  # é»˜è®¤ä¿ç•™æ ·æœ¬ååŠéƒ¨åˆ†

# ä»åˆå¹¶çš„é©¬å°”å¯å¤«é“¾ç»“æœä¸­æå–å˜é‡é€‰æ‹©çš„åéªŒæ¦‚ç‡
ExtractPIPs(bigkm)</code></pre> 
<h3 style="background-color:transparent;"><strong>2.7 kmbayes_continue</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">ç»§ç»­ç°æœ‰<code>bkmr</code>æ‹Ÿåˆçš„é‡‡æ ·</li><li style="text-align:left;">ä¸å®Œå…¨ä»å…ˆéªŒå¼€å§‹ï¼Œè€Œæ˜¯ä»æœ€åçš„å‚æ•°å€¼å¼€å§‹</li><li style="text-align:left;">ä½¿ç”¨åœºæ™¯ï¼šå½“æ‚¨ä½¿ç”¨ kmbayes å‡½æ•°è¿›è¡Œ MCMC é‡‡æ ·ï¼Œä½†æ‚¨æ²¡æœ‰è·å–è¶³å¤Ÿçš„æ ·æœ¬ä¸”ä¸æƒ³é‡æ–°å¼€å§‹æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤é€‰é¡¹</li></ul> 
</blockquote> 
<h5>ç¤ºä¾‹ä»£ç 5</h5> 
<pre><code class="language-R"># è°ƒç”¨ bkmr::kmbayes å‡½æ•°è¿›è¡Œè´å¶æ–¯åˆ†æï¼Œç”Ÿæˆåˆå§‹æ¨¡å‹ fitty1
fitty1 = bkmr::kmbayes(y = y, Z = Z, X = X, est.h = TRUE, iter = 100)

# è¿›è¡Œä¸€äº›è¯Šæ–­åˆ†æï¼Œä»¥åˆ¤æ–­100æ¬¡è¿­ä»£æ˜¯å¦è¶³å¤Ÿï¼ˆé»˜è®¤è®¾ç½®çš„è¿­ä»£æ¬¡æ•°ï¼‰
# æ·»åŠ 100ä¸ªé¢å¤–çš„è¿­ä»£ï¼ˆä»…ä½œä¸ºç¤ºä¾‹ï¼Œä»ç„¶ä¸è¶³å¤Ÿï¼‰
fitty2 = kmbayes_continue(fitty1, iter = 100)

# å°† fitty2 è½¬æ¢ä¸º mcmc å¯¹è±¡
cobj = as.mcmc(fitty2)

# è¾“å‡º mcmc å¯¹è±¡ä¸­çš„å˜é‡åç§°
varnames(cobj)</code></pre> 
<p style="text-align:left;"></p> 
<h3><strong>2.8 kmbayes_diagnose</strong></h3> 
<blockquote> 
 <ul><li><strong>kmbayes_diag</strong></li><li style="text-align:left;">ä½¿ç”¨<code>rstan</code>åŒ…è¿›è¡ŒMCMCè¯Šæ–­</li><li style="text-align:left;"><strong>æŠ¥å‘ŠR-hatç­‰æŒ‡æ ‡</strong>ï¼šä½¿ç”¨ Rhatã€ess_bulk å’Œ ess_tail å‡½æ•°ä» rstan åŒ…ä¸­ä¸º MCMC æä¾›è¯Šæ–­ã€‚è¯·æ³¨æ„ï¼Œä»…é’ˆå¯¹ kmbayes_parallel ä¸­çš„ bkmrfit.list å¯¹è±¡æŠ¥å‘Š r-hat</li></ul> 
</blockquote> 
<h5 style="text-align:left;">ç¤ºä¾‹ä»£ç 6</h5> 
<pre><code class="language-R"># ä½¿ç”¨ kmbayes_parallel å‡½æ•°è¿›è¡Œè´å¶æ–¯åˆ†æï¼Œå¹¶åˆ›å»º fitkm.list åˆ—è¡¨å¯¹è±¡
# nchains=2 è¡¨ç¤ºä½¿ç”¨2ä¸ªé“¾ï¼Œyã€Zã€X æ˜¯è¾“å…¥çš„æ•°æ®ï¼Œiter=1000 è¡¨ç¤ºè¿­ä»£æ¬¡æ•°ä¸º1000ï¼Œverbose=FALSE è¡¨ç¤ºå…³é—­å†—é•¿çš„è¾“å‡ºï¼Œvarsel=TRUE è¡¨ç¤ºè¿›è¡Œå˜é‡é€‰æ‹©
fitkm.list &lt;- kmbayes_parallel(nchains = 2, y = y, Z = Z, X = X, iter = 1000, verbose = FALSE, varsel = TRUE)

# è¿è¡Œ kmbayes_diag å‡½æ•°å¯¹ fitkm.list è¿›è¡Œè¯Šæ–­åˆ†æ
kmbayes_diag(fitkm.list)

# è¿è¡Œ kmbayes_diag å‡½æ•°å¯¹ç¬¬ä¸€ä¸ªé“¾ï¼ˆfitkm.list[[1]]ï¼‰è¿›è¡Œè¯Šæ–­åˆ†æ
kmbayes_diag(fitkm.list[[1]])

# å…³é—­æ‰€æœ‰è¿æ¥
closeAllConnections()</code></pre> 
<h3><strong>2.9 kmbayes_parallel</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">å¹¶è¡Œè¿è¡Œå¤šä¸ª<code>bkmr</code>é“¾</li><li style="text-align:left;"><strong>åˆ©ç”¨<code>future</code>åŒ…åŠ é€Ÿè®¡ç®—</strong>ï¼šä» kmbayes å‡½æ•°æ‹Ÿåˆå¹³è¡Œé“¾ã€‚è¿™äº›é“¾åˆ©ç”¨<code>future</code>åŒ…ä¸­çš„å¹¶è¡Œå¤„ç†ï¼Œå¯ä»¥åŠ é€Ÿæ‹Ÿåˆå¹¶å®ç°ä¾èµ–äºåˆ†æ•£åˆå§‹å€¼çš„å¤šä¸ªé©¬å°”å¯å¤«é“¾çš„è¯Šæ–­ã€‚</li></ul> 
</blockquote> 
<h5 style="text-align:left;">ç¤ºä¾‹ä»£ç è§ç¤ºä¾‹ä»£ç 7</h5> 
<h3><strong>2.10 kmbayes_parallel_continue</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">ç»§ç»­<code>kmbayes_parallel</code>æ‹Ÿåˆçš„é‡‡æ ·</li><li style="text-align:left;">ä½¿ç”¨åœºæ™¯ï¼šå½“æ‚¨ä½¿ç”¨ kmbayes_parallel å‡½æ•°è¿›è¡Œ MCMC é‡‡æ ·ï¼Œä½†æ‚¨æ²¡æœ‰è·å–è¶³å¤Ÿçš„æ ·æœ¬ä¸”ä¸æƒ³é‡æ–°å¼€å§‹æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤é€‰é¡¹ã€‚</li><li style="text-align:left;">è¿”å›å¤šé“¾<code>bkmrfit</code>å¯¹è±¡</li></ul> 
</blockquote> 
<p style="text-align:left;"></p> 
<h5 style="text-align:left;">ç¤ºä¾‹ä»£ç 7</h5> 
<pre><code class="language-R"># å¹¶è¡Œè®¡ç®—ç­–ç•¥ï¼ŒåŒæ—¶æŒ‡å®š2ä¸ªå·¥ä½œè¿›ç¨‹
future::plan(strategy = future::multisession, workers = 2)

# ä½¿ç”¨ kmbayes_parallel å‡½æ•°è¿›è¡Œè´å¶æ–¯åˆ†æï¼Œåˆ›å»º fitty1p å¯¹è±¡
fitty1p = kmbayes_parallel(nchains = 2, y = y, Z = Z, X = X)

# ä½¿ç”¨ kmbayes_parallel_continue å‡½æ•°ç»§ç»­åœ¨ fitty1p ä¸Šè¿›è¡Œè´å¶æ–¯åˆ†æï¼Œè¿­ä»£æ¬¡æ•°è®¾ç½®ä¸º3000ï¼Œåˆ›å»º fitty2p å¯¹è±¡
fitty2p = kmbayes_parallel_continue(fitty1p, iter = 3000)

# å°† fitty2p è½¬æ¢ä¸º mcmc.list æ ¼å¼ï¼Œåˆ›å»º cobj å¯¹è±¡
cobj = as.mcmc.list(fitty2p)

# ç»˜åˆ¶ MCMC å¯¹è±¡ cobj çš„å›¾å½¢
plot(cobj)</code></pre> 
<h3><strong>2.11 predict.bkmrfit</strong></h3> 
<blockquote> 
 <ul><li>å‡½æ•°ä¹¦å†™æ ¼å¼ï¼š<strong>predict()</strong></li><li style="text-align:left;">ç”ŸæˆåŸºäºåéªŒå‡å€¼æˆ–æ ‡å‡†å·®çš„é¢„æµ‹å€¼</li><li style="text-align:left;">é€‚åˆä¸SuperLearnerç­‰é›†æˆï¼šæä¾›åŸºäºåéªŒå‡å€¼çš„è§‚å¯Ÿæ°´å¹³é¢„æµ‹ï¼Œæˆ–è€…ç”Ÿæˆè§‚å¯Ÿé¢„æµ‹çš„åéªŒæ ‡å‡†å·®ã€‚æ­¤å‡½æ•°å¯¹äºä¸ä»…ä½¿ç”¨ç‚¹ä¼°è®¡çš„ SuperLearner ç­‰é›†æˆæœºå™¨å­¦ä¹ åŒ…è¿›è¡Œäº¤äº’æ—¶éå¸¸æœ‰ç”¨ã€‚</li></ul> 
</blockquote> 
<h5 style="text-align:left;">ç¤ºä¾‹ä»£ç 8</h5> 
<pre><code class="language-R"># åŠ è½½bkmråº“
library(bkmr)

# è®¾ç½®ç§å­ä»¥ç¡®ä¿ç»“æœçš„å¯å¤ç°æ€§
set.seed(111)

# ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
dat &lt;- bkmr::SimData(n = 50, M = 4)
y &lt;- dat$y # å“åº”å˜é‡
Z &lt;- dat$Z # å—å˜é‡
X &lt;- dat$X # åå˜é‡

# å†æ¬¡è®¾ç½®ç§å­ä»¥ç¡®ä¿ç»“æœçš„å¯å¤ç°æ€§
set.seed(111)

# æ‹Ÿåˆè´å¶æ–¯çŸ¥è¯†è¿ç§»å›å½’æ¨¡å‹
fitkm &lt;- kmbayes(y = y, Z = Z, X = X, iter = 200, verbose = FALSE, varsel = TRUE)

# é¢„æµ‹åéªŒå‡å€¼
postmean = predict(fitkm)

# ä½¿ç”¨Zçš„ä¸€åŠå€¼è¿›è¡Œé¢„æµ‹ï¼Œå¾—åˆ°é¢„æµ‹ç»“æœçš„å‡å€¼å·®å¼‚
postmean2 = predict(fitkm, Znew = Z/2)

# è®¡ç®—åéªŒå‡å€¼çš„å‡å€¼å·®å¼‚
mean(postmean - postmean2)</code></pre> 
<h3 style="background-color:transparent;"><strong>2.12 OverallRiskSummaries_parallel</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">æŒ‰é“¾è®¡ç®—æ€»ä½“é£é™©æ¦‚è§ˆ</li><li style="text-align:left;">å‚æ•°è®¾ç½®å‚è€ƒbmkråŒ…çš„<strong>OverallRiskSummaries()</strong></li><li style="text-align:left;"><strong>bkmråŒ…</strong> 
   <ul><li style="text-align:left;"><a href="https://blog.csdn.net/weixin_52505631/article/details/136210163" title="â€‹â€‹â€‹â€‹è´å¶æ–¯æ ¸æœºå›å½’ä¼°è®¡æ··åˆç‰©å¥åº·æ•ˆåº” ã€BKMRåŒ…ã€‘â€”â€”ç†è®ºç¯‡-CSDNåšå®¢">â€‹â€‹â€‹â€‹è´å¶æ–¯æ ¸æœºå›å½’ä¼°è®¡æ··åˆç‰©å¥åº·æ•ˆåº” ã€BKMRåŒ…ã€‘â€”â€”ç†è®ºç¯‡-CSDNåšå®¢</a></li><li style="text-align:left;"><a href="https://blog.csdn.net/weixin_52505631/article/details/136218976" title="è´å¶æ–¯æ ¸æœºå›å½’ä¼°è®¡æ··åˆç‰©å¥åº·æ•ˆåº” ã€BKMRåŒ…ã€‘â€”â€”å®æ“ç¯‡-CSDNåšå®¢">è´å¶æ–¯æ ¸æœºå›å½’ä¼°è®¡æ··åˆç‰©å¥åº·æ•ˆåº” ã€BKMRåŒ…ã€‘â€”â€”å®æ“ç¯‡-CSDNåšå®¢</a></li></ul></li></ul> 
</blockquote> 
<h3><strong>2.13 PredictorResponseBivar_parallel</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">æŒ‰é“¾è®¡ç®—äºŒå…ƒé¢„æµ‹å˜é‡å“åº”</li><li style="text-align:left;">å‚æ•°è®¾ç½®å‚è€ƒbmkråŒ…çš„<strong>PredictorResponseBivar()</strong></li></ul> 
</blockquote> 
<h3><strong>2.14 PredictorResponseUnivar_parallel</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">æŒ‰é“¾è®¡ç®—å•å˜é‡é¢„æµ‹å“åº”æ‘˜è¦</li><li style="text-align:left;">å‚æ•°è®¾ç½®å‚è€ƒbmkråŒ…çš„<strong>PredictorResponseUnivar()</strong></li></ul> 
</blockquote> 
<h3><strong>2.15 SamplePred_parallel</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">æŒ‰é“¾è·å–E(Y|h(Z),X,beta)çš„åéªŒæ ·æœ¬</li><li style="text-align:left;">å‚æ•°è®¾ç½®å‚è€ƒbmkråŒ…çš„<strong>SamplePred()</strong></li></ul> 
</blockquote> 
<h3><strong>2.16 SingVarRiskSummaries_parallel</strong></h3> 
<blockquote> 
 <ul><li style="text-align:left;">æŒ‰é“¾è®¡ç®—å•ä¸€å˜é‡æ‘˜è¦</li><li style="text-align:left;">å‚æ•°è®¾ç½®å‚è€ƒbmkråŒ…çš„<strong>SingVarRiskSummaries()</strong></li></ul> 
</blockquote> 
<p style="text-align:left;"></p> 
<p style="text-align:left;"></p> 
<p style="text-align:left;"></p> 
<h2 style="text-align:left;">å‚è€ƒæ–‡çŒ®</h2> 
<p><a class="has-card" href="https://cran.r-project.org/web/packages/bkmrhat/bkmrhat.pdf" rel="nofollow" title="bkmrhat: Parallel Chain Tools for Bayesian Kernel Machine Regression (r-project.org)"><span class="link-card-box"><span class="link-title">bkmrhat: Parallel Chain Tools for Bayesian Kernel Machine Regression (r-project.org)</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/cf/b3/vbDHFv81_o.png" alt="icon-default.png?t=N7T8">https://cran.r-project.org/web/packages/bkmrhat/bkmrhat.pdf</span></span></a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c18d6ff9af1e9ecc5d249a20773db556/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ä¸ºQComboBoxå»ºç«‹dropDownæ¶ˆæ¯å“åº”å‡½æ•°</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b8f4a2288c8bd76c1e9d46a60648fb28/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">[è¶…å®ç”¨æ’ä»¶]åœ¨Visual Studioä¸­æŸ¥çœ‹EF CoreæŸ¥è¯¢è®¡åˆ’</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 è¿½é£å°‘å¹´çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>