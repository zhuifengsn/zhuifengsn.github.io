<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ubuntu linux vnc server - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ubuntu linux vnc server" />
<meta property="og:description" content="1 启动 VNC 服务 vncserver
2 查看服务是否已经启动 ps -ef | grep vnc4
VNC远程桌面到linux，提示connection refused(10061)解决办法 确认server端的VNC服务开启，service vncserver start，检测状态时ok的使用vncserver命令，确认vnc服务已经启动ps -ef | grep vnc，来查看不是已经开启多个vnc连接。如果有多个vnc连接，使用vncserver kill ：x（x为连接的序号）来结束掉已经开启的vnc连接在客户端上重新用客户端连接主机，在ip后面接上端口号 Linux上VNC 启动和关闭 ( 解决 Ubuntu16.04 sncserver连接出现Timed out waiting for a response from the computer） 整体思路：
查看vncserver端口 是否开启 （手动kill vncserver进程有坑~~~，有时再次开启时 需要一些额外操作，解决办法在2中，）
0, 重设密码
root@ubuntu:~# vncpasswd
Password:
Verify:
root@ubuntu:~#
1，启动和kill vncserver
[root@yqrh5u2 ~]# vncserver :1
New &#39;yqrh5u2:1 (root)&#39; desktop is yqrh5u2:1
Starting applications specified in /root/.vnc/xstartup
Log file is /root/." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/d30a8fa0a54f53700b8e9c886ea9d6ac/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-15T15:41:34+08:00" />
<meta property="article:modified_time" content="2020-10-15T15:41:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ubuntu linux vnc server</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="articleContentId">1 启动 VNC 服务  vncserver</p> 
<p>2 查看服务是否已经启动   ps -ef  | grep vnc4</p> 
<p> </p> 
<h2>VNC远程桌面到linux，提示connection refused(10061)解决办法</h2> 
<p> </p> 
<ol><li>确认server端的VNC服务开启，service vncserver start，检测状态时ok的</li><li>使用vncserver命令，确认vnc服务已经启动</li><li>ps -ef | grep vnc，来查看不是已经开启多个vnc连接。</li><li>如果有多个vnc连接，使用vncserver kill ：x（x为连接的序号）来结束掉已经开启的vnc连接</li><li>在客户端上重新用客户端连接主机，在ip后面接上端口号 </li></ol> 
<h2>Linux上VNC 启动和关闭 ( 解决 Ubuntu16.04 sncserver连接出现Timed out waiting for a response from the computer）</h2> 
<p> </p> 
<p>整体思路：</p> 
<p>查看vncserver端口 是否开启  </p> 
<p>（手动kill vncserver进程有坑~~~，有时再次开启时 需要一些额外操作，解决办法在2中，）</p> 
<p><strong>0, 重设密码</strong></p> 
<p>         root@ubuntu:~#<strong> vncpasswd</strong><br>           Password:<br>           Verify:<br>         root@ubuntu:~#</p> 
<p> </p> 
<p><strong>1，启动和kill  vncserver</strong></p> 
<p> </p> 
<p><strong> [root@yqrh5u2 ~]# vncserver :1</strong><br><br>   New 'yqrh5u2:1 (root)' desktop is yqrh5u2:1<br><br> Starting applications specified in /root/.vnc/xstartup<br> Log file is /root/.vnc/yqrh5u2:1.log<br><br><strong>[root@yqrh5u2 ~]# vncserver :2</strong><br><br> New 'yqrh5u2:2 (root)' desktop is yqrh5u2:2<br><br> Starting applications specified in /root/.vnc/xstartup<br> Log file is /root/.vnc/yqrh5u2:2.log</p> 
<p><br><strong>启动时设置分辨率</strong>：root@ubuntu:~# vncserver :1 -geometry 1920x1080<br><br><strong>[root@yqrh5u2 ~]# ps -ef|grep -i vnc</strong><br> root     12572     1  0 02:23 pts/2    00:00:00 Xvnc :1 -desktop yqrh5u2:1 (root) -httpd /usr/share/vnc/classes -auth /root/.Xauthority -geometry 1024x768 -depth 16 -rfbwait 30000 -rfbauth /root/.vnc/passwd -rfbport 5901 -pn<br> root     12580     1  0 02:23 pts/2    00:00:00 vncconfig -iconic<br> root     12617     1  0 02:23 pts/2    00:00:00 Xvnc :2 -desktop yqrh5u2:2 (root) -httpd /usr/share/vnc/classes -auth /root/.Xauthority -geometry 1024x768 -depth 16 -rfbwait 30000 -rfbauth /root/.vnc/passwd -rfbport 5902 -pn<br> root     12625     1  0 02:23 pts/2    00:00:00 vncconfig -iconic<br> root     12735 12536  0 02:24 pts/2    00:00:00 grep -i vnc</p> 
<p> </p> 
<p>手动kill ：1， ：1的pid是12572，并验证：1确实已经被kill</p> 
<p><strong>[root@yqrh5u2 ~]# kill -9 12572<br> [root@yqrh5u2 ~]# ps -ef|grep -i vnc</strong><br> root     12617     1  0 02:23 pts/2    00:00:00 Xvnc :2 -desktop yqrh5u2:2 (root) -httpd /usr/share/vnc/classes -auth /root/.Xauthority -geometry 1024x768 -depth 16 -rfbwait 30000 -rfbauth /root/.vnc/passwd -rfbport 5902 -pn<br> root     12625     1  0 02:23 pts/2    00:00:00 vncconfig -iconic<br> root     12779 12536  0 02:25 pts/2    00:00:00 grep -i vnc</p> 
<p> </p> 
<p>通过vncserver kill ：1，：2，这是最好的方法，推荐使用</p> 
<p><strong>[root@yqrh5u2 ~]# vncserver -kill :1</strong><br> Killing Xvnc process ID 12572<br> kill 12572: No such process<br><strong>[root@yqrh5u2 ~]# vncserver -kill :2</strong><br> Killing Xvnc process ID 12617<br><strong>[root@yqrh5u2 ~]# ls /root/.vnc/</strong><br> passwd  xstartup  yqrh5u2:1.log  yqrh5u2:2.log</p> 
<p> </p> 
<p><img alt="" src="https://images2.imgbox.com/cb/27/GDs10Kqg_o.png"></p> 
<p> </p> 
<p> </p> 
<p><strong>2，重新启动一个手动kill的vncserver，</strong></p> 
<p>    因为是手动自己删除的，所以要再删除一下被lock的文件，才可以重新启动，如图所示</p> 
<p> </p> 
<p>   <strong>[root@yqrh5u2 ~]# vncserver</strong><br><br> Warning: yqrh5u2:1 is taken because of /tmp/.X1-lock<br> Remove this file if there is no X server yqrh5u2:1<br><br> New 'yqrh5u2:2 (root)' desktop is yqrh5u2:2<br><br> Starting applications specified in /root/.vnc/xstartup<br> Log file is /root/.vnc/yqrh5u2:2.log<br><br><strong>[root@yqrh5u2 ~]# vncserver :1</strong><br><br> Warning: yqrh5u2:1 is taken because of /tmp/.X1-lock<br> Remove this file if there is no X server yqrh5u2:1<br> A VNC server is already running as :1<br><strong>[root@yqrh5u2 ~]# rm -f  /tmp/.X1-lock<br> [root@yqrh5u2 ~]# vncserver :1</strong><br><br> Warning: yqrh5u2:1 is taken because of /tmp/.X11-unix/X1<br> Remove this file if there is no X server yqrh5u2:1<br> A VNC server is already running as :1<br><strong>[root@yqrh5u2 ~]# ps -ef|grep -i vnc</strong><br> root     12971     1  0 02:32 pts/2    00:00:00 Xvnc :2 -desktop yqrh5u2:2 (root) -httpd /usr/share/vnc/classes -auth /root/.Xauthority -geometry 1024x768 -depth 16 -rfbwait 30000 -rfbauth /root/.vnc/passwd -rfbport 5902 -pn<br> root     12979     1  0 02:32 pts/2    00:00:00 vncconfig -iconic<br> root     13047 12536  0 02:33 pts/2    00:00:00 grep -i vnc<br><strong>[root@yqrh5u2 ~]# rm -f /tmp/.X11-unix/X1<br> [root@yqrh5u2 ~]# vncserver :1</strong><br><br> New 'yqrh5u2:1 (root)' desktop is yqrh5u2:1<br><br> Starting applications specified in /root/.vnc/xstartup<br> Log file is /root/.vnc/yqrh5u2:1.log<br><br><strong>[root@yqrh5u2 ~]# ps -ef|grep -i vnc</strong><br> root     12971     1  0 02:32 pts/2    00:00:00 Xvnc :2 -desktop yqrh5u2:2 (root) -httpd /usr/share/vnc/classes -auth /root/.Xauthority -geometry 1024x768 -depth 16 -rfbwait 30000 -rfbauth /root/.vnc/passwd -rfbport 5902 -pn<br> root     12979     1  0 02:32 pts/2    00:00:00 vncconfig -iconic<br> root     13071     1  1 02:33 pts/2    00:00:00 Xvnc :1 -desktop yqrh5u2:1 (root) -httpd /usr/share/vnc/classes -auth /root/.Xauthority -geometry 1024x768 -depth 16 -rfbwait 30000 -rfbauth /root/.vnc/passwd -rfbport 5901 -pn<br> root     13092     1  0 02:33 pts/2    00:00:00 vncconfig -iconic<br> root     13123 12536  0 02:34 pts/2    00:00:00 grep -i vnc<br> [root@yqrh5u2 ~]#</p> 
<p>    <img alt="" src="https://images2.imgbox.com/b8/a2/V23vVVdZ_o.png"></p> 
<p><a href="https://blog.csdn.net/frank_ldw/article/details/84819343">https://blog.csdn.net/frank_ldw/article/details/84819343</a></p> 
<p> </p> 
<h2>ubuntu系统下配置VNC服务操作步骤（VNCserver）</h2> 
<p>VNC：VNC (Virtual Network Console)是<a href="https://baike.baidu.com/item/%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C" rel="nofollow">虚拟网络</a>控制台的缩写。它 是一款优秀的<a href="https://baike.baidu.com/item/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6/934368" rel="nofollow">远程控制</a>工具软件，由著名的 <a href="https://baike.baidu.com/item/AT%26T" rel="nofollow">AT&amp;T</a> 的欧洲研究实验室开发的。VNC 是在基于 <a href="https://baike.baidu.com/item/UNIX" rel="nofollow">UNIX</a> 和 <a href="https://baike.baidu.com/item/Linux" rel="nofollow">Linux</a> 操作系统的免费的<a href="https://baike.baidu.com/item/%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6/8105369" rel="nofollow">开源软件</a>，远程控制能力强大，高效实用，其性能可以和 <a href="https://baike.baidu.com/item/Windows" rel="nofollow">Windows</a> 和 <a href="https://baike.baidu.com/item/MAC" rel="nofollow">MAC</a> 中的任何远程控制软件媲美。 在 Linux 中，VNC 包括以下四个命令：vncserver，vncviewer，vncpasswd，和 vncconnect。大多数情况下用户只需要其中的两个命令：vncserver 和 vncviewer。</p> 
<p>百度百科：<a href="https://baike.baidu.com/item/VNC/2906305?fr=aladdin" rel="nofollow">https://baike.baidu.com/item/VNC/2906305?fr=aladdin</a> </p> 
<p>步骤：</p> 
<ol><li> <p>使用apt-cache search vncserver命令搜索可以用来安装vncserver的软件包，这里选用<strong>vnc4server安装vnc</strong></p> <p> </p> </li><li> <p>使用<strong>apt-get install vnc4server命令安装vncserver,输入y并回车</strong></p> <p> </p> </li><li> <p>输入vncserver,初次启动的时候需要设置初始密码</p> <p> </p> </li><li> <p>会在root根目录下面生成配置文件<strong>/root/.vnc/xstartup，编辑该配置文件</strong></p> <p><strong>vi /root/.vnc/xstartup</strong></p> <p> </p> </li><li> <p>替换为如下内容(step4 全部替换)</p> <p>#!/bin/sh</p> <p>export XKL_XMODMAP_DISABLE=1  </p> <p>unset SESSION_MANAGER  </p> <p>unset DBUS_SESSION_BUS_ADDRESS  </p> <p>gnome-panel &amp;  </p> <p>gnome-settings-daemon &amp;  </p> <p>metacity &amp;  </p> <p>nautilus &amp;  </p> <p>gnome-terminal &amp;</p> <p> </p> </li><li> <p>安装gnome</p> <p>apt-get install gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal </p> <p> </p> </li><li> <p>重启ubuntu操作系统，启动vncserver服务，用ip:5901输入密码就能进行访问了</p> </li><li> <p>vncserver服务启动command：vncserver</p> </li><li> <p>在vncclient端输入IP:5901连接就行了</p> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dde68741f3bdea2b2c832afc2bc323a6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringCloud(11) —— Ribbon:自定义负载均衡算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fc41bbc91e59fdfadc24b6b41423673b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringCloud(12) —— Feign:使用接口方式调用服务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>