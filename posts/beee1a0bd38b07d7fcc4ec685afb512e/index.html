<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C# 超详细的WebService创建、发布与调用（VS2019） - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C# 超详细的WebService创建、发布与调用（VS2019）" />
<meta property="og:description" content="1.编写接口 这里我选择的是 “ASP.NET Web应用程序(.NET Framework)”。
填写好项目名称、选择项目位置以及所使用的框架，这里我用的是“.NET Framework 4”框架，然后点击创建。
继续点击创建。
打开解决方案资源管理器-右键创建的Web项目-添加-新建项
添加 web 服务(AMSX)。
在这里除了默认的一个方法，自己又写了两个方法。
[WebMethod] public int GetInt() { int a = 1; int b = 2; return a &#43; b; } [WebMethod] public string GetNameByStr(string name) { return &#34;你好：&#34; &#43; name; } 然后我们启动项目。
在上面我们可以看到我们所写的三个方法，我选择其中一个点进去。
点击调用后我们可以看到输出了“你好：张三”。
其他两个方法也是一样的，点击调用都能看到我们所写的返回结果，至此说明我们所写的没有问题，接下来我们把所写的发布到IIS上面去。
2.发布接口 选择文件夹，点击下一步。
选择发布的文件夹位置，这里可以自己选择，但是一定要记住你选择的位置，这里我就采用默认的发布位置，即在当前项目的 bin\app.publish 文件夹下。点击完成
然后我们点击发布即可。
注：这里有个小细节，当我们更新Web服务里面的内容的时候，再次发布的时候我们需要注意。
打开项目所在的位置，这里面的内容即为我们所发布的内容。
然后我们打开IIS管理器（不会打开IIS的请自行百度，这里就不做教学了）。
右键网站选择添加网站。
对添加的网站进行相关设置后点击确定。
这个时候我们发现打开的网站出现了403.14错误。
我们只需要：
再次浏览即可正常访问。
点击WebService1.asmx
能正常打开，并且能正常调用方法说明发布成功。
至此，我们发布网站的步骤进行完毕，接来了我们将在程序中调用我们说发布的方法并获取到相应的值。
3.调用接口 右键项目-添加-服务引用
打开刚刚启动的网站，复制这个地址粘贴到服务引用中。
接下来点击高级
添加Web 引用(W)-在打开的界面中的URL中输入刚刚复制的网址-点击蓝色箭头-添加引用®" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/beee1a0bd38b07d7fcc4ec685afb512e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-09T13:31:07+08:00" />
<meta property="article:modified_time" content="2021-09-09T13:31:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C# 超详细的WebService创建、发布与调用（VS2019）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_0"></a>1.编写接口</h3> 
<p><img src="https://images2.imgbox.com/d2/3d/eapuyx0K_o.png" alt="在这里插入图片描述"><br> 这里我选择的是 “<strong>ASP.NET Web应用程序(.NET Framework</strong>)”。<br> <img src="https://images2.imgbox.com/bf/5b/oKx3hXrq_o.png" alt="在这里插入图片描述"><br> 填写好项目名称、选择项目位置以及所使用的框架，这里我用的是“<strong>.NET Framework 4</strong>”框架，然后点击创建。<br> <img src="https://images2.imgbox.com/9d/cd/sSERhwPm_o.png" alt="在这里插入图片描述"><br> 继续点击创建。<br> <img src="https://images2.imgbox.com/a5/64/Q2d5i9WW_o.png" alt="在这里插入图片描述"><br> 打开解决方案资源管理器-右键创建的Web项目-添加-新建项<br> <img src="https://images2.imgbox.com/c9/c1/UUFBPIzT_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b3/be/Jb9LSZLr_o.png" alt="在这里插入图片描述"><br> 添加 <strong>web 服务(AMSX)</strong>。<br> <img src="https://images2.imgbox.com/80/aa/oTxqRPGO_o.png" alt="在这里插入图片描述"><br> 在这里除了默认的一个方法，自己又写了两个方法。</p> 
<pre><code class="prism language-csharp">        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">WebMethod</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">WebMethod</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">GetNameByStr</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token string">"你好："</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/11/92/2e8Wj8sq_o.png" alt="在这里插入图片描述"><br> 然后我们启动项目。<br> <img src="https://images2.imgbox.com/5c/fa/CeyTNLxs_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/4d/db/a07qfF5n_o.png" alt="在这里插入图片描述"><br> 在上面我们可以看到我们所写的三个方法，我选择其中一个点进去。<br> <img src="https://images2.imgbox.com/53/be/0xV2mXp4_o.png" alt="在这里插入图片描述"></p> 
<p>点击调用后我们可以看到输出了“你好：张三”。<br> <img src="https://images2.imgbox.com/c8/60/GnCJxfkp_o.png" alt="在这里插入图片描述"><br> 其他两个方法也是一样的，点击调用都能看到我们所写的返回结果，至此说明我们所写的没有问题，接下来我们把所写的发布到IIS上面去。</p> 
<h3><a id="2_44"></a>2.发布接口</h3> 
<p><img src="https://images2.imgbox.com/1b/24/7EqB1uGR_o.png" alt="在这里插入图片描述"><br> 选择<strong>文件夹</strong>，点击下一步。<br> <img src="https://images2.imgbox.com/2b/fa/beuXY4Jp_o.png" alt="在这里插入图片描述"><br> 选择发布的文件夹位置，这里可以自己选择，但是一定要记住你选择的位置，这里我就采用默认的发布位置，即在当前项目的 bin\app.publish 文件夹下。点击完成<br> <img src="https://images2.imgbox.com/f4/94/B5F1Ysx9_o.png" alt="在这里插入图片描述"><br> 然后我们点击发布即可。<br> <img src="https://images2.imgbox.com/af/9f/1OuucQZ1_o.png" alt="在这里插入图片描述"><br> 注：这里有个小细节，当我们更新Web服务里面的内容的时候，再次发布的时候我们需要注意。<br> <img src="https://images2.imgbox.com/a3/d6/VcbScjql_o.png" alt="在这里插入图片描述"><br> 打开项目所在的位置，这里面的内容即为我们所发布的内容。<br> <img src="https://images2.imgbox.com/e9/e0/wuccFWWS_o.png" alt="在这里插入图片描述"><br> 然后我们打开IIS管理器（不会打开IIS的请自行百度，这里就不做教学了）。<br> <img src="https://images2.imgbox.com/41/34/bWa9YZ3p_o.png" alt="在这里插入图片描述"><br> 右键网站选择添加网站。<br> <img src="https://images2.imgbox.com/71/b7/01cEZ6It_o.png" alt="在这里插入图片描述"><br> 对添加的网站进行相关设置后点击确定。<br> <img src="https://images2.imgbox.com/b7/8f/MUNfAAg6_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/74/f2/BW1ieDDU_o.png" alt="在这里插入图片描述"><br> 这个时候我们发现打开的网站出现了403.14错误。<br> <img src="https://images2.imgbox.com/ae/bf/GEazElXA_o.png" alt="在这里插入图片描述"><br> 我们只需要：<br> <img src="https://images2.imgbox.com/b3/2e/kTJqEWjT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/54/17/2wnwFInn_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6a/f7/iewaSOmr_o.png" alt="在这里插入图片描述"><br> 再次浏览即可正常访问。<br> <img src="https://images2.imgbox.com/09/d2/VGEDJH7M_o.png" alt="在这里插入图片描述"><br> 点击<strong>WebService1.asmx</strong><br> <img src="https://images2.imgbox.com/74/dd/5HgQ0nQL_o.png" alt="在这里插入图片描述"><br> 能正常打开，并且能正常调用方法说明发布成功。<br> <img src="https://images2.imgbox.com/f4/03/HVX2LCyk_o.png" alt="在这里插入图片描述"><br> 至此，我们发布网站的步骤进行完毕，接来了我们将在程序中调用我们说发布的方法并获取到相应的值。</p> 
<h3><a id="3_78"></a>3.调用接口</h3> 
<p>右键项目-添加-服务引用<br> <img src="https://images2.imgbox.com/4c/d9/JQ9V61c2_o.png" alt="在这里插入图片描述"><br> 打开刚刚启动的网站，复制这个地址粘贴到服务引用中。<br> <img src="https://images2.imgbox.com/12/d1/k8nSaIPQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0e/64/ooGIcvbV_o.png" alt="在这里插入图片描述"><br> 接下来点击<strong>高级</strong><br> <img src="https://images2.imgbox.com/2b/21/kOKIJWeV_o.png" alt="在这里插入图片描述"><br> 添加Web 引用(W)-在打开的界面中的URL中输入刚刚复制的网址-点击蓝色箭头-添加引用®<br> <img src="https://images2.imgbox.com/bf/36/dvy4GNlA_o.png" alt="在这里插入图片描述"><br> 即可在解决方案资源管理器中看到我们所添加的服务引用<br> <img src="https://images2.imgbox.com/9c/3d/KyJplABH_o.png" alt="在这里插入图片描述"><br> 接下来我们简单的添加一个控制应用台项目来实现方法的调用。<br> <img src="https://images2.imgbox.com/0b/7f/dwtFhYNN_o.png" alt="在这里插入图片描述"><br> 点击下一步<br> <img src="https://images2.imgbox.com/0e/50/LCqXx1Vk_o.png" alt="在这里插入图片描述"></p> 
<p>选择好位置，点击创建。<br> <img src="https://images2.imgbox.com/06/b2/En9lf96p_o.png" alt="在这里插入图片描述"></p> 
<p>控制台应用程序创建完毕。<br> <img src="https://images2.imgbox.com/d8/e6/ctFGNVho_o.png" alt="在这里插入图片描述"><br> 右键控制图应用程序中的引用<br> <img src="https://images2.imgbox.com/83/29/fyJYbEdS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3d/67/phOtrRxr_o.png" alt="在这里插入图片描述"><br> 在再程序中使用引用<br> <img src="https://images2.imgbox.com/c3/29/gcgwwcyS_o.png" alt="在这里插入图片描述"><br> 附上代码</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Text</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">WebTest<span class="token punctuation">.</span>WebReference</span><span class="token punctuation">;</span>


<span class="token keyword">namespace</span> <span class="token namespace">ConsoleWebCall</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">class</span> <span class="token class-name">Program</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">WebService1</span> webService1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WebService1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">string</span></span> str <span class="token operator">=</span> webService1<span class="token punctuation">.</span><span class="token function">HelloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">string</span></span> str1 <span class="token operator">=</span> webService1<span class="token punctuation">.</span><span class="token function">GetNameByStr</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> webService1<span class="token punctuation">.</span><span class="token function">GetInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>最后结果如图所示：<br> <img src="https://images2.imgbox.com/22/aa/jzW5CS2b_o.png" alt="在这里插入图片描述"><br> 这样我们就完成了一个web服务的创建、发布、使用。<br> 如果对你有帮助，请帮忙点个赞。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/250e7fd8bba5a5b45ea12743d6ae64e0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用过滤器与cookie实现记住用户登录状态，自动登录功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d749f151490f107c3fc95f8badde5d01/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java三种计时器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>