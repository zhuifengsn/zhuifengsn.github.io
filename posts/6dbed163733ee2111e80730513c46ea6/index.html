<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用logback配置日志打印策略 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用logback配置日志打印策略" />
<meta property="og:description" content="目录
logback-spring.xml配置详解
1、父标签configuration
2、两种属性标签
3、三个节点标签
3.1、append节点标签
3.2、root节点标签
3.3、logger节点标签
3.4、logger和root的关系
4、完整日志配置
logback在springboot中有内置的存在，当然也可以再重新引用依赖，但是没必要。logback框架可以控制日志日志的打印级别、打印内容、还可以实现error级别日志报警，将其发送到指定邮箱或者钉钉。
logback-spring.xml配置详解 在logback-spring.xml配置文件中，按标签的级别来分，有一个父标签，两种属性标签和和三种节点标签。分别是
一个父标签：configuration 两种属性：contextName和property 三个节点：appender、root、logger springboot配置文件的加载顺序logback.xml-&gt;application.yml-&gt;logback-spring.xml
1、父标签configuration configuration最外层标签，该标签有三个属性：
scan
当此属性设置为true时，配置文件如果发生改变，将会被重新加载，默认值为truescanPeriod
设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。当scan为true时，此属性生效。默认的时间间隔为1分钟。debug
当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。默认值为false。 &lt;configuration scan=&#34;true&#34; scanPeriod=&#34;10 seconds&#34; debug=&#34;true&#34;&gt; &lt;/configuration&gt; 2、两种属性标签 contextName和property是处于第二层的标签。
contextName
&lt;contextName&gt;标签用于指定日志上下文的名称。日志上下文是Logback框架中的一个重要概念，它表示一个独立的日志实例或日志环境。通过设置不同的上下文名称，您可以创建并配置多个独立的日志记录器，每个日志记录器可以有自己的日志级别、输出目标等配置。
&lt;configuration scan=&#34;false&#34; scanPeriod=&#34;60 seconds&#34; debug=&#34;false&#34;&gt; &lt;contextName&gt;logback_demo&lt;/contextName&gt; &lt;/configuration&gt; property
用来定义变量值的标签， 有两个属性，name和value；其中name的值是变量的名称，value的值时变量定义的值。通过定义的值会被插入到logger上下文中。定义变量后，可以使“${}”来使用变量。
&lt;property name=&#34;log-path&#34; value=&#34;log.path&#34; /&gt; 3、三个节点标签 三个节点标签分别是append、logger、root
3.1、append节点标签 这个标签属于核心标签，用于定义日志的输出目标。它指定了日志消息将发送到哪里，例如控制台、文件、数据库等。
标签属性：
name：指定appender的名称，应该是唯一的。class：指定appender的实现类。例如，ch.qos.logback.core.ConsoleAppender表示控制台输出，ch.qos.logback.core.FileAppender表示文件输出。其他属性：具体取决于所选的appender类，例如文件路径、文件滚动策略等。 控制台输出时子标签：
&lt;filter&gt;：标签用于配置日志事件过滤器，可以根据特定的条件过滤和控制日志输出。&lt;encoder&gt;：ancoder的意思是追加器，在这里可以理解为渲染器，用来指定日志输出的格式。&lt;rollingPolicy&gt; ：日志记录器的滚动策略，按日期，按大小记录，只有在输出到文本中时才需要配置这个。 控制台打印示例：
&lt;!--0. 日志格式和颜色渲染 --&gt; &lt;!-- 彩色日志依赖的渲染类 --&gt; &lt;conversionRule conversionWord=&#34;clr&#34; converterClass=&#34;org.springframework.boot.logging.logback.ColorConverter&#34; /&gt; &lt;conversionRule conversionWord=&#34;wex&#34; converterClass=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/6dbed163733ee2111e80730513c46ea6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-12T10:47:41+08:00" />
<meta property="article:modified_time" content="2023-06-12T10:47:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用logback配置日志打印策略</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        </p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="1%E3%80%81logback-spring.xml%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3-toc" style="margin-left:0px;"><a href="#1%E3%80%81logback-spring.xml%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3" rel="nofollow">logback-spring.xml配置详解</a></p> 
<p id="1.1%E3%80%81%E7%88%B6%E6%A0%87%E7%AD%BEconfiguration-toc" style="margin-left:40px;"><a href="#1.1%E3%80%81%E7%88%B6%E6%A0%87%E7%AD%BEconfiguration" rel="nofollow">1、父标签configuration</a></p> 
<p id="1.2%E3%80%81%E4%B8%A4%E7%A7%8D%E5%B1%9E%E6%80%A7%E6%A0%87%E7%AD%BE-toc" style="margin-left:40px;"><a href="#1.2%E3%80%81%E4%B8%A4%E7%A7%8D%E5%B1%9E%E6%80%A7%E6%A0%87%E7%AD%BE" rel="nofollow">2、两种属性标签</a></p> 
<p id="1.3%E3%80%81%E4%B8%89%E4%B8%AA%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE-toc" style="margin-left:40px;"><a href="#1.3%E3%80%81%E4%B8%89%E4%B8%AA%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE" rel="nofollow">3、三个节点标签</a></p> 
<p id="1.3.1%E3%80%81append%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE-toc" style="margin-left:80px;"><a href="#1.3.1%E3%80%81append%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE" rel="nofollow">3.1、append节点标签</a></p> 
<p id="1.3.2%E3%80%81root%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE-toc" style="margin-left:80px;"><a href="#1.3.2%E3%80%81root%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE" rel="nofollow">3.2、root节点标签</a></p> 
<p id="1.3.3%E3%80%81logger%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE-toc" style="margin-left:80px;"><a href="#1.3.3%E3%80%81logger%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE" rel="nofollow">3.3、logger节点标签</a></p> 
<p id="1.3.4%E3%80%81logger%E5%92%8Croot%E7%9A%84%E5%85%B3%E7%B3%BB-toc" style="margin-left:80px;"><a href="#1.3.4%E3%80%81logger%E5%92%8Croot%E7%9A%84%E5%85%B3%E7%B3%BB" rel="nofollow">3.4、logger和root的关系</a></p> 
<p id="1.4%E3%80%81%E5%AE%8C%E6%95%B4%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#1.4%E3%80%81%E5%AE%8C%E6%95%B4%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE" rel="nofollow">4、完整日志配置</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>        logback在springboot中有内置的存在，当然也可以再重新引用依赖，但是没必要。logback框架可以控制日志日志的打印级别、打印内容、还可以实现error级别日志报警，将其发送到指定邮箱或者钉钉。</p> 
<h2 id="1%E3%80%81logback-spring.xml%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3">logback-spring.xml配置详解</h2> 
<p>        在logback-spring.xml配置文件中，按标签的级别来分，有一个父标签，两种属性标签和和三种节点标签。分别是</p> 
<blockquote> 
 <pre> 一个父标签：configuration
  两种属性：contextName和property
  三个节点：appender、root、logger</pre> 
</blockquote> 
<p>springboot配置文件的加载顺序logback.xml-&gt;application.yml-&gt;logback-spring.xml</p> 
<h3 id="1.1%E3%80%81%E7%88%B6%E6%A0%87%E7%AD%BEconfiguration">1、父标签configuration</h3> 
<p>configuration最外层标签，该标签有三个属性：</p> 
<ul><li>scan<br> 当此属性设置为true时，配置文件如果发生改变，将会被重新加载，默认值为true</li><li>scanPeriod<br> 设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。当scan为true时，此属性生效。默认的时间间隔为1分钟。</li><li>debug<br> 当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。默认值为false。</li></ul> 
<pre><code class="language-XML">&lt;configuration  scan="true" scanPeriod="10 seconds" debug="true"&gt;
&lt;/configuration&gt;</code></pre> 
<h3 id="1.2%E3%80%81%E4%B8%A4%E7%A7%8D%E5%B1%9E%E6%80%A7%E6%A0%87%E7%AD%BE">2、两种属性标签</h3> 
<p>        contextName和property是处于第二层的标签。</p> 
<p><strong>contextName</strong></p> 
<p><code>        &lt;contextName&gt;</code>标签用于指定日志上下文的名称。日志上下文是Logback框架中的一个重要概念，它表示一个独立的日志实例或日志环境。通过设置不同的上下文名称，您可以创建并配置多个独立的日志记录器，每个日志记录器可以有自己的日志级别、输出目标等配置。</p> 
<pre><code class="language-XML">&lt;configuration scan="false" scanPeriod="60 seconds" debug="false"&gt;

&lt;contextName&gt;logback_demo&lt;/contextName&gt;

&lt;/configuration&gt;</code></pre> 
<p><strong>property</strong></p> 
<p>        用来定义变量值的标签， 有两个属性，name和value；其中name的值是变量的名称，value的值时变量定义的值。通过定义的值会被插入到logger上下文中。定义变量后，可以使“${}”来使用变量。</p> 
<pre><code class="language-XML">&lt;property name="log-path" value="log.path" /&gt;</code></pre> 
<h3 id="1.3%E3%80%81%E4%B8%89%E4%B8%AA%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE">3、三个节点标签</h3> 
<p>        <strong>三个节点标签分别是append、logger、root</strong></p> 
<h4 id="1.3.1%E3%80%81append%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE">3.1、append节点标签</h4> 
<p>        这个标签属于核心标签，用于定义日志的输出目标。它指定了日志消息将发送到哪里，例如控制台、文件、数据库等。</p> 
<p><strong>标签属性：</strong></p> 
<ul><li>name：指定appender的名称，应该是唯一的。</li><li>class：指定appender的实现类。例如，<code>ch.qos.logback.core.ConsoleAppender</code>表示控制台输出，<code>ch.qos.logback.core.FileAppender</code>表示文件输出。</li><li>其他属性：具体取决于所选的appender类，例如文件路径、文件滚动策略等。</li></ul> 
<p><strong>控制台输出时子标签：</strong></p> 
<ul><li>&lt;filter&gt;：标签用于配置日志事件过滤器，可以根据特定的条件过滤和控制日志输出。</li><li>&lt;encoder&gt;：ancoder的意思是追加器，在这里可以理解为渲染器，用来指定日志输出的格式。</li><li>&lt;rollingPolicy&gt; ：日志记录器的滚动策略，按日期，按大小记录，只有在输出到文本中时才需要配置这个。</li></ul> 
<p><strong>控制台打印示例：</strong></p> 
<pre><code class="language-XML">&lt;!--0. 日志格式和颜色渲染 --&gt;
&lt;!-- 彩色日志依赖的渲染类 --&gt;
&lt;conversionRule conversionWord="clr" converterClass="org.springframework.boot.logging.logback.ColorConverter" /&gt;
&lt;conversionRule conversionWord="wex" converterClass="org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter" /&gt;
&lt;conversionRule conversionWord="wEx" converterClass="org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter" /&gt;
&lt;!-- 彩色日志格式 --&gt;
&lt;property name="CONSOLE_LOG_PATTERN" value="%green(%d{yyyy-MM-dd HH:mm:ss.SSS}) [%thread] %highlight(%-5level) %red(%logger{50}) - %yellow(%msg) %n"/&gt;


&lt;!--1. 输出到控制台--&gt;
&lt;appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender"&gt;
    &lt;!--此日志appender是为开发使用，只配置最底级别，控制台输出的日志级别是大于或等于此级别的日志信息--&gt;
    &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt;
        &lt;level&gt;debug&lt;/level&gt;
    &lt;/filter&gt;
    &lt;encoder&gt;
        &lt;!-- %d表示时间
            %thread表示线程名
            %-5level 表示日志级别，允许以五个字符长度输出
            %logger{50}表示具体的日志输出者，比如类名，括号内表示长度
            %msg表示具体的日志消息，就是logger.info("xxx")中的xxx
            %n表示换行 --&gt;
        &lt;Pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/Pattern&gt;
        &lt;!-- 设置字符集 --&gt;
        &lt;charset&gt;UTF-8&lt;/charset&gt;
    &lt;/encoder&gt;
&lt;/appender&gt;</code></pre> 
<p><strong>输出到文本时示例：</strong></p> 
<pre><code class="language-XML">&lt;!--2. 输出到文档--&gt;
&lt;!-- 2.1 level为 DEBUG 日志，时间滚动输出  --&gt;
&lt;appender name="DEBUG_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
    &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
    &lt;file&gt;${log.path}/web_debug.log&lt;/file&gt;
    &lt;!--日志文档输出格式--&gt;
    &lt;encoder&gt;
        &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
        &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- 设置字符集 --&gt;
    &lt;/encoder&gt;
    &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
    &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
        &lt;!-- 日志归档 --&gt;
        &lt;!--如果第二天输出日志,会将当天的日志记录在&lt;file&gt;${log.path}/log_debug.log&lt;/file&gt;,然后将昨天的日志归档到下面的文件中--&gt;
        &lt;!--以天切分  %d{yyyy-MM-dd}--&gt;
        &lt;fileNamePattern&gt;${log.path}/web-debug-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
        &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
            &lt;!--单个日志文件最大100M，到了这个值，就会再创建一个日志文件，日志文件的名字最后+1--&gt;
            &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;
        &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
        &lt;!--日志文档保留天数--&gt;
        &lt;maxHistory&gt;15&lt;/maxHistory&gt;
        &lt;!--所有的日志文件最大20G，超过就会删除旧的日志--&gt;
        &lt;totalSizeCap&gt;20GB&lt;/totalSizeCap&gt;
    &lt;/rollingPolicy&gt;
    &lt;!-- 此日志文档只记录debug级别的及以上 --&gt;
    &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
        &lt;!-- 此日志文件只记录debug级别的
            onMatch和onMismatch都有三个属性值，分别为Accept、DENY和NEUTRAL 
            onMatch="ACCEPT" 表示匹配该级别及以上 
            onMatch="DENY" 表示不匹配该级别及以上 
            onMatch="NEUTRAL" 表示该级别及以上的，由下一个filter处理，如果当前是最后一个，则表 示匹配该级别及以上 
            onMismatch="ACCEPT" 表示匹配该级别以下 
            onMismatch="NEUTRAL" 表示该级别及以下的，由下一个filter处理，如果当前是最后一个，则不匹配该级别以下的 
            onMismatch="DENY" 表示不匹配该级别以下的 --&gt;
        &lt;level&gt;debug&lt;/level&gt;
        &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
        &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
    &lt;/filter&gt;
&lt;/appender&gt;</code></pre> 
<h4 id="1.3.2%E3%80%81root%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE">3.2、root节点标签</h4> 
<p>该标签的作用就是指定都启用那个append，可以指定多个</p> 
<pre><code class="language-XML">&lt;!--root配置必须在appender下边--&gt;
&lt;!--root节点是对所有appender的管理,添加哪个appender就会打印哪个appender的日志--&gt; 
&lt;!--root节点的level是总的日志级别控制,如果appender的日志级别设定比root的高,会按照appender的日志级别打印日志,--&gt; 
&lt;!--如果appender的日志级别比root的低,会按照root设定的日志级别进行打印日志--&gt; 
&lt;!--也就是说root设定的日志级别是最低限制,如果root设定级别为最高ERROR,那么所有appender只能打印最高级别的日志--&gt;
&lt;root level="DEBUG"&gt; 
&lt;!--&lt;appender-ref ref="append中的名字" /&gt; --&gt;
  &lt;appender-ref ref="CONSOLE" /&gt; 
  &lt;appender-ref ref="DEBUG_FILE" /&gt; 
  &lt;appender-ref ref="INFO_FILE" /&gt; 
  &lt;appender-ref ref="WARN_FILE" /&gt; 
  &lt;appender-ref ref="ERROR_FILE" /&gt; 
&lt;/root&gt;</code></pre> 
<h4 id="1.3.3%E3%80%81logger%E8%8A%82%E7%82%B9%E6%A0%87%E7%AD%BE">3.3、logger节点标签</h4> 
<p>        logger与root是相对的，作用范围不同，root相当于是对真个项目做配置，logger就是对项目下某个包或者某个类单独做配置的，</p> 
<p>该标签有两个属性</p> 
<p><strong>name:</strong>用来指定受此loger约束的某一个包或者具体的某一个类。</p> 
<p><strong>addtivity:</strong>是否向上级loger传递打印信息。默认是true。</p> 
<pre><code class="language-XML">&lt;!-- logback为 com.pikaqiu.logbackdemo 中的包 --&gt; 
&lt;logger name="com.pikaqiu.logbackdemo" level="debug" additivity="false"&gt; 
  &lt;!-- 指定打印配置--&gt;
  &lt;appender-ref ref="CONSOLE" /&gt; 
&lt;/logger&gt; 
&lt;!-- logback为 com.pikaqiu.logbackdemo.LogbackdemoApplicationTests 这个类 --&gt; 
&lt;logger name="com.pikaiqu.logbackdemo.LogbackdemoApplicationTests" level="INFO" additivity="true"&gt; 
  &lt;appender-ref ref="STDOUT"/&gt; 
&lt;/logger&gt;</code></pre> 
<h4 id="1.3.4%E3%80%81logger%E5%92%8Croot%E7%9A%84%E5%85%B3%E7%B3%BB">3.4、logger和root的关系</h4> 
<ul><li><strong>root和logger是父子的关系。</strong></li></ul> 
<p>logger的appender根据参数additivity决定是否要叠加root的appender，logger的级别是其自身定义的级别，和root的级别没什么关系。</p> 
<ul><li><strong>logger对单个包或类添加配置，相当于局部配置，root相当于全局配置</strong></li></ul> 
<p>如果logger里面配置了additivity=“false”，就会覆盖root的，只打印一遍；但是additivity=“true”，就会向上层再次传递，不会覆盖，而是打印两遍！</p> 
<h3 id="1.4%E3%80%81%E5%AE%8C%E6%95%B4%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE">4、完整日志配置</h3> 
<p>将error日志打印到一个文件中，将其他日志打印到另一个文件夹中</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!-- 日志级别从低到高分为TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL，如果设置为WARN，则低于WARN的信息都不会输出 --&gt;
&lt;!-- scan:当此属性设置为true时，配置文档如果发生改变，将会被重新加载，默认值为true --&gt;
&lt;!-- scanPeriod:设置监测配置文档是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。
                         当scan为true时，此属性生效。默认的时间间隔为1分钟。 --&gt;
&lt;!-- debug:当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。默认值为false。 --&gt;
&lt;configuration  scan="true" scanPeriod="10 seconds"&gt;
    &lt;!--    --&gt;
    &lt;contextName&gt;util_demo&lt;/contextName&gt;
    &lt;!-- name的值是变量的名称，value的值时变量定义的值。通过定义的值会被插入到logger上下文中。定义后，可以使“${}”来使用变量。 --&gt;
    &lt;property name="log.path" value="log.path" /&gt;
    &lt;!-- scope="context"，指定作用范围是整个上下文，name变量的名字，source从配置文件读取值作为变量的值--&gt;
    &lt;springProperty scope="context" name="springAppName" source="spring.application.name"/&gt;
    &lt;!--0. 日志格式和颜色渲染 --&gt;
    &lt;!-- 彩色日志依赖的渲染类 --&gt;
    &lt;conversionRule conversionWord="clr" converterClass="org.springframework.boot.logging.logback.ColorConverter" /&gt;
    &lt;conversionRule conversionWord="wex" converterClass="org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter" /&gt;
    &lt;conversionRule conversionWord="wEx" converterClass="org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter" /&gt;
    &lt;!-- 彩色日志格式 --&gt;
    &lt;property name="CONSOLE_LOG_PATTERN" value="%green(%d{yyyy-MM-dd HH:mm:ss.SSS}) [%thread] %highlight(%-5level) %red(%logger{50}) - %yellow(%msg) %n"/&gt;
    &lt;!--1. 输出到控制台--&gt;
    &lt;appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender"&gt;
        &lt;!--此日志appender是为开发使用，只配置最底级别，控制台输出的日志级别是大于或等于此级别的日志信息--&gt;
        &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt;
            &lt;level&gt;debug&lt;/level&gt;
        &lt;/filter&gt;
        &lt;encoder&gt;
            &lt;!-- %d表示时间
                %thread表示线程名
                %-5level 表示日志级别，允许以五个字符长度输出
                %logger{50}表示具体的日志输出者，比如类名，括号内表示长度
                %msg表示具体的日志消息，就是logger.info("xxx")中的xxx
                %n表示换行 --&gt;
            &lt;Pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/Pattern&gt;
            &lt;!-- 设置字符集 --&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;
    &lt;!--2. 输出到文档--&gt;
    &lt;!-- 2.1 level为 ERROR 日志，时间滚动输出  --&gt;
    &lt;appender name="ERROR_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
&lt;!--        &lt;file&gt;${log.path}/web_error.log&lt;/file&gt;--&gt;
        &lt;!--日志文档输出格式--&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- 此处设置字符集 --&gt;
        &lt;/encoder&gt;
        &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;fileNamePattern&gt;${log.path}/${springAppName}-error-%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;
            &lt;!--日志文档保留天数--&gt;
            &lt;maxHistory&gt;15&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
        &lt;!-- 此日志文档只记录ERROR级别的 --&gt;
        &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
            &lt;level&gt;ERROR&lt;/level&gt;
            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;
    &lt;!-- 2.2 level为 除error的日志，时间滚动输出  --&gt;
    &lt;appender name="INFO_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
&lt;!--        &lt;file&gt;${log.path}/web_info.log&lt;/file&gt;--&gt;
        &lt;!--日志文档输出格式--&gt;
        &lt;encoder&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- 此处设置字符集 --&gt;
        &lt;/encoder&gt;
        &lt;!--滚动策略--&gt;
        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;!--路径--&gt;
            &lt;fileNamePattern&gt;${log.path}/${springAppName}-info-%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;
            &lt;maxHistory&gt;30&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
        &lt;!-- 此日志文档只记录除ERROR级别以外的 --&gt;
        &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
            &lt;level&gt;ERROR&lt;/level&gt;
            &lt;onMatch&gt;DENY&lt;/onMatch&gt;
            &lt;onMismatch&gt;ACCEPT&lt;/onMismatch&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;
    &lt;!-- 异步输出 --&gt;
    &lt;appender name="ASYNC-INFO" class="ch.qos.logback.classic.AsyncAppender"&gt;
        &lt;!-- 不丢失日志.默认的,如果队列的80%已满,则会丢弃TRACT、DEBUG、INFO级别的日志 --&gt;
        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;
        &lt;!-- 更改默认的队列的深度,该值会影响性能.默认值为256 --&gt;
        &lt;queueSize&gt;256&lt;/queueSize&gt;
        &lt;!-- 添加附加的appender,最多只能添加一个 --&gt;
        &lt;appender-ref ref="INFO_FILE"/&gt;
    &lt;/appender&gt;
    &lt;appender name="ASYNC-ERROR" class="ch.qos.logback.classic.AsyncAppender"&gt;
        &lt;!-- 不丢失日志.默认的,如果队列的80%已满,则会丢弃TRACT、DEBUG、INFO级别的日志 --&gt;
        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;
        &lt;!-- 更改默认的队列的深度,该值会影响性能.默认值为256 --&gt;
        &lt;queueSize&gt;256&lt;/queueSize&gt;
        &lt;!-- 添加附加的appender,最多只能添加一个 --&gt;
        &lt;appender-ref ref="ERROR_FILE"/&gt;
    &lt;/appender&gt;


    &lt;!-- 4. 最终的策略 --&gt;
    &lt;root level="info"&gt;
        &lt;appender-ref ref="CONSOLE" /&gt;
        &lt;appender-ref ref="ASYNC-ERROR" /&gt;
        &lt;appender-ref ref="ASYNC-INFO" /&gt;
    &lt;/root&gt;
&lt;/configuration&gt;</code></pre> 
<p></p> 
<p><strong>更详细的介绍参看这两篇博客，我也是看的这两个</strong></p> 
<p><a href="https://juejin.cn/post/7200549600590282789#heading-1" rel="nofollow" title="logback-spring.xml配置文件标签（超详解） - 掘金 (juejin.cn)">logback-spring.xml配置文件标签（超详解） - 掘金 (juejin.cn)</a></p> 
<p><a href="https://blog.csdn.net/shanvlang/article/details/120196979" title="logback整合Springboot及logback-spring.xml配置说明_logback-spring和logback同时存在_shanvlang的博客-CSDN博客">logback整合Springboot及logback-spring.xml配置说明_logback-spring和logback同时存在_shanvlang的博客-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/57dad5daeab807db55f92764f697756a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java通过注解构建树结构工具类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0a84c94d4ca3b2919e3340acae39bd98/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">利用注解及ResponseBodyAdvice对返回参进行加密</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>