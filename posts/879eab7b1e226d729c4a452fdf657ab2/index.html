<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>qss - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="qss" />
<meta property="og:description" content="借用css 的灵感， Qt也支持Qt自己的css, 简称qss。同css 相似，qss的主要功能与最终目的都是能使界面的表现与界面的元素分离，即质与形的分离，就如同一个人可以在不同的时候穿上不同的衣服一样，css机制的引入，使得设计一种皮肤与界面控件分离的软件成为可能，应用程序也能像web界面那样随意地改变外观。
一、QSS语法
同css一样，他也有由一个selector与一个declaration组成，selector指定了是对哪一个控件产生效果，而declaration才是真正的产生作用的语句。如：
QPushButton { color: red }
QPushButton指定了是对所有的QPushButton或是其子类控件（如用户定义的MyPushButton）产生影响，而color:red表明所有的受影响控件的前景色都为red。
除了“类名”，“对象名”，“Qt属性名”这三样东西是大小写敏感的外其他的东西都是大小写不敏感的，如color与Color代表同一属性。
如果有几个selector指定了相同的declaration, 可以使用逗号（,）将各个选择器分开，如：
QPushButton, QLineEdit, QComboBox { color: red }
他相当于：
QPushButton { color: red }
QLineEdit { color: red }
QComboBox { color: red }
declaration部份是一系列的（属性：值）对，使用分号（;）将各个不同的属性值对分开，使用大括号（{}）将所有declaration包含在一起。
1、 一般选择器（selector）
Qt支持所有的CSS2定义的选择器，其祥细内容可以在w3c的网站上查找http://www.w3.org/TR/CSS2/selector.html ， 其中比较常用的selector类型有：
通用类型选择器：* 会对所有控件有效果。 类型选择器：QPushButton匹配所有QPushButton的实例和其子类的实例。 属性选择器：QPushButton[flat=”false”]匹配所有QPushButton属性flat为false的实例，属性分为两种，静态的和动态的，静态属性可以通过Q_PROPERTY() 来指定，来动态属性可以使用setProperty来指定，如：
QLineEdit *nameEdit = new QLineEdit(this);
nameEdit-&gt;setProperty(&#34;mandatoryField&#34;, true);
如果在设置了qss后Qt属性改变了，需要重新设置qss来使其生效，可以使用先unset再set qss。 类选择器：.QPushButton匹配所有QPushButton的实例，但不包含其子类，这相当于：*[class~=&#34;QPushButton&#34;] ~=的意思是测试一个QStringList类型的属性是否包含给定的QString ID选择器：QPushButton#okButton对应Qt里面的object name设置，使用这条CSS之前要先设置对应控件的object name为okButton，如：Ok-&gt;setObjectName(tr(“okButton”)); 后裔选择器：QDialog QPushButton匹配所有为QDialog后裔（包含儿子，与儿子的儿子的递归）为QPushButton的实例 子选择器：QDialog &gt; QPushButton匹配所有的QDialog直接子类QPushButton的实例，不包含儿子的儿子的递归。 2、子控件选择器" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/879eab7b1e226d729c4a452fdf657ab2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-12-05T11:00:00+08:00" />
<meta property="article:modified_time" content="2010-12-05T11:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">qss</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>借用css 的灵感， Qt也支持Qt自己的css, 简称qss。同css 相似，qss的主要功能与最终目的都是能使界面的表现与界面的元素分离，即质与形的分离，就如同一个人可以在不同的时候穿上不同的衣服一样，css机制的引入，使得设计一种皮肤与界面控件分离的软件成为可能，应用程序也能像web界面那样随意地改变外观。<br><br><span style="font-size: medium;"><strong>一、QSS语法</strong></span><br><br>同css一样，他也有由一个selector与一个declaration组成，selector指定了是对哪一个控件产生效果，而declaration才是真正的产生作用的语句。如：<br>QPushButton { color: red }<br>QPushButton指定了是对所有的QPushButton或是其子类控件（如用户定义的MyPushButton）产生影响，而color:red表明所有的受影响控件的前景色都为red。<br>除了“类名”，“对象名”，“Qt属性名”这三样东西是大小写敏感的外其他的东西都是大小写不敏感的，如color与Color代表同一属性。<br>如果有几个selector指定了相同的declaration, 可以使用逗号（,）将各个选择器分开，如：<br>QPushButton, QLineEdit, QComboBox { color: red }<br>他相当于：<br>QPushButton { color: red }<br>QLineEdit { color: red }<br>QComboBox { color: red }<br>declaration部份是一系列的（属性：值）对，使用分号（;）将各个不同的属性值对分开，使用大括号（{}）将所有declaration包含在一起。<br><br><strong>1、 一般选择器（selector）</strong><br><br>Qt支持所有的CSS2定义的选择器，其祥细内容可以在w3c的网站上查找<a href="http://www.w3.org/TR/CSS2/selector.html" rel="nofollow noopener noreferrer" target="_blank">http://www.w3.org/TR/CSS2/selector.html</a> ， 其中比较常用的selector类型有：<br></p> 
<ul><li><span style="color: #0000ff;">通用类型选择器</span>：* 会对所有控件有效果。 </li><li><span style="color: #0000ff;">类型选择器</span>：QPushButton匹配所有QPushButton的实例和其子类的实例。 </li><li><span style="color: #0000ff;">属性选择器</span>：QPushButton[flat=”false”]匹配所有QPushButton属性flat为false的实例，属性分为两种，静态的和动态的，静态属性可以通过Q_PROPERTY() 来指定，来动态属性可以使用setProperty来指定，如：<br>QLineEdit *nameEdit = new QLineEdit(this);<br>nameEdit-&gt;setProperty("mandatoryField", true);<br>如果在设置了qss后Qt属性改变了，需要重新设置qss来使其生效，可以使用先unset再set qss。 </li><li><span style="color: #0000ff;">类选择器</span>：.QPushButton匹配所有QPushButton的实例，但不包含其子类，这相当于：*[class~="QPushButton"]     <span style="color: #ff0000;">~=的意思是测试一个QStringList类型的属性是否包含给定的QString</span> </li><li><span style="color: #0000ff;">ID选择器</span>：QPushButton#okButton对应Qt里面的object name设置，使用这条CSS之前要先设置对应控件的object name为okButton，如：Ok-&gt;setObjectName(tr(“okButton”)); </li><li><span style="color: #0000ff;">后裔选择器</span>：QDialog QPushButton匹配所有为QDialog后裔（包含儿子，与儿子的儿子的递归）为QPushButton的实例 </li><li><span style="color: #0000ff;">子选择器</span>：QDialog &gt; QPushButton匹配所有的QDialog直接子类QPushButton的实例，不包含儿子的儿子的递归。</li></ul> 
<p><br><strong>2、子控件选择器</strong></p> 
<ul><li>对于复杂的控件，可能会在其中包含其他子控件，如一个QComboxBox中有一个drop-down的按钮。那么现在如果要设置QComboxBox的下拉按钮的话，就可以这样访问：<br>QComboBox::drop-down { image: url(dropdown.png) }其标志是（::） </li><li>子控件选择器是用位置的引用来代表一个元素，这个元素可以是一个单一控件或是另一个包含子控件的复合控件。使用subcontrol-origin属性可以改变子控件的默认放置位置，如：<br>QComboBox {<!-- --><br>       margin-right: 20px;<br>}<br>QComboBox::drop-down {<!-- --><br>       subcontrol-origin: margin;<br>}<br><br>如上语句可以用来改变drop-down的margin。 </li><li>相对位置属性可以用来改变子控件相对于最初位置的偏移量，如当一个QCombox的drop-down按钮被按下时，我们可以用一个内部的小偏移量来表示被按下的效果，如下：<br>QComboBox::down-arrow {<!-- --><br>       image: url(down_arrow.png);<br>}<br>QComboBox::down-arrow:pressed {<!-- --><br>       position: relative;<br>       top: 1px; left: 1px;<br>} </li><li>绝对位置属性允许子控件改变自己的位置和大小而不受引用元素的控件。一但位置被设定了，这些子控件就可以被当成一般的widget来对待，并且可以使用合模型。关于合模型可以参考下面。</li></ul> 
<p>如果你要查看Qt支持哪些子控件选择器，可以参考：<a href="http://pepper.troll.no/s60prereleases/doc/stylesheet-reference.html#list-of-sub-controls-syntax.html" rel="nofollow noopener noreferrer" target="_blank">http://pepper.troll.no/s60prereleases/doc/stylesheet-reference.html#list-of-sub-controls-syntax.html</a><br><strong>3、伪选择器（pseudo-states）</strong></p> 
<ul><li>伪选择器以冒号（:）表示，与css里的伪选择器相似，是基于控件的一些基本状态来限定程序的规则，如hover规则表示鼠标经过控件时的状态，而press表示按下按钮时的状态。如：<br>QPushButton:hover {<!-- --><br>       Background-color:red;<br>}<br>表示鼠标经过时QPushButton背景变红。 </li><li>Pseudo还支持否定符号(!)，如：<br>QRadioButton:!hover { color: red }<br>表示没有鼠标移上QRadioButton时他显示的颜色是red。 </li><li>Pseudo可以被串连在一起，比如：<br>QPushButton:hover:!pressed { color: blue; }<br>表示QPushButton在鼠标移上却没有点击时显示blue字，但如果点击的时候就不会显示blue颜色了。 </li><li>同样可以和之前所讲的子控件选择器一起联合使用，如：<br>QSpinBox::down-button:hover { image: url(btn-combobox-press.bmp) } </li><li>与前面所讲的一样，伪选择器，子控件选择器等都是可以用逗号(,)分隔表示连续相同的设置的，如：<br>QPushButton:hover,QSpinBox::down-button, QCheckBox:checked { color: white ;image: url(btn-combobox-press.bmp);} 表示如下 </li><li>更多请参考：<a href="http://pepper.troll.no/s60prereleases/doc/stylesheet-reference.html#list-of-pseudo-states" rel="nofollow noopener noreferrer" target="_blank">http://pepper.troll.no/s60prereleases/doc/stylesheet-reference.html#list-of-pseudo-states</a></li></ul> 
<p><br><span style="font-size: medium;"><strong>二、 解决冲突</strong></span></p> 
<ul class="litype_1" type="1"><li>使用object name<br> 
  <ul><li>在程序里面要先设置控件的，如：<br>btnOne = new QPushButton(centralWidget);<br>btnOne-&gt;setObjectName(QString::fromUtf8("btnOneCh")); </li><li>这样，我们有了一个object name为btnOneCh的QPushButton，试验一下，使用指定object name的方式，如：<br>QPushButton#btnOneCh { color: red }<br>QPushButton { color: white }<br>可以看出，btnOncCh的color变成了red</li></ul> </li><li>使用伪选择器，如hover，press，enabled等，如：按扭“1”是disable了的，QPushButton:!enabled {color: white} </li><li>所有的类型选择器都有一个共同的特性，就是如果有两个属性冲突了的话就会以最后出现的一个为准,如：<br>QPushButton { color: red }<br>QAbstractButton { color: gray }<br>由于QPushButton为QAbstractButton的子类，如果只设置QAbstractButton的可以想像结果是所有的QPushButton都为gray, 如果只设置QPushButton的所有QPushButton都会为red，当两个都能设置起效的时候，以在文本上最后出现的为准，所以结果为Grey </li><li>当然其中如果有#指定了object name，他所设置的优先级是最大的，具体规则可以参考：<a href="http://www.w3.org/TR/CSS2/cascade.html#specificity" rel="nofollow noopener noreferrer" target="_blank">http://www.w3.org/TR/CSS2/cascade.html#specificity</a>，或是<a href="http://pepper.troll.no/s60prereleases/doc/stylesheet-syntax.html#conflict-resolution" rel="nofollow noopener noreferrer" target="_blank">http://pepper.troll.no/s60prereleases/doc/stylesheet-syntax.html#conflict-resolution</a> <br>QPushButton#btnOneCh { color: red }<br>QPushButton { color: blue }<br>QAbstractButton { color: gray }<br>虽然QAbstractButton在最后，但是之前有#btnOneCh指定了QPushButton“一”的color为red所以最后显示也是“一”为red。</li></ul> 
<p><br><span style="font-size: medium;"><strong>三、级联效应</strong></span></p> 
<ul><li>子类可以继承父类的StyleSheet，但是如果子类里面设置了StyleSheet与父类里在设置的有冲突，那么当然会优先考虑子类自己的，<br>同样，如果在qApp时面设置了，但是在某一个特定控件里面也设置，如果有冲突，也是优先控件自己的，例如，我在程序时面设置了：btnOneEn-&gt;setStyleSheet("QPushButton { color: red }");<br>而，当我再设置qApp时，如果，将QPushButton的color设置成grey的，那么结果是对于btnOneEn这个QPushButton来说他的颜色还是red。<br>这就是为什么这里设置为grey了btnOneEn却还是red的。 </li><li>如果我们对一个控件设置StyleSheet为：<br>QPushButton* myPushButton;<br>myPushButton-&gt;setStyleSheet("* { color: blue }");<br>其实他和设置为：myPushButton-&gt;setStyleSheet("color: blue");<br>效果相同，只是后一种设置不会对QPushButton的子类产生作用，但第一种却会。</li></ul> 
<p><br><span style="font-size: medium;"><strong>四、继承性</strong></span><br><br>与CSS不同的一点，在CSS box模型中，如果一个元素在别一元素的里面，那么里面的元素会自动继承外面元素的属性，但QSS里面不会，如：<br>一个QPushButton如果放在一个QGroupBox里面，如果：qApp-&gt;setStyleSheet("QGroupBox { color: red; } ");<br>并不代表在QGroupBox里面的QPushButton也会有color:red的属性，如果要想有的话要显示写明，如：qApp-&gt;setStyleSheet("QGroupBox, QGroupBox * { color: red; }");<br>或者在应用程序里面也可以用QWidget::setFont等来设置到子控件的属性。<br><br><span style="font-size: medium;"><strong>五、Namespace冲突</strong></span><br><br>类型选择器能够使用到一个特定的类型，如：<br>class MyPushButton : public QPushButton {<!-- --><br>      // ...<br>}<br>qApp-&gt;setStyleSheet("MyPushButton { background: yellow; }");<br><br>因为QSS使用QObject::className来判断要赋与style sheet的控件类型，如果一个用户定义控件类型在一个namespace里面的话，QObject::className会返回&lt;namespace&gt;::&lt;classname&gt; 的名字，这和子控件选择器的语法相冲突，为了解决此问题，使用“--”来代替“::”，比如：<br>namespace ns {<!-- --><br>      class MyPushButton : public QPushButton {<!-- --><br>          // ...<br>      }<br>}<br>qApp-&gt;setSytleSheet("ns--MyPushButton { background: yellow; }");<br><br><span style="font-size: medium;"><strong>六、设置对像属性<br></strong></span><br>如果在程序里面使用Q_PROPERTY设置的属性，可以在qss里面使用：qproperty-&lt;property name&gt;的形式来访问并设置值。如：<br>MyLabel { qproperty-pixmap: url(pixmap.png); }<br>MyGroupBox { qproperty-titleColor: rgb(100, 200, 100); }<br>QPushButton { qproperty-iconSize: 20px 20px; }<br>如果属性引用到的是一个由Q_ENUMS申明的enum 时，要引用其属性名字要用定义的名称而不是数字。<br>引用：<a href="http://pepper.troll.no/s60prereleases/doc/stylesheet" rel="nofollow noopener noreferrer" target="_blank">http://pepper.troll.no/s60prereleases/doc/stylesheet</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/53619a16d3dc74b04503f5d4eb4ba4e1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">QListView的样式-转载于http://no001.blog.51cto.com/1142339/378917</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d5f69309f50ef7c1f7b8f3e908c5fde7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MFC线程局部存储</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>