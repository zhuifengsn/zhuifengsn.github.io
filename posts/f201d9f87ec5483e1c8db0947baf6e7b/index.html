<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>树莓派与OpenCV实现人脸识别（OpenCV安装篇） - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="树莓派与OpenCV实现人脸识别（OpenCV安装篇）" />
<meta property="og:description" content="主要看了以下两位博客的文章完成的，也遇到了不少的坑，在这里一一填补说明。
链接: https://blog.csdn.net/weixin_42163073/article/details/107308759.
链接: https://blog.csdn.net/weixin_42573595/article/details/108526850.
树莓派与OpenCV实现人脸识别（OpenCV安装篇） 一、材料准备：二、系统烧录三、安装OpenCV依赖项四、下载OpenCV和OpenCV_contrib（三种办法，云盘下载最快）五、为OpenCV配置Python3虚拟环境六、编译OpenCV（耗时较长）七、安装与检查 一、材料准备： 1.树莓派x1（含16g卡）
2.USB高清摄像头x1
3.键盘、鼠标、屏幕
二、系统烧录 只提供树莓派raspbian系统镜像，自己解压烧录即可，烧录步骤省略
系统镜像链接: https://pan.baidu.com/s/1ACxvVdpYYJ0OAg7nqVXJmA .
提取码：ms45
三、安装OpenCV依赖项 1.为了加快后面下载速度，换国内源
点击看此文
2.更新系统及源：
sudo apt-get update &amp;&amp; sudo apt-get upgrade 3.切换Python版本
点击看此文
4.安装开发工具：
sudo apt-get install build-essential cmake unzip pkg-config 5.安装图像和视频库、安装GTK，GUI后端：
sudo apt-get install libjpeg-dev libpng-dev libtiff-dev sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev sudo apt-get install libxvidcore-dev libx264-dev 6.安装免除GTK警告的包
sudo apt-get install libcanberra-gtk* 四、下载OpenCV和OpenCV_contrib（三种办法，云盘下载最快） 下载OpenCV和OpenCV_contrib，注意：若安装的是OpenCV-4.3.0，则下载OpenCV_contrib时，必须也是OpenCV_contrib-4.3.0
（1）命令行下载，速度很慢，容易中断
1.下载压缩包，注意观察是否下载成功
cd ~ wget -O opencv." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/f201d9f87ec5483e1c8db0947baf6e7b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-22T00:44:02+08:00" />
<meta property="article:modified_time" content="2021-02-22T00:44:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">树莓派与OpenCV实现人脸识别（OpenCV安装篇）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>主要看了以下两位博客的文章完成的，也遇到了不少的坑，在这里一一填补说明。<br> 链接: <a href="https://www.csdn.net/">https://blog.csdn.net/weixin_42163073/article/details/107308759</a>.<br> 链接: <a href="https://www.csdn.net/">https://blog.csdn.net/weixin_42573595/article/details/108526850</a>.</p> 
<p></p> 
<div class="toc"> 
 <h4>树莓派与OpenCV实现人脸识别（OpenCV安装篇）</h4> 
 <ul><li><a href="#_6" rel="nofollow">一、材料准备：</a></li><li><a href="#_10" rel="nofollow">二、系统烧录</a></li><li><a href="#OpenCV_14" rel="nofollow">三、安装OpenCV依赖项</a></li><li><a href="#OpenCVOpenCV_contrib_41" rel="nofollow">四、下载OpenCV和OpenCV_contrib（三种办法，云盘下载最快）</a></li><li><a href="#OpenCVPython3_81" rel="nofollow">五、为OpenCV配置Python3虚拟环境</a></li><li><a href="#OpenCV_112" rel="nofollow">六、编译OpenCV（耗时较长）</a></li><li><a href="#_153" rel="nofollow">七、安装与检查</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_6"></a>一、材料准备：</h2> 
<p>1.树莓派x1（含16g卡）<br> 2.USB高清摄像头x1<br> 3.键盘、鼠标、屏幕</p> 
<h2><a id="_10"></a>二、系统烧录</h2> 
<p>只提供树莓派raspbian系统镜像，自己解压烧录即可，烧录步骤省略<br> 系统镜像链接: <a href="https://www.csdn.net/">https://pan.baidu.com/s/1ACxvVdpYYJ0OAg7nqVXJmA </a>.<br> 提取码：ms45</p> 
<h2><a id="OpenCV_14"></a>三、安装OpenCV依赖项</h2> 
<p>1.为了加快后面下载速度，换国内源<br> <a href="https://blog.csdn.net/weixin_45880057/article/details/113926027">点击看此文</a><br> 2.更新系统及源：</p> 
<pre><code class="prism language-c">sudo apt<span class="token operator">-</span>get update <span class="token operator">&amp;&amp;</span> sudo apt<span class="token operator">-</span>get upgrade
</code></pre> 
<p>3.切换Python版本<br> <a href="https://blog.csdn.net/weixin_45880057/article/details/113926491">点击看此文</a><br> 4.安装开发工具：</p> 
<pre><code class="prism language-c">sudo apt<span class="token operator">-</span>get install build<span class="token operator">-</span>essential cmake unzip pkg<span class="token operator">-</span>config
</code></pre> 
<p>5.安装图像和视频库、安装GTK，GUI后端：</p> 
<pre><code class="prism language-c">sudo apt<span class="token operator">-</span>get install libjpeg<span class="token operator">-</span>dev libpng<span class="token operator">-</span>dev libtiff<span class="token operator">-</span>dev
sudo apt<span class="token operator">-</span>get install libavcodec<span class="token operator">-</span>dev libavformat<span class="token operator">-</span>dev libswscale<span class="token operator">-</span>dev libv4l<span class="token operator">-</span>dev
sudo apt<span class="token operator">-</span>get install libxvidcore<span class="token operator">-</span>dev libx264<span class="token operator">-</span>dev
</code></pre> 
<p>6.安装免除GTK警告的包</p> 
<pre><code class="prism language-c">sudo apt<span class="token operator">-</span>get install libcanberra<span class="token operator">-</span>gtk<span class="token operator">*</span>
</code></pre> 
<h2><a id="OpenCVOpenCV_contrib_41"></a>四、下载OpenCV和OpenCV_contrib（三种办法，云盘下载最快）</h2> 
<blockquote> 
 <p>下载OpenCV和OpenCV_contrib，注意：若安装的是OpenCV-4.3.0，则下载OpenCV_contrib时，必须也是OpenCV_contrib-4.3.0</p> 
</blockquote> 
<p>（1）命令行下载，速度很慢，容易中断<br> 1.下载压缩包，注意观察是否下载成功</p> 
<pre><code class="prism language-c">cd <span class="token operator">~</span>
wget <span class="token operator">-</span>O opencv<span class="token punctuation">.</span>zip https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>opencv<span class="token operator">/</span>opencv<span class="token operator">/</span>archive<span class="token operator">/</span><span class="token number">4.3</span><span class="token number">.0</span><span class="token punctuation">.</span>zip
wget <span class="token operator">-</span>O opencv_contrib<span class="token punctuation">.</span>zip https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>opencv<span class="token operator">/</span>opencv_contrib<span class="token operator">/</span>archive<span class="token operator">/</span><span class="token number">4.3</span><span class="token number">.0</span><span class="token punctuation">.</span>zip
</code></pre> 
<p>2.解压</p> 
<pre><code class="prism language-c">unzip opencv<span class="token punctuation">.</span>zip
mv opencv<span class="token operator">-</span><span class="token number">4.3</span><span class="token number">.0</span> opencv
unzip opencv_contrib<span class="token punctuation">.</span>zip
</code></pre> 
<p>（2）在window下通过官网或百度云盘下载完，再通过VNC或U盘传输到树莓派上，速度相对较快，百度云盘更快一点<br> OpenCV-4.3.0官网下载链接:<br> <a href="https://www.csdn.net/">https://github.com/opencv/opencv/archive/4.3.0-openvino-2020.3.0.zip</a>.<br> opencv_contrib-4.3.0官网下载链接: <a href="https://www.csdn.net/">https://github.com/opencv/opencv_contrib/archive/4.3.0.zip</a>.</p> 
<p>OpenCV-4.3.0云盘下载链接:<br> 链接: https://pan.baidu.com/s/1cLy7M2JSsLsEAsjqfXFsPg<br> 提取码：zezp<br> opencv_contrib-4.3.0云盘下载链接: 链接: https://pan.baidu.com/s/1jFaBzr46SQkjo3E1ChbC2w<br> 提取码：ru35<br> 传输到树莓派的/home/pi目录下，对两个压缩包解压</p> 
<pre><code class="prism language-c">cd
unzip <span class="token number">4.3</span><span class="token number">.0</span><span class="token operator">-</span>openvino<span class="token operator">-</span><span class="token number">2020.3</span><span class="token number">.0</span><span class="token punctuation">.</span>zip
unzip opencv_contrib<span class="token operator">-</span><span class="token number">4.3</span><span class="token number">.0</span><span class="token punctuation">.</span>zip
</code></pre> 
<p>将两个文件夹重命名为opencv和opencv_contrib</p> 
<pre><code class="prism language-c">mv  opencv<span class="token operator">-</span><span class="token number">4.3</span><span class="token number">.0</span><span class="token operator">-</span>openvino<span class="token operator">-</span><span class="token number">2020.3</span><span class="token number">.0</span>  opencv
mv  opencv_contrib<span class="token operator">-</span><span class="token number">4.3</span><span class="token number">.0</span>  opencv_contrib
</code></pre> 
<h2><a id="OpenCVPython3_81"></a>五、为OpenCV配置Python3虚拟环境</h2> 
<p>1.安装pip</p> 
<pre><code class="prism language-c">wget https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>bootstrap<span class="token punctuation">.</span>pypa<span class="token punctuation">.</span>io<span class="token operator">/</span>get<span class="token operator">-</span>pip<span class="token punctuation">.</span>py
sudo python3 get<span class="token operator">-</span>pip<span class="token punctuation">.</span>py
</code></pre> 
<p>2.安装虚拟环境</p> 
<pre><code class="prism language-c">sudo pip install virtualenv virtualenvwrapper
sudo rm <span class="token operator">-</span>rf <span class="token operator">~</span><span class="token operator">/</span>get<span class="token operator">-</span>pip<span class="token punctuation">.</span>py <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>cache<span class="token operator">/</span>pip
</code></pre> 
<p>3.打开~/.profile文件</p> 
<pre><code class="prism language-c">sudo nano <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>profile
</code></pre> 
<p>将以下行添加到您的~/.profile中</p> 
<pre><code class="prism language-c">export WORKON_HOME<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>pi<span class="token operator">/</span><span class="token punctuation">.</span>virtualenvs
export VIRTUALENVWRAPPER_PYTHON<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>python3
export VIRTUALENVWRAPPER_VIRTUALENV<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>virtualenv
source <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>virtualenvwrapper<span class="token punctuation">.</span>sh
export VIRTUALENVWRAPPER_ENV_BIN_DIR<span class="token operator">=</span>bin
</code></pre> 
<p>如下：<br> <img src="https://images2.imgbox.com/9d/85/yQXcsUkv_o.png" alt="在这里插入图片描述"><br> 重新加载：<code>source ~/.profile</code><br> 4.下载numpy：<code>pip install numpy</code></p> 
<h2><a id="OpenCV_112"></a>六、编译OpenCV（耗时较长）</h2> 
<p>安装cmake</p> 
<pre><code class="prism language-c">sudo apt<span class="token operator">-</span>get install cmake
</code></pre> 
<pre><code class="prism language-c">cd <span class="token operator">~</span><span class="token operator">/</span>opencv
mkdir build
cd build
</code></pre> 
<p>运行CMake来配置OpenCV 4</p> 
<pre><code class="prism language-c">cmake <span class="token operator">-</span>D CMAKE_BUILD_TYPE<span class="token operator">=</span>RELEASE \
    <span class="token operator">-</span>D CMAKE_INSTALL_PREFIX<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local \
    <span class="token operator">-</span>D OPENCV_EXTRA_MODULES_PATH<span class="token operator">=</span><span class="token operator">~</span><span class="token operator">/</span>opencv_contrib<span class="token operator">-</span><span class="token number">4.3</span><span class="token number">.0</span><span class="token operator">/</span>modules \
    <span class="token operator">-</span>D ENABLE_NEON<span class="token operator">=</span>ON \
    <span class="token operator">-</span>D ENABLE_VFPV3<span class="token operator">=</span>ON \
    <span class="token operator">-</span>D BUILD_TESTS<span class="token operator">=</span>OFF \
    <span class="token operator">-</span>D OPENCV_ENABLE_NONFREE<span class="token operator">=</span>ON \
    <span class="token operator">-</span>D INSTALL_PYTHON_EXAMPLES<span class="token operator">=</span>ON  \
    <span class="token operator">-</span>D BUILD_EXAMPLES<span class="token operator">=</span>ON  <span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p>过程无错则如下图：<br> <img src="https://images2.imgbox.com/13/0b/g6QZRodA_o.png" alt="在这里插入图片描述"></p> 
<p>请确保更新上述命令以使用正确的OpenCV_EXTER_MODES_PATH路径。如果您完全跟随本教程，则不需要更新路径。<br> 配置成功后开始编译</p> 
<pre><code class="prism language-c">sudo make <span class="token operator">-</span>j4
</code></pre> 
<p>注：编译遇错导致编译中止：fatal error: boostdesc_bgm.i: No such file or directory<br> <img src="https://images2.imgbox.com/80/17/E8c4chty_o.png" alt="在这里插入图片描述"></p> 
<p>解决办法：下载所有文件（不是文件夹）复制到**opencv_contrib/modules/xfeatures2d/src/**下<br> 百度云链接: https://pan.baidu.com/s/1T0m0LPdstoTpEd2s8WUHkA<br> 提取码：hlms</p> 
<p>继续编译：<code>sudo make -j4</code> 基本只有上面一个错误，如果还出现其他错误，继续编译一两次直到完全成功就OK了</p> 
<h2><a id="_153"></a>七、安装与检查</h2> 
<pre><code class="prism language-c">sudo make install
</code></pre> 
<p>进入Python交互环境</p> 
<pre><code class="prism language-c">python
</code></pre> 
<pre><code class="prism language-c">import cv2
</code></pre> 
<p>无错提示则说明opencv安装成功</p> 
<pre><code class="prism language-c">from cv2 imort face
</code></pre> 
<p>无错提示则说明opencv_contrib安装成功<br> Ctrl+D退出Python交互环境<br> 下一篇：<a href="https://blog.csdn.net/weixin_45880057/article/details/113965373">树莓派与OpenCV实现人脸识别（人脸识别篇）</a><br> 参考：<br> 链接: https://blog.csdn.net/weixin_42163073/article/details/107308759<br> 链接: https://blog.csdn.net/weixin_42573595/article/details/108526850</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8bd39ef01da6268e10d51958fb090f09/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">量纲与无量纲，标准化、归一化、正则化</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/894038740668ad8be0d89bd7a6ca06e5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">树莓派红外线</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>