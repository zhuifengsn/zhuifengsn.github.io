<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43; 在Win32中简单使用WebView2 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C&#43;&#43; 在Win32中简单使用WebView2" />
<meta property="og:description" content="webView2简介 Microsoft Edge WebView2 控件允许在本机应用中嵌入 web 技术(HTML、CSS 以及 JavaScript)。 WebView2 控件使用 Microsoft Edge 作为绘制引擎，以在本机应用中显示 web 内容。
使用 WebView2 可以在本机应用的不同部分嵌入 Web 代码，或在单个 WebView2 实例中生成所有本机应用。可以去官网查看具体信息，比如支持哪些系统，这是比较重要的（抄袭官网的 ps: 手动狗头）
ps: webVIew2 简介
环境准备：
1.visual studio 2022 (虽然有点新，但是和其他版本差不多)
2.WebView2 是需要 Microsoft Edge WebView2 Runtime支持
检查自己是否安装了 Microsoft Edge WebView2 Runtime
相信大家怎么找到这个位置（继续狗头）。
如果没有下载的话：
下载链接：webView2 双击即可下载
搭建环境 最好以管理员方式运行 visual studio
1.创建一个Win32项目
ps: visual studio 2022
创建完成
2.添加WebView2依赖
选中项目，点击鼠标右键，并找到“ 管理 NuGet 程序包… ” 选项
注意看右上角红色框，没有使用过NuGet的大概率是没有这个，所以现在先添加程序包源
点击设置按钮会出现一个对话框。如下图
没有使用过NuGet的同学应该只有第二个程序包没有第一个，首先在弹出的对话框中找到NuGet包管理器，选中程序包源，在右上角有个加号添加程序包源添加完成之后，还需要点击一下更新，最后再点击确认。
包名： nuget." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/8cf4318593ddc464388d154e28000056/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-04T10:07:25+08:00" />
<meta property="article:modified_time" content="2022-08-04T10:07:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43; 在Win32中简单使用WebView2</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="webView2_0"></a>webView2简介</h3> 
<p>Microsoft Edge WebView2 控件允许在本机应用中嵌入 web 技术(HTML、CSS 以及 JavaScript)。 WebView2 控件使用 Microsoft Edge 作为绘制引擎，以在本机应用中显示 web 内容。<br> 使用 WebView2 可以在本机应用的不同部分嵌入 Web 代码，或在单个 WebView2 实例中生成所有本机应用。可以去官网查看具体信息，比如支持哪些系统，这是比较重要的（抄袭官网的 ps: 手动狗头）<br> ps:<a href="https://docs.microsoft.com/zh-cn/microsoft-edge/webview2/" rel="nofollow"> webVIew2 简介</a></p> 
<p>环境准备：<br> 1.visual studio 2022 (虽然有点新，但是和其他版本差不多)<br> 2.WebView2 是需要 Microsoft Edge WebView2 Runtime支持</p> 
<p>检查自己是否安装了 Microsoft Edge WebView2 Runtime<br> <img src="https://images2.imgbox.com/3b/5e/OHhWXjp7_o.png" alt="在这里插入图片描述"></p> 
<p>相信大家怎么找到这个位置（继续狗头）。</p> 
<p>如果没有下载的话：<br> 下载链接：<a href="https://go.microsoft.com/fwlink/p/?LinkId=2124703" rel="nofollow">webView2 双击即可下载</a></p> 
<h3><a id="_17"></a>搭建环境</h3> 
<p>最好以管理员方式运行 visual studio</p> 
<p><strong>1.创建一个Win32项目</strong><br> <img src="https://images2.imgbox.com/6e/a0/Fqy2NypA_o.png" alt="在这里插入图片描述">ps: visual studio 2022</p> 
<p>创建完成<br> <img src="https://images2.imgbox.com/93/6b/aapWrRS4_o.png" alt="在这里插入图片描述"><br> <strong>2.添加WebView2依赖</strong><br> 选中项目，点击鼠标右键，并找到“ <strong>管理 NuGet 程序包…</strong> ” 选项<br> <img src="https://images2.imgbox.com/fb/6a/X2Lv2Ouf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e3/b5/xBvt2Cjf_o.png" alt="在这里插入图片描述"><br> 注意看右上角红色框，没有使用过NuGet的大概率是没有这个，所以现在先添加程序包源<br> <img src="https://images2.imgbox.com/f5/d3/0PPSNd1x_o.png" alt="在这里插入图片描述"><br> 点击设置按钮会出现一个对话框。如下图<img src="https://images2.imgbox.com/07/c7/kCVivHE0_o.png" alt="在这里插入图片描述"><br> 没有使用过NuGet的同学应该只有第二个程序包没有第一个，首先在弹出的对话框中找到NuGet包管理器，选中程序包源，在右上角有个加号添加程序包源添加完成之后，还需要点击一下更新，最后再点击确认。<br> 包名： <strong>nuget.org</strong><br> 包源 <strong>https://api.nuget.org/v3/index.json</strong></p> 
<p>添加好程序包源之后，在搜索框里直接搜索webView2,选中并直接点击安装，在之后的对话框中选择Ok,等待安装完成。<br> <img src="https://images2.imgbox.com/23/d2/h3t2zBM9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/89/4e/g74ucMq7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e3/aa/JdVcfjsk_o.png" alt="在这里插入图片描述"><br> 还需要安装一个依赖是ImplementationLibrary，安装过程和webView2一样。<br> <img src="https://images2.imgbox.com/e3/95/STLxX7Wq_o.png" alt="在这里插入图片描述"><br> 至此需要的程序包源已经下载完成，开始添加依赖项。（如果不能搜索出结果，可能需要科学上网，咳咳）</p> 
<p><strong>3.添加依赖项</strong><br> 找到<strong>生成依赖项</strong><br> <img src="https://images2.imgbox.com/04/30/7V8z7T8e_o.png" alt="在这里插入图片描述"><br> 选中 <strong>依赖项-&gt;生成自定义</strong> 会弹出一个对话框。点击查找现有按钮<br> <img src="https://images2.imgbox.com/fe/23/qGmuXSu9_o.png" alt="在这里插入图片描述"><br> 找到你项目存放的位置，下面会生成一个Packages文件夹<br> <img src="https://images2.imgbox.com/62/9e/gN8MyOG0_o.png" alt="在这里插入图片描述"><br> 找到WebView2.target文件，路径已经用红色框标出来，选中文件，点击打开。<br> <img src="https://images2.imgbox.com/c7/8f/z7PWpFfz_o.png" alt="在这里插入图片描述"><br> 第二个依赖<br> <img src="https://images2.imgbox.com/c1/55/qAeNpPpL_o.png" alt="在这里插入图片描述"><br> 选中添加的两个依赖，点击确定。<br> <img src="https://images2.imgbox.com/39/a4/xyo2nG5H_o.png" alt="在这里插入图片描述"><br> 至此，WebView2的环境搭建完成。</p> 
<p><strong>4.测试</strong><br> 先贴上 测试代码 复制粘贴即可<br> <img src="https://images2.imgbox.com/7d/73/hx72oaJm_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"framework.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Demo.h"</span> <span class="token comment">///记得修改</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;windows.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;strsafe.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;io.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;tchar.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;wrl.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;wil/com.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;AccCtrl.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;AclAPI.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"webView2.h"</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> Microsoft<span class="token double-colon punctuation">::</span>WRL<span class="token punctuation">;</span>

<span class="token comment">// Global variables</span>

<span class="token comment">// The main window class name.</span>
<span class="token keyword">static</span> TCHAR szWindowClass<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">_T</span><span class="token punctuation">(</span><span class="token string">"DesktopApp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// The string that appears in the application's title bar.</span>
<span class="token keyword">static</span> TCHAR szTitle<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">_T</span><span class="token punctuation">(</span><span class="token string">"WebView"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

HINSTANCE hInst<span class="token punctuation">;</span>

<span class="token comment">// Forward declarations of functions included in this code module:</span>
LRESULT CALLBACK <span class="token function">WndProc</span><span class="token punctuation">(</span>HWND<span class="token punctuation">,</span> UINT<span class="token punctuation">,</span> WPARAM<span class="token punctuation">,</span> LPARAM<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Pointer to WebViewController</span>
<span class="token keyword">static</span> wil<span class="token double-colon punctuation">::</span>com_ptr<span class="token operator">&lt;</span>ICoreWebView2Controller<span class="token operator">&gt;</span> webviewController<span class="token punctuation">;</span>

<span class="token comment">// Pointer to WebView window</span>
<span class="token keyword">static</span> wil<span class="token double-colon punctuation">::</span>com_ptr<span class="token operator">&lt;</span>ICoreWebView2<span class="token operator">&gt;</span> webviewWindow<span class="token punctuation">;</span>

<span class="token keyword">int</span> CALLBACK <span class="token function">WinMain</span><span class="token punctuation">(</span>
    _In_ HINSTANCE hInstance<span class="token punctuation">,</span>
    _In_ HINSTANCE hPrevInstance<span class="token punctuation">,</span>
    _In_ LPSTR     lpCmdLine<span class="token punctuation">,</span>
    _In_ <span class="token keyword">int</span>       nCmdShow
<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    WNDCLASSEX wcex<span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>cbSize <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>WNDCLASSEX<span class="token punctuation">)</span><span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>style <span class="token operator">=</span> CS_HREDRAW <span class="token operator">|</span> CS_VREDRAW<span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>lpfnWndProc <span class="token operator">=</span> WndProc<span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>cbClsExtra <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>cbWndExtra <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>hInstance <span class="token operator">=</span> hInstance<span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>hIcon <span class="token operator">=</span> <span class="token function">LoadIcon</span><span class="token punctuation">(</span>hInstance<span class="token punctuation">,</span> IDI_APPLICATION<span class="token punctuation">)</span><span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>hCursor <span class="token operator">=</span> <span class="token function">LoadCursor</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> IDC_ARROW<span class="token punctuation">)</span><span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>hbrBackground <span class="token operator">=</span> <span class="token punctuation">(</span>HBRUSH<span class="token punctuation">)</span><span class="token punctuation">(</span>COLOR_WINDOW <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>lpszMenuName <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>lpszClassName <span class="token operator">=</span> szWindowClass<span class="token punctuation">;</span>
    wcex<span class="token punctuation">.</span>hIconSm <span class="token operator">=</span> <span class="token function">LoadIcon</span><span class="token punctuation">(</span>wcex<span class="token punctuation">.</span>hInstance<span class="token punctuation">,</span> IDI_APPLICATION<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">RegisterClassEx</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wcex<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span>
            <span class="token function">_T</span><span class="token punctuation">(</span><span class="token string">"Call to RegisterClassEx failed!"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">_T</span><span class="token punctuation">(</span><span class="token string">"Windows Desktop Guided Tour"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Store instance handle in our global variable</span>
    hInst <span class="token operator">=</span> hInstance<span class="token punctuation">;</span>

    <span class="token comment">// The parameters to CreateWindow explained:</span>
    <span class="token comment">// szWindowClass: the name of the application</span>
    <span class="token comment">// szTitle: the text that appears in the title bar</span>
    <span class="token comment">// WS_OVERLAPPEDWINDOW: the type of window to create</span>
    <span class="token comment">// CW_USEDEFAULT, CW_USEDEFAULT: initial position (x, y)</span>
    <span class="token comment">// 500, 100: initial size (width, length)</span>
    <span class="token comment">// NULL: the parent of this window</span>
    <span class="token comment">// NULL: this application does not have a menu bar</span>
    <span class="token comment">// hInstance: the first parameter from WinMain</span>
    <span class="token comment">// NULL: not used in this application</span>
    HWND hWnd <span class="token operator">=</span> <span class="token function">CreateWindow</span><span class="token punctuation">(</span>
        szWindowClass<span class="token punctuation">,</span>
        szTitle<span class="token punctuation">,</span>
        WS_OVERLAPPEDWINDOW<span class="token punctuation">,</span>
        CW_USEDEFAULT<span class="token punctuation">,</span> CW_USEDEFAULT<span class="token punctuation">,</span>
        <span class="token number">680</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span>
        <span class="token constant">NULL</span><span class="token punctuation">,</span>
        <span class="token constant">NULL</span><span class="token punctuation">,</span>
        hInstance<span class="token punctuation">,</span>
        <span class="token constant">NULL</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hWnd<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span>
            <span class="token function">_T</span><span class="token punctuation">(</span><span class="token string">"Call to CreateWindow failed!"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">_T</span><span class="token punctuation">(</span><span class="token string">"Windows Desktop Guided Tour"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// The parameters to ShowWindow explained:</span>
    <span class="token comment">// hWnd: the value returned from CreateWindow</span>
    <span class="token comment">// nCmdShow: the fourth parameter from WinMain</span>
    <span class="token function">ShowWindow</span><span class="token punctuation">(</span>hWnd<span class="token punctuation">,</span>
        nCmdShow<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">UpdateWindow</span><span class="token punctuation">(</span>hWnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// &lt;-- WebView2 sample code starts here --&gt;</span>

    HRESULT res <span class="token operator">=</span> <span class="token function">CreateCoreWebView2EnvironmentWithOptions</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span>
        <span class="token generic-function"><span class="token function">Callback</span><span class="token generic class-name"><span class="token operator">&lt;</span>ICoreWebView2CreateCoreWebView2EnvironmentCompletedHandler<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
            <span class="token punctuation">[</span>hWnd<span class="token punctuation">]</span><span class="token punctuation">(</span>HRESULT result<span class="token punctuation">,</span> ICoreWebView2Environment<span class="token operator">*</span> env<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> HRESULT <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//MessageBoxA(hWnd, "createView", "", NULL);</span>
                <span class="token comment">// Create a CoreWebView2Controller and get the associated CoreWebView2 whose parent is the main window hWnd</span>
                env<span class="token operator">-&gt;</span><span class="token function">CreateCoreWebView2Controller</span><span class="token punctuation">(</span>hWnd<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">Callback</span><span class="token generic class-name"><span class="token operator">&lt;</span>ICoreWebView2CreateCoreWebView2ControllerCompletedHandler<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
                    <span class="token punctuation">[</span>hWnd<span class="token punctuation">]</span><span class="token punctuation">(</span>HRESULT result<span class="token punctuation">,</span> ICoreWebView2Controller<span class="token operator">*</span> controller<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> HRESULT <span class="token punctuation">{<!-- --></span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>controller <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            webviewController <span class="token operator">=</span> controller<span class="token punctuation">;</span>
                            webviewController<span class="token operator">-&gt;</span><span class="token function">get_CoreWebView2</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>webviewWindow<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>

                        <span class="token comment">// Add a few settings for the webview</span>
                        <span class="token comment">// The demo step is redundant since the values are the default settings</span>
                        ICoreWebView2Settings<span class="token operator">*</span> Settings<span class="token punctuation">;</span>
                        webviewWindow<span class="token operator">-&gt;</span><span class="token function">get_Settings</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Settings<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        Settings<span class="token operator">-&gt;</span><span class="token function">put_IsScriptEnabled</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        Settings<span class="token operator">-&gt;</span><span class="token function">put_AreDefaultScriptDialogsEnabled</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        Settings<span class="token operator">-&gt;</span><span class="token function">put_IsWebMessageEnabled</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token comment">// Resize WebView to fit the bounds of the parent window</span>
                        RECT bounds<span class="token punctuation">;</span>
                        <span class="token function">GetClientRect</span><span class="token punctuation">(</span>hWnd<span class="token punctuation">,</span> <span class="token operator">&amp;</span>bounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        webviewController<span class="token operator">-&gt;</span><span class="token function">put_Bounds</span><span class="token punctuation">(</span>bounds<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token comment">// Schedule an async task to navigate to Bing</span>

                        HRESULT res <span class="token operator">=</span> webviewWindow<span class="token operator">-&gt;</span><span class="token function">Navigate</span><span class="token punctuation">(</span>L<span class="token string">"https:\\www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        std<span class="token double-colon punctuation">::</span>string sres <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">to_string</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// Step 4 - Navigation events</span>

                        <span class="token comment">// Step 5 - Scripting</span>

                        <span class="token comment">// Step 6 - Communication between host and web content</span>

                        <span class="token keyword">return</span> S_OK<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> S_OK<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// &lt;-- WebView2 sample code ends here --&gt;</span>

    <span class="token comment">// Main message loop:</span>
    MSG msg<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">GetMessage</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>msg<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">TranslateMessage</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">DispatchMessage</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>msg<span class="token punctuation">.</span>wParam<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//  FUNCTION: WndProc(HWND, UINT, WPARAM, LPARAM)</span>
<span class="token comment">//</span>
<span class="token comment">//  PURPOSE:  Processes messages for the main window.</span>
<span class="token comment">//</span>
<span class="token comment">//  WM_DESTROY  - post a quit message and return</span>
LRESULT CALLBACK <span class="token function">WndProc</span><span class="token punctuation">(</span>HWND hWnd<span class="token punctuation">,</span> UINT message<span class="token punctuation">,</span> WPARAM wParam<span class="token punctuation">,</span> LPARAM lParam<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> WM_SIZE<span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>webviewController <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            RECT bounds<span class="token punctuation">;</span>
            <span class="token function">GetClientRect</span><span class="token punctuation">(</span>hWnd<span class="token punctuation">,</span> <span class="token operator">&amp;</span>bounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
            webviewController<span class="token operator">-&gt;</span><span class="token function">put_Bounds</span><span class="token punctuation">(</span>bounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> WM_DESTROY<span class="token operator">:</span>
        <span class="token function">PostQuitMessage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token function">DefWindowProc</span><span class="token punctuation">(</span>hWnd<span class="token punctuation">,</span> message<span class="token punctuation">,</span> wParam<span class="token punctuation">,</span> lParam<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>5.运行结果</strong><br> <img src="https://images2.imgbox.com/c2/96/74Oaumoa_o.png" alt="在这里插入图片描述"></p> 
<p>好了，c++ win32 WebView2的环境搭建以及简单使用就完成了，如果有写的不好的地方，请各位多多谅解啦。各位不要忘了点赞呀，如果有什么问题可以发邮箱交流哟。1719427391@qq.com</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/64372db103bb48d7606966c0686e167c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">（二）、单链表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f76290e75d29bda49482d50aef04b878/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java数组中删除元素或一个数组元素</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>