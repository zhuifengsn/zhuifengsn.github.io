<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Oracle19c Database Concepts数据库零基础随便看看 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Oracle19c Database Concepts数据库零基础随便看看" />
<meta property="og:description" content="目录
官方文档：Oracle Database Database Concepts, 19c
1 Oracle简介
物理存储结构
逻辑存储结构
oracle流程架构
实例内存结构
一、oracle关系数据结构
2 表和表簇
架构对象
表概述
数值类型
日期时间数据类型
Rowid数据类型
表存储
表压缩
表集群
临时表
外部表区块链表
3 索引和按索引组织的表
索引
索引类型
B树索引
索引扫描
索引压缩
位图索引
基于函数的索引
二级索引
4 分区、视图和其他架构对象
分区partition
分区特征
分区策略
分区表
分区索引
视图
物化视图（实例化视图）
实例化视图的刷新方法
序列
维度Dimensions
5 数据完整性
6 数据字典和动态性能视图
数据字典
动态性能视图
二 Oracle数据访问
7 SQL
SQL语句
DLL 语句
连接joins
事务控制语句
优化器
优化器的使用
优化器组件
访问路径
Hints
SQL处理
8 服务器端编程" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/f84e3ae906683c342492a22450e3e8c7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-24T14:19:59+08:00" />
<meta property="article:modified_time" content="2023-10-24T14:19:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Oracle19c Database Concepts数据库零基础随便看看</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%EF%BC%9AOracle%20Database%20Database%20Concepts%2C%2019c-toc" style="margin-left:0px;"><a href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%EF%BC%9AOracle%20Database%20Database%20Concepts%2C%2019c" rel="nofollow">官方文档：Oracle Database Database Concepts, 19c</a></p> 
<p id="1%20Oracle%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#1%20Oracle%E7%AE%80%E4%BB%8B" rel="nofollow">1 Oracle简介</a></p> 
<p id="CNCPT-GUID-10644D21-37DB-4DB4-8AE5-0DF22092E196-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-10644D21-37DB-4DB4-8AE5-0DF22092E196" rel="nofollow">物理存储结构</a></p> 
<p id="CNCPT-GUID-6DA14086-C6A4-422E-8131-BE00B32CD01B-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-6DA14086-C6A4-422E-8131-BE00B32CD01B" rel="nofollow">逻辑存储结构</a></p> 
<p id="CNCPT-GUID-774ED843-9B8E-457A-AF35-BE025D1094A4-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-774ED843-9B8E-457A-AF35-BE025D1094A4" rel="nofollow">oracle流程架构</a></p> 
<p id="%C2%A0%E5%AE%9E%E4%BE%8B%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%AE%9E%E4%BE%8B%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84" rel="nofollow"> 实例内存结构</a></p> 
<p id="%E4%B8%80%E3%80%81oracle%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81oracle%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" rel="nofollow">一、oracle关系数据结构</a></p> 
<p id="2%C2%A0%E8%A1%A8%E5%92%8C%E8%A1%A8%E7%B0%87-toc" style="margin-left:40px;"><a href="#2%C2%A0%E8%A1%A8%E5%92%8C%E8%A1%A8%E7%B0%87" rel="nofollow">2 表和表簇</a></p> 
<p id="CNCPT-GUID-72E247B5-F39A-47F1-9445-72D9221F57E3-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-72E247B5-F39A-47F1-9445-72D9221F57E3" rel="nofollow">架构对象</a></p> 
<p id="%E8%A1%A8%E6%A6%82%E8%BF%B0-toc" style="margin-left:80px;"><a href="#%E8%A1%A8%E6%A6%82%E8%BF%B0" rel="nofollow">表概述</a></p> 
<p id="%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B-toc" style="margin-left:120px;"><a href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B" rel="nofollow">数值类型</a></p> 
<p id="CNCPT-GUID-F5FBE34D-911C-4818-9D25-64B2F1613A9B-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-F5FBE34D-911C-4818-9D25-64B2F1613A9B" rel="nofollow">日期时间数据类型</a></p> 
<p id="Rowid%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-toc" style="margin-left:120px;"><a href="#Rowid%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" rel="nofollow">Rowid数据类型</a></p> 
<p id="%E8%A1%A8%E5%AD%98%E5%82%A8-toc" style="margin-left:120px;"><a href="#%E8%A1%A8%E5%AD%98%E5%82%A8" rel="nofollow">表存储</a></p> 
<p id="%E8%A1%A8%E5%8E%8B%E7%BC%A9-toc" style="margin-left:120px;"><a href="#%E8%A1%A8%E5%8E%8B%E7%BC%A9" rel="nofollow">表压缩</a></p> 
<p id="%E8%A1%A8%E9%9B%86%E7%BE%A4-toc" style="margin-left:80px;"><a href="#%E8%A1%A8%E9%9B%86%E7%BE%A4" rel="nofollow">表集群</a></p> 
<p id="%E4%B8%B4%E6%97%B6%E8%A1%A8-toc" style="margin-left:80px;"><a href="#%E4%B8%B4%E6%97%B6%E8%A1%A8" rel="nofollow">临时表</a></p> 
<p id="CNCPT-GUID-97FC9DFF-A6CF-46CD-9F6F-D88A37C0E79C-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-97FC9DFF-A6CF-46CD-9F6F-D88A37C0E79C" rel="nofollow">外部表区块链表</a></p> 
<p id="CNCPT-GUID-797E49E6-2DCE-4FD4-8E4A-6E761F1383D1-toc" style="margin-left:40px;"><a href="#CNCPT-GUID-797E49E6-2DCE-4FD4-8E4A-6E761F1383D1" rel="nofollow">3 索引和按索引组织的表</a></p> 
<p id="CNCPT-GUID-DE7A95BC-6E4A-47EA-9FC5-B85B54F8CF41-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-DE7A95BC-6E4A-47EA-9FC5-B85B54F8CF41" rel="nofollow">索引</a></p> 
<p id="%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B-toc" style="margin-left:120px;"><a href="#%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B" rel="nofollow">索引类型</a></p> 
<p id="B%E6%A0%91%E7%B4%A2%E5%BC%95-toc" style="margin-left:80px;"><a href="#B%E6%A0%91%E7%B4%A2%E5%BC%95" rel="nofollow">B树索引</a></p> 
<p id="%E7%B4%A2%E5%BC%95%E6%89%AB%E6%8F%8F-toc" style="margin-left:120px;"><a href="#%E7%B4%A2%E5%BC%95%E6%89%AB%E6%8F%8F" rel="nofollow">索引扫描</a></p> 
<p id="%E7%B4%A2%E5%BC%95%E5%8E%8B%E7%BC%A9-toc" style="margin-left:120px;"><a href="#%E7%B4%A2%E5%BC%95%E5%8E%8B%E7%BC%A9" rel="nofollow">索引压缩</a></p> 
<p id="%E4%BD%8D%E5%9B%BE%E7%B4%A2%E5%BC%95-toc" style="margin-left:80px;"><a href="#%E4%BD%8D%E5%9B%BE%E7%B4%A2%E5%BC%95" rel="nofollow">位图索引</a></p> 
<p id="%E5%9F%BA%E4%BA%8E%E5%87%BD%E6%95%B0%E7%9A%84%E7%B4%A2%E5%BC%95-toc" style="margin-left:120px;"><a href="#%E5%9F%BA%E4%BA%8E%E5%87%BD%E6%95%B0%E7%9A%84%E7%B4%A2%E5%BC%95" rel="nofollow">基于函数的索引</a></p> 
<p id="%E4%BA%8C%E7%BA%A7%E7%B4%A2%E5%BC%95-toc" style="margin-left:120px;"><a href="#%E4%BA%8C%E7%BA%A7%E7%B4%A2%E5%BC%95" rel="nofollow">二级索引</a></p> 
<p id="CNCPT-GUID-3E154566-50D6-48C1-BAE5-57EF20266B43-toc" style="margin-left:40px;"><a href="#CNCPT-GUID-3E154566-50D6-48C1-BAE5-57EF20266B43" rel="nofollow">4 分区、视图和其他架构对象</a></p> 
<p id="%E5%88%86%E5%8C%BApartition-toc" style="margin-left:80px;"><a href="#%E5%88%86%E5%8C%BApartition" rel="nofollow">分区partition</a></p> 
<p id="%E5%88%86%E5%8C%BA%E7%89%B9%E5%BE%81-toc" style="margin-left:120px;"><a href="#%E5%88%86%E5%8C%BA%E7%89%B9%E5%BE%81" rel="nofollow">分区特征</a></p> 
<p id="%E5%88%86%E5%8C%BA%E7%AD%96%E7%95%A5-toc" style="margin-left:160px;"><a href="#%E5%88%86%E5%8C%BA%E7%AD%96%E7%95%A5" rel="nofollow">分区策略</a></p> 
<p id="CNCPT-GUID-BCC6F209-3AF4-4517-A3AB-DFE5E4543649-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-BCC6F209-3AF4-4517-A3AB-DFE5E4543649" rel="nofollow">分区表</a></p> 
<p id="CNCPT-GUID-2B43D5F9-04CE-4602-9D95-DDA367CE25F7-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-2B43D5F9-04CE-4602-9D95-DDA367CE25F7" rel="nofollow">分区索引</a></p> 
<p id="%E8%A7%86%E5%9B%BE-toc" style="margin-left:80px;"><a href="#%E8%A7%86%E5%9B%BE" rel="nofollow">视图</a></p> 
<p id="%E7%89%A9%E5%8C%96%E8%A7%86%E5%9B%BE%EF%BC%88%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%A7%86%E5%9B%BE%EF%BC%89-toc" style="margin-left:80px;"><a href="#%E7%89%A9%E5%8C%96%E8%A7%86%E5%9B%BE%EF%BC%88%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%A7%86%E5%9B%BE%EF%BC%89" rel="nofollow">物化视图（实例化视图）</a></p> 
<p id="%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%B7%E6%96%B0%E6%96%B9%E6%B3%95-toc" style="margin-left:120px;"><a href="#%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%B7%E6%96%B0%E6%96%B9%E6%B3%95" rel="nofollow">实例化视图的刷新方法</a></p> 
<p id="%E5%BA%8F%E5%88%97-toc" style="margin-left:80px;"><a href="#%E5%BA%8F%E5%88%97" rel="nofollow">序列</a></p> 
<p id="%E7%BB%B4%E5%BA%A6Dimensions-toc" style="margin-left:80px;"><a href="#%E7%BB%B4%E5%BA%A6Dimensions" rel="nofollow">维度Dimensions</a></p> 
<p id="5%C2%A0%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7-toc" style="margin-left:40px;"><a href="#5%C2%A0%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7" rel="nofollow">5 数据完整性</a></p> 
<p id="CNCPT-GUID-BDF5B748-EB43-4B48-938E-89099069C3BB-toc" style="margin-left:40px;"><a href="#CNCPT-GUID-BDF5B748-EB43-4B48-938E-89099069C3BB" rel="nofollow">6 数据字典和动态性能视图</a></p> 
<p id="CNCPT-GUID-9B9ABE1C-A1E3-464F-8936-978250DC3E1F-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-9B9ABE1C-A1E3-464F-8936-978250DC3E1F" rel="nofollow">数据字典</a></p> 
<p id="%E5%8A%A8%E6%80%81%E6%80%A7%E8%83%BD%E8%A7%86%E5%9B%BE-toc" style="margin-left:120px;"><a href="#%E5%8A%A8%E6%80%81%E6%80%A7%E8%83%BD%E8%A7%86%E5%9B%BE" rel="nofollow">动态性能视图</a></p> 
<p id="%E4%BA%8C%20Oracle%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%20Oracle%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE" rel="nofollow">二 Oracle数据访问</a></p> 
<p id="7%20SQL-toc" style="margin-left:40px;"><a href="#7%20SQL" rel="nofollow">7 SQL</a></p> 
<p id="SQL%E8%AF%AD%E5%8F%A5-toc" style="margin-left:80px;"><a href="#SQL%E8%AF%AD%E5%8F%A5" rel="nofollow">SQL语句</a></p> 
<p id="DLL%C2%A0%E8%AF%AD%E5%8F%A5-toc" style="margin-left:120px;"><a href="#DLL%C2%A0%E8%AF%AD%E5%8F%A5" rel="nofollow">DLL 语句</a></p> 
<p id="%E8%BF%9E%E6%8E%A5joins-toc" style="margin-left:120px;"><a href="#%E8%BF%9E%E6%8E%A5joins" rel="nofollow">连接joins</a></p> 
<p id="%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5-toc" style="margin-left:120px;"><a href="#%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5" rel="nofollow">事务控制语句</a></p> 
<p id="%E4%BC%98%E5%8C%96%E5%99%A8-toc" style="margin-left:80px;"><a href="#%E4%BC%98%E5%8C%96%E5%99%A8" rel="nofollow">优化器</a></p> 
<p id="%E4%BC%98%E5%8C%96%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8-toc" style="margin-left:120px;"><a href="#%E4%BC%98%E5%8C%96%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8" rel="nofollow">优化器的使用</a></p> 
<p id="CNCPT-GUID-D4940716-5F75-43CD-B8B4-45E6BCE5F8EF-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-D4940716-5F75-43CD-B8B4-45E6BCE5F8EF" rel="nofollow">优化器组件</a></p> 
<p id="%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84-toc" style="margin-left:120px;"><a href="#%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84" rel="nofollow">访问路径</a></p> 
<p id="CNCPT-GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB" rel="nofollow">Hints</a></p> 
<p id="SQL%E5%A4%84%E7%90%86-toc" style="margin-left:120px;"><a href="#SQL%E5%A4%84%E7%90%86" rel="nofollow">SQL处理</a></p> 
<p id="-toc" style="margin-left:120px;"></p> 
<p id="8%C2%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E7%BC%96%E7%A8%8B-toc" style="margin-left:40px;"><a href="#8%C2%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E7%BC%96%E7%A8%8B" rel="nofollow">8 服务器端编程</a></p> 
<p id="PL%2FSQL%C2%A0-toc" style="margin-left:80px;"><a href="#PL%2FSQL%C2%A0" rel="nofollow">PL/SQL </a></p> 
<p id="%E8%A7%A6%E5%8F%91%E5%99%A8-toc" style="margin-left:80px;"><a href="#%E8%A7%A6%E5%8F%91%E5%99%A8" rel="nofollow">触发器</a></p> 
<p id="%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E7%B1%BB%E5%9E%8B-toc" style="margin-left:120px;"><a href="#%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E7%B1%BB%E5%9E%8B" rel="nofollow">触发器的类型</a></p> 
<p id="%E4%B8%89%20Oracle%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86-toc" style="margin-left:0px;"><a href="#%E4%B8%89%20Oracle%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86" rel="nofollow">三 Oracle事务管理</a></p> 
<p id="9%C2%A0%E6%95%B0%E6%8D%AE%E5%B9%B6%E5%8F%91%E6%80%A7%E5%92%8C%E4%B8%80%E8%87%B4%E6%80%A7-toc" style="margin-left:40px;"><a href="#9%C2%A0%E6%95%B0%E6%8D%AE%E5%B9%B6%E5%8F%91%E6%80%A7%E5%92%8C%E4%B8%80%E8%87%B4%E6%80%A7" rel="nofollow">9 数据并发性和一致性</a></p> 
<p id="Oracle%20%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB-toc" style="margin-left:80px;"><a href="#Oracle%20%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB" rel="nofollow">Oracle 事务隔离级别</a></p> 
<p id="%E5%B7%B2%E6%8F%90%E4%BA%A4%E8%AF%BB%E5%8F%96%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB-toc" style="margin-left:120px;"><a href="#%E5%B7%B2%E6%8F%90%E4%BA%A4%E8%AF%BB%E5%8F%96%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB" rel="nofollow">已提交读取隔离级别</a></p> 
<p id="%E5%86%99%E5%85%A5%E5%86%B2%E7%AA%81-toc" style="margin-left:160px;"><a href="#%E5%86%99%E5%85%A5%E5%86%B2%E7%AA%81" rel="nofollow">写入冲突</a></p> 
<p id="%E5%8F%AF%E5%BA%8F%E5%88%97%E5%8C%96%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB-toc" style="margin-left:120px;"><a href="#%E5%8F%AF%E5%BA%8F%E5%88%97%E5%8C%96%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB" rel="nofollow">可序列化隔离级别</a></p> 
<p id="CNCPT-GUID-371C3622-540E-490C-BD83-F12CE4CF39C6-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-371C3622-540E-490C-BD83-F12CE4CF39C6" rel="nofollow">只读隔离级别</a></p> 
<p id="Oracle%E7%9A%84%E9%94%81%E5%AE%9A%E6%9C%BA%E5%88%B6-toc" style="margin-left:80px;"><a href="#Oracle%E7%9A%84%E9%94%81%E5%AE%9A%E6%9C%BA%E5%88%B6" rel="nofollow">Oracle的锁定机制</a></p> 
<p id="%E8%87%AA%E5%8A%A8%E9%94%81-toc" style="margin-left:80px;"><a href="#%E8%87%AA%E5%8A%A8%E9%94%81" rel="nofollow">自动锁</a></p> 
<p id="CNCPT-GUID-6D4F7A79-A5F1-470A-ADEF-8888565DE84F-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-6D4F7A79-A5F1-470A-ADEF-8888565DE84F" rel="nofollow">DML锁</a></p> 
<p id="DDL%E9%94%81-toc" style="margin-left:120px;"><a href="#DDL%E9%94%81" rel="nofollow">DDL锁</a></p> 
<p id="%E7%B3%BB%E7%BB%9F%E9%94%81-toc" style="margin-left:120px;"><a href="#%E7%B3%BB%E7%BB%9F%E9%94%81" rel="nofollow">系统锁</a></p> 
<p id="Latch%E9%97%A9%E9%94%81-toc" style="margin-left:160px;"><a href="#Latch%E9%97%A9%E9%94%81" rel="nofollow">Latch闩锁</a></p> 
<p id="%E4%BA%92%E6%96%A5%E5%AF%B9%E8%B1%A1-toc" style="margin-left:160px;"><a href="#%E4%BA%92%E6%96%A5%E5%AF%B9%E8%B1%A1" rel="nofollow">互斥对象</a></p> 
<p id="%E5%86%85%E9%83%A8%E9%94%81-toc" style="margin-left:160px;"><a href="#%E5%86%85%E9%83%A8%E9%94%81" rel="nofollow">内部锁</a></p> 
<p id="10%C2%A0%E4%BA%8B%E5%8A%A1-toc" style="margin-left:40px;"><a href="#10%C2%A0%E4%BA%8B%E5%8A%A1" rel="nofollow">10 事务</a></p> 
<p id="%E4%BA%8B%E5%8A%A1%E7%AE%80%E4%BB%8B-toc" style="margin-left:80px;"><a href="#%E4%BA%8B%E5%8A%A1%E7%AE%80%E4%BB%8B" rel="nofollow">事务简介</a></p> 
<p id="%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6-toc" style="margin-left:80px;"><a href="#%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6" rel="nofollow">事务控制</a></p> 
<p id="%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A-toc" style="margin-left:120px;"><a href="#%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A" rel="nofollow">事务回滚</a></p> 
<p id="%E4%BA%8B%E5%8A%A1%E6%8F%90%E4%BA%A4-toc" style="margin-left:120px;"><a href="#%E4%BA%8B%E5%8A%A1%E6%8F%90%E4%BA%A4" rel="nofollow">事务提交</a></p> 
<p id="%E4%BA%8B%E5%8A%A1%E9%98%B2%E6%8A%A4-toc" style="margin-left:80px;"><a href="#%E4%BA%8B%E5%8A%A1%E9%98%B2%E6%8A%A4" rel="nofollow">事务防护</a></p> 
<p id="%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%BF%9E%E7%BB%AD%E6%80%A7-toc" style="margin-left:80px;"><a href="#%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%BF%9E%E7%BB%AD%E6%80%A7" rel="nofollow">应用程序连续性</a></p> 
<p id="%E8%87%AA%E6%B2%BB%E4%BA%8B%E5%8A%A1-toc" style="margin-left:80px;"><a href="#%E8%87%AA%E6%B2%BB%E4%BA%8B%E5%8A%A1" rel="nofollow">自治事务</a></p> 
<p id="CNCPT-GUID-47231512-4A3E-4E59-86BD-332E1FB88A88-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-47231512-4A3E-4E59-86BD-332E1FB88A88" rel="nofollow">分布式事务</a></p> 
<p id="%E5%9B%9B%C2%A0Oracle%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%C2%A0Oracle%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84" rel="nofollow">四 Oracle 数据库存储结构</a></p> 
<p id="CNCPT-GUID-FFA872E1-7F63-4DC5-8A35-F21394AB4595-toc" style="margin-left:40px;"><a href="#CNCPT-GUID-FFA872E1-7F63-4DC5-8A35-F21394AB4595" rel="nofollow">11 物理存储结构</a></p> 
<p id="CNCPT-GUID-56DFECE5-FB81-494F-9AB8-25F120A1BDDC-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-56DFECE5-FB81-494F-9AB8-25F120A1BDDC" rel="nofollow">物理存储结构简介</a></p> 
<p id="%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E4%BB%B6%E7%9A%84%E6%9C%BA%E5%88%B6-toc" style="margin-left:120px;"><a href="#%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E4%BB%B6%E7%9A%84%E6%9C%BA%E5%88%B6" rel="nofollow">存储数据库文件的机制</a></p> 
<p id="%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6" rel="nofollow">数据文件</a></p> 
<p id="%E6%B0%B8%E4%B9%85%E5%92%8C%E4%B8%B4%E6%97%B6%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:120px;"><a href="#%E6%B0%B8%E4%B9%85%E5%92%8C%E4%B8%B4%E6%97%B6%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6" rel="nofollow">永久和临时数据文件</a></p> 
<p id="%E8%81%94%E6%9C%BA%E5%92%8C%E8%84%B1%E6%9C%BA%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:120px;"><a href="#%E8%81%94%E6%9C%BA%E5%92%8C%E8%84%B1%E6%9C%BA%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6" rel="nofollow">联机和脱机数据文件</a></p> 
<p id="%E6%8E%A7%E5%88%B6%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%E6%8E%A7%E5%88%B6%E6%96%87%E4%BB%B6" rel="nofollow">控制文件</a></p> 
<p id="%E8%81%94%E6%9C%BA%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97-toc" style="margin-left:80px;"><a href="#%E8%81%94%E6%9C%BA%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97" rel="nofollow">联机重做日志</a></p> 
<p id="CNCPT-GUID-26BC209A-999D-4606-84F4-D408A9809232-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-26BC209A-999D-4606-84F4-D408A9809232" rel="nofollow">在线重做日志切换</a></p> 
<p id="%E8%81%94%E6%9C%BA%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%9A%E4%B8%AA%E5%89%AF%E6%9C%AC-toc" style="margin-left:120px;"><a href="#%E8%81%94%E6%9C%BA%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%9A%E4%B8%AA%E5%89%AF%E6%9C%AC" rel="nofollow">联机重做日志文件的多个副本</a></p> 
<p id="%E5%AD%98%E6%A1%A3%E7%9A%84%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6-toc" style="margin-left:120px;"><a href="#%E5%AD%98%E6%A1%A3%E7%9A%84%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6" rel="nofollow">存档的重做日志文件</a></p> 
<p id="%E5%9C%A8%E7%BA%BF%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E7%9A%84%E7%BB%93%E6%9E%84-toc" style="margin-left:120px;"><a href="#%E5%9C%A8%E7%BA%BF%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E7%9A%84%E7%BB%93%E6%9E%84" rel="nofollow">在线重做日志的结构</a></p> 
<p id="12%20%E9%80%BB%E8%BE%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84-toc" style="margin-left:40px;"><a href="#12%20%E9%80%BB%E8%BE%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84" rel="nofollow">12 逻辑存储结构</a></p> 
<p id="%E9%80%BB%E8%BE%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B-toc" style="margin-left:80px;"><a href="#%E9%80%BB%E8%BE%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B" rel="nofollow">逻辑存储结构简介</a></p> 
<p id="%E6%9C%AC%E5%9C%B0%E7%AE%A1%E7%90%86%E7%9A%84%E8%A1%A8%E7%A9%BA%E9%97%B4-toc" style="margin-left:160px;"><a href="#%E6%9C%AC%E5%9C%B0%E7%AE%A1%E7%90%86%E7%9A%84%E8%A1%A8%E7%A9%BA%E9%97%B4" rel="nofollow">本地管理的表空间</a></p> 
<p id="CNCPT-GUID-E0A29F9D-3987-46BE-AD07-EE27068FDD92-toc" style="margin-left:160px;"><a href="#CNCPT-GUID-E0A29F9D-3987-46BE-AD07-EE27068FDD92" rel="nofollow">字典管理的表空间</a></p> 
<p id="CNCPT-GUID-1AED5140-E820-436C-BEB7-2A985524911E-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-1AED5140-E820-436C-BEB7-2A985524911E" rel="nofollow">数据块</a></p> 
<p id="%E6%95%B0%E6%8D%AE%E5%9D%97%E6%A0%BC%E5%BC%8F-toc" style="margin-left:120px;"><a href="#%E6%95%B0%E6%8D%AE%E5%9D%97%E6%A0%BC%E5%BC%8F" rel="nofollow">数据块格式</a></p> 
<p id="CNCPT-GUID-D993A749-93D0-448C-BDC8-330D805AC481-toc" style="margin-left:160px;"><a href="#CNCPT-GUID-D993A749-93D0-448C-BDC8-330D805AC481" rel="nofollow">行格式</a></p> 
<p id="%E6%95%B0%E6%8D%AE%E5%9D%97%E4%B8%AD%E7%9A%84%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86-toc" style="margin-left:120px;"><a href="#%E6%95%B0%E6%8D%AE%E5%9D%97%E4%B8%AD%E7%9A%84%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86" rel="nofollow">数据块中的空间管理</a></p> 
<p id="%E9%93%BE%E6%8E%A5%E5%92%8C%E8%BF%81%E7%A7%BB%E7%9A%84%E8%A1%8C-toc" style="margin-left:160px;"><a href="#%E9%93%BE%E6%8E%A5%E5%92%8C%E8%BF%81%E7%A7%BB%E7%9A%84%E8%A1%8C" rel="nofollow">链接和迁移的行</a></p> 
<p id="%E7%B4%A2%E5%BC%95%E5%9D%97-toc" style="margin-left:120px;"><a href="#%E7%B4%A2%E5%BC%95%E5%9D%97" rel="nofollow">索引块</a></p> 
<p id="CNCPT-GUID-84F0C09B-222C-4CA6-85F2-807445844E51-toc" style="margin-left:160px;"><a href="#CNCPT-GUID-84F0C09B-222C-4CA6-85F2-807445844E51" rel="nofollow">索引块的类型</a></p> 
<p id="%E6%89%A9%E5%B1%95%E6%95%B0%E6%8D%AE%E5%9D%97extend-toc" style="margin-left:80px;"><a href="#%E6%89%A9%E5%B1%95%E6%95%B0%E6%8D%AE%E5%9D%97extend" rel="nofollow">扩展数据块extend</a></p> 
<p id="%E5%88%86%E6%AE%B5segments-toc" style="margin-left:80px;"><a href="#%E5%88%86%E6%AE%B5segments" rel="nofollow">分段segments</a></p> 
<p id="%E7%94%A8%E6%88%B7%E6%AE%B5-toc" style="margin-left:120px;"><a href="#%E7%94%A8%E6%88%B7%E6%AE%B5" rel="nofollow">用户段</a></p> 
<p id="%E4%B8%B4%E6%97%B6%E6%AE%B5-toc" style="margin-left:120px;"><a href="#%E4%B8%B4%E6%97%B6%E6%AE%B5" rel="nofollow">临时段</a></p> 
<p id="%E6%92%A4%E6%B6%88%E6%AE%B5undo%20segments-toc" style="margin-left:120px;"><a href="#%E6%92%A4%E6%B6%88%E6%AE%B5undo%20segments" rel="nofollow">撤消段undo segments</a></p> 
<p id="%E8%A1%A8%E7%A9%BA%E9%97%B4-toc" style="margin-left:80px;"><a href="#%E8%A1%A8%E7%A9%BA%E9%97%B4" rel="nofollow">表空间</a></p> 
<p id="%E6%B0%B8%E4%B9%85%E8%A1%A8%E7%A9%BA%E9%97%B4permanent%20tablespaces-toc" style="margin-left:120px;"><a href="#%E6%B0%B8%E4%B9%85%E8%A1%A8%E7%A9%BA%E9%97%B4permanent%20tablespaces" rel="nofollow">永久表空间permanent tablespaces</a></p> 
<p id="SYSAUX%E8%A1%A8%E7%A9%BA%E9%97%B4-toc" style="margin-left:160px;"><a href="#SYSAUX%E8%A1%A8%E7%A9%BA%E9%97%B4" rel="nofollow">SYSAUX表空间</a></p> 
<p id="%E6%92%A4%E6%B6%88%E8%A1%A8%E7%A9%BA%E9%97%B4Undo%20Tablespaces-toc" style="margin-left:160px;"><a href="#%E6%92%A4%E6%B6%88%E8%A1%A8%E7%A9%BA%E9%97%B4Undo%20Tablespaces" rel="nofollow">撤消表空间Undo Tablespaces</a></p> 
<p id="%E5%BD%B1%E5%AD%90%E8%A1%A8%E7%A9%BA%E9%97%B4Shadow%20Tablespaces-toc" style="margin-left:160px;"><a href="#%E5%BD%B1%E5%AD%90%E8%A1%A8%E7%A9%BA%E9%97%B4Shadow%20Tablespaces" rel="nofollow">影子表空间Shadow Tablespaces</a></p> 
<p id="CNCPT-GUID-44C7652F-78D8-410A-8717-FA43F1D5E645-toc" style="margin-left:200px;"><a href="#CNCPT-GUID-44C7652F-78D8-410A-8717-FA43F1D5E645" rel="nofollow">影子表空间的用途</a></p> 
<p id="%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-toc" style="margin-left:200px;"><a href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" rel="nofollow">工作原理</a></p> 
<p id="%E4%B8%B4%E6%97%B6%E8%A1%A8%E7%A9%BA%E9%97%B4-toc" style="margin-left:120px;"><a href="#%E4%B8%B4%E6%97%B6%E8%A1%A8%E7%A9%BA%E9%97%B4" rel="nofollow">临时表空间</a></p> 
<p id="%E8%A1%A8%E7%A9%BA%E9%97%B4%E6%A8%A1%E5%BC%8F-toc" style="margin-left:120px;"><a href="#%E8%A1%A8%E7%A9%BA%E9%97%B4%E6%A8%A1%E5%BC%8F" rel="nofollow">表空间模式</a></p> 
<p id="CNCPT-GUID-274AC80E-624C-4B23-A88C-7E73C22C6040-toc" style="margin-left:160px;"><a href="#CNCPT-GUID-274AC80E-624C-4B23-A88C-7E73C22C6040" rel="nofollow">读/写和只读表空间</a></p> 
<p id="CNCPT-GUID-DBE61726-0DE6-4A85-A49B-9F5587234A87-toc" style="margin-left:160px;"><a href="#CNCPT-GUID-DBE61726-0DE6-4A85-A49B-9F5587234A87" rel="nofollow">联机和脱机表空间</a></p> 
<p id="CNCPT-GUID-D02B2220-E6F5-40D9-AFB5-BC69BCEF6CD4-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-D02B2220-E6F5-40D9-AFB5-BC69BCEF6CD4" rel="nofollow">表空间文件大小</a></p> 
<p id="13%E3%80%81Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E4%BE%8B-toc" style="margin-left:40px;"><a href="#13%E3%80%81Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E4%BE%8B" rel="nofollow">13、Oracle数据库实例</a></p> 
<p id="%E5%AE%9E%E4%BE%8B%E7%AE%80%E4%BB%8B-toc" style="margin-left:80px;"><a href="#%E5%AE%9E%E4%BE%8B%E7%AE%80%E4%BB%8B" rel="nofollow">实例简介</a></p> 
<p id="%E5%AE%9E%E4%BE%8B%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD-toc" style="margin-left:80px;"><a href="#%E5%AE%9E%E4%BE%8B%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD" rel="nofollow">实例启动和关闭</a></p> 
<p id="CNCPT-GUID-189ADDB5-1E71-4924-8371-F5B2EFB5B304-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-189ADDB5-1E71-4924-8371-F5B2EFB5B304" rel="nofollow">如何启动实例</a></p> 
<p id="%E5%A6%82%E4%BD%95%E6%8C%82%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:120px;"><a href="#%E5%A6%82%E4%BD%95%E6%8C%82%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">如何挂载数据库</a></p> 
<p id="%E5%A6%82%E4%BD%95%E6%89%93%E5%BC%80%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:120px;"><a href="#%E5%A6%82%E4%BD%95%E6%89%93%E5%BC%80%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">如何打开数据库</a></p> 
<p id="%E5%85%B3%E9%97%AD%E6%A8%A1%E5%BC%8F-toc" style="margin-left:120px;"><a href="#%E5%85%B3%E9%97%AD%E6%A8%A1%E5%BC%8F" rel="nofollow">关闭模式</a></p> 
<p id="%E5%A6%82%E4%BD%95%E5%85%B3%E9%97%AD%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:120px;"><a href="#%E5%A6%82%E4%BD%95%E5%85%B3%E9%97%AD%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">如何关闭数据库</a></p> 
<p id="%E6%A3%80%E6%9F%A5%E7%82%B9-toc" style="margin-left:80px;"><a href="#%E6%A3%80%E6%9F%A5%E7%82%B9" rel="nofollow">检查点</a></p> 
<p id="%E5%AE%9E%E4%BE%8B%E6%81%A2%E5%A4%8D-toc" style="margin-left:80px;"><a href="#%E5%AE%9E%E4%BE%8B%E6%81%A2%E5%A4%8D" rel="nofollow">实例恢复</a></p> 
<p id="%E5%BD%93%20Oracle%E9%9C%80%E8%A6%81%E6%89%A7%E8%A1%8C%E5%AE%9E%E4%BE%8B%E6%81%A2%E5%A4%8D%E6%97%B6-toc" style="margin-left:120px;"><a href="#%E5%BD%93%20Oracle%E9%9C%80%E8%A6%81%E6%89%A7%E8%A1%8C%E5%AE%9E%E4%BE%8B%E6%81%A2%E5%A4%8D%E6%97%B6" rel="nofollow">当 Oracle需要执行实例恢复时</a></p> 
<p id="CNCPT-GUID-EC07F1A7-EAB6-4B56-8065-CDDEA6969D1E-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-EC07F1A7-EAB6-4B56-8065-CDDEA6969D1E" rel="nofollow">实例恢复阶段</a></p> 
<p id="%E5%8F%82%E6%95%B0%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%E5%8F%82%E6%95%B0%E6%96%87%E4%BB%B6" rel="nofollow">参数文件</a></p> 
<p id="CNCPT-GUID-E329D228-F334-4506-84C1-EC030032C228-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-E329D228-F334-4506-84C1-EC030032C228" rel="nofollow">诊断文件</a></p> 
<p id="14%E3%80%81%E5%86%85%E5%AD%98%E6%9E%B6%E6%9E%84-toc" style="margin-left:40px;"><a href="#14%E3%80%81%E5%86%85%E5%AD%98%E6%9E%B6%E6%9E%84" rel="nofollow">14、内存架构</a></p> 
<p id="%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B-toc" style="margin-left:80px;"><a href="#%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B" rel="nofollow">内存结构简介</a></p> 
<p id="CNCPT-GUID-02378E7A-865B-456B-8725-1E73D16A34BE-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-02378E7A-865B-456B-8725-1E73D16A34BE" rel="nofollow">基本内存结构</a></p> 
<p id="%E7%94%A8%E6%88%B7%E5%85%A8%E7%90%83%E5%8C%BA%E5%9F%9FUGA-toc" style="margin-left:80px;"><a href="#%E7%94%A8%E6%88%B7%E5%85%A8%E7%90%83%E5%8C%BA%E5%9F%9FUGA" rel="nofollow">用户全球区域UGA</a></p> 
<p id="PGA%20System%20Global%20Area-toc" style="margin-left:80px;"><a href="#PGA%20System%20Global%20Area" rel="nofollow">PGA System Global Area</a></p> 
<p id="SGA%20Program%20Global%20Area-toc" style="margin-left:80px;"><a href="#SGA%20Program%20Global%20Area" rel="nofollow">SGA Program Global Area</a></p> 
<p id="1.%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%93%E5%86%B2%E5%8C%BA-toc" style="margin-left:120px;"><a href="#1.%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%93%E5%86%B2%E5%8C%BA" rel="nofollow">1.数据库缓冲区</a></p> 
<p id="CNCPT-GUID-BC14C103-F8A6-4E72-A451-EECA62F13D85-toc" style="margin-left:160px;"><a href="#CNCPT-GUID-BC14C103-F8A6-4E72-A451-EECA62F13D85" rel="nofollow">缓冲状态</a></p> 
<p id="CNCPT-GUID-D1429BAA-6543-4B34-93DB-C8F33D497B53-toc" style="margin-left:160px;"><a href="#CNCPT-GUID-D1429BAA-6543-4B34-93DB-C8F33D497B53" rel="nofollow">缓冲区 I/O</a></p> 
<p id="%E7%BC%93%E5%86%B2%E5%8C%BA%E8%AF%BB%E5%8F%96-toc" style="margin-left:200px;"><a href="#%E7%BC%93%E5%86%B2%E5%8C%BA%E8%AF%BB%E5%8F%96" rel="nofollow">缓冲区读取</a></p> 
<p id="%E7%BC%93%E5%86%B2%E6%B1%A0-toc" style="margin-left:160px;"><a href="#%E7%BC%93%E5%86%B2%E6%B1%A0" rel="nofollow">缓冲池</a></p> 
<p id="2.%E5%85%B1%E4%BA%AB%E6%B1%A0-toc" style="margin-left:120px;"><a href="#2.%E5%85%B1%E4%BA%AB%E6%B1%A0" rel="nofollow">2.共享池</a></p> 
<p id="3.%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E7%BC%93%E5%86%B2%E5%8C%BA-toc" style="margin-left:120px;"><a href="#3.%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E7%BC%93%E5%86%B2%E5%8C%BA" rel="nofollow">3.重做日志缓冲区</a></p> 
<p id="4.%20Large%20Pool-toc" style="margin-left:120px;"><a href="#4.%20Large%20Pool" rel="nofollow">4. Large Pool</a></p> 
<p id="15%C2%A0%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84-toc" style="margin-left:40px;"><a href="#15%C2%A0%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84" rel="nofollow">15 进程架构</a></p> 
<p id="%E8%BF%9B%E7%A8%8B-toc" style="margin-left:80px;"><a href="#%E8%BF%9B%E7%A8%8B" rel="nofollow">进程</a></p> 
<p id="CNCPT-GUID-310F28E9-793A-4816-87CB-FDB54AB68957-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-310F28E9-793A-4816-87CB-FDB54AB68957" rel="nofollow">服务器进程</a></p> 
<p id="CNCPT-GUID-13FE4098-61DF-4D76-882D-551A88E0EBB8-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-13FE4098-61DF-4D76-882D-551A88E0EBB8" rel="nofollow">Oracle 数据库如何创建服务器进程</a></p> 
<p id="%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B-toc" style="margin-left:80px;"><a href="#%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B" rel="nofollow">后台进程</a></p> 
<p id="%E5%BC%BA%E5%88%B6%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B-toc" style="margin-left:120px;"><a href="#%E5%BC%BA%E5%88%B6%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B" rel="nofollow">强制后台进程</a></p> 
<p id="%E8%BF%9B%E7%A8%8B%E7%9B%91%E8%A7%86%E5%99%A8%E8%BF%9B%E7%A8%8B%20%EF%BC%88PMON%EF%BC%89%20%E7%BB%84-toc" style="margin-left:160px;"><a href="#%E8%BF%9B%E7%A8%8B%E7%9B%91%E8%A7%86%E5%99%A8%E8%BF%9B%E7%A8%8B%20%EF%BC%88PMON%EF%BC%89%20%E7%BB%84" rel="nofollow">进程监视器进程 （PMON） 组</a></p> 
<p id="%E5%8F%AF%E9%80%89%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B-toc" style="margin-left:120px;"><a href="#%E5%8F%AF%E9%80%89%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B" rel="nofollow">可选后台进程</a></p> 
<p id="%E4%BB%8E%E8%BF%9B%E7%A8%8B-toc" style="margin-left:120px;"><a href="#%E4%BB%8E%E8%BF%9B%E7%A8%8B" rel="nofollow">从进程</a></p> 
<p id="16%E3%80%81%E5%BA%94%E7%94%A8%E5%92%8COracle%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84-toc" style="margin-left:40px;"><a href="#16%E3%80%81%E5%BA%94%E7%94%A8%E5%92%8COracle%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84" rel="nofollow">16、应用和Oracle网络服务体系结构</a></p> 
<p id="Oracle%20%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84-toc" style="margin-left:80px;"><a href="#Oracle%20%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84" rel="nofollow">Oracle 应用架构</a></p> 
<p id="Oracle%20%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84-toc" style="margin-left:80px;"><a href="#Oracle%20%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84" rel="nofollow">Oracle 网络服务架构</a></p> 
<p id="17%C2%A0%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E5%91%98%E5%92%8C%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98-toc" style="margin-left:40px;"><a href="#17%C2%A0%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E5%91%98%E5%92%8C%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98" rel="nofollow">17 面向数据库管理员和开发人员</a></p> 
<p id="%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8-toc" style="margin-left:80px;"><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8" rel="nofollow">数据库安全</a></p> 
<p id="%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7-toc" style="margin-left:80px;"><a href="#%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7" rel="nofollow">高可用性</a></p> 
<p id="18%C2%A0%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E5%91%98%E7%9A%84%E6%A6%82%E5%BF%B5-toc" style="margin-left:40px;"><a href="#18%C2%A0%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E5%91%98%E7%9A%84%E6%A6%82%E5%BF%B5" rel="nofollow">18 数据库管理员的概念</a></p> 
<p id="CNCPT-GUID-DCE361D9-B486-43B4-B4FD-5722A93203F0-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-DCE361D9-B486-43B4-B4FD-5722A93203F0" rel="nofollow">备份和恢复</a></p> 
<p id="CNCPT-GUID-71AC5772-3143-40C4-86EC-93367FB85B2A-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-71AC5772-3143-40C4-86EC-93367FB85B2A" rel="nofollow">备份和恢复技术</a></p> 
<p id="CNCPT-GUID-27DFFB35-0A8E-4435-97B1-726A48419DC6-toc" style="margin-left:120px;"><a href="#CNCPT-GUID-27DFFB35-0A8E-4435-97B1-726A48419DC6" rel="nofollow">数据库备份</a></p> 
<p id="CNCPT-GUID-BCE6455B-0E49-4835-B9AB-2BC70F673F88-toc" style="margin-left:160px;"><a href="#CNCPT-GUID-BCE6455B-0E49-4835-B9AB-2BC70F673F88" rel="nofollow">数据修复</a></p> 
<p id="%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86-toc" style="margin-left:80px;"><a href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86" rel="nofollow">内存管理</a></p> 
<p id="CNCPT-GUID-045B9963-F53D-427C-87B7-04858B22D4D8-toc" style="margin-left:80px;"><a href="#CNCPT-GUID-045B9963-F53D-427C-87B7-04858B22D4D8" rel="nofollow">性能和调优</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2>官方文档：<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/index.html" rel="nofollow" title="Oracle Database Database Concepts, 19c">Oracle Database Database Concepts, 19c</a></h2> 
<p>注：edge可以右击转化为中文</p> 
<h3 id="1%20Oracle%E7%AE%80%E4%BB%8B">1 Oracle简介</h3> 
<p><strong>数据库管理系统 </strong>（DBMS） 是控制数据的存储、组织和检索的软件。RDBMS的一个特征是物理数据存储独立于逻辑数据结构。</p> 
<p><strong>表</strong>描述实体，<strong>索引</strong>是一种可选数据结构，可以在表的一列或多列上创建，索引可以提高数据检索的性能。</p> 
<p><strong>事务</strong>是包含一个或多个 SQL 语句的逻辑原子工作单元。</p> 
<p><strong>数据库服务器</strong>是信息管理的关键。</p> 
<p>Oracle 数据库服务器由一个数据库和至少一个<strong>数据库</strong>实例（通常简称为<strong>实例</strong>）组成。</p> 
<blockquote> 
 <p>由于实例和数据库的连接非常紧密，因此术语 Oracle 数据库有时用于指代实例和<strong>数据库</strong>。从最严格的意义上讲，这些术语具有以下含义：</p> 
 <ul><li> <p>数据库</p> <p>数据库是位于磁盘上的一组文件，用于存储数据。这些文件可以独立于数据库实例存在。</p> </li><li> <p>数据库实例</p> <p>实例是一组管理数据库文件的内存结构。该实例由一个共享内存区域（称为<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-78C0E867-233A-4857-B9FE-A3852A9B7BDF" rel="nofollow" title="系统全局区域 （SGA）">系统全局区域 （SGA）</a>）和一组后台进程组成。实例可以独立于数据库文件存在。</p> </li></ul> 
</blockquote> 
<p><img alt="" height="891" src="https://images2.imgbox.com/d2/df/C41kkkBj_o.png" width="805"></p> 
<p><strong>数据库整合</strong>是将数据从一个或多个非 CDB 移动到 CDB 的一般过程。</p> 
<p>Oracle <strong>分片</strong>是一种基于跨多个 Oracle 数据库对数据进行水平分区的数据库扩展技术。</p> 
<h4 id="CNCPT-GUID-10644D21-37DB-4DB4-8AE5-0DF22092E196" style="margin-left:0px;text-align:left;"><strong>物理存储结构</strong></h4> 
<div style="margin-left:0;text-align:left;"> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">物理数据库结构是存储数据的文件。</span></span></span></p> 
 <blockquote> 
  <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><code>CREATE DATABASE</code>执行语句时，将创建以下文件：</span></span></span></p> 
  <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据文件</span></span></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个 Oracle 数据库都有一个或多个物理数据文件，其中包含所有数据库数据。逻辑数据库结构（如表和索引）的数据以物理方式存储在数据文件中。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">控制文件</span></span></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个 Oracle 数据库都有一个<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-DF498605-D186-451B-87AA-73DF396AD599" rel="nofollow" title="控制文件">控制文件</a>。控制文件包含指定数据库物理结构的元数据，包括数据库名称以及数据库文件的名称和位置。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">联机重做日志文件</span></span></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个 Oracle 数据库都有一个联机重做日志，该日志是一组两个或多个<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-2A8BC112-AB70-4B06-9F85-FE975861CEE0" rel="nofollow" title="联机重做">联机重做</a>日志文件。联机重做日志由重做条目（也称为<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-F24A4593-5E47-4D06-B9D6-0061D288373C" rel="nofollow" title="重做">重做</a>日志记录）组成，这些条目记录对数据所做的所有更改。</span></span></span></p> </li></ul> 
 </blockquote> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">许多其他文件对于 Oracle 数据库服务器的功能很重要。其中包括参数文件和网络文件。备份文件和存档的重做日志文件是对于备份和恢复很重要的脱机文件。</span></span></span></p> 
</div> 
<h4 id="CNCPT-GUID-6DA14086-C6A4-422E-8131-BE00B32CD01B">逻辑存储结构</h4> 
<p>逻辑存储结构使 Oracle 数据库能够对磁盘空间的使用进行精细控制。</p> 
<blockquote> 
 <p>本主题讨论逻辑存储结构：</p> 
 <ul><li> <p>数据块</p> <p>在最精细的粒度级别，Oracle 数据库数据存储在数据块中。一个<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-2141C31D-6752-4260-91CE-99B4CC557247" rel="nofollow" title="数据块">数据块</a>对应于磁盘上的特定字节数。</p> </li><li> <p>程度</p> <p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-C56D833A-B3D3-4B85-AAB4-334F7CF3F5E9" rel="nofollow" title="范围">范围</a>是在单个分配中获得的特定数量的逻辑连续数据块，用于存储特定类型的信息。</p> </li><li> <p>段</p> <p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-EC12AA68-8C89-43B3-B1F9-3AABF7CAEB9F" rel="nofollow" title="线段">线段</a>是为用户对象（例如，表或索引）、撤消数据或临时<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-297B963A-989C-4720-B061-A2352FF72892" rel="nofollow" title="数据">数据</a>分配的一组盘区。</p> </li><li> <p>表空间</p> <p>数据库分为称为表空间的逻辑存储单元。<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-AA66891C-71B2-4D55-8F64-0E427AE24E88" rel="nofollow" title="表空间">表空间</a>是段的逻辑容器。每个表空间至少包含一个数据文件</p> </li></ul> 
</blockquote> 
<h4 id="CNCPT-GUID-774ED843-9B8E-457A-AF35-BE025D1094A4">oracle流程架构</h4> 
<p>进程是操作系统中的一种机制，可以运行一系列步骤。</p> 
<blockquote> 
 <p>就本主题而言，线程等效于进程。Oracle 数据库实例具有以下类型的进程：</p> 
 <ul><li> <p>客户端进程</p> <p>创建和维护这些进程是为了运行应用程序或 Oracle 工具的软件代码。大多数环境都有用于客户端进程的单独计算机。</p> </li><li> <p>后台进程</p> <p>这些进程整合了原本由为每个客户端进程运行的多个 Oracle 数据库程序处理的功能。后台进程异步执行 I/O 并监控其他 Oracle 数据库进程，以提供更高的并行性，从而提高性能和可靠性。</p> </li><li> <p>服务器进程</p> <p>这些进程与客户端进程通信，并与 Oracle 数据库交互以满足请求。</p> </li></ul> 
</blockquote> 
<p>Oracle 进程包括服务器进程和后台进程。在大多数环境中，Oracle 进程和客户端进程在不同的计算机上运行。</p> 
<h4 id="%C2%A0%E5%AE%9E%E4%BE%8B%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84"> 实例内存结构</h4> 
<blockquote> 
 <p>系统全局区域 （SGA）：SGA 是一组<strong>共享</strong>内存结构，其中包含一个数据库实例的数据和控制信息。SGA 组件的示例包括数据库缓冲区缓存和共享 SQL 区域。</p> 
 <p>计划全球区域 （PGA）：PGA 是包含服务器或后台进程的数据和控制信息的内存区域。进入PGA是该过程独有的。每个服务器进程和后台进程<strong>都有自己</strong>的 PGA。</p> 
</blockquote> 
<h2 id="%E4%B8%80%E3%80%81oracle%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">一、oracle关系数据结构</h2> 
<h3 id="2%C2%A0%E8%A1%A8%E5%92%8C%E8%A1%A8%E7%B0%87">2 表和表簇</h3> 
<h4 id="CNCPT-GUID-72E247B5-F39A-47F1-9445-72D9221F57E3">架构对象</h4> 
<p>数据库架构是数据结构的逻辑容器，称为<strong>架构对象，</strong>架构对象的示例包括表和索引等。</p> 
<p> 某些架构对象将数据<span style="color:#0d0016;"><strong>存储</strong></span>在称为<span style="color:#fe2c24;"><strong>段</strong></span>的逻辑存储结构类型中。</p> 
<blockquote> 
 <p>下图显示了表段和索引段、表空间和数据文件的可能配置。</p> 
 <ul><li>一个表空间有多个数据文件</li><li>一个表的数据段可能跨越两个数据文件</li><li>一个段不能跨越多个表空间</li></ul> 
</blockquote> 
<p><img alt="" height="785" src="https://images2.imgbox.com/7c/f2/6p1xgUzu_o.png" width="855"></p> 
<p>所有 Oracle 数据库都包含默认管理帐户，创建数据库时，也会自动创建管理帐户。</p> 
<h4 id="%E8%A1%A8%E6%A6%82%E8%BF%B0">表概述</h4> 
<p>表是 Oracle 中数据组织的<strong>基本单位</strong>。</p> 
<p>表定义包括<strong>表名</strong>和<strong>列集。</strong>表可以包含虚拟列，与非虚拟列不同，<strong>虚拟列</strong>不占用磁盘空间。不可见列是用户指定的列，其值仅在按名称显式指定列时才可见。</p> 
<p><strong>行</strong>是与表中的记录对应的列信息的集合。</p> 
<h5 id="%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B">数值类型</h5> 
<blockquote> 
 <p>VARCHAR2（）：用于存储可变长度的字符数据。当存储的数据长度小于指定的长度时，<strong>只会占用</strong>实际使用的字节空间。</p> 
 <p>CHAR（）：用于存储固定长度的字符数据。如果存储的数据长度小于指定长度，会在数据后<strong>补空格</strong>字符。</p> 
 <p>NCHAR（）：用于存储固定长度的 Unicode 字符数据（即支持多语言字符集）。它可以存储 1 到 2000 字符，每个字符占据两个字节的存储空间。</p> 
 <p>NVARCHAR2（）：用于存储可变长度的 Unicode 字符数据。它可以存储 1 到 4000 字符。每个字符占据两个字节的存储空间。</p> 
</blockquote> 
<h5 id="CNCPT-GUID-F5FBE34D-911C-4818-9D25-64B2F1613A9B">日期时间数据类型</h5> 
<blockquote> 
 <p><strong>日期时间</strong>数据类型是<span style="color:#fe2c24;">DATE</span>和<span style="color:#fe2c24;">TIMESTAMP</span>，Oracle数据库为时间戳提供全面的时区支持。</p> 
 <p>DATE 类型用于存储日期和时间，精确到秒级。日期存储在每个7字节的固定长度字段中，对应于世纪、年、月、日、小时、分钟和秒。格式 “DD-MON-YYYY HH24:MI:SS”。</p> 
 <p>TIMESTAMP：TIMESTAMP 类型用于存储日期、时间和纳秒级的时间戳数据，表示精度从秒到纳秒的不同级别。TIMESTAMP 类型占用 11 个字节或更多的存储空间，并且按照 “YYYY-MM-DD HH24:MI:SS.FF” 的格式进行存储和显示。</p> 
</blockquote> 
<h5 id="Rowid%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">Rowid数据类型</h5> 
<blockquote> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;">存储在数据库中的每一行都有一个地址。Oracle 数据库使用rowid数据类型来存储数据库中每一行的地址 （rowid）。</span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;">Rowids分为以下几类：</span></span></p> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">物理 rowid 将行的地址存储在堆组织的表、表集群以及表和索引分区中。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">逻辑 rowid 将行的地址存储在按索引组织的表中。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">外部 rowid 是外部表中的标识符，例如通过网关访问的 DB2 表。它们不是标准的 Oracle 数据库 rowid</span></p> </li></ul> 
</blockquote> 
<blockquote> 
 <p style="margin-left:.5em;text-align:left;">Oracle数据库在内部使用<strong>rowids来构建索引</strong>。<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-8D6D0C64-6AC8-4B22-A9AF-1B62F61AE10B" rel="nofollow" title="B 树索引">B 树索引</a>是最常见的类型，它包含按范围划分的键的有序列表。每个键都与一个 rowid 相关联，该 rowid 指向关联行的地址以便快速访问。</p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">  格式<strong>模型</strong></span></span>：<span style="color:#fe2c24;"><code><span style="background-color:#ffffff;">TO_CHAR</span></code><code><span style="background-color:#ffffff;">、</span></code><code><span style="background-color:#ffffff;">TO_DATE</span></code></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><strong>  完整性约束</strong>是限制表中一列或多列的值的命名规则。</p> 
</blockquote> 
<h5 id="%E8%A1%A8%E5%AD%98%E5%82%A8" style="margin-left:.0001pt;text-align:justify;">表存储</h5> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle 使用表空间中的数据<strong>段</strong>来保存表数据，默认情况下，表被组织为<strong>堆</strong>，这意味着数据库将行放置在<strong>最适合的位置</strong>，而不是按用户指定的顺序放置。因此，堆组织的表是行的无序集合。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当用户添加行时，数据库会将行放在数据段中的第一个可用空间中。不保证按插入行的顺序检索行。</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E95FC6AD-C932-4DE2-9D7B-B98D1168E7DA" rel="nofollow" title="虚拟列">虚拟列</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">不占用磁盘空间。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">rowid</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">实际上是行的 <strong>10 字节物理地址</strong>。对于表集群，同一数据块中不同表中的行可以具有相同的 rowid。Oracle 数据库在内部使用 rowid 来构建索引。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;">空值是列中没有值。空值表示缺失、未知或不适用的数据。</p> 
</blockquote> 
<h5 id="%E8%A1%A8%E5%8E%8B%E7%BC%A9" style="margin-left:.0001pt;text-align:justify;"><strong>表压缩</strong></h5> 
<blockquote> 
 <p> 数据库可以使用表压缩来减少<strong>表</strong>所需的存储量，<span style="background-color:#ffffff;"><span style="color:#1a1816;">堆组织的表用字典压缩效果很好。</span></span></p> 
 <p><span style="background-color:#ffffff;"><strong>基本表压缩</strong>：<span style="color:#24292f;">基于<strong>列</strong>，使用类似于字典编码的方式来压缩数据。它通过移除重复值和使用更紧凑的存储格式来减小数据占用的空间。数据变化比较少的表。</span></span></p> 
 <p><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>高级行压缩</strong>：</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">基于<strong>行</strong>，通过减小每行记录的存储空间，来实现更高程度的压缩。适用于需要更高压缩率且数据变化频繁的表。<strong>Oltp</strong></span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">默认情况下，如果对压缩单元中的任何行更新或删除，数据库将锁定所有行。可以选择为表启用行级锁定，数据库仅锁定受更新或删除操作影响的行。</span></span></p> 
 <p>混合列式压缩使用称为<strong>压缩单元</strong>的逻辑构造来存储一组行，混合列压缩对不同类型的 DML 操作中的行锁定有影响。</p> 
</blockquote> 
<h4 id="%E8%A1%A8%E9%9B%86%E7%BE%A4">表集群</h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">表<strong>集群</strong>是一组共享公共列并将相关数据存储在同一块中的表。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">优点</span></span>：</p> 
<blockquote> 
 <ul><li><span style="background-color:#ffffff;"><span style="color:#1a1816;">群集表联接的磁盘 I/O 减少。</span></span></li><li><span style="background-color:#ffffff;"><span style="color:#1a1816;">改进了聚集表联接的访问时间。</span></span></li><li><span style="background-color:#ffffff;"><span style="color:#1a1816;">存储相关表和索引数据所需的存储空间较少，因为不会为每一行重复存储集群键值。</span></span></li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;">不适用：</p> 
<blockquote> 
 <ul><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">这些表经常更新。</span></span></li><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">这些表经常需要<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-BF9B54D6-892E-4C3B-8536-38958ACC069D" rel="nofollow" title="全表扫描">全表扫描</a>。</span></span></li><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">表需要截断。</span></span></li></ul> 
</blockquote> 
<p>索引集群是使用索引来定位数据的表集群。集群索引是集群键上的 B 树索引。必须先创建聚类索引，然后才能将任何行插入到聚簇表中。</p> 
<p>哈希集群类似于索引集群，只是索引键被替换为哈希函数。不存在单独的群集索引。在哈希群集中，数据是索引。</p> 
<p>属性群集表是一个堆组织的表，它根据用户指定的群集指令将数据存储在磁盘上。这些指令指定单个或多个表中的列。</p> 
<p>基于联接列的属性聚类分析称为联接属性聚类分析。与表聚类相比，联接属性聚类表不会将一组表的数据存储在同一数据库块中。</p> 
<p><strong>区域</strong>是一组连续的数据块，用于存储相关列的最小值和最大值。<span style="background-color:#ffffff;"><span style="color:#1a1816;">I/O：一个或多个在索引中找键值、另一个用于读取写入。</span></span>这种减少可以显著降低表扫描的 I/O 和 CPU 开销。</p> 
<h4 id="%E4%B8%B4%E6%97%B6%E8%A1%A8">临时表</h4> 
<p><strong>临时表</strong>保存仅在事务或会话期间存在的数据。</p> 
<p><img alt="" height="346" src="https://images2.imgbox.com/2a/3b/5gMPRyfA_o.png" width="1004"></p> 
<p>临时表在必须<strong>缓冲结果集</strong>的应用程序中很有用。专用临时表对于<strong>动态报告</strong>应用程序很有用。</p> 
<p>与永久表一样，全局临时表是在数据字典中静态定义的持久对象。对于私有临时表，元数据仅存在于内存中，但可以驻留在磁盘上的临时表空间中。  CREATE ... TEMPORARY TABLE</p> 
<h4 id="CNCPT-GUID-97FC9DFF-A6CF-46CD-9F6F-D88A37C0E79C">外部表区块链表</h4> 
<p>外部<strong>表访问外部</strong>源中的数据，就像此数据位于数据库的表中一样。</p> 
<p>当 Oracle 数据库应用程序必须访问非关系数据时，外部表非常有用。数据仓库。</p> 
<p>访问驱动程序是解释数据库外部数据的 API。</p> 
<p>区块链表是为集中式区块链应用程序设计的仅追加<strong>表，</strong>在区块链表中，行链是一系列通过散列方案链接在一起的<strong>行</strong>。行<strong>内容</strong>是一个连续的字节序列，其中包含行的列数据和链中前一行的哈希值。</p> 
<h3 id="CNCPT-GUID-797E49E6-2DCE-4FD4-8E4A-6E761F1383D1">3 索引和按索引组织的表</h3> 
<h4 id="CNCPT-GUID-DE7A95BC-6E4A-47EA-9FC5-B85B54F8CF41">索引</h4> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>有时</strong>可以加快数据访问速度。索引是在逻辑上和物理上独立于与其关联的对象中的数据的架构对象，索引是减少磁盘 I/O 的众多方法之一。</span></span></p> 
<blockquote> 
 <p>索引的<strong>缺点</strong>包括：</p> 
 <ul><li> <p>手动创建索引通常需要深入了解数据模型、应用程序和数据分布。</p> </li><li> <p>随着数据的变化，索引可能不再有用，或者可能需要新索引。</p> </li><li> <p>索引占用磁盘空间。</p> </li><li> <p>当索引数据上发生 DML 时，数据库必须更新索引，这会产生性能开销。</p> </li></ul> 
</blockquote> 
<p><strong>键</strong>是一组列或表达式，您可以基于其构建索引。</p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">从 19c 开始，Oracle可以<strong>自动</strong>创建和管理索引：Alter table a auto index on；</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">主键和唯一键自动具有索引，<strong>唯一索引</strong>保证表中没有两行在键列中具有重复值。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>复合索引</strong>（也称为</span></span><strong>串联</strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">索引）是表中多个列的</span></span><strong>索引，</strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">通常，最常访问的列排在第一位：</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">CREATE INDEX a ON employees (last_name, job_id, salary);</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将索引数据存储在索引段中。索引段的表空间是所有者的默认表空间，可以将索引存储在与其表不同的表空间中，可以选择不备份仅包含索引的表空间。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">创建索引后，数据库会<strong>自动维护和使用索引</strong>。</p> 
<h5 id="%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B" style="margin-left:0cm;">索引类型</h5> 
<p style="margin-left:0cm;"><img alt="" height="370" src="https://images2.imgbox.com/26/ff/ZRvK1Qov_o.png" width="556"><img alt="" height="391" src="https://images2.imgbox.com/15/aa/qAWGKHIb_o.png" width="566"></p> 
<h4 id="B%E6%A0%91%E7%B4%A2%E5%BC%95" style="margin-left:0cm;">B树索引</h4> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">B </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">树是<em>平衡树</em>的缩写，有两种类型的块：用于搜索的<strong>分支块</strong>和用于存储键值的<strong>叶块</strong>。B 树索引的上层分支块包含指向较低级索引块的索引数据。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="437" src="https://images2.imgbox.com/01/33/Ya7ie9kB_o.png" width="566"></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">叶块包含每个索引数据值和用于查找实际行的相应 rowid。</span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">如果 SQL 语句仅访问索引列，则数据库直接从索引而不是表中读取值。如果该语句除了访问索引列之外还访问非索引列，则数据库将使用 rowid 来查找表中的行。通常，数据库通过交替读取索引块和表块来检索表数据。</span></span></p> 
<h5 id="%E7%B4%A2%E5%BC%95%E6%89%AB%E6%8F%8F" style="margin-left:0cm;">索引扫描</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>全索引扫描</strong>Full Index Scan：数据库按索引数据顺序读取整个索引，每次只读取一个数据库，避免排序，读取的数据块是经过无序的多块读取的。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>快速全索引扫描</strong>Fast Full Index Scan：数据库按物理存储顺序读取，可以读取多个数据块， 用于数据检索。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>索引范围扫描</strong> Index Range Scan：对索引的有序扫描，其中在条件中指定了索引的一个或多个前导列。数据库通常使用索引范围扫描来访问选择性数据。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>索引唯一扫描</strong>Index Unique Scan：当谓词使用相等运算符引用索引键中的所有列时。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>索引跳过扫描</strong>Index Skip Scan：如果复合索引的前导列中只有很少的非重复值，而索引的非前导键中有许多非重复值，逻辑子索引的数量由前导列中的非重复值的数量决定。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>聚类因子</strong>：扫描索引时访问的数据块的数量。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">反向键索引：</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是一种B树索引，它在保持列顺序的同时物理反转每个索引键的字节。反转键解决了 B 树索引右侧叶块的争用问题，用于插入顺序键的 I/O 分布更均匀。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">升序和降序索引：<span style="background-color:#ffffff;"><span style="color:#1a1816;">CREATE INDEX xx ON hr.employees(a ASC, b DESC);</span></span></p> 
<h5 id="%E7%B4%A2%E5%BC%95%E5%8E%8B%E7%BC%A9" style="margin-left:.0001pt;text-align:justify;">索引压缩</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">前缀压缩：</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">压缩</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> B </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">树索引或索引组织的表中部分主键列值，前缀条目（分组）和后缀条目（唯一或几乎唯一），数据库通过在索引块中的后缀条目之间共享前缀条目来实现压缩。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">默认情况下，唯一索引的前缀由除最后一个之外的所有键列组成。</span></span><span style="background-color:#ffffff;">如果键没有定义为具有唯一的块，则数据库通过向分组块附加rowid来提供唯一的块。</span></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">注：如果在单个列上创建唯一索引，则 Oracle 无法使用前缀键压缩，因为不存在通用前缀。</span></span></p> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">高级索引压缩：</span></span></strong><strong>12.1.0.2</strong><strong>，</strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">压缩索引的使用方式与未压缩索引相同，适用于非唯一</span></span>索引和<span style="background-color:#ffffff;"><span style="color:#1a1816;">唯一索引，前缀压缩在非唯一索引上效果很好，但在前导列没有很多重复的索引上效果一般。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">12.2之后有个高压缩，可以指定，在后面加<span style="background-color:#ffffff;"><span style="color:#1a1816;">COMPRESS ADVANCED</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
<h4 id="%E4%BD%8D%E5%9B%BE%E7%B4%A2%E5%BC%95" style="margin-left:0cm;"><span style="background-color:#ffffff;">位图索引</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在位图索引中，数据库存储每个索引键的</span></span><strong>位图</strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">。在传统的B树索引中，一个索引条目指向一行。在位图索引中，每个索引键存储指向多行的指针。</span>位图索引可以包括完全由空值组成的键，这与B树索引不同，</span>位图中的每个位对应于一个可能的 rowid。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">用到位图索引：索引列的</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-5CD22620-6D7A-40DC-BA09-EE3B5339C7F8" rel="nofollow" title="基数">基数</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">较低，即非重复值的数量远小于表行的数量；</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">索引表是只读的，或者不受 DML 语句的重大修改。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">因为一个键指向许多行，所以索引数据上的DML通常会锁定所有这些行，不适用<strong>OLTP</strong></span> 。</p> 
<p style="margin-left:.0001pt;text-align:justify;">位图联接索引是用于<strong>联接</strong>两个或多个表的<strong>位图索引</strong>。</p> 
<p style="margin-left:.0001pt;text-align:justify;">Oracle 数据库使用 B 树索引结构来存储每个索引键的位图。</p> 
<h5 id="%E5%9F%BA%E4%BA%8E%E5%87%BD%E6%95%B0%E7%9A%84%E7%B4%A2%E5%BC%95" style="margin-left:0cm;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">基于函数的索引</span></span></strong></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">计算涉及一个或多个列的函数或表达式的值，并将其存储在<strong>索引</strong>中。基于函数的索引可以是 B 树或位图索引，</span></span>索引函数可以是算术表达式。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">基于函数的索引是为了<strong>提高查找速率</strong>，但仍必须计算函数以处理语句。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">对于WHERE子句中包含表达式的查询，优化器可以对基于函数的索引使用索引范围扫描。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">应用程序域<span style="background-color:#ffffff;"><span style="color:#1a1816;">索引是特定于应用程序的自定义索引。</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E95FC6AD-C932-4DE2-9D7B-B98D1168E7DA" rel="nofollow" title="虚拟列">虚拟列</a>对于加快对从表达式派生的数据的访问也很有用。</p> 
<p style="margin-left:0cm;">应用程序域索引是特定于应用程序的自定义索引。</p> 
<h5 id="%E4%BA%8C%E7%BA%A7%E7%B4%A2%E5%BC%95" style="margin-left:0cm;">二级索引</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">二级索引使用既不是主键也不是主键前缀的列，提供对按索引组织的表的快速有效的访问。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">二级索引使用逻辑 rowid 来查找表行，<span style="background-color:#ffffff;"><span style="color:#1a1816;">逻辑 rowid 包括</span></span><strong>物理猜测。</strong></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;">对于堆组织的表，二级索引的访问涉及扫描二级索引和额外的 I/O 来获取包含该行的数据块。对于按索引组织的表，二级索引的访问会有所不同，具体取决于物理猜测的用途和准确性：</p> 
 <ul><li> <p>在没有物理猜测的情况下，访问涉及两个索引扫描：扫描二级索引，然后扫描主键索引。</p> </li><li> <p>通过物理猜测，访问取决于其准确性：</p> 
   <ul><li> <p>通过准确的物理猜测，访问涉及辅助索引扫描和额外的 I/O，以提取包含该行的数据块。</p> </li><li> <p>对于不准确的物理猜测，访问涉及辅助索引扫描和 I/O 以获取错误的数据块（如猜测所示），然后按主键值对索引组织表进行索引唯一扫描。</p> </li></ul></li></ul> 
</blockquote> 
<p style="margin-left:0cm;">按索引组织的表上的二级索引可以是<strong>位图索引</strong>。位图索引存储每个索引键的位图。</p> 
<h3 id="CNCPT-GUID-3E154566-50D6-48C1-BAE5-57EF20266B43">4 分区、视图和其他架构对象</h3> 
<h4 id="%E5%88%86%E5%8C%BApartition" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">分区partition</span></h4> 
<h5 id="%E5%88%86%E5%8C%BA%E7%89%B9%E5%BE%81"><span style="background-color:#ffffff;">分区特征</span></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">分区使您能够将非常大的表和索引分解为更小且更易于管理的部分，每个分区都是一个独立的对象，具有自己的名称和可选的存储特征。</span></span></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#1a1816;"><span style="background-color:#ffffff;">从应用程序的角度来看，仅存在一个架构对象。SQL 语句无需修改即可访问分区表。分区对于许多不同类型的数据库应用程序非常有用，尤其是那些管理大量数据的数据库应用程序。好处包括：</span></span></p> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">提高可用性</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">分区不可用不会导致对象不可用。查询<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-54114749-0A81-41D7-8E16-7B76D93CEE2B" rel="nofollow" title="优化器">优化器</a>会自动从<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-78BCF1CD-1865-4AEB-8F14-AFA4FF1981BF" rel="nofollow" title="查询计划">查询计划</a>中删除未引用的分区，以便在分区不可用时查询不受影响。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">更轻松地管理架构对象</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">分区对象具有可以集体或单独管理的片段。<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-64F19D78-A73F-44A5-AA2E-60EBC800CB22" rel="nofollow" title="DDL">DDL</a> 语句可以操作分区，而不是整个表或索引。因此，您可以分解资源密集型任务，例如重建索引或表。例如，可以一次移动一个表分区。如果出现问题，则只需重做分区移动，而不必重做表移动。此外，删除分区可以避免执行大量语句。<code>DELETE</code></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">减少了 <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-709E943F-FF0E-4AA6-979A-C4CB2A7B0C29" rel="nofollow" title="OLTP">OLTP</a> 系统中对共享资源的争用</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">在某些 OLTP 系统中，分区可以减少对共享资源的争用。例如，DML 分布在许多段上，而不是一个段上。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">增强的数据仓库中的查询性能</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">在<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-0881E18F-D245-4980-8272-64964B64E3CC" rel="nofollow" title="数据仓库">数据仓库</a>中，分区可以加快即席查询的处理速度。例如，包含一百万行的销售表可以按季度进行分区。</span></p> </li></ul> 
</blockquote> 
<p style="margin-left:0cm;"><img alt="" height="317" src="https://images2.imgbox.com/be/f7/8Tqj82Me_o.png" width="723"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">表或索引的每个分区必须具有<strong>相同的逻辑属性</strong>，例如列名、数据类型和约束，但是，每个分区可以具有单独的物理属性，例如它所属的表空间。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">分区<strong>键</strong>是一组由一列或多列组成的列，用于确定分区表中每一行应位于的分区</span></span>，<span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用分区键自动将插入、更新和删除操作定向到相应的分区。</span></span></p> 
<h6 id="%E5%88%86%E5%8C%BA%E7%AD%96%E7%95%A5" style="margin-left:.0001pt;text-align:justify;">分区策略</h6> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">有很多分区策略，控制数据库将数据放入分区，基本策略是<strong>范围、列表和哈希</strong>分区。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">单极分区是只用一种，复合分区是使用多种。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">范围：</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库根据分区键的值范围将行映射到<strong>分区，通常是日期。</strong></span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="305" src="https://images2.imgbox.com/c9/72/brQU8NJR_o.png" width="715"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>间隔：</strong>是范围分区的扩展，如果插入的数据超出现有范围分区，则 Oracle 会自动创建指定间隔的分区。<span style="background-color:#ffffff;"><span style="color:#1a1816;">避免显式创建范围分区，分区键值确定范围分区的高值，称为</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-B22E1450-CB82-4771-ACF3-0243C4748951" rel="nofollow" title="转换点">转换点</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="372" src="https://images2.imgbox.com/f3/84/sz7snT1z_o.png" width="722"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>列表</strong>：数据库使用离散值列表作为每个分区的分区键，分区键由一列或多列组成<span style="background-color:#ffffff;"><span style="color:#1a1816;">，使用列表分区来控制各个行映射到特定分区的方式。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="364" src="https://images2.imgbox.com/33/99/GImQFlp4_o.png" width="593"></p> 
<p style="margin-left:0cm;"><strong>哈希</strong>：数据库根据数据库应用于用户指定的分区键的哈希算法将行映射到<strong>分区</strong>。<span style="background-color:#ffffff;"><span style="color:#1a1816;">行的位置由数据库应用于该行的内部</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-DDDDC4BC-ADB8-40D7-9733-60CED8E4A83E" rel="nofollow" title="哈希函数">哈希函数</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">确定，</span>哈希分区在更新争用高的<span style="color:#fe2c24;">OLTP</span>系统中也很有用。<span style="color:#1a1816;">当分区数为 <strong>2</strong> 的幂时，哈希算法会在所有分区中创建大致<strong>均匀的行分布</strong>。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="313" src="https://images2.imgbox.com/9d/93/cNrWb0Of_o.png" width="442"></p> 
<p style="margin-left:0cm;"><strong>引用：</strong>子表的分区策略仅通过与父表的<strong>外键</strong>关系来定义。<span style="background-color:#ffffff;"><span style="color:#1a1816;">对于父表中的每个分区，子表中存在一个相应的分区。父表将父记录存储在特定分区中，子表将子记录存储在相应的分区中。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="240" src="https://images2.imgbox.com/7e/74/OTq3BDrQ_o.png" width="958"></p> 
<p style="margin-left:0cm;"><strong>复合：</strong>表通过一种数据分发方法进行分区，然后使用第二种数据分发方法将每个分区进一步细分为子分区。<span style="background-color:#ffffff;"><span style="color:#1a1816;">范围、列表和哈希分区都可以作为复合分区表的子分区策略。</span></span></p> 
<blockquote> 
 <p>复合分区具有以下几个优点：</p> 
 <ul><li> <p>根据 SQL 语句，在一个或两个维度上进行分区修剪可能会提高性能。</p> </li><li> <p>查询可能能够在任一维度上使用完全或部分分区联接。</p> </li><li> <p>您可以对单个表执行并行备份和恢复。</p> </li><li> <p>分区数大于单级分区，这可能有利于并行执行。</p> </li><li> <p>如果许多语句可以从分区修剪或分区连接中受益，则可以实现滚动窗口以支持历史数据，并且仍然可以在另一个维度上进行分区。</p> </li><li> <p>可以根据分区键的标识以不同的方式存储数据。例如，您可能决定以只读的压缩格式存储特定产品类型的数据，并保持其他产品类型数据未压缩。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库将复合分区表中的每个子分区存储为<strong>单独的</strong></span></span><strong><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-EC12AA68-8C89-43B3-B1F9-3AABF7CAEB9F" rel="nofollow" title="段">段</a></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">，因此，子分区属性可能不同于表的属性或子分区所属的分区。</span></span></p> 
<h5 id="CNCPT-GUID-BCC6F209-3AF4-4517-A3AB-DFE5E4543649">分区表</h5> 
<p style="margin-left:0cm;">分区<strong>表</strong>由一个或多个分区组成，这些分区单独管理，可以独立于其他分区运行。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">分区表由一个或多个表分区段组成。</span></span><span style="background-color:#ffffff;">单个表或分区可以包含压缩和未压缩的块，这保证数据大小不会因为压缩而增加。如果压缩会增加块的大小，则数据库不会将其应用于该块。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">已<strong>分区索引</strong>与已分区表一样，被划分为更小、更易于管理的部分。</span></p> 
<p style="margin-left:0cm;">堆组织表的部分或全部分区可以以压缩格式存储，压缩可节省空间并加快查询执行速度。</p> 
<h5 id="CNCPT-GUID-2B43D5F9-04CE-4602-9D95-DDA367CE25F7">分区索引</h5> 
<p style="margin-left:0cm;">分区索引是与分区表一样，已划分为更小且更易于管理的部分的<strong>索引</strong>。</p> 
<p style="margin-left:0cm;"><img alt="" height="284" src="https://images2.imgbox.com/00/63/cXahnsk3_o.png" width="651"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">本地分区索引</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">中，索引与其表在相同的列上<strong>分区</strong>，具有相同的分区数和相同的分区边界。</span></span></p> 
<blockquote> 
 <p>本地分区索引在数据仓库环境中很常见。本地索引具有以下优点：</p> 
 <ul><li> <p>可用性提高，因为使分区中的数据无效或不可用的操作仅影响此分区。</p> </li><li> <p>简化了分区维护。移动表分区时，或者当数据老化出分区时，只需重建或维护关联的本地索引分区。在全局索引中，必须重建或维护所有索引分区。</p> </li><li> <p>如果发生分区的时间点恢复，则可以将索引恢复到恢复时间。不需要重新生成整个索引。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">与表分区一样，本地索引分区存储在其自己的段中。每个段包含总索引数据的一部分。因此，由四个分区组成的本地索引不是存储在单个索引段中，而是存储在四个单独的段中。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">全局分区索引</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是独立于创建它的基础表进行分区的<strong>B树</strong>索引。单个索引分区可以指向任何或所有表分区，而在本地分区索引中，索引分区和表分区之间存在奇偶校验。全局索引对于</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;"> OLTP</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">应用程序非常有用。在 OLTP 系统中，表可以按一个键（例如列）进行分区，但应用程序可能需要使用许多不同的键（例如，按 或 ）访问数据。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>分片表</strong>：<span style="background-color:#ffffff;"><span style="color:#1a1816;">水平分区涉及跨分片拆分数据库表，以便每个分片包含具有相同列但行子集不同的表。分片使您能够将大型表分解为更易于管理的部分，称为分片。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="298" src="https://images2.imgbox.com/1e/d0/FyCrYfj2_o.png" width="545"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>分片表</strong>是在多个数据库（称为分片）中划分为更小且更易于管理的部分的表。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">分片将表空间创建和管理为一个称为<strong>表空间集</strong>的单元。</span></span></p> 
<h4 id="%E8%A7%86%E5%9B%BE" style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">视图</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">视图</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是一个或多个表的逻辑表示形式。</span></span>视图从它所基于的表（称为基表）派生其数据。基表可以是表或其他视图。对视图执行的所有操作实际上都会<strong>影响</strong>基表。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="128" src="https://images2.imgbox.com/a2/39/9LY35XiU_o.png" width="558"></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">通常用于：1、通过限制对表中一 “组预定行或列的访问来提供额外的表安全性；</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">2、隐藏数据复杂性；</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">3、以与基表不同的角度呈现数据；</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">4、将应用程序与基表定义中的更改隔离开来。</span></span></p> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">对视图执行的操作会</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">影响</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">基表中的数据，并受基表的完整性约束和触发器的约束。</span></span></strong></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;">Sql语句引用视图时，oracle执行：</p> 
 <p style="margin-left:.0001pt;text-align:justify;">1、<span style="background-color:#ffffff;"><span style="color:#1a1816;">尽可能对视图的查询与定义视图的查询合并，无法合并就可能不使用引用列的索引；</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">2、解析</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E0BE3164-B0A9-4ED8-AD19-2048ADFFC9BB" rel="nofollow" title="共享SQL区域中">共享SQL区域中</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">的合并语句，共享池没有oracle再解析新语句；</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">3、执行sql语句。</span></span></p> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">如视图是虚拟表一样，对象视图也是虚拟<strong>对象</strong>表。视图中的每一行都是一个对象，它是<strong>对象类型的</strong>一个实例。对象类型是用户定义的数据类型。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">可更新联接视图也称为可修改联接视图，它涉及两个或多个基表或视图，并允许DML操作。可更新视图在SELECT语句的顶级FROM子句中包含多个表，并且不受WITH READ ONLY子句的限制。</p> 
<h4 id="%E7%89%A9%E5%8C%96%E8%A7%86%E5%9B%BE%EF%BC%88%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%A7%86%E5%9B%BE%EF%BC%89" style="margin-left:.0001pt;text-align:justify;">物化<strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">视图（</span></span></strong>实例化视图<strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#ff0000;">实例化视图</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是已作为架构对象预先存储或“具体化”的查询结果，在复制环境中，实例化视图与另一个数据库（称为 </span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-DC13C5A2-6D35-4169-B546-C8B8AC393163" rel="nofollow" title="master 数据库">master 数据库</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">）中的表共享数据。</span></span></p> 
<blockquote> 
 <p>实例化视图在以下方面与索引类似：</p> 
 <ul><li> <p>它们包含实际数据并占用存储空间。</p> </li><li> <p>当主表中的数据发生更改时，可以刷新它们。</p> </li><li> <p>当用于查询重写操作时，它们可以提高 SQL 执行的性能。</p> </li><li> <p>它们的存在对 SQL 应用程序和用户是透明的。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="144" src="https://images2.imgbox.com/e2/32/MzKQHoZn_o.png" width="694"></p> 
<h5 id="%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%B7%E6%96%B0%E6%96%B9%E6%B3%95" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例化视图的刷新方法</span></span></strong></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">完全刷新</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">将执行定义实例化视图的查询。最初创建实例化视图时，将进行完全刷新，除非实例化视图引用预构建的表，或者您将该表定义为 </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">DEFERRED</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">增量</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">刷新（<em>快速刷新</em>）仅处理对现有数据的更改，仅处理更改可能会导致非常快的刷新时间。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">两种形式：基于日志，<span style="background-color:#ffffff;"><span style="color:#1a1816;">实例化视图日志或直接加载程序日志会记录对基表的更改</span></span>；<span style="background-color:#ffffff;"><span style="color:#1a1816;">分区更改跟踪（PCT），仅当对基表进行分区时，PCT 刷新才有效，删除受影响再重新计算。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">在位in-place或异位out-of-place刷新。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">查询重写将</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">按照主表编写的用户请求转换为语义上等效的请求，其中包括具体化视图。实例化视图包含预先计算的聚合和联接，因此查询重写可以使用实例化视图快速回答查询。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="408" src="https://images2.imgbox.com/42/f8/gSjEaoZu_o.png" width="742"></p> 
<h4 id="%E5%BA%8F%E5%88%97" style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">序列</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">序列</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是一个架构对象，多个用户可以从中生成唯一的整数。序列生成器提供了一种高度可伸缩且性能良好的方法来为数字数据类型生成代理键。</span></span></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">序列定义，包括其名称以及序列是上升还是下降，</span></span>序列定义还指示：</p> 
 <ul><li> <p>数字之间的间隔</p> </li><li> <p>数据库是否应在内存中缓存生成的序列号集</p> </li><li> <p>达到限制时序列是否应循环</p> </li></ul> 
</blockquote> 
<ol><li style="margin-left:.0001pt;text-align:justify;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">同一序列生成器可以为多个表生成数字。序列在多用户下很有用，生成唯一编号，而不会产生磁盘 I/O 或事务锁定的开销。</span></span></p> <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据仓库有两个重要组成部分：维度和事实。</span></span></p> </li></ol> 
<h4 id="%E7%BB%B4%E5%BA%A6Dimensions" style="margin-left:.0001pt;text-align:justify;">维度Dimensions</h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">维度</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是用于指定业务问题的任何类别，</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">维度表</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是一种逻辑结构，用于定义列对或列集之间的分层（父/子）关系。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">CREATE DIMENSION</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">：</span></span><span style="background-color:#ffffff;">多个LEVEL子句，每个子句标识维度中的一个列或列集；一个或多个HIERACHY子句，指定相邻级别之间的父子关系；可选的ATTRIBUTE子句，每个子句标识与单个级别关联的附加列或列集。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="553" src="https://images2.imgbox.com/1d/9d/cjst3X6r_o.png" width="770"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">同义词</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是架构对象的别名。如果必须重命名或移动基础对象，则只需重新定义同义词。基于同义词的应用程序无需修改即可继续工作。</span></span></p> 
<h3 id="5%C2%A0%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7" style="margin-left:.0001pt;text-align:justify;">5 数据完整性</h3> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;">数据必须保持数据完整性，即遵守数据库管理员或应用程序开发人员确定的业务规则，包括：</p> 
 <ul><li> <p>使用触发的存储数据库过程强制实施业务规则</p> </li><li> <p>使用存储过程完全控制对数据的访问</p> </li><li> <p>在数据库应用程序的代码中强制实施业务规则</p> </li><li> <p>使用 Oracle 数据库完整性约束，这是在列或对象级别定义的规则，用于限制数据库中的值</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">完整性约束</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">： Oracle能够在表和列级别应用约束。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>Not null非空；unique key 唯一；primary key主键；foreign key外键；check检查；ref</strong>。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>唯一键</strong>约束<strong>：</strong>适用于不允许重复值的任何列，主键约束的目的是唯一地标识每个表行。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>主键</strong>约束：<span style="background-color:#ffffff;"><span style="color:#1a1816;">在指定的列或一组列中没有两行具有重复的值；没有空值。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>外键</strong>约束：两表有公共列，引用的列必须唯一，具体如下图所示。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="937" src="https://images2.imgbox.com/80/98/BByLKIV5_o.png" width="906"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">关系模型允许外键的值与引用的主键值或唯一键值匹配，或者为null。如果<strong>复合外键</strong>的任何列为 null，则键的非 null 部分不必与父键的任何相应部分匹配。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">父键修改参照完整性约束操作:<strong>无操作,级联删除,设置为null的删除</strong>。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="406" src="https://images2.imgbox.com/36/24/bvLu8gcF_o.png" width="989"></p> 
<p style="margin-left:.0001pt;text-align:justify;">插入<span style="background-color:#ffffff;"><span style="color:#1a1816;">父表:始终唯一就正常;插入子表:外键值在引用列存在或者为null就可以;</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">更新无操作父表:子表没有引用就行; 更新无操作子表:新外键值仍然属于引用列;</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">删除无操作父表:子表没有引用就行。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">检查约束:</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">如果 DML 导致约束的条件计算结果为 false，则回滚 SQL 语句.</span></span></p> 
<p style="margin-left:0;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">VALIDATE</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">现有数据必须符合约束,</span></span><span style="background-color:#ffffff;">NOVALIDATE</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">现有数据不需要符合约束。</span></span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="370" src="https://images2.imgbox.com/7b/80/QRc3o7jc_o.png" width="1001"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在<strong>不可延期</strong>约束中, 数据库会在每条语句的末尾检查约束。如果违反了约束，则<strong>语句</strong>将回滚。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">可递延</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">约束允许<strong>事务</strong>用</span></span><span style="background-color:#ffffff;">SET CONSTRAINT</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">延迟检查约束，直到发出commit。如果对数据库所做的更改可能违反约束，则此设置有效地使您能够禁用约束，直到所有更改都完成。</span></span></p> 
<blockquote> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;">您可以设置数据库检查可延迟约束时的默认行为。您可以指定以下任一属性：</span></span></p> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><code>INITIALLY IMMEDIATE</code></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">数据库在每个语句执行后立即检查约束。如果违反了约束，则数据库将回滚该语句。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><code>INITIALLY DEFERRED</code></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">数据库在发出<code>COMMIT</code>时检查约束。如果违反了约束，则数据库将回滚事务。</span></p> </li></ul> 
</blockquote> 
<h3 id="CNCPT-GUID-BDF5B748-EB43-4B48-938E-89099069C3BB">6 数据字典和动态性能视图</h3> 
<h4 id="CNCPT-GUID-9B9ABE1C-A1E3-464F-8936-978250DC3E1F">数据字典</h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个 Oracle</span></span><span style="color:#1a1816;">的只读引用表和视图的中心集统称为<strong>数据字典</strong>，<strong>动态性能</strong>视图是在数据库打开和使用时不断更<span style="background-color:#ffffff;">新的特殊视图。</span></span></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据字典由基表和视图组成。</span></span></p> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">基表</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">它们存储有关数据库的信息。只有 Oracle 数据库才能写入和读取这些表。用户很少直接访问基表，因为它们是规范化的，并且大多数数据都以神秘格式存储。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">视图</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">它们使用联接和<code>WHERE</code>子句将基表数据解码为有用的信息（如用户名或表名）以简化信息。视图包含数据字典中所有对象的名称和说明。某些视图可供所有数据库用户访问，而其他视图仅供管理员访问。</span></p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">数据字典视图以集合的形式分组,</span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">一个集合由三个视图组成</span></span>，并通过其前缀相互区分：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="413" src="https://images2.imgbox.com/63/fb/dS9glGsm_o.png" width="995"></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">带有<strong>DBA_</strong>前缀的视图显示整个数据库中的所有相关信息,视图仅供管理员使用。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#1a1816;">带有</span><strong>ALL_</strong><span style="color:#1a1816;">前缀的视图是指用户对数据库的整体视角。用户拥有的架构对象, 用户通过公共或显式授予特权和角色有权访问的架构对象的信息。</span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#1a1816;">前缀为<strong>USER_</strong>的视图：数据库中用户的私有环境，包括关于由用户创建的模式对象的元数据、由用户授予的权限等;仅显示与用户相关的行，返回ALL_ views中的信息的子集;具有与其他视图相同的列，除了列OWNER是隐含的;为了方便可以具有缩写的PUBLIC同义词.</span></p> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;">DUAL</span></strong><span style="background-color:#ffffff;">当一个值必须只返回一次（例如当前日期和时间）时可以用到，所有数据库用户都可以访问DUAL。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">数据字典用system打开,<span style="background-color:#ffffff;"><span style="color:#1a1816;"> oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会不断更新数据字典，以反映数据库的变化。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">更改或操作数据字典表中的数据可能会对数据库操作产生永久性不利影响。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">大部分数据字典信息都在<strong>数据字典缓存</strong>中, 描述表及其列的列不缓存在字典缓存中，但可以缓存在<strong>数据库缓冲区缓存</strong>中。</span></span></p> 
<h5 id="%E5%8A%A8%E6%80%81%E6%80%A7%E8%83%BD%E8%A7%86%E5%9B%BE" style="margin-left:.0001pt;text-align:justify;">动态性能视图</h5> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">维护一些</span></span><span style="background-color:#ffffff;">V$</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">视图(是动态的)，它们在数据库打开和使用时会不断更新。</span></span></span></p> 
<p>动态性能视图包含如下信息：系统和<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-0F44C072-9841-4E2E-B846-FB16A2E54139" rel="nofollow" title="会话">会话</a>参数、内存使用和分配、文件状态（包括 <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-13364DE9-0E15-488B-89E5-622316EC9796" rel="nofollow" title="RMAN">RMAN</a> 备份文件）、作业和任务的进度、数据库执行、统计信息和指标</p> 
<p>动态性能视图具有以下主要用途：<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-BE4BCB6A-5413-4FC3-86DF-FBEF66047F9C" rel="nofollow" title="Oracle Enterprise Manager">Oracle Enterprise Manager</a> 使用这些视图来获取有关数据库的信息、管理员可以使用这些视图进行性能监视和调试。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">几乎每个V$视图都有一个对应的GV$视图。动态性能视图基</span>于从数据库内存结构构建的虚拟表。视图不是存储在数据库中的传统表<span style="background-color:#ffffff;">。不保证视图的读取一致性，因为数据是动态更新的。</span></p> 
<h2 id="%E4%BA%8C%20Oracle%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE" style="margin-left:0cm;">二 Oracle数据访问</h2> 
<h3 id="7%20SQL" style="margin-left:0cm;">7 SQL</h3> 
<h4 id="SQL%E8%AF%AD%E5%8F%A5">SQL语句</h4> 
<h5 id="DLL%C2%A0%E8%AF%AD%E5%8F%A5"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">DLL</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">语句</span></span></h5> 
<blockquote> 
 <p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据定义语言</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">DLL</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">语句定义、结构更改和删除架构对象。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">能够：</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">1</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、创建、更改和删除架构对象和其他数据库结构，包括数据库本身和数据库用户；</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;">2、<span style="background-color:#ffffff;"><span style="color:#1a1816;">删除架构对象中的所有数据，而不删除这些对象的结构</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">(</span></span><code><span style="background-color:#ffffff;"><span style="color:#1a1816;">truncate</span></span></code><span style="background-color:#ffffff;"><span style="color:#1a1816;">)</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">；与</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">delete</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">相比，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">truncate</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">不会撤销数据，所以比</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">delete</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">快，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">truncate</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">也不会调用删除触发器。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">3</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、授予和撤权限和角色</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">(grant</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">revoke);</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;">4、<span style="background-color:#ffffff;"><span style="color:#1a1816;">打开和关闭审核选项</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">(</span></span><code><span style="background-color:#ffffff;"><span style="color:#1a1816;">audit</span></span></code><span style="background-color:#ffffff;"><span style="color:#1a1816;">、</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">noaudit)</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">；</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">5</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、向</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-D6A3934F-BA6D-464F-9612-C683E20514A4" rel="nofollow" title="数据字典">数据字典</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">添加注释（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">commit</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）；</span></span></p> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据操作语言</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">DML</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句查询或操作现有架构对象中的数据。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句更改数据库的结构，而</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句查询或更改内容。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">构成逻辑工作单元的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">DML</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句集合称为</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-212D8EA1-D704-4D7B-A72D-72001965CE45" rel="nofollow" title="事务">事务</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
<h5 id="%E8%BF%9E%E6%8E%A5joins" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">连接</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">joins</span></span></strong></h5> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">内连接：内部连接是两个或多个表的连接，仅返回满足</span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-C275B9B4-5209-4DFB-86FD-2635881971F3" rel="nofollow" title="连接">连接</a><span style="color:#1a1816;">条件的行；</span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">外连接：外连接返回满足</span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-61D9CE46-D3B4-4E22-81F9-5170CC2B20BD" rel="nofollow" title="连接">连接</a><span style="color:#1a1816;">条件的所有行；</span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">笛卡尔乘积：如果两个表没有连接条件，则数据库将执行</span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-2FFB73C6-7BE4-489A-A1BA-D39445C136D5" rel="nofollow" title="笛卡尔连接">笛卡尔连接</a><span style="color:#1a1816;">。</span></span></p> 
<h5 id="%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务控制语句</span></span></strong></h5> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">管理</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句所做的更改，并将</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句分组到事务中。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">1</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、使对事务的更改永久化</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">commit</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></span></p> 
 <p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">2</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、撤消事务中自事务开始</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">rollback</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">或保存点</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">rollback to savepoint</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">以来的更改。</span></span><br><span style="background-color:#ffffff;"><span style="color:#1a1816;">rollback</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句结束事务，但</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">rollback to savepoint</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">不会。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">3</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、设置可以回滚到的点</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">savepoint</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">4</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、为事务建立属性</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> set transcation</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">5</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、指定是在</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">DML</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句之后检查可延迟</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-67F8FE8C-EBA5-4796-820A-8919982A1411" rel="nofollow" title="完整性约束">完整性约束</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">，还是在提交事务时检查</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">set constant</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">会话控制语句</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">动态管理用户<strong>会话</strong>的属性。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">会话是数据库实例内存中的一个逻辑实体，表示当前用户登录到数据库的状态。会话从数据库对用户进行身份验证开始持续，直到用户断开连接或退出数据库应用程序。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">系统控制语句</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">更改<strong>数据库实例</strong>的属性。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">能够更改设置，如共享服务器的最小数量、终止会话以及执行其他系统级任务。</span></span></p> 
<h4 id="%E4%BC%98%E5%8C%96%E5%99%A8" style="margin-left:0cm;"><span style="background-color:#ffffff;"><strong>优化器</strong></span></h4> 
<h5 id="%E4%BC%98%E5%8C%96%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8">优化器的使用</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">优化器生成描述可能的执行方法的<strong>执行计划</strong>。优化程序通过考虑多个信息源来确定哪个执行计划<strong>最有效</strong>。在确定</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句的最佳执行计划时，优化程序执行以下操作：</span></span></p> 
<blockquote> 
 <ul><li> <p>表达式和条件的评估</p> </li><li> <p>检查完整性约束以了解有关数据的更多信息并基于此元数据进行优化</p> </li><li> <p>语句转换</p> </li><li> <p>优化器目标的选择</p> </li><li> <p>访问路径的选择</p> </li><li> <p>连接顺序的选择</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">可以通过设置优化器目标和收集优化器的<strong>代表性统计信息</strong>来影响优化器选择：</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">吞吐量</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>All_row</strong>s</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">：优化程序</span><span style="color:#fe2c24;">尽快将结果的最后一行</span><span style="color:#1a1816;">发送到客户端应用程序；</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">初始响应时间</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">FIRST_ROWS</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">：该提示指示优化程序</span><span style="color:#fe2c24;">尽快将第一行</span><span style="color:#1a1816;">发送到客户端。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">典型的最终用户交互式应用程序将受益于初始响应时间优化，而批处理模式的非交互式应用程序将受益于总吞吐量优化。</p> 
<h5 id="CNCPT-GUID-D4940716-5F75-43CD-B8B4-45E6BCE5F8EF">优化器组件</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">优化器包含三个主要组件：转换器、估计器和计划生成器。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="532" src="https://images2.imgbox.com/e7/d3/2vge3IY2_o.png" width="613"></p> 
<p>优化器的输入是经过分析的查询。优化程序执行以下操作：</p> 
<blockquote> 
 <ol><li> <p>优化程序<strong>接收已解析的查询</strong>，并根据可用的访问路径和提示为 SQL 语句生成<strong>一组可能的计划</strong>。</p> </li><li> <p>优化程序根据数据字典中的统计信息<strong>估计每个计划的成本</strong>。成本是与使用特定计划执行语句所需的预期资源使用成比例的估计值。</p> </li><li> <p>优化程序<strong>比较计划的成本</strong>，并选择成本<strong>最低</strong>的计划（称为查询计划）传递给行源生成器。</p> </li></ol> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>查询转换器</strong>确定更改查询的形式是否有帮助，以便优化器可以生成更好的执行计划。查询转换器的输入是已分析的查询，优化器将其表示为一组查询块。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">估算器</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">确定给定执行计划的总体成本。</span></span></p> 
<blockquote> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">选择性此度量值表示行集中的一小部分行。选择性与查询谓词或谓词的组合相关联。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">基数此度量值表示行集中的行数。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">成本此度量表示使用的工作单位或资源。查询优化器使用磁盘 I/O、CPU 使用情况和内存使用情况作为工作单元。</span></p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>计划生成器</strong>会为提交的查询尝试不同的计划。优化程序选择成本最低的计划。</span></span></p> 
<h5 id="%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84" style="margin-left:.0001pt;text-align:justify;">访问路径</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">访问路径</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">：用于检索行的查询。通常，索引扫描适用于小部分数据，全表扫描大部分数据：</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">访问路径是查询用于检索行的技术。</p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;">1、全表扫描：<span style="background-color:#ffffff;"><span style="color:#1a1816;">从表中读取所有行，并筛选出不符合选择条件的行。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;">2、Rowed扫描：<span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库首先从语句子句或通过索引扫描获取所选行的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">rowid</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">，然后根据其</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> rowid </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">定位每个选定行。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">3</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、索引扫描：此扫描在索引中搜索</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句访问的索引列值。如果语句仅访问索引的列，则</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">直接从索引读取索引列值。</span></span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">4</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、集群扫描：存储在索引</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-1C56177E-6BEE-4FE7-B45E-38298CDB946D" rel="nofollow" title="表">表</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">集群中的表中检索数据。数据库首先通过扫描聚类索引来获取所选行的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> rowid</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">根据此行查找行。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">5</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、哈希扫描：在哈希簇中查找行，数据库首先通过将哈希函数应用于语句指定的集群键值来获取</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-DDDDC4BC-ADB8-40D7-9733-60CED8E4A83E" rel="nofollow" title="哈希">哈希</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">值。然后，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">扫描包含具有此哈希值的行的数据块。</span></span></p> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">优化程序统计信息：</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">描述有关数据库和数据库中对象的详细信息的数据集合。</span></span></p> 
<p>优化程序统计信息包括以下内容：</p> 
<blockquote> 
 <ul><li> <p>表统计信息：其中包括行数、块数和平均行长度。</p> </li><li> <p>列统计信息：其中包括列中非重复值和空值的数量以及数据的分布。</p> </li><li> <p>指数统计：其中包括叶块的数量和索引级别。</p> </li><li> <p>系统统计：其中包括 CPU 和 I/O 性能和利用率。</p> </li></ul> 
</blockquote> 
<h5 id="CNCPT-GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB">Hints</h5> 
<p style="margin-left:.0001pt;text-align:justify;">Hints  <span style="background-color:#ffffff;"><span style="color:#24292f;">提供了一种手动干预查询执行计划的机制，可以在某些情况下改善查询性能。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">带有FIRST_ROWS提示的 SELECT 执行计划，无提示的 SELECT 执行计划：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="297" src="https://images2.imgbox.com/a3/9a/SWW8GOVS_o.png" width="951"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="345" src="https://images2.imgbox.com/e3/52/TmXP9UMW_o.png" width="934"></p> 
<h5 id="SQL%E5%A4%84%E7%90%86" style="margin-left:.0001pt;text-align:justify;">SQL处理</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">处理的一般阶段是解析、优化、行源生成和执行。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">处理的第一阶段是</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> <strong>SQL </strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">解析。</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">在解析调用期间，数据库将执行以下检查：<span style="color:#fe2c24;">语法检查、语义检查、共享池检查</span>。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="468" src="https://images2.imgbox.com/bc/6a/XtPoDxYc_o.png" width="270"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">程序发出</span><span style="background-color:#ffffff;">SQL</span><span style="background-color:#ffffff;">语句时，</span><span style="background-color:#ffffff;">parse</span><span style="background-color:#ffffff;">调用或创建一个<strong>游标</strong>，它是特定会话的私有</span><span style="background-color:#ffffff;">SQL</span><span style="background-color:#ffffff;">区域的句柄，该区域保存已解析的</span><span style="background-color:#ffffff;">SQL</span><span style="background-color:#ffffff;">语句和其他处理信息。游标和专用</span><span style="background-color:#ffffff;">SQL</span><span style="background-color:#ffffff;">区域位于</span><strong><span style="background-color:#ffffff;">PGA</span></strong><span style="background-color:#ffffff;">中。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">查询优化</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是选择执行</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句的最有效方法的过程。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">优化程序使用行数、数据集大小和其他因素来生成可能的执行计划，并为每个计划分配数字成本。数据库使用成本最低的计划。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库必须对每个</span><strong><span style="color:#fe2c24;">唯一</span></strong><span style="color:#1a1816;">的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句</span><strong><span style="color:#fe2c24;">至少执行一次硬解析</span></strong><span style="color:#1a1816;">，并在此解析期间执行<strong>优化</strong>。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">行源生成器</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是从优化器接收<strong>最佳</strong>执行计划并生成可由数据库使用的迭代计划的软件。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在执行期间，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">SQL</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">引擎执行行源生成器生成的树中的每个行源。这是</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">DML</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">处理中唯一的必填步骤。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">与 DDL 相比，大多数 DML 语句都有一个查询组件。在查询中，执行游标会将查询生成的行放入结果集中。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库可以一次读取一行或成组读取结果集行。在提取中，数据库选择行，如果查询请求，则对行进行排序。每次连续的读取都会检索结果的另一行，直到读取最后一行。</span></span></p> 
<h5></h5> 
<h3 id="8%C2%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E7%BC%96%E7%A8%8B" style="margin-left:.0001pt;text-align:justify;">8 服务器端编程</h3> 
<h4 id="PL%2FSQL%C2%A0" style="margin-left:.0001pt;text-align:justify;">PL/SQL </h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">PL/SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">单元存储在数据库中。当应用程序调用存储过程时，数据库会将编译的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PL/SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">单元加载到</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-78C0E867-233A-4857-B9FE-A3852A9B7BDF" rel="nofollow" title="系统全局区域（SGA）">系统全局区域（SGA）</a> <span style="background-color:#ffffff;"><span style="color:#1a1816;">中的</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-64AFFF3A-C836-44F9-A25C-86CE4B9B16A8" rel="nofollow" title="共享池">共享池</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">中。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">PL/SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">和</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句执行器协同工作以处理过程中的语句。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">PL/SQL 包是一组相关的子程序，以及它们使用的游标和变量，一起存储在数据库中，以便作为一个单元继续使用。</p> 
<p style="margin-left:.0001pt;text-align:justify;">PL/SQL 匿名块是一个未命名的、非持久性的 PL/SQL 单元。</p> 
<p style="margin-left:.0001pt;text-align:justify;">PL/SQL 模块可以包含各种不同的 PL/SQL 语言结构：变量和常量、游标、异常。</p> 
<p style="margin-left:.0001pt;text-align:justify;">PL/SQL 集合是一组有序的元素，所有元素的类型都相同。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="552" src="https://images2.imgbox.com/ae/9e/OfoTEMTN_o.png" width="734"></p> 
<h4 id="%E8%A7%A6%E5%8F%91%E5%99%A8" style="margin-left:.0001pt;text-align:justify;">触发器</h4> 
<blockquote> 
 <p>当发生以下操作之一时，都会触发触发器：</p> 
 <ol><li> <p>由任何用户发出的特定表或视图上的 <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-B5F2F112-1B33-41B5-B63D-9DC8F99A369D" rel="nofollow" title="DML">DML</a> 语句</p> <p>DML语句修改架构对象中的数据。例如，插入和删除行是 DML 操作。</p> </li><li> <p>由特定用户或任何用户发布的 <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-64F19D78-A73F-44A5-AA2E-60EBC800CB22" rel="nofollow" title="DDL">DDL</a> 语句</p> <p>DDL语句定义架构对象。例如，创建表和添加列是 DDL 操作。</p> </li><li> <p>数据库事件</p> <p>用户登录或注销、错误以及数据库启动或关闭是可以调用触发器的事件。</p> </li></ol> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用触发器和完整性约束来定义和强制实施任何类型的完整性规则。但是，建议仅使用触发器来实施无法使用</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-67F8FE8C-EBA5-4796-820A-8919982A1411" rel="nofollow" title="完整性约束">完整性约束</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">定义的复杂业务规则。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">过度使用触发器可能会导致复杂的相互依赖关系，如</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>级联触发器</strong>，从而产生意外效果。</span></span></p> 
<h5 id="%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E7%B1%BB%E5%9E%8B" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">触发器的类型</span></span></strong></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#fe2c24;"><strong>行触发器</strong></span>，删除一百行，触发一百次；<span style="color:#fe2c24;"><strong>语句触发器</strong></span>，删除一百行，触发一次。</p> 
<ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><code>INSTEAD OF</code>触发器</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-9BB0F932-40F0-4727-85A1-904E162405D0" rel="nofollow" title="INSTEAD OF 触发器">INSTEAD OF 触发器</a>由 Oracle 触发，而不是执行触发语句。这些触发器可用于透明地修改无法直接通过 DML 语句修改的视图。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">事件触发器</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">您可以使用触发器将有关数据库事件的信息发布到订阅者。事件触发器分为以下几类：</span></p> 
  <ul><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-EFE577C5-037A-4974-8358-F3761AC70601" rel="nofollow" title="系统事件触发器">系统事件触发器</a>可能由数据库实例启动和关闭或错误消息等事件引起。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">由于与用户登录和注销、DDL 语句和 DML 语句相关的事件，将触发<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-54BD71CF-7D44-4CB2-9FC4-90F5CA8EF110" rel="nofollow" title="用户事件触发器">用户事件触发器</a>。</span></p> </li></ul></li></ul> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>触发定义时间</strong>：<span style="background-color:#ffffff;">在触发语句之前、在受触发语句影响的每行之前、在受触发语句影响的每行之后、在触发语句之后。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="136" src="https://images2.imgbox.com/4f/1a/QCIqnajh_o.png" width="294"></p> 
<blockquote> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;">PL/SQL 触发器具有以下基本组件：</span></span></p> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">触发器名称：该名称在同一架构中的其他触发器名称中必须是唯一的。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">触发器事件或语句：触发事件或语句是导致调用触发器的 SQL 语句、数据库事件或用户事件。例如，用户更新表。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">触发限制：触发器限制指定触发触发器必须包含的布尔<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E2141FFA-A7B2-4113-BEEE-2401FC38AB2E" rel="nofollow" title="表达式">表达式</a>。例如，除非可用部件的数量小于当前的再订购量，否则不会调用触发器。<code>true</code></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">触发的操作：触发操作是包含发出触发语句且触发器限制计算结果为 true 时要运行的 SQL 语句和代码的过程。例如，用户在挂单表中插入一行。</span></p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PL/SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">触发器以编译形式存储在数据库模式中，就像</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PL/SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">存储过程一样。</span></span><span style="background-color:#ffffff;">当</span><span style="background-color:#ffffff;">CREATETRIGGER</span><span style="background-color:#ffffff;">语句提交时，编译后的</span><span style="background-color:#ffffff;">PL/SQL</span><span style="background-color:#ffffff;">代码存储在数据库中，共享池删除</span><span style="background-color:#ffffff;">PL/SQL</span><span style="background-color:#ffffff;">触发器的源代码。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="505" src="https://images2.imgbox.com/18/d9/IEvDp1tP_o.png" width="812"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h2 id="%E4%B8%89%20Oracle%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86" style="margin-left:.0001pt;text-align:justify;">三 Oracle事务管理</h2> 
<h3 id="9%C2%A0%E6%95%B0%E6%8D%AE%E5%B9%B6%E5%8F%91%E6%80%A7%E5%92%8C%E4%B8%80%E8%87%B4%E6%80%A7" style="margin-left:.0001pt;text-align:justify;">9 数据并发性和一致性</h3> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">多用户数据库必须：<strong>数据并发</strong>（同时访问数据）、<strong>数据一致性</strong>（访问的数据相同）。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">的查询具有以下特征：读取一致性查询、非阻塞查询。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>读取一致性查询</strong>：查询返回的数据在单个时间点内已提交且一致；</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">不允许脏读。</span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>非阻塞查询</strong>：数据的读取器和写入者不会相互阻塞。</span></span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">始终强制实施<strong>语句级读取一致性</strong>，从而保证单个查询返回的数据在单个时间点提交且一致。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务级读取一致性，</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务中的每个语句都会看到</span></span>来自同一<span style="background-color:#ffffff;"><span style="color:#1a1816;">时间点的数据。</span></span></p> 
<blockquote> 
 <p style="margin-left:0px;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">ANSI/ISO </span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务隔离级别</span></span></strong></p> 
 <ul><li> <p>脏读</p> <p>事务读取由另一个尚未提交的事务写入的数据。</p> </li><li> <p>不可重复（模糊）读取</p> <p>事务重新读取它以前读取的数据，并发现另一个已提交的事务已修改或删除数据。例如，用户查询一行，然后查询同一行，却发现数据已更改。</p> </li><li> <p>幻影阅读</p> <p>事务重新运行返回一组满足搜索条件的行的查询，并发现另一个已提交的事务插入了满足该条件的其他行。</p> <p>例如，事务查询员工数。五分钟后，它执行相同的查询，但现在这个数字增加了一个，因为另一个用户插入了新员工的记录。满足查询条件的数据比以前多，但与模糊读取不同，以前读取的数据保持不变。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="303" src="https://images2.imgbox.com/20/73/eg3JptCM_o.png" width="991"></p> 
<p style="margin-left:.0001pt;text-align:justify;">Oracle 提供已提交读取（默认）和可序列化隔离级别。此外，数据库还提供只读模式。</p> 
<h4 id="Oracle%20%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB" style="margin-left:.0001pt;text-align:justify;">Oracle 事务隔离级别</h4> 
<h5 id="%E5%B7%B2%E6%8F%90%E4%BA%A4%E8%AF%BB%E5%8F%96%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB" style="margin-left:.0001pt;text-align:justify;">已提交读取隔离级别</h5> 
<p>事务执行的每个查询都只能看到<strong>查询开始之前</strong>提交的数据，而不是事务。此隔离级别是默认级别。它适用于<strong>很少</strong>有事务可能<strong>发生冲突</strong>的数据库环境。已提交读取事务中的查询可避免读取在查询过程中提交的数据。</p> 
<p style="margin-left:.0001pt;text-align:justify;">数据库为每个查询提供一致的结果集，保证数据一致性，用户无需执行任何操作。</p> 
<h6 id="%E5%86%99%E5%85%A5%E5%86%B2%E7%AA%81" style="margin-left:.0001pt;text-align:justify;">写入冲突</h6> 
<p>在已提交的读取事务中，当事务尝试更改由未提交的并发事务更新的行时，会发生<strong>冲突写入</strong>。</p> 
<blockquote> 
 <p>阻止行修改的事务有时称为<strong>阻塞事务</strong>。已提交读取事务等待阻塞事务结束并释放其行锁。如下：</p> 
 <ul><li> <p>如果阻塞事务回滚，则等待事务将继续更改先前锁定的行，就好像其他事务从未存在过一样。</p> </li><li> <p>如果阻塞事务提交并释放其锁，则等待事务将继续对新更改的行进行预期更新。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>注：会话A修改了行A未提交时，会话B再修改行A，会话B就会堵塞等待会话Acommit。</strong></p> 
<h5 id="%E5%8F%AF%E5%BA%8F%E5%88%97%E5%8C%96%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB" style="margin-left:.0001pt;text-align:justify;">可序列化隔离级别</h5> 
<p>事务仅看到<strong>事务开始时</strong>提交的更改（而不是查询）以及事务本身所做的更改。</p> 
<blockquote> 
 <p>可序列化事务在环境中运行，使其看起来好像没有其他用户在修改数据库中的数据。可序列化隔离适用于以下环境：</p> 
 <ul><li> <p>使用仅更新几行的大型数据库和短事务</p> </li><li> <p>两个并发事务修改相同行的可能性相对较低</p> </li><li> <p>运行时间较长的事务主要是只读的</p> </li></ul> 
</blockquote> 
<p style="margin-left:0cm;">在可序列化隔离中，通常在语句级别获得的读取一致性扩展到<strong>整个事务</strong>。事务读取的任何行在重新读取时都保证相同。任何查询都保证在事务期间返回相同的结果，因此无论查询运行了多长时间，其他事务所做的更改都对查询不可见。可序列化事务不会遇到脏读、模糊读或幻像读。</p> 
<blockquote> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;">当可序列化事务失败并出现<code>ORA-08177</code>错误时，应用程序可以执行多个操作，包括：</span></span></p> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">将执行的工作提交到该点</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">执行其他（但不同）语句，也许在回滚到事务中较早建立<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-ED9601F2-D0A2-4FE5-83A8-8F7F9E9E0D18" rel="nofollow" title="的保存点">的保存点</a>之后</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">回滚整个事务</span></p> </li></ul> 
</blockquote> 
<h5 id="CNCPT-GUID-371C3622-540E-490C-BD83-F12CE4CF39C6">只读隔离级别</h5> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">只读隔离级别类似于可序列化的<strong>隔离级别</strong>，但只读事务不允许在事务中修改数据，除非用户是</span></span> <code><span style="background-color:#ffffff;"><span style="color:#1a1816;">SYS</span></span></code><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
<h4 id="Oracle%E7%9A%84%E9%94%81%E5%AE%9A%E6%9C%BA%E5%88%B6" style="margin-left:0cm;">Oracle的锁定机制</h4> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">锁</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是一种防止破坏互的机制，存在多用户模式。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库使用两种类型的锁：独占锁和共享锁。在行或表等资源上只能获取一个独占锁，但在单个资源上可以获取多个共享锁。</span></span></p> 
<blockquote> 
 <p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">锁会影响读取器和编写器的交互：</span></span></p> 
 <ol><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">仅当由编写器修改时，才会锁定行；</span></span><br> 当语句更新一行时，事务仅获取此行的锁。通过在行级别锁定表数据，数据库可以最大程度地减少对相同数据的争用。在正常情况下<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/data-concurrency-and-consistency.html#fn_1" rel="nofollow" id="fn_1" name="fn_1" title="，数据库">，数据库</a>不会将行锁定升级到块或表级别。</li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">行的编写器阻止同一行的并发编写器；</span></span><br> 如果一个事务正在修改行，则行锁会阻止另一个事务同时修改同一行。</li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">读取器从不阻止编写器；</span></span><br> 由于行的读取器不会锁定它，因此编写器可以修改此行</li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当编写器更改时，数据库使用撤消数据为读者提供一致的行视图。</span></span></li></ol> 
</blockquote> 
<blockquote> 
 <p>锁满足以下重要的数据库要求：</p> 
 <ul><li> <p>一致性：在用户完成之前，其他会话不得更改会话正在查看或更改的数据。</p> </li><li> <p>完整：数据和结构必须以正确的顺序反映对它们所做的所有更改。</p> </li></ul> 
</blockquote> 
<p>Oracle 在执行 SQL 语句时自动获取必要的锁</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">完整性</span></span></p> 
<blockquote> 
 <p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库在多用户数据库中使用两种锁定模式：</span></span></p> 
 <ul><li> <p>独占锁定模式</p> <p>此模式可防止共享关联的资源。事务在修改数据时获得<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-745FDB36-B218-4F25-BCB1-61D696DB8814" rel="nofollow" title="独占锁">独占锁</a>。第一个以独占方式锁定资源的事务是唯一可以更改资源的事务，直到释放独占锁。</p> </li><li> <p>共享锁定模式</p> <p>此模式允许共享关联的资源，具体取决于所涉及的操作。读取数据的多个用户可以共享数据，每个用户都持有共享锁，以防止需要独占<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-A0909390-32EF-4122-B892-659E0F04C709" rel="nofollow" title="锁">锁</a>的写入器并发访问。多个事务可以获取同一资源的共享锁。</p> </li></ul> 
</blockquote> 
<p style="margin-left:0;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在锁转换中，数据库会<strong>自动</strong>将限制性较低的表锁<strong>转换为限制性较高</strong>的表锁。</span></span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">死锁</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是两个或多个用户等待彼此锁定的数据的情况。死锁会阻止某些事务继续工作。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会自动检测死锁，并通过回滚死锁中涉及的语句来释放一组冲突的行锁来解决冲突。</span></span></p> 
<p style="margin-left:0cm;">注：<strong>会话A修改了行A，会话B再修改行B，会话A再修改行B就会堵塞，此时会话B再去修改行A就会死锁，直接回滚会话B。</strong></p> 
<h4 id="%E8%87%AA%E5%8A%A8%E9%94%81" style="margin-left:0cm;">自动锁</h4> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库根据资源和正在执行的操作，自动获取不同限制级别的不同类型的锁。</span></span></p> 
<p style="margin-left:0cm;text-align:center;"><img alt="" height="173" src="https://images2.imgbox.com/8e/de/xl9BajhR_o.png" width="370"></p> 
<h5 id="CNCPT-GUID-6D4F7A79-A5F1-470A-ADEF-8888565DE84F">DML锁</h5> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">DML</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">锁（也称为<em>数据锁</em>）保证多个用户同时访问的数据的完整性，有行锁（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">TX</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）表锁（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">TM</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">行锁</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"><em>TX</em> </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">锁）是单行表上的锁。行锁主要用作排队机制，以防止两个事务修改同一行，行锁一直存在，直到事务提交或回滚。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">如果事务获取了行的锁，则该事务还会获取包含该行的表的锁。表锁可防止冲突的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作，这些操作将覆盖当前事务中的数据更改。</span></span></p> 
<p style="margin-left:0;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将锁信息<strong>存储</strong>在包含锁定行的数据块中。数据库使用排队机制来获取行锁，如果事务需要锁定未锁定的行，则事务会在数据块中放置锁定。</span></span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">表锁</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"><em>TM </em></span></span><em><span style="background-color:#ffffff;"><span style="color:#1a1816;">锁）</span></span></em><span style="background-color:#ffffff;"><span style="color:#1a1816;">DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作需要表锁来代表事务保留对表的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">访问权限，并防止与事务冲突的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作。</span></span><span style="color:#1a1816;"><span style="background-color:#ffffff;">可以在以下任何模式下保持表锁：</span></span></p> 
<blockquote> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">行共享 （RS  </span>Row Share<span style="color:#1a1816;">）</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">此锁也称为<em>子共享表锁 （SS），</em></span><span style="color:#1a1816;">表示在表上持有锁的事务已锁定表中的行并打算更新它们。行共享锁定是</span>最低级别的共享模式锁。</p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">行独占表锁定 （RX  </span>Row eXclusive<span style="color:#1a1816;">）</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">此锁也称为<em>次独占表锁 （SX），</em>通常表示持有锁的事务已更新表行或发出<code>SELECT ... FOR UPDATE</code>。SX 锁允许其他事务在同一表中同时查询、插入、更新、删除或锁定行。因此，SX 锁允许多个事务同时获取同一表的 SX 和子共享表锁。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">共享表锁定 （S  </span>Share<span style="color:#1a1816;">）</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">事务持有的共享表锁允许其他事务查询该表（不使用<code>SELECT ... FOR UPDATE</code>），但仅当单个事务持有共享表锁时，才允许更新。由于多个事务可能同时持有共享表锁，因此持有此锁不足以确保事务可以修改表。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">共享行独占表锁定 （SRX  </span>Shared Row eXclusive<span style="color:#1a1816;">）</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">此锁也称为共享<em>子独占表锁 （SSX），比共享表锁</em>更具限制性。一次只有一个事务可以获取给定表上的 SSX 锁。事务持有的 SSX 锁允许其他事务查询表（除外<code>SELECT ... FOR UPDATE</code>），但不允许更新表。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">独占锁 （X   </span>eXclusive<span style="color:#1a1816;">）</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">此锁是最严格的，禁止其他事务执行任何类型的 DML 语句或在表上放置任何类型的锁。</span></p> </li></ul> 
</blockquote> 
<p style="margin-left:0cm;"><img alt="" height="227" src="https://images2.imgbox.com/3e/b6/CHWPMDmK_o.png" width="421"></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">锁和外键</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">：锁定行为取决于外键列是否编制索引。如果未为外键编制索引，则子表会<strong>全表被锁定</strong>，并发性将降低。如果子表指定</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">，则从父表中删除可能会导致从子表中删除。</span></span></p> 
<h5 id="DDL%E9%94%81" style="margin-left:0px;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">DDL锁</span></span></strong></h5> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据字典（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">DDL</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）锁</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">在正在进行的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">DDL</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作作用于或引用对象时保护架构对象的定义。</span></span></p> 
<p style="margin-left:0;text-align:justify;">Oracle 代表任何需要它的 DDL 事务<strong>自动</strong>获取 DDL 锁<span style="background-color:#ffffff;"><span style="color:#1a1816;">，用户无法显式请求 DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">锁。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong>独占</strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>锁</strong>（排它锁）可防止其他会话获取 DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">或</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML 锁，</span></span>大多数 DDL 操作都需要独占 DDL 锁。</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>共享</strong></span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>DDL</strong> </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">锁可防止对冲突的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作进行破坏性干扰，但允许类似</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作的数据并发。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">解析锁</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">由</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句或</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PL/SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">程序单元为其引用的每个模式对象持有。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">获取解析锁，以便在更改或删除引用的对象时使关联的</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E0BE3164-B0A9-4ED8-AD19-2048ADFFC9BB" rel="nofollow" title="共享 SQL 区域">共享 SQL 区域</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">失效。解析锁不允许任何</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作，并且可以中断以允许冲突的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句执行的解析阶段，在</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-64AFFF3A-C836-44F9-A25C-86CE4B9B16A8" rel="nofollow" title="共享池">共享池</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">中获取解析锁。只要该语句的共享</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">区域保留在共享池中，就会保持锁。</span></span></p> 
<h5 id="%E7%B3%BB%E7%BB%9F%E9%94%81" style="margin-left:0px;text-align:justify;">系统锁</h5> 
<h6 id="Latch%E9%97%A9%E9%94%81"><span style="background-color:#ffffff;">Latch</span><span style="background-color:#ffffff;">闩锁</span></h6> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用各种类型的<strong>系统锁</strong>来保护内部数据库和内存结构，用户无法访问这些机制。</span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;">Latch</span><span style="background-color:#ffffff;">闩锁是一种低级序列化机制，用于协调多用户对共享数据结构、对象和文件的访问。</span></p> 
<p style="margin-left:0cm;">闩锁可保护共享内存资源在被多个进程访问时免受损坏。具体而言，锁存器可保护数据结构免受以下情况的影响：</p> 
<blockquote> 
 <ul><li> <p>多个会话并发修改</p> </li><li> <p>被一个会话读取，同时被另一个会话修改</p> </li><li> <p>访问时内存的释放（老化）</p> </li></ul> 
</blockquote> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">通常，单个闩锁可保护</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中的多个对象。与排队闩锁（如行锁）不同，闩锁<strong>不允许会话排队</strong>。闭锁的增加意味着并发性的降低，过多的</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-1BFB2AF7-BC88-4A93-B9AA-C75CA62C5824" rel="nofollow" title="硬解析">硬解析</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作会造成对库缓存闩锁的争用。</span></span></p> 
<h6 id="%E4%BA%92%E6%96%A5%E5%AF%B9%E8%B1%A1" style="margin-left:0px;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">互斥对象</span></span></strong><strong> </strong></h6> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">互斥对象</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">mutex</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">是一种低级机制，可防止内存中的对象在并发进程访问时老化或损坏。互斥锁类似于闩锁，但闩锁通常保护一组对象，而互斥锁保护单个对象。</span></span></p> 
<p>互斥体有几个好处：</p> 
<blockquote> 
 <ul><li> <p>互斥锁可以减少争用的可能性。</p> <p>由于闩锁保护多个对象，因此当进程尝试同时访问其中任何一个对象时，它可能会成为瓶颈。通过序列化对单个对象而不是组的访问，互斥锁提高了可用性。</p> </li><li> <p>互斥锁比锁存器消耗更少的内存。</p> </li><li> <p>在共享模式下，互斥锁允许多个会话并发引用。</p> </li></ul> 
</blockquote> 
<p><a id="CNCPT1360"></a><a id="CNCPT1361"></a><a id="CNCPT1362"></a><a id="CNCPT1359"></a></p> 
<h6 id="%E5%86%85%E9%83%A8%E9%94%81"><a id="GUID-58E2545B-A3F8-48C7-B23B-4E2EEF1BF18A" name="GUID-58E2545B-A3F8-48C7-B23B-4E2EEF1BF18A"></a>内部锁</h6> 
<p>内部锁是比闩锁和互斥锁更高层次、更复杂的机制，具有多种用途。</p> 
<p>数据库使用以下类型的内部锁：</p> 
<blockquote> 
 <ul><li> <p>字典缓存锁</p> <p>这些锁的持续时间非常短，在修改或使用条目时保存在字典缓存中的条目上。它们保证正在解析的语句不会看到不一致的对象定义。字典缓存锁可以是共享的，也可以是独占的。共享锁在解析完成时释放，而独占锁在 DDL 操作完成时释放。</p> </li><li> <p>文件和日志管理锁</p> <p>这些锁保护各种文件。例如，内部锁保护<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-DF498605-D186-451B-87AA-73DF396AD599" rel="nofollow" title="控制文件">控制文件</a>，以便一次只有一个进程可以更改它。另一个锁协调联机重做日志文件的使用和存档。锁定数据文件以确保多个实例以共享模式装入数据库，或者一个实例以独占模式装入数据库。由于文件和日志锁指示文件的状态，因此这些锁必须长时间保持。</p> </li><li> <p>表空间和撤消段锁</p> <p>这些锁可保护表空间并撤消段。例如，访问数据库的所有实例必须就表空间是联机还是脱机达成一致。撤消段已锁定，以便只有一个数据库实例可以写入段。</p> </li></ul> 
</blockquote> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">可以手动覆盖</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库默认锁定机制。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">借助</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库锁管理服务，您可以为特定应用<strong>定义自己的锁</strong>。</span></span></p> 
<h3 id="10%C2%A0%E4%BA%8B%E5%8A%A1" style="margin-left:0cm;">10 <strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务</span></span></strong></h3> 
<h4 id="%E4%BA%8B%E5%8A%A1%E7%AE%80%E4%BB%8B"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务简介</span></span></strong></h4> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是包含一个或多个</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句的逻辑</span><strong><span style="color:#fe2c24;">原子</span></strong><span style="color:#1a1816;">工作单元。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务对</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句进行分组，以便全部提交（这意味着它们应用于数据库），或者全部回滚，这意味着它们从数据库中撤消。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库为每个事务分配一个称为</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-71C31D71-F2E8-4FB9-9010-062C1C407CEF" rel="nofollow" title="事务 ID">事务 ID</a> <span style="background-color:#ffffff;"><span style="color:#1a1816;">的唯一标识符。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;">所有 Oracle 事务都遵循数据库事务的基本属性，称为 <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-2684886B-AB0E-4F65-9B24-688511AED791" rel="nofollow" title="ACID 属性">ACID 属性</a>。ACID 是以下内容的首字母缩写词：</span></span></p> 
<blockquote> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">原子数</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">事务的<strong>所有任务都已执行或不执行</strong>。没有部分交易。例如，如果事务开始更新 100 行，但系统在更新 20 行后失败，则数据库会将更改回滚到这 20 行。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">一致性</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">事务将数据库从<strong>一个一致状态带到另一个一致状态</strong>。例如，在借记储蓄账户并贷记支票账户的银行交易中，故障不得导致数据库仅贷记一个账户，这会导致数据不一致。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">隔离</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">在提交事务之前，事务的效果<strong>对其他事务不可见</strong>。例如，更新表的一个用户看不到另一个用户同时进行的未提交的更改。因此，在用户看来，事务似乎是串行执行的。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">持久性</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">已提交事务所做的<strong>更改是永久性的</strong>。事务完成后，数据库通过其恢复机制确保事务中的更改不会丢失。</span></p> </li></ul> 
</blockquote> 
<p>数据库事务由一个或多个语句组成。具体而言，事务由以下内容之一组成：</p> 
<blockquote> 
 <ul><li> <p>一个或多个数据操作语言 （DML） 语句，它们共同构成对数据库的原子更改</p> </li><li> <p>一种数据定义语言 （DDL） 语句</p> </li></ul> 
</blockquote> 
<p>事务有开始和结束。</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">事务在遇到第一个可执行</span><span style="background-color:#ffffff;">SQL</span><span style="background-color:#ffffff;">语句时<strong>开始</strong>。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务<strong>开始</strong>时，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会将事务分配给可用的撤消数据段，以记录新事务的</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-297B963A-989C-4720-B061-A2352FF72892" rel="nofollow" title="撤消">撤消</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">条目。在分配撤消段和事务表槽之前，不会分配</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-BFF71130-2760-4C64-8829-7772C803FBE7" rel="nofollow" title="事务">事务</a><span style="background-color:#ffffff;"><span style="color:#1a1816;"> ID</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">，这发生在第一个</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句期间。事务</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> ID </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">对于事务是唯一的，表示撤消段编号、槽和序列号。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务<strong>结束，</strong></span></span>发生以下任一操作时，事务结束：</p> 
<ol><li style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;">用户发出不带</span><span style="background-color:#ffffff;">SAVEPOINT</span><span style="background-color:#ffffff;">子句的</span><span style="background-color:#ffffff;">COMMIT</span><span style="background-color:#ffffff;">或</span><span style="background-color:#ffffff;">ROLLBACK</span><span style="background-color:#ffffff;">语句；</span></li><li style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库在每个</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DDL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句之前和之后发出隐式语句；</span></span></li><li style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;">用户正常退出大多数</span><span style="background-color:#ffffff;"> Oracle</span><span style="background-color:#ffffff;">实用程序和工具，隐式提交当前事务；</span></li><li style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">客户端进程异常终止，导致使用存储在事务表和撤消段中的元数据隐式回滚事务。</span></span></li></ol> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句级原子性，这意味着</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句是一个原子</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">工作单元，<strong>要么完全成功，要么完全失败</strong>。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">系统更改编号</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">SCN</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">是</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库使用的逻辑内部时间戳。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">SCN </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">对数据库中发生的事件进行排序，以单调递增的顺序出现。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle在</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-78C0E867-233A-4857-B9FE-A3852A9B7BDF" rel="nofollow" title="系统全局区域 （SGA）">系统全局区域 （SGA）</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">中递增</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SCN</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">当事务修改数据时，数据库会将新的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SCN </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">写入分配给该事务的撤消数据段。然后，日志编写器进程立即将事务的提交记录写入联机</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-2A8BC112-AB70-4B06-9F85-FE975861CEE0" rel="nofollow" title="重做日志">重做日志</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">。提交记录具有事务的唯一</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SCN</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SCN </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">还是</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-FFDBC27D-CE99-49C7-8BB9-C8C2D8D52801" rel="nofollow" title="实例">实例</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">恢复和</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-938A3E7D-CC65-496C-9DB3-3CFC45AFA8DD" rel="nofollow" title="媒体恢复">媒体恢复</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">机制的一部分。</span></span></p> 
<h4 id="%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6" style="margin-left:0px;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务控制</span></span></strong></h4> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">事务控制</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是对</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句所做的更改以及将</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句分组到事务中的管理。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">相关语句：Commit</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">永久化、</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">savepoint</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">保存点、</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">rollback</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>撤销</strong>这段时间的修改。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>事务名称</strong>是用户指定的可选标记，用于提醒事务正在执行的工作。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="299" src="https://images2.imgbox.com/00/83/pIkLq9qb_o.png" width="439"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>活动事务</strong>是已启动但尚未提交或回滚的<strong>事务</strong>。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong>保存点</strong>是事务上下文中用户声明的中间标记。</p> 
<h5 id="%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A" style="margin-left:0px;text-align:justify;">事务回滚</h5> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">未提交事务的<strong>回滚</strong>会撤消事务中</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句对数据执行的任何更改：</span></span></p> 
<blockquote> 
 <ol><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用相应的撤消段撤消事务中所有</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句所做的所有更改；</span></span></li><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">释放事务持有的所有数据锁</span></span></li><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">删除事务中的保存点</span></span></li><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">结束事务</span></span></li></ol> 
</blockquote> 
<h5 id="%E4%BA%8B%E5%8A%A1%E6%8F%90%E4%BA%A4" style="margin-left:0px;text-align:justify;">事务提交</h5> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>提交</strong>结束当前事务，并使事务中执行的所有更改永久化：</span></span></p> 
<blockquote> 
 <ol><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库生成唯一的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">scn</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">；</span></span></li><li style="text-align:justify;"><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E96BC851-0B78-4250-8EAB-26EBDF4FE5A6" rel="nofollow" title="日志编写器进程 （LGWR）">日志编写器进程 （LGWR）</a> <span style="background-color:#ffffff;"><span style="color:#1a1816;">进程将重做日志缓冲区中的剩余重做日志条目写入联机重做日志，并将事务</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SCN </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">写入联机重做日志。</span></span></li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">释放对行和表的锁定。</span></span></li><li style="text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">删除事务中的保存点</span></span></li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库执行</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-5E20E19B-FC72-40E3-A129-306B52DC9607" rel="nofollow" title="提交清理">提交清理</a>。</li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库将事务标记为完成。</span></span></li></ol> 
</blockquote> 
<p style="margin-left:0;text-align:justify;">事务提交后，用户可以查看更改。<span style="background-color:#ffffff;"><span style="color:#1a1816;">提交的速度不会随着事务中修改的数据大小而增加，提交中最长的部分是</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> LGWR </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">执行的物理磁盘</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> I/O</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">。但是，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">LGWR </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">花费的时间减少了，因为它一直在后台以增量方式写入重做日志缓冲区的内容。</span></span></p> 
<h4 id="%E4%BA%8B%E5%8A%A1%E9%98%B2%E6%8A%A4" style="margin-left:0cm;"><span style="background-color:#ffffff;">事务防护</span></h4> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">从</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> 12c 开始，事务防护为应用程序提供了一种工具，用于在可恢复中断后确定正在进行的事务的状态。</span></span>在 Oracle12c 之前，<span style="background-color:#ffffff;"><span style="color:#1a1816;">返回到客户端的提交消息不是持久性的。</span></span></p> 
<p style="margin-left:0;text-align:justify;">下图是客户端应用程序和数据库之间交互的高级表示形式。</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="172" src="https://images2.imgbox.com/f6/e3/p0IJF7oX_o.png" width="445"></p> 
<p style="margin-left:0;text-align:justify;">标准提交情况下，数据库提交事务并向客户端返回成功消息。在<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/transactions.html#GUID-E567DC50-32EC-440E-9352-18E8AD79340B__CIHEHJGB" rel="nofollow" title="图 10-2">图 10-2</a> 中，客户端提交一个 commit 语句并收到一条消息，指出通信失败。在这种情况下，客户端不知道事务的状态。</p> 
<p style="margin-left:0;text-align:justify;">通信失败后，数据库可能仍在运行提交，并且不知道客户端已断开连接。检查事务状态并不能保证活动事务在检查后不会提交。如果客户端由于此信息过期而重新发送提交，则数据库可能会重复该事务，从而导致逻辑损坏。</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库通过使用称为<strong>逻辑事务</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> ID</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">的全局唯一标识符来解决通信故障，</span></span><span style="background-color:#ffffff;">逻辑事务</span><span style="background-color:#ffffff;">ID</span><span style="background-color:#ffffff;">唯一标识在<strong>失败的会话上提交的最后一个数据库事务</strong>。</span></p> 
<p>对于从客户端提交一个或多个事务的每个往返行程，数据库将存储一个逻辑事务 ID。此 ID 可以为提交数据的每次往返访问的应用程序与数据库之间的交互提供事务幂等性。</p> 
<p>最多一次协议通过要求数据库执行以下操作来访问提交结果：</p> 
<ul><li> <p>在约定的重试保留期内维护逻辑事务 ID</p> </li><li> <p>提交时保留逻辑事务 ID</p> </li></ul> 
<p>在事务运行时，数据库和客户端都持有逻辑事务 ID。数据库在身份验证时、从连接池借用时以及每次从执行一个或多个提交操作的客户端驱动程序的往返时为客户端提供逻辑事务 ID。</p> 
<p>使用事务防护时，当错误可恢复且会话上的最后一个事务尚未提交时，应用程序可以<strong>重播事务</strong>。当最后一个事务提交且用户调用已完成时，应用程序可以继续。应用程序可以使用事务保护将已知结果返回到客户端，以便客户端可以决定要执行的下一个操作。</p> 
<h4 id="%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%BF%9E%E7%BB%AD%E6%80%A7" style="margin-left:0cm;"><span style="background-color:#ffffff;">应用程序连续性</span></h4> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">应用程序连续性尝试</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">通过在计划外和计划内中断后重播不完整的应用程序请求来屏蔽应用程序的中断。在此上下文中，请求是应用程序的工作单元，请求由从连接池签出和签入数据库连接之间进行的调用来划分。</span></span></p> 
<p>应用程序连续性的关键组件是运行时、重新连接和重播。阶段如下：</p> 
<blockquote> 
 <ol><li> <p>正常运行时间</p> <p>在此阶段，应用程序连续性执行以下任务：</p> 
   <ul><li> <p>识别数据库请求</p> </li><li> <p>确定本地调用和数据库调用是否可重放</p> </li><li> <p>构建代理对象以启用重播（如有必要）和管理队列</p> </li><li> <p>保留原始调用并验证这些调用，直到数据库请求结束或重播被禁用</p> </li></ul></li><li> <p>重新连接</p> <p>此阶段由可恢复的错误触发。应用程序连续性执行以下任务：</p> 
   <ul><li> <p>确保为数据库请求启用重播</p> </li><li> <p>管理超时</p> </li><li> <p>获取与数据库的新连接，然后验证这是有效的数据库目标</p> </li><li> <p>使用事务防护确定最后一个事务是否成功提交（不会重新提交已提交的事务）</p> </li></ul></li><li> <p>重播</p> <p>应用程序连续性执行以下任务：</p> 
   <ul><li> <p>重播队列中保留的呼叫</p> </li><li> <p>如果在重播期间出现用户可见的结果更改，则禁用重播</p> </li><li> <p>不允许提交，但允许提交最后一次调用（遇到错误）</p> </li></ul></li></ol> 
</blockquote> 
<p>成功重播后，请求将从故障点继续。</p> 
<h4 id="%E8%87%AA%E6%B2%BB%E4%BA%8B%E5%8A%A1" style="margin-left:0cm;"><strong><span style="background-color:#ffffff;">自治事务</span></strong></h4> 
<blockquote> 
 <p><strong><span style="background-color:#ffffff;">自治事务</span></strong><span style="background-color:#ffffff;">是可以从另一个事务（即主事务）调用的独立事务，特征：</span></p> 
 <ul><li> <p>自治事务不会看到主事务所做的未提交的更改，并且不会与主事务共享锁或资源。</p> </li><li> <p>提交自治事务时，自治事务中的更改对其他事务可见。因此，用户可以访问更新的信息，而无需等待主事务提交。</p> </li><li> <p>自治事务可以启动其他自治事务。除了资源限制之外，对可以调用的自治事务级别没有限制。</p> </li></ul> 
</blockquote> 
<h4 id="CNCPT-GUID-47231512-4A3E-4E59-86BD-332E1FB88A88">分布式事务</h4> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">分布式事务是包含一个或多个语句的事务，这些语句使用称为数据库链接的架构对象更新<strong>分布式</strong>数据库的两个或多个不同节点上的数据。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">与本地数据库上的事务不同，分布式事务更改多个数据库上的数据。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>两阶段提交机制</strong>保证参与分布式事务<em>的所有数据库要么</em>全部提交，要么全部撤消事务中的语句。当两阶段提交被任何类型的系统或网络故障中断时，就会发生<strong>可疑分布式事务</strong>。</span></span></p> 
<h2 id="%E5%9B%9B%C2%A0Oracle%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84" style="margin-left:0cm;">四 Oracle 数据库存储结构</h2> 
<h3 id="CNCPT-GUID-FFA872E1-7F63-4DC5-8A35-F21394AB4595">11 物理存储结构</h3> 
<h4 id="CNCPT-GUID-56DFECE5-FB81-494F-9AB8-25F120A1BDDC">物理存储结构简介</h4> 
<p style="margin-left:0;text-align:justify;">关系数据库系统<span style="background-color:#ffffff;"><span style="color:#1a1816;">RDBMS的一个特征是逻辑数据结构（如表、视图和索引）独立于物理存储结构。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">由于物理结构和逻辑结构是分开的，因此您可以管理数据的物理存储，而不会影响对逻辑结构的访问。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Create database </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">发出生成的数据文件：</span></span></p> 
<blockquote> 
 <ul><li> <p><strong>数据文件和临时文件</strong></p> <p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-C93C8397-3433-4A72-B9CE-040FE01A7EE8" rel="nofollow" title="数据文件">数据文件</a>是由 Oracle 数据库创建的持久存储中的物理文件，包含表和索引等数据结构。临时文件是属于临时表空间的数据<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-5760E541-E0BB-4246-A423-E725E599A9D0" rel="nofollow" title="文件">文件</a>。数据库以其他程序无法读取的 Oracle 专有格式将数据写入这些文件。</p> </li><li> <p><strong>控制文件</strong></p> <p>控制文件是跟踪数据库物理组件的根<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-DF498605-D186-451B-87AA-73DF396AD599" rel="nofollow" title="文件">文件</a>。</p> </li><li> <p><strong>联机重做日志文件</strong></p> <p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-2A8BC112-AB70-4B06-9F85-FE975861CEE0" rel="nofollow" title="联机重做日志">联机重做日志</a>是一组文件，其中包含对数据所做的更改的记录。</p> </li></ul> 
</blockquote> 
<p style="margin-left:0cm;"><img alt="" height="599" src="https://images2.imgbox.com/ce/d3/myCDeqQv_o.png" width="535"></p> 
<h5 id="%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E4%BB%B6%E7%9A%84%E6%9C%BA%E5%88%B6" style="margin-left:0px;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">存储数据库文件的机制</span></span></strong></h5> 
<blockquote> 
 <ol><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle ASM</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">包括一个专为</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库设计的文件系统</span></span></li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作系统文件系统。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将大多数文件存储在文件系统中，</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-42D41D4D-C3AC-4D24-AC60-674A872EA211" rel="nofollow" title="文件系统">文件系统</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">是在连续磁盘地址空间内构建的数据结构。</span></span>文件系统允许将磁盘空间分配给许多文件。每个文件都有一个名称，并显示为 Oracle 数据库等应用程序的连续地址空间。数据库可以创建、读取、写入、调整大小和删除文件。</li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">集群文件系统。集群文件系统是一种分布式文件系统，它是协作为其客户端提供高性能服务的服务器</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-1D41A705-62A5-4DC1-A1C9-96781B91492A" rel="nofollow" title="集群">集群</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></li></ol> 
</blockquote> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle <strong>ASM</strong> </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">是适用于</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracl</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">文件的高性能、易于管理的存储解决方案。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle ASM </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">是一个卷管理器，提供专为数据库使用而设计的文件系统</span></span>，并为数据库提供了高性能、可扩展和可靠的存储解决方案。</p> 
<p style="margin-left:0cm;"><img alt="" height="255" src="https://images2.imgbox.com/db/3b/2fCosL7E_o.png" width="346"></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;">Oracle ASM</span></strong><strong><span style="background-color:#ffffff;">磁盘</span></strong><span style="background-color:#ffffff;">是调配到</span><span style="background-color:#ffffff;">Oracle ASM</span><span style="background-color:#ffffff;">磁盘组的<strong>存储设备</strong>，</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">可以是物理磁盘或分区、存储阵列中的逻辑单元号</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">LUN</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）、逻辑卷或网络连接文件。可以在数据库运行时在磁盘组中添加或删除</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle ASM </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">磁盘。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;">Oracle ASM</span></strong><strong><span style="background-color:#ffffff;">磁盘组</span></strong><span style="background-color:#ffffff;">是作为逻辑单元管理的</span><strong><span style="background-color:#ffffff;">Oracle ASM</span></strong><span style="background-color:#ffffff;"><strong>磁盘的集合</strong>。</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">磁盘组中的数据结构是<strong>独立</strong>的，会占用磁盘组中的一些磁盘空间。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;">Oracle ASM</span></strong><strong><span style="background-color:#ffffff;">文件</span></strong><span style="background-color:#ffffff;">是存储在</span><span style="background-color:#ffffff;">Oracle ASM</span><span style="background-color:#ffffff;">磁盘组中的文件。</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库可以将<strong>数据</strong>文件、<strong>控制</strong>文件、<strong>联机重做日志</strong>文件和其他类型的文件存储为</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle ASM </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">文件。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;">Oracle ASM</span></strong><strong><span style="background-color:#ffffff;">扩展区</span></strong><span style="background-color:#ffffff;">是</span><span style="background-color:#ffffff;">Oracle ASM</span><span style="background-color:#ffffff;">文件的一部分。</span><span style="background-color:#ffffff;">ASM</span><span style="background-color:#ffffff;">文件由一个或多个文件扩展区组成。</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle ASM </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">扩展数据块由特定磁盘上的一个或多个分配单元组成。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;">Oracle ASM</span></strong><strong><span style="background-color:#ffffff;">分配单元</span></strong><span style="background-color:#ffffff;">是磁盘组内的基本分配单元。</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">分配单元是</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle ASM </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">分配的<strong>最小连续磁盘空间</strong>。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">Oracle ASM</span><span style="background-color:#ffffff;">实例是管理</span><span style="background-color:#ffffff;">Oracle ASM</span><span style="background-color:#ffffff;">磁盘的特殊</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">实例。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle ASM </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例基于与数据库实例相同的技术构建。例如，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle ASM </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例具有与数据库实例类似的</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-78C0E867-233A-4857-B9FE-A3852A9B7BDF" rel="nofollow" title="系统全局区域（SGA）">系统全局区域（SGA）</a> <span style="background-color:#ffffff;"><span style="color:#1a1816;">和后台进程。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="437" src="https://images2.imgbox.com/26/f1/9QVO19Bl_o.png" width="294"></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">托管</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">文件是一种文件命名策略，使您能够根据数据库对象而不是文件名指定操作，可以在不指定其数据文件名称的情况下创建表空间。</span></span></p> 
<h4 id="%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6" style="margin-left:0cm;"><span style="background-color:#ffffff;">数据文件</span></h4> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在操作系统级别，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将数据库数据存储在称为<strong>数据文件</strong>的结构中，每个</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库必须至少有一个数据文件，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">以物理方式将表空间数据存储在数据文件中。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个未分区<strong>的模式对象</strong>和对象的每个分区都存储在其自己的段中，该<strong>段</strong>仅属于一个表空间。表空间和数据文件密切相关，但有重要区别：</span></span></p> 
<blockquote> 
 <ol><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">表空间由一个或多个数据文件组成；</span></span></li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库的数据存储在每个表空间中的数据文件中；</span></span></li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">段可以跨越一个或多个数据文件，但不能跨越多个表空间；</span></span></li><li style="text-align:justify;"><span style="background-color:#ffffff;">数据库必须具有</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">表空间。在数据库创建过程中，</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">会自动为</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">对象分配任何数据库的第一个数据文件。</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">数据库包含数据字典，一组包含数据库元数据的表。通常，数据库还有一个撤消表空间和一个临时表空间（</span><span style="background-color:#ffffff;">TEMP</span><span style="background-color:#ffffff;">）。</span></li></ol> 
</blockquote> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">下图显示了表空间、数据文件和段之间的关系。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="384" src="https://images2.imgbox.com/6a/dd/DWLwfeqX_o.png" width="465"></p> 
<h5 id="%E6%B0%B8%E4%B9%85%E5%92%8C%E4%B8%B4%E6%97%B6%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6" style="margin-left:0cm;">永久和临时数据文件</h5> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">永久表空间</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">包含持久性架构对象。永久表空间中的对象存储在数据文件中</span></span></p> 
<p style="margin-left:0;text-align:justify;"><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-D49FAC9A-79CC-436C-9656-4A1C94A50A2D" rel="nofollow" title="临时表空间">临时表空间</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">仅在会话期间包含模式对象。本地管理的临时表空间具有临时文件（临时文件），它们是旨在以哈希、排序和其他操作存储数据的特殊文件。临时文件还会在内存空间不足时存储结果集数据。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-D49FAC9A-79CC-436C-9656-4A1C94A50A2D" rel="nofollow" title="临时表空间">临时表空间</a>类似于永<strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">久表空间</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">，但以下情况除外：</span></span></p> 
<ol><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">永久数据库对象（如表）永远不会存储在临时文件中；</span></span></li><li style="text-align:justify;"><span style="background-color:#ffffff;">临时文件是</span><span style="background-color:#ffffff;">NOLOGGING</span><span style="background-color:#ffffff;">模式，因此不会重做生成。媒体恢复无法识别临时文件；</span></li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">不能将临时文件设为只读；</span></span></li><li style="text-align:justify;"><span style="background-color:#ffffff;">不能使用</span><span style="background-color:#ffffff;">ALTER DATABASE</span><span style="background-color:#ffffff;">语句创建临时文件；</span></li><li style="text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">创建临时文件或调整大小时，不能保证为指定的文件分配磁盘空间。临时文件被创建为</span></span>稀疏文件<span style="background-color:#ffffff;"><span style="color:#1a1816;">，磁</span></span><span style="background-color:#ffffff;">盘块不是在文件创建或重新创建时分配，而是在首次访问这些块时分配。</span></li><li style="text-align:justify;"><span style="background-color:#ffffff;">临时文件信息显示在数据字典视图</span><span style="background-color:#ffffff;">DBA_TEMP_FILES</span><span style="background-color:#ffffff;">和动态性能视图</span><span style="background-color:#ffffff;">V$TEMPFILE</span><span style="background-color:#ffffff;">中，但不在</span><span style="background-color:#ffffff;">DBA_DATA_FILES</span><span style="background-color:#ffffff;">或</span><span style="background-color:#ffffff;">V$DATAFILE</span><span style="background-color:#ffffff;">视图中。</span></li></ol> 
<h5 id="%E8%81%94%E6%9C%BA%E5%92%8C%E8%84%B1%E6%9C%BA%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:justify;">联机和脱机数据文件</h5> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个数据文件都处于联机（可用）或脱机（不可用）状态。</span></span><span style="background-color:#ffffff;">从</span><span style="background-color:#ffffff;">12c</span><span style="background-color:#ffffff;">开始，可以使用</span><span style="background-color:#ffffff;">ALTER DATABASE MOVE DATAFILE</span><span style="background-color:#ffffff;">语句在数据库打开并访问联机数据文件时将该文件从一个物理文件移动到另一个物理文件。您可以使用此技术来实现以下目标：</span></p> 
<blockquote> 
 <ul><li> <p>将表空间从一种存储移动到另一种存储</p> </li><li> <p>将不常访问的数据文件移动到成本较低的存储</p> </li><li> <p>将表空间设为只读，并将其数据文件移动到一次写入存储，例如一次写入多次读取 （WORM） 驱动器</p> </li><li> <p>将数据库移动到 Oracle ASM 中</p> </li></ul> 
</blockquote> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">通过分配指定的磁盘空间量加上数据文件头的开销，为表空间创建数据文件。数据文件头包含有关数据文件的元数据。每个标头都包含一个绝对文件编号（唯一标识数据库中的数据文件）和一个相对文件编号（唯一标识表空间中的数据文件）。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">首次创建数据文件时，分配的磁盘空间将被格式化，但不包含任何用户数据。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="175" src="https://images2.imgbox.com/f6/f1/qLnANJrU_o.png" width="387"></p> 
<h4 id="%E6%8E%A7%E5%88%B6%E6%96%87%E4%BB%B6" style="margin-left:0cm;"><span style="background-color:#ffffff;">控制文件</span></h4> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库控制文件是一个仅与一个数据库关联的小型二进制<strong>文件</strong>。每个数据库都有一个唯一的控制文件，但允许多个相同的副本。</span></span></p> 
<p>Oracle 数据库使用控制文件来查找数据库文件并管理数据库的状态。</p> 
<blockquote> 
 <p>控制文件包含如下信息：</p> 
 <ul><li> <p>数据库名称和数据库唯一标识符 （DBID）</p> </li><li> <p>数据库创建的时间戳</p> </li><li> <p>有关数据文件、联机重做日志文件和存档重做日志文件的信息</p> </li><li> <p>表空间信息</p> </li><li> <p>RMAN 备份</p> </li></ul> 
</blockquote> 
<blockquote> 
 <p>控制文件用于以下用途：</p> 
 <ul><li> <p>它包含有关打开数据库所需的数据文件、联机重做日志文件等的信息。</p> <p>控制文件跟踪数据库的结构更改。例如，当管理员添加、重命名或删除数据文件或联机重做日志文件时，数据库将更新控制文件以反映此更改。</p> </li><li> <p>它包含在数据库未打开时必须可访问的元数据。</p> <p>例如，控制文件包含恢复数据库所需的信息，包括检查点。<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-95DBDA37-4C57-444F-B660-D52B4A99D919" rel="nofollow" title="检查点">检查点</a>指示重做流中的 <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-4B14A746-A8B3-4123-A02A-3FC1C293042C" rel="nofollow" title="SCN">SCN</a>，需要从中开始实例恢复。检查点 SCN 之前提交的每个更改都保证保存在磁盘上的数据文件中。检查点进程至少每三秒在控制文件中记录有关在线重做日志中的检查点位置的信息。</p> </li></ul> 
</blockquote> 
<p>Oracle 在数据库使用期间<strong>连续读取和写入</strong>控制文件，并且必须在数据库打开时<strong>可供写入</strong>。</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">支持同时打开多个相同的控制文件并将其写入同一数据库。通过在不同磁盘上多路复用控制文件，数据库可以<strong>实现冗余，从而避免单点故障</strong>。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">建议维护多个控制文件副本，每个副本位于不同的磁盘上。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">有关数据库的信息存储在控制文件的不同部分中，每个部分都是有关数据库某个方面的一组记录。</span></span></p> 
<blockquote> 
 <p>控制文件包含以下类型的记录：</p> 
 <ul><li> <p>循环重用记录</p> <p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-BC76F728-0DBE-4E79-8145-E70F2880FBAA" rel="nofollow" title="循环重用记录">循环重用记录</a>包含<strong>非关键信息</strong>，如果需要，这些信息<strong>可以覆盖</strong>。当所有可用的记录槽都已满时，数据库将展开控制文件以便为新记录腾出空间，或者覆盖最旧的记录。示例包括有关存档重做日志文件和 RMAN 备份的记录。</p> </li><li> <p>非循环重用记录</p> <p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-ADD6541A-2F2A-4DCE-A881-9B7F7A0499ED" rel="nofollow" title="非循环重用记录">非循环重用记录</a>包含不经常更改且无法覆盖的<strong>关键信息</strong>。信息的示例包括表空间、数据文件、联机重做日志文件和重做线程。Oracle 数据库从不重用这些记录，除非从表空间中删除相应的对象。</p> </li></ul> 
</blockquote> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">读和写控制文件块不同于读和写数据块。对于<strong>控制文件</strong>，</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">数据库直接从<strong>磁盘读取</strong>和写入程序<strong>全局区域（</strong></span><strong><span style="background-color:#ffffff;">PGA</span></strong><span style="background-color:#ffffff;"><strong>）</strong>。每个进程<strong>分配一定数量的</strong></span><strong><span style="background-color:#ffffff;">PGA</span></strong><span style="background-color:#ffffff;"><strong>内存用于控制文件块</strong>。</span></p> 
<h4 id="%E8%81%94%E6%9C%BA%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97" style="margin-left:0cm;"><span style="background-color:#ffffff;">联机重做日志</span></h4> 
<p style="margin-left:0;text-align:justify;">恢复的最关键结构是<strong>联机重做日志</strong>，<span style="background-color:#ffffff;">联机重做日志<strong>记录</strong>对数据文件的更改，由两个或多个预分配的文件组成。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库维护联机重做日志文件以防止数据丢失，服务器进程将每个事务同步写入重做日志缓冲区，然后</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> LGWR</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>进程</strong>将其写入联机</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-BADF3CFF-08C6-42E8-A05E-DEB83502572A" rel="nofollow" title="重做日志">重做日志</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">。当数据库更改撤消段时，数据库也会将这些更改写入联机重做日志。因此，联机重做日志<strong>始终包含</strong>永久对象的撤消数据。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库实例的联机重做日志称为<strong>重做线程</strong>。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">单实例配置中，只有一个实例访问数据库，因此只存在一个重做线程。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">RAC</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中，每个实例都有自己的重做线程。联机重做日志由两个或多个联机重做日志文件组成，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">至少需要两个文件，以确保一个文件始终可供写入，以防另一个文件正在清除或存档过程中。</span></span></p> 
<h5 id="CNCPT-GUID-26BC209A-999D-4606-84F4-D408A9809232">在线重做日志切换</h5> 
<p>Oracle一次仅使用一个联机重做日志文件来存储从重做日志缓冲区写入的记录。</p> 
<p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E96BC851-0B78-4250-8EAB-26EBDF4FE5A6" rel="nofollow" title="日志编写器进程 （LGWR）">日志编写器进程 （LGWR）</a>进程主动写入的联机重做日志文件称为<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-B9F8AD18-CFA3-44C3-A945-5649EC90911C" rel="nofollow" title="当前联机重做日志文件">当前联机重做日志文件</a>。</p> 
<p>当数据库停止写入一个联机重做日志文件并开始写入另一个日志文件时，将发生<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-1A479613-DF95-469C-9C3B-D7DBA54F77F7" rel="nofollow" title="日志切换">日志切换</a>。通常，当当前联机重做日志文件已满且必须继续写入时，会发生切换。但是，您可以将日志切换配置为定期进行，而不管当前联机重做日志文件是否已填满，并手动强制日志切换。</p> 
<p>日志编写器循环写入联机重做日志文件。当日志编写器填充最后一个可用的联机重做日志文件时，进程将写入第一个日志文件，重新启动循环。<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/physical-storage-structures.html#GUID-26BC209A-999D-4606-84F4-D408A9809232__I1006202" rel="nofollow" title="图 11-6">图 11-6</a> 说明了重做日志的循环写入。</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当日志切换并且日志编写器开始写入每个文件时，数据库会为每个文件分配一个新的</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-BD3B74B9-51B3-4E09-AAAD-76D0EA6FDE25" rel="nofollow" title="日志序列号">日志序列号</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">。当数据库重用联机重做日志文件时，此文件将接收下一个可用的日志序列号。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="428" src="https://images2.imgbox.com/1f/92/zYDL9gQA_o.png" width="357"></p> 
<h5 id="%E8%81%94%E6%9C%BA%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%9A%E4%B8%AA%E5%89%AF%E6%9C%AC" style="margin-left:0px;text-align:justify;">联机重做日志文件的多个副本</h5> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">可以在不同的位置自动维护两个或多个相同的在线重做日志副本。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">联机重做</span></span></strong><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E9B9AD20-B224-4631-8654-D91DEBEAEB0A" rel="nofollow" title="日志组由联机重做">日志组由联机重做</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">日志文件及其冗余副本组成。每个相同的副本都是联机重做日志组的成员。每个组由一个数字定义，例如组</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">1</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、组</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">2</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">等。理想情况下，成员的位置应位于单独的磁盘上，以便一个磁盘的故障不会导致整个联机重做日志丢失。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">在图</span><span style="background-color:#ffffff;">11-7</span><span style="background-color:#ffffff;">中，</span><span style="background-color:#ffffff;">A_LOG1</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">B_LOG1</span><span style="background-color:#ffffff;">是组</span><span style="background-color:#ffffff;">1</span><span style="background-color:#ffffff;">的相同成员，而</span><span style="background-color:#ffffff;">A_LOG2</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">B_LOG2</span><span style="background-color:#ffffff;">是组</span><span style="background-color:#ffffff;">2</span><span style="background-color:#ffffff;">的相同成员。组中的每个成员的大小必须相同。</span><span style="background-color:#ffffff;">LGWR</span><span style="background-color:#ffffff;">并发写入组</span><span style="background-color:#ffffff;">1</span><span style="background-color:#ffffff;">（成员</span><span style="background-color:#ffffff;">A_LOG1</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">B_LOG1</span><span style="background-color:#ffffff;">），然后并发写入组</span><span style="background-color:#ffffff;">2</span><span style="background-color:#ffffff;">（成员</span><span style="background-color:#ffffff;">A_LOG2</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">B_LOG2</span><span style="background-color:#ffffff;">），然后写入组</span><span style="background-color:#ffffff;">1</span><span style="background-color:#ffffff;">，依此类推。</span><strong><span style="background-color:#ffffff;">LGWR</span></strong><span style="background-color:#ffffff;">从不同时写入不同组的成员<span style="color:#ff0000;">。</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">建议多路复用联机重做日志。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="357" src="https://images2.imgbox.com/55/f9/BcISw0nU_o.png" width="458"></p> 
<h5 id="%E5%AD%98%E6%A1%A3%E7%9A%84%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:justify;">存档的重做日志文件</h5> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">存档的重做日志文件</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是联机<strong>重做</strong>日志组的已填充成员的副本。该文件不被视为数据库的一部分，而是由数据库创建并写入用户指定位置的联机重做日志文件的脱机副本。</span></span></p> 
<p>存档的重做日志文件是备份和恢复策略的关键部分。您可以使用存档的重做日志文件执行以下操作：</p> 
<ul><li> <p>恢复数据库备份</p> </li><li> <p>更新<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-728D4956-0F56-4D39-A63A-2E3FF5CCEDE4" rel="nofollow" title="备用数据库">备用数据库</a></p> </li><li> <p>使用 Oracle LogMiner 实用程序获取有关数据库历史记录的信息</p> </li></ul> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">生成归档重做日志文件的操作称为归档。该操作可以是自动的，也可以是手动的。只有当数据库处于</span><span style="background-color:#ffffff;">ARCHIVELOG</span><span style="background-color:#ffffff;">模式时才可能。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">归档的重做日志文件包括重做条目和相同成员的联机重做日志组的日志序列号。如果数据库处于</span><span style="background-color:#ffffff;">ARCHIVELOG</span><span style="background-color:#ffffff;">模式，并且启用自动存档，则存档程序进程（</span><span style="background-color:#ffffff;">ARCn</span><span style="background-color:#ffffff;">）将存档其中一个文件。如果</span><span style="background-color:#ffffff;">A_LOG1</span><span style="background-color:#ffffff;">损坏，则进程存档</span><span style="background-color:#ffffff;">B_LOG1</span><span style="background-color:#ffffff;">。归档的重做日志包含从启用归档开始存在的每个重做日志组的副本。</span></p> 
<h5 id="%E5%9C%A8%E7%BA%BF%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E7%9A%84%E7%BB%93%E6%9E%84" style="margin-left:0px;text-align:justify;">在线重做日志的结构</h5> 
<blockquote> 
 <p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">联机重做日志文件包含<strong>重做记录，</strong>重做记录具有更改的所有相关元数据，包括以下内容：</span></span></p> 
 <ul><li> <p>更改的 SCN 和时间戳</p> </li><li> <p>生成更改的事务的事务 ID</p> </li><li> <p>提交事务（如果已提交）时的 SCN 和时间戳</p> </li><li> <p>进行更改的操作类型</p> </li><li> <p>修改后的数据细分受众群的名称和类型</p> </li></ul> 
</blockquote> 
<h3 id="12%20%E9%80%BB%E8%BE%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84" style="margin-left:0cm;"><span style="background-color:#ffffff;">12 逻辑存储结构</span></h3> 
<h4 id="%E9%80%BB%E8%BE%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B">逻辑存储结构简介</h4> 
<p style="margin-left:0cm;text-align:justify;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">为数据库中的所有数据分配逻辑空间。</span></span></p> 
<p style="margin-left:0cm;text-align:justify;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">数据库空间分配的逻辑单元是数据块、扩展数据块、段和表空间。在物理级别，数据存储在磁盘上的数据文件中。数据文件中的数据存储在操作系统块中。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="284" src="https://images2.imgbox.com/03/84/5DeBCzLD_o.png" width="219">    <img alt="" height="270" src="https://images2.imgbox.com/c1/6b/0D00J4O4_o.png" width="366"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">段包含一个或多个区段，每个区段包含多个数据块。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在12-2示例中，一个段具有存储在不同数据文件中的两个扩展数据块。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-2141C31D-6752-4260-91CE-99B4CC557247" rel="nofollow" title="数据块">数据块</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">是</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库中数据存储的<strong>最小逻辑单元</strong>：一个逻辑数据块对应于特定数量的物理磁盘空间字节，例如</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> 2 KB</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">；</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;">区段</span></strong><strong><span style="background-color:#ffffff;">extent</span></strong><span style="background-color:#ffffff;">是一组逻辑上连续的数据块，分配用于存储特定类型的信息；</span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;">段</span></strong><span style="background-color:#ffffff;">是为特定数据库对象分配的一组区：例如，</span><span style="background-color:#ffffff;">employees</span><span style="background-color:#ffffff;">表的数据存储在其自己的数据段中，而</span><span style="background-color:#ffffff;">employees</span><span style="background-color:#ffffff;">的每个索引存储在其自己的索引段中。每个消耗存储的数据库对象都由单个段组成；</span></p> 
<ul><li style="margin-left:0px;text-align:justify;"><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-AA66891C-71B2-4D55-8F64-0E427AE24E88" rel="nofollow" title="表空间">表空间</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">是包含一个或多个段的数据库存储单元：段的所有扩展数据块都存储在同一个表空间中，每个段仅属于一个表空间。在表空间中，段可以包含来自多个数据文件的扩展数据块。</span></span></li></ul> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">必须使用逻辑空间<strong>管理</strong>来跟踪和分配表空间中的扩展数据块。</span></span></p> 
<p>Oracle 数据库根据您创建的类型管理表空间中的空间。您可以创建以下任一类型的表空间：</p> 
<ul><li> <p>本地管理的表空间（默认）</p> <p>数据库使用表空间本身中的位图来管理扩展数据块。因此，本地管理的表空间为位图留出了一部分表空间。在表空间中，数据库可以使用自动段空间管理（ASSM）或手动段空间管理 （MSSM）来管理段。</p> </li><li> <p>字典管理的表空间</p> <p>数据库使用<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-D6A3934F-BA6D-464F-9612-C683E20514A4" rel="nofollow" title="数据字典">数据字典</a>来管理盘区。</p> </li></ul> 
<p style="margin-left:0cm;"><img alt="" height="192" src="https://images2.imgbox.com/a3/ac/dFHCbjJZ_o.png" width="387"></p> 
<h6 id="%E6%9C%AC%E5%9C%B0%E7%AE%A1%E7%90%86%E7%9A%84%E8%A1%A8%E7%A9%BA%E9%97%B4" style="margin-left:0cm;"><span style="background-color:#ffffff;"><strong>本地管理的表空间</strong></span></h6> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><strong>本地管理的表空间</strong>在数据文件头中维护一个<strong>位图</strong>，以跟踪数据文件体中的可用空间和已用空间，每个比特对应于一组块。分配或释放空间时，</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">会更改位图值以反映块的新状态。下图是位图管理存储的概念表示。标头中的</span><span style="background-color:#ffffff;">1</span><span style="background-color:#ffffff;">表示已用空间，而</span><span style="background-color:#ffffff;">0</span><span style="background-color:#ffffff;">表示可用空间。</span></p> 
<p style="margin-left:0cm;"><img alt="" height="308" src="https://images2.imgbox.com/21/08/LFsV0qfK_o.png" width="532"></p> 
<blockquote> 
 <p>本地管理的表空间具有以下优点：</p> 
 <ul><li> <p>避免使用数据字典管理盘区</p> <p>如果消耗或释放扩展数据块中的空间会导致另一个操作消耗或释放数据字典表或撤消段中的空间，则递归操作可能会在字典管理的表空间中发生。</p> </li><li> <p>自动跟踪相邻的可用空间</p> <p>这样，数据库就无需合并自由盘区。</p> </li><li> <p>自动确定本地管理的盘区的大小</p> <p>或者，所有扩展数据块在本地管理的表空间中可以具有相同的大小，并覆盖对象存储选项。</p> </li></ul> 
</blockquote> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">段空间管理是从包含段的表空间继承的属性。在本地管理的表空间中，数据库可以自动或手动管理段。例如，可以自动管理表空间用户中的段，而手动管理表空间工具中的段。</span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">自动段空间管理</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">ASSM</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">方法使用位图来管理表空间中的空间。</span></span><strong><span style="background-color:#ffffff;">ASSM</span></strong><span style="background-color:#ffffff;"><strong>效率更高</strong>，并且是永久的、本地管理的表空间的<strong>默认值</strong>。</span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">位图具有以下优点：简化管理、提高可用性（多个事务可以搜索单独的可用数据块列表，从而减少争用和等待）、</span><span style="background-color:#ffffff;">RAC</span><span style="background-color:#ffffff;">环境中空间与实例的动态关联</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">传统的<strong>手动段空间管理（</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">MSSM</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">方法使用称为可用列表的链表来管理段中的<strong>可用</strong>空间。对于具有可用空间的数据库对象，空闲列表会跟踪</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-F3F5ACB2-94C8-483F-B427-1981836D0609" rel="nofollow" title="高水位标记(hwm)下的块，高水位标记 （HWM）">高水位标记(hwm)下的块，高水位标记 （HWM）</a> <span style="background-color:#ffffff;"><span style="color:#1a1816;">是已使用和尚未使用的段空间之间的分界线。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">除了</span><span style="background-color:#ffffff;">PCTFREE</span><span style="background-color:#ffffff;">之外，</span><span style="background-color:#ffffff;">MSSM</span><span style="background-color:#ffffff;">还要求您使用</span><strong><span style="background-color:#ffffff;">SQL</span><span style="background-color:#ffffff;">参数</span></strong><span style="background-color:#ffffff;">来控制空间分配。</span><span style="background-color:#ffffff;">PCTUSED</span><span style="background-color:#ffffff;">设置当前使用的块中必须存在的可用空间的百分比，以便数据库将其放入空闲列表中。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">一个对象可能有多个空闲列表，对表执行</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">的多个会话可以使用不同的列表，这可以减少争用。每个数据库会话在其会话期间仅使用一个空闲列表。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">可以创建具有一个或多个空闲列表组的对象，这些组是<em>空闲列表</em>的集合。每个组都有一个<em>主自由</em>列表，用于管理组中的各个<em>进程空闲列表</em>。免费列表（组）的空间开销可能很大。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="266" src="https://images2.imgbox.com/be/82/u5NQmLj8_o.png" width="281"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">手动管理段空间可能很复杂。必须调整</span><span style="background-color:#ffffff;">PCTFREE</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">PCTUSED</span><span style="background-color:#ffffff;">以减少行迁移并避免浪费空间。</span></p> 
<h6 id="CNCPT-GUID-E0A29F9D-3987-46BE-AD07-EE27068FDD92">字典管理的表空间</h6> 
<p>字典管理的表空间使用数据字典来管理其扩展数据块。</p> 
<p>每当分配或释放数据块以供重用时，Oracle 数据库都会更新数据字典中的表。例如，当表需要扩展数据块时，数据库将查询数据字典表并搜索空闲扩展数据块。如果数据库找到空间，则修改一个数据字典表，并在另一个数据字典表中插入一行。通过这种方式，数据库通过修改和移动数据来管理空间。</p> 
<p>数据库在后台执行以获取数据库对象空间的SQL是<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-31B21CCC-5324-4B86-A58A-2BC7DF57AB33" rel="nofollow" title="递归 SQL">递归 SQL</a>。频繁使用递归SQL可能会对性能产生负面影响，因为必须序列化对数据字典的更新。本地管理的表空间（缺省值）可避免此性能问题。</p> 
<h4 id="CNCPT-GUID-1AED5140-E820-436C-BEB7-2A985524911E">数据块</h4> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">用<strong>数据块</strong>（也称为</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> <em>Oracle </em></span></span><em><span style="background-color:#ffffff;"><span style="color:#1a1816;">块</span></span></em><span style="background-color:#ffffff;"><span style="color:#1a1816;">或<em>页面</em>），管理数据库数据文件中的逻辑存储空间。数据块是<strong>数据库</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> I/O </span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>的最小单位</strong>。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在物理级别，数据库数据存储在由操作系统块组成的磁盘文件中。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作系统</span></span></strong><span style="color:#1a1816;"><span style="background-color:#ffffff;"><strong>块</strong>是操作系统</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">可以<strong>读取或写入</strong>的<strong>最小数据单位</strong>。相反，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">块是一种逻辑存储结构，其大小和结构对操作系统来说是未知的</span></span> 。                                               </p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作系统块的大小可能与数据块不同，数据库请求多个数据块中的数据，而不是操作系统块。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="253" src="https://images2.imgbox.com/29/8b/agEXEjoD_o.png" width="204"></p> 
<p>当数据库请求数据块时，操作系统会将此操作转换为对永久存储中的数据的请求。数据块与操作系统块的逻辑分离具有以下含义：</p> 
<ul><li> <p>应用程序不需要确定磁盘上数据的物理地址。</p> </li><li> <p>数据库数据可以在多个物理磁盘上进行条带化或镜像。</p> </li></ul> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">DB_BLOCK_SIZE</span><span style="background-color:#ffffff;">初始化参数设置数据库创建时的<strong>数据块大小，</strong>是由</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">表空间设置的，并且是所有其他表空间的默认值。如果未设置</span><span style="background-color:#ffffff;">DB_BLOCK_SIZE</span><span style="background-color:#ffffff;">，则默认数据块大小是特定于操作系统的。数据库的标准数据块大小为</span><span style="background-color:#ffffff;">4 KB</span><span style="background-color:#ffffff;">或</span><span style="background-color:#ffffff;">8 KB</span><span style="background-color:#ffffff;">。如果数据块和操作系统块的大小不同，则数据块大小必须是操作系统块大小的倍数。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">可以创建块大小与</span><span style="background-color:#ffffff;">DB_BLOCK_SIZE</span><span style="background-color:#ffffff;">设置不同的<strong>单个表空间</strong>。</span></p> 
<h5 id="%E6%95%B0%E6%8D%AE%E5%9D%97%E6%A0%BC%E5%BC%8F" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">数据块格式</span></h5> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个数据块都有一个格式或内部结构，使数据库能够跟踪块中的数据和可用空间。无论数据块包含表、索引还是表集群数据，此格式都是相似的。未压缩数据块的格式：</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="312" src="https://images2.imgbox.com/7f/7f/T3nKYiLg_o.png" width="330"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">数据库使用<strong>块开销</strong>来管理块本身。块开销不可用于存储用户数据。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">块的行数据部分包含实际数据，例如表行或索引键条目。正如每个数据块都有内部格式一样，每一行都有一种行格式，</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">如</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">“</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据块</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/logical-storage-structures.html#GUID-754ECC03-DD58-4B49-95D1-B98A23B508B2" rel="nofollow" title="格式">格式</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">”</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">所示，块开销包括以下部分：</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>块头</strong>：包含有关块的一般信息，包括磁盘地址和段类型。对于交易管理的区块，</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-78394D5D-A1F6-4978-8F13-028185F514B5" rel="nofollow" title="区块头">区块头</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">包含活动和历史交易信息。每个更新区块的交易都需要一个</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-B7820ED2-E8D7-40B3-AAAE-2B8F935C220C" rel="nofollow" title="交易条目">交易条目</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">最初在块头中为事务条目保留空间，大多数操作系统中的事务条目大约需要</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> 23 </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">个字节。；</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>表目录</strong>：对于</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-861D8FCE-B86C-46B3-AA01-35066D24F4CF" rel="nofollow" title="堆组织的">堆组织的</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">表，此目录包含有关其行存储在此块中的表的元数据。在表集群中，多个表可以在同一块中存储行；</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>行目录</strong>：对于堆组织的表，此目录描述块的数据部分中行的位置。数据库可以在块底部的任何位置放置一行。行地址记录在行目录向量的一个插槽中。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">块开销的某些部分的大小是固定的，但总大小是可变的。平均而言，块开销总计为</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> 84 </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">到</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> 107 </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">字节。</span></span></p> 
<h6 id="CNCPT-GUID-D993A749-93D0-448C-BDC8-330D805AC481">行格式</h6> 
<p>块的行数据部分包含实际数据，例如表行或索引键条目。正如每个数据块都有内部格式一样，每一行都有一种行格式，使数据库能够跟踪行中的数据。</p> 
<p>Oracle 数据库将行存储为可变长度记录。行包含在一个或多个部分中。每个部分称为<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-4C16E45D-79AF-40D5-ACE2-CE2B301CA97B" rel="nofollow" title="一个行段">一个行段</a>。每个行段都有一个行标题和列数据。</p> 
<p>下图显示了行的格式。</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="414" src="https://images2.imgbox.com/50/66/vNUoIkXm_o.png" width="480"></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库使用行标题来管理存储在块中的行段。一个块中完全包含的行至少具有</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> 3 </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">个字节的行标头。</span></span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在行标题之后，<strong>列数据</strong>部分存储行中的实际数据。行块通常按</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">CREATE TABLE</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句中列出的顺序存储列，但不保证此顺序。例如，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">LONG</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">类型的列最后创建。</span></span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> <strong>rowid</strong> </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">来唯一标识行。在内部，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">rowid </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">是一个结构，用于保存数据库访问行所需的信息。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">rowid </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">不是物理存储在数据库中，而是从存储数据的文件和块推断出来的。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="119" src="https://images2.imgbox.com/33/4c/oOv6iM4u_o.png" width="501"></p> 
<blockquote> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;">扩展的 rowid 以四件式格式显示，格式分为以下组件：<code>OOOOOOFFFBBBBBBRRR</code></span></span></p> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><code>OOOOOO</code></span></p> <p style="margin-left:.5em;text-align:left;"><strong>数据对象编号标识段</strong>（示例查询中的数据对象AAAPec）。数据对象编号被分配给每个数据库段。同一段中的架构对象（如表簇）具有相同的数据对象编号。</p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><code>FFF</code></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">表空间相对数据文件编号标识包含行的数据文件（示例<code>AAF</code>查询中的文件）。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><code>BBBBBB</code></span></p> <p style="margin-left:.5em;text-align:left;">数据块号标识包含行的块（示例查询中的块AAAABS）。数据块编号是相对于其数据文件的，而不是相对于其数据块的。因此，具有相同块号的两行可以驻留在同一块的不同数据文件中。</p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><code>RRR</code></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">行号标识块中的行（示例查询中的行<code>AAA</code>）。</span></p> </li></ul> 
</blockquote> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">将</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> rowid </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">分配给行段后，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">rowid </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">可以在特殊情况下更改。例如，如果启用了行移动，则</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> rowid </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">可能会因为分区键更新、闪回表操作、收缩表操作等而更改。如果禁用了行移动，则在使用</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库实用程序导出和导入行时，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">rowid </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">可能会更改。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库可以使用<strong>表压缩</strong>来消除数据块中的重复值。使用基本表和高级行压缩的数据块的格式与未压缩块基本相同。不同之处在于块开头的符号表存储行和列的重复值。数据库将这些值的出现替换为对符号表的简短引用。</span></span></p> 
<h5 id="%E6%95%B0%E6%8D%AE%E5%9D%97%E4%B8%AD%E7%9A%84%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86" style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;">数据块中的空间管理</span></h5> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当数据库自下而上填充数据块时，行数据和块头之间的可用空间量会减少。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">PCTFREE SQL</span><span style="background-color:#ffffff;">参数设置为更新现有行而保留的数据块的最小可用空间百分比。</span><span style="background-color:#ffffff;">PCTFREE</span><span style="background-color:#ffffff;">对于防止行迁移和避免浪费空间非常重要。</span></p> 
<p style="margin-left:0cm;"><img alt="" height="361" src="https://images2.imgbox.com/80/5f/W2XyQYVl_o.png" width="434"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">某些</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">DML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句可以增加数据块中的可用空间，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">DELETE</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">UPDATE</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将现有值更新为较小值或增加现有值并强制迁移行的语句</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">INSERT</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用高级行压缩的表上的语句。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#161513;">通过合并碎片空间进行优化</span></span></strong></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">释放的空间可能与数据块中可用空间的主区域相邻或不相邻，非连续自由空间称为<strong>碎片空间</strong>。当</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">insert</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">update</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句需要足够大的空间来包含新的段，并且当前最大自由空间放不下的情况，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">自动、透明地合并数据块的可用空间。</span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">仅在上述情况下执行合并，否则性能会因为数据块中可用空间的连续合并而降低。</span></span></p> 
<p style="margin-left:0cm;"><img alt="" height="336" src="https://images2.imgbox.com/0d/05/0mg4pWpj_o.png" width="253">   <img alt="" height="327" src="https://images2.imgbox.com/4c/4b/PdTMOJwu_o.png" width="247"></p> 
<p style="margin-left:0cm;"></p> 
<h6 id="%E9%93%BE%E6%8E%A5%E5%92%8C%E8%BF%81%E7%A7%BB%E7%9A%84%E8%A1%8C" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">链接和迁移的行</span></h6> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">使用链接和迁移来管理太大而无法放入单个块的行。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">在</span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-0F47A5E4-2B7F-4101-AA04-E9641F71AC7F" rel="nofollow" title="行链中">行链中</a><span style="background-color:#ffffff;">，</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">将行的数据存储在为段保留的一个或多个数据块链中；</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">在</span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-CF217247-B358-44B4-9AB6-7FC1557230B7" rel="nofollow" title="行迁移">行迁移</a><span style="background-color:#ffffff;">中，</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">会将整行移动到新的数据块，前提是该行可以放入新块中；</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">只能在一行中存储</span><span style="background-color:#ffffff;"> <strong>255</strong> </span><span style="background-color:#ffffff;">列。</span></p> 
<p style="margin-left:0cm;"><img alt="" height="214" src="https://images2.imgbox.com/ef/93/B71QcXw4_o.png" width="300"><img alt="" height="216" src="https://images2.imgbox.com/e1/dd/LtpZpAxv_o.png" width="299"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">13</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">描述了在数据块中插入大行的过程。该行对于左侧块来说太大，因此数据库通过将第一行段放在左块中，将第二行段放在右块中来链接行。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">14</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">左侧块包含一行，该行已更新，因此该行现在对于该块来说太大。数据库将整行移动到右侧块，并在左侧块中保留指向迁移行的指针。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">链接或迁移行时，检索数据所需的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> I/O </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会增加，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">必须扫描多个块才能检索行的信息。</span></span></p> 
<h5 id="%E7%B4%A2%E5%BC%95%E5%9D%97" style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;">索引块</span></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">索引块是一种特殊类型的数据块，其管理空间的方式与表<strong>块</strong>不同。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用索引块来管理索引中的逻辑存储空间。</span></span></p> 
<h6 id="CNCPT-GUID-84F0C09B-222C-4CA6-85F2-807445844E51">索引块的类型</h6> 
<p>索引包含根块、分支块和叶块。</p> 
<blockquote> 
 <p>块类型定义如下：</p> 
 <ul><li> <p>根块：此块标识索引的入口点。</p> </li><li> <p>分支块：数据库在搜索索引键时在分支块中导航。</p> </li><li> <p>叶块：这些块包含指向关联行的索引键值 rowid。叶块按排序顺序存储键值，以便数据库可以有效地搜索键值范围内的所有行。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">索引条目存储</span></span></strong><span style="background-color:#ffffff;">在索引块中的方式与数据块中的表行相同，块部分中的索引条目不按二进制顺序存储，而是存储在堆中。</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">行目录中条目的排序提高了索引扫描的效率。在范围扫描中，数据库必须读取范围中指定的所有索引键。数据库遍历分支块以标识包含第一个键的叶块。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库可以<strong>重用索引块中的空间</strong>。索引块通常比堆组织的表块有更多的行，在单个索引块中存储很多的行使数据库更容易维护索引，因为它避免了频繁拆分块以存储新数据。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">索引合并</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">将现有索引数据压缩到位，如果重组释放块，则在索引结构中保留空闲块。因此，合并不会释放索引块用于其他用途，也不会导致索引重新分配块。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="242" src="https://images2.imgbox.com/af/bd/cYtMeRH6_o.png" width="307"><img alt="" height="247" src="https://images2.imgbox.com/6c/67/8NNb6X08_o.png" width="315"> </p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">1</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/logical-storage-structures.html#GUID-84CF442F-B8CB-4BFA-9878-743F39EBB48F__BABIBCII" rel="nofollow" title="5">5</a> <span style="background-color:#ffffff;"><span style="color:#1a1816;">显示了合并索引之前的列索引</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">,</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">前三个叶块仅部分已满，如灰色填充线所示。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">16 </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">显示了合并索引后的的索引，前两个叶块现在已满，第三个叶块已释放。</span></span></p> 
<h4 id="%E6%89%A9%E5%B1%95%E6%95%B0%E6%8D%AE%E5%9D%97extend" style="margin-left:0cm;"><span style="background-color:#ffffff;">扩展数据块extend</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">扩展数据块是由逻辑上连续的数据块组成的数据库存储单元。</span></span><span style="background-color:#ffffff;">由于</span><span style="background-color:#ffffff;">RAID</span><span style="background-color:#ffffff;">条带化和文件系统的实现，数据块可以在物理上分散在磁盘上。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">默认情况下，数据库会在创建数据段时为其分配初始范围。范围始终包含在一个数据文件中。</span></span></p> 
<p> <img alt="" height="292" src="https://images2.imgbox.com/0e/c7/ZdrbNY3u_o.png" width="473"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">如果初始扩展数据块已满，并且需要更多空间，则数据库会自动为此段分配增量扩展数据块。增量范围是为线段创建的后续范围。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">分配算法取决于表空间是本地管理的还是字典管理的。在本地管理的情况下，数据库在数据文件的位图中搜索相邻的空闲块。如果数据文件空间不足，则数据库将在另一个数据文件中查找。段的扩展数据块始终位于同一表空间中，但可能位于不同的数据文件中。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个分段都由以扩展数据块表示的<strong>存储参数</strong>定义，这些参数控制</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">如何为段分配可用空间。存储设置按以下优先级顺序确定，列表中较高的设置将覆盖列表较低的设置：</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">段存储子句、表空间存储子句、</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">数据库默认值。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">本地管理的表空间可以具有统一的扩展数据块大小，也可以具有由系统自动确定的可变扩展数据块大小。对于本地管理的表空间，无法在表空间级别指定某些存储参数。</span></span></p> 
<h4 id="%E5%88%86%E6%AE%B5segments" style="margin-left:0cm;"><span style="background-color:#ffffff;"><strong>分段segments</strong></span></h4> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">段是一组扩展数据块，其中包含表空间中逻辑存储结构的所有数据。</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">分配一个或多个扩展数据块以形成表的数据段或者表上索引的索引段，</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">自动或手动管理段空间。</span></span></p> 
<h5 id="%E7%94%A8%E6%88%B7%E6%AE%B5" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><strong>用户段</strong></span></h5> 
<blockquote> 
 <p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库中的单个数据段存储一个用户对象的数据。</span></span>用户细分的示例包括：</p> 
 <ul><li> <p>表、表分区或表集群</p> </li><li> <p><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-A85748CE-C4D4-43ED-BD49-29AFC4AD3A02" rel="nofollow" title="LOB 或 LOB">LOB 或 LOB</a> 分区</p> </li><li> <p>索引或索引分区</p> </li></ul> 
</blockquote> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">默认情况下</span>，数据库使用延迟段创建在创建表、索引和分区时仅更新数据库元数据。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当用户将第一行插入表或分区时，数据库将为表或分区、其</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> LOB </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">列及其索引创建段。延迟段创建可避免不必要地使用数据库资源。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">延迟区段创建已禁用，创建用户段，多个段：</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="123" src="https://images2.imgbox.com/8d/63/LvWebqoQ_o.png" width="373"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="276" src="https://images2.imgbox.com/d2/e0/QQRjHHir_o.png" width="364"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">对象的存储参数确定如何分配每个段的扩展数据块，这些参数会影响与对象关联的数据段的数据检索和存储效率。</span></span></p> 
<h5 id="%E4%B8%B4%E6%97%B6%E6%AE%B5" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">临时段</span></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">处理查询时，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">通常需要临时工作区来执行</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句的中间阶段。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在创建索引时，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">还会将索引段放入临时段中，然后在索引完成后将其转换为永久段。如果可以在<strong>内存</strong>中执行操作，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">不会创建临时段，如果不可以，则会自动在磁盘上分配一个临时段。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">由于临时段的分配和释放经常发生，因此最好</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">为<strong>临时段创建</strong>至少一个特殊表空间</span></span><span style="background-color:#ffffff;">。数据库跨磁盘分布</span><span style="background-color:#ffffff;">I/O</span><span style="background-color:#ffffff;">，并避免使用临时段对</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">和其他表空间进行分段。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">可以为<strong>临时表及其索引分配临时段</strong>，临时表保存仅在事务或会话期间存在的数据。每个会话仅访问为其自身分配的盘区，而无法访问为其他会话分配的盘区。</span></span></p> 
<h5 id="%E6%92%A4%E6%B6%88%E6%AE%B5undo%20segments" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">撤消段undo segments</span></h5> 
<p></p> 
<blockquote> 
 <p>Oracle 维护事务操作的记录，统称为<strong>撤消数据，</strong>Oracle使用撤消数据执行以下操作：</p> 
 <ul><li> <p>回滚<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-6A310BE1-83AB-4C87-ABE1-09CD847A31FB" rel="nofollow" title="活动事务">活动事务</a></p> </li><li> <p>恢复已终止的事务</p> </li><li> <p>提供<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-A2D92FBD-9C36-432E-A44F-0462DB2E5527" rel="nofollow" title="读取一致性">读取一致性</a></p> </li><li> <p>执行一些逻辑闪回操作</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将撤消数据存储在数据库内，而不是外部日志中。撤消数据存储在与数据块一样更新的块中，对这些块的更改会生成重做记录。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">永久对象的撤消数据存储在</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-78A7FBF2-2EB5-4BD6-AECC-D61A5AEF1158" rel="nofollow" title="撤消表空间">撤消表空间</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">中。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">提供了一种完全自动化的机制（称为自动撤消管理模式），用于管理撤消表空间中的</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-31B8DD86-BD6D-446D-A35D-B5BF3654DF9E" rel="nofollow" title="撤消">撤消</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">段和空间。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当事务启动时，数据库将事务绑定（分配）到当前撤消表空间中的撤消段，从而绑定（分配）到事务<strong>表</strong>。多个活动事务可以同时写入同一撤消段或不同的段。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="333" src="https://images2.imgbox.com/bd/40/2uLA43VS_o.png" width="388"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">从概念上讲，撤消段中的范围形成一个环。事务写入一个撤消范围，然后写入环中的下一个范围，依此类推。在任何给定时间，事务仅按顺序写入撤消段中的一个扩展数据块，称为事务的<em>当前扩展数据块。</em>多个活动事务可以同时写入相同或者不同的数据块。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">发出语句时，数据库使用撤消记录<strong>回滚</strong>未提交的事务对数据库所做的更改。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">临时撤消段是仅用于临时撤消数据的可选空间管理容器。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">为了管理空间，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库会跟踪分段中块的状态。<strong>高水位线</strong></span></span><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">HWM</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">是段中的点，超过该点的数据块未格式化且从未使用过。低高水位线（低</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> HWM</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）标记已知所有块都已格式化的点，因为它们包含数据或以前包含的数据。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="209" src="https://images2.imgbox.com/46/9b/SaeRCrxK_o.png" width="278"><img alt="" height="224" src="https://images2.imgbox.com/a1/7e/y4fpbyPF_o.png" width="290"></p> 
<h4 id="%E8%A1%A8%E7%A9%BA%E9%97%B4" style="margin-left:0cm;"><span style="background-color:#ffffff;">表空间</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">表空间</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是段的<strong>逻辑存储容器</strong>。段是占用存储空间的数据库对象，例如表和索引。在物理级别，表空间将数据存储在<strong>一个或多个数据文件或临时文件</strong>中。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">数据库必须具有</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">表空间。</span></p> 
<h5 id="%E6%B0%B8%E4%B9%85%E8%A1%A8%E7%A9%BA%E9%97%B4permanent%20tablespaces" style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;">永久表空间permanent tablespaces</span></h5> 
<p style="margin-left:0;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">永久表空间</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">对持久模式对象进行分组。表空间中对象的段以物理方式存储在数据文件中。</span></span></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">每个数据库用户都被分配了一个默认的永久权限，一个非常小的数据库可能只需要默认的</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">表空间。表空间的作用：</span></p> 
 <p></p> 
 <ul><li> <p>制数据库数据的磁盘空间分配</p> </li><li> <p>为数据库用户分配配额（空间限额或限制）</p> </li><li> <p>使单个表空间联机或脱机，而不会影响整个数据库的可用性</p> </li><li> <p>执行单个表空间的备份和恢复</p> </li><li> <p>使用 Oracle 数据泵实用程序导入或导出应用程序数据</p> </li><li> <p>创建一个<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-F3AC6538-2722-4916-BD9F-EDAB8318CCCD" rel="nofollow" title="可传输的表">可传输的表</a>空间，您可以将该表空间从一个数据库复制或移动到另一个数据库，甚至可以跨平台</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;">通过传输表空间来移动数据可能比导出/导入或卸载/加载相同数据快几个数量级，因为传输表空间仅涉及复制数据文件和集成表空间元数据。传输表空间时，还可以移动索引数据。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">默认情况下，</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">将所有新创建的用户表空间设置为本地管理。</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">但是，如果您手动执行语句并接受默认值，则表空间将受到字典管理。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">注：建议使用（</span><span style="background-color:#ffffff;">DBCA</span><span style="background-color:#ffffff;">）创建新数据库，以便默认情况下本地管理所有表空间，包括</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">。</span></p> 
<h6 id="SYSAUX%E8%A1%A8%E7%A9%BA%E9%97%B4" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">SYSAUX</span></span>表空间</strong></span></h6> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">接口是</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">接口的辅助接口。由于</span><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">是许多以前的</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">功能和产品的默认配置文件，因此它减少了数据库所需的表空间数量，它还减少了系统负载。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">数据库创建或升级会自动创建</span><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">对象。在正常的数据库操作过程中，数据库不允许删除或重命名</span><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">对象。如果</span><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">表空间变得不可用，则核心数据库功能仍然可以运行</span><span style="background-color:#ffffff;">,</span><span style="background-color:#ffffff;">但使用</span><span style="background-color:#ffffff;">SYSAUX</span><span style="background-color:#ffffff;">的数据库功能可能会失败，或者功能有限。</span></p> 
<h6 id="%E6%92%A4%E6%B6%88%E8%A1%A8%E7%A9%BA%E9%97%B4Undo%20Tablespaces" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><strong>撤消表空间<span style="background-color:#ffffff;">Undo Tablespaces</span></strong></span></h6> 
<p style="margin-left:0;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">撤消表空间是为系统管理的<strong>撤消数据保留</strong>的本地管理的</span><strong><span style="background-color:#ffffff;">表空间</span></strong><span style="background-color:#ffffff;">。</span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">与其他永久表空间一样，撤消表空间包含数据文件。这些文件中的撤消块按范围分组。</span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">自动撤消管理模式</span></span></strong></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">撤消表空间要求数据库处于<strong>默认</strong>的<strong>自动</strong>撤消模式。</span></span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">自动模式消除了手动管理撤消段的复杂性。数据库会自动调整自身，以提供撤消数据的最佳保留，从而满足可能需要此数据的长时间运行的查询。</span></span></span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">新安装的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会自动创建撤消表空间。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle11g </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">或更高版本时，可以启用自动撤消管理模式并创建撤消表空间。</span></span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">数据库包含一个</span><span style="background-color:#ffffff;">Undo Advisor</span><span style="background-color:#ffffff;">，它提供有关撤消环境的建议并帮助实现撤消环境的自动化。</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">一个数据库可以包含多个撤消表空间，但一次只能使用一个。</span></span><span style="background-color:#ffffff;">当实例尝试打开数据库时，</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">会自动选择第一个可用的撤消</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">表空间，</span></span><span style="background-color:#ffffff;">如果没有，</span><span style="background-color:#ffffff;"><span style="color:#1a1816;">则实例将在没有撤消表空间的情况启动，</span></span><span style="background-color:#ffffff;">并将撤消数据存储在</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">中。不建议在</span><span style="background-color:#ffffff;">SYSTEM</span><span style="background-color:#ffffff;">中存储撤消数据。</span></p> 
<h6 id="%E5%BD%B1%E5%AD%90%E8%A1%A8%E7%A9%BA%E9%97%B4Shadow%20Tablespaces" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">影子表空间<span style="background-color:#ffffff;">Shadow Tablespaces</span></span></h6> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">影子表空间是用于<strong>影子丢失写保护</strong>的大文件<strong>表空间</strong>。</span></span></p> 
<h6 id="CNCPT-GUID-44C7652F-78D8-410A-8717-FA43F1D5E645" style="margin-left:0px;text-align:left;"><strong><span style="background-color:#ffffff;">影子表空间的用途</span></strong></h6> 
<div style="margin-left:0;text-align:left;"> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">阴影丢失写保护提供快速检测和对<strong>丢失写</strong>的即时响应。</span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当 I/O 子系统确认块写入完成（即使写入未发生）或块的先前映像覆盖当前映像时，会发生数据块丢失写入。</span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">未检测到的丢失写入可能会导致数据损坏，因为不正确的数据可用于其他 DML 事务。例如，事务可以从一个表中读取旧的和不正确的数据，然后基于此数据更新数百个其他表。这样，数据损坏可以蔓延到整个数据库。</span></span></span></p> 
 <blockquote> 
  <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">卷影丢失写保护具有以下优点：</span></span></span></p> 
  <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">它会在标准 DML、SQL*加载程序常规路径加载、直接路径加载和 RMAN 备份使用丢失的写入之前检测到丢失的写入。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">不需要备用数据库，如 Oracle 数据库 11g 中引入的丢失写保护。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">您可以为特定表空间和数据文件启用卷影丢失写保护。您不需要跟踪所有数据。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">您可以将一个影子表空间替换为另一个影子表空间以更改其配置或位置。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">您可以暂停和恢复表空间或数据文件的卷影丢失写保护。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">您可以使用单个语句<code>ALTER DATABASE ... LOST WRITE TRACKING</code><code>PROP$</code>为整个非 CDB 或 PDB 启用或禁用它。请注意，该表指示是否为 PDB 启用跟踪。</span></span></span></p> </li></ul> 
 </blockquote> 
</div> 
<h6 id="%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><span style="color:#161513;">工作原理</span></span></strong></h6> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;">失去写保护需要两个表空间：影子表空间和被跟踪的非影子表空间。下图提供了一个场景示例。表空间</span><span style="background-color:#ffffff;">TBS1</span><span style="background-color:#ffffff;">和</span><span style="background-color:#ffffff;">TBS2</span><span style="background-color:#ffffff;">中的数据文件都由影子表空间跟踪，<strong>只跟踪</strong>表空间</span><span style="background-color:#ffffff;">TBS3</span><span style="background-color:#ffffff;">中的数据文件</span><strong><span style="background-color:#ffffff;">DBF6</span></strong><span style="background-color:#ffffff;">。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="269" src="https://images2.imgbox.com/e0/6b/YUoI06YU_o.png" width="485"></p> 
<h5 id="%E4%B8%B4%E6%97%B6%E8%A1%A8%E7%A9%BA%E9%97%B4" style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;"><strong>临时表空间</strong></span></h5> 
<p style="margin-left:0;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">临时表空间</span><span style="background-color:#ffffff;">包含仅在会话期间保留的瞬态数据，任何永久模式对象都不能驻留在临时表空间中，临时</span><span style="background-color:#ffffff;">文件存储临时</span><span style="background-color:#ffffff;">表空间数据。临时表空间可以提高内存中不适合的多个排序操作</span><span style="background-color:#ffffff;">的并发性。这些表空间还提高了排序期间空间管理操作的效率。</span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;">临时表空间可以是<strong>共享</strong>的，也可以是<strong>本地</strong>的。共享临时表空间将临时文件存储在共享磁盘上，以便数据库实例都可以访问临时</span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-66347815-8AB8-4E23-9B86-F3748CB46AA6" rel="nofollow" title="空间">空间</a><span style="background-color:#ffffff;">。相反，本地临时</span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-3B1784FE-857F-4421-B6F8-17105AEBB6B7" rel="nofollow" title="表空间">表空间</a><span style="background-color:#ffffff;">为每个数据库实例存储单独的非共享临时文件。本地临时表空间是</span><span style="background-color:#ffffff;">12c</span><span style="background-color:#ffffff;">新加的，<strong>提到临时表空间一般指共享</strong>。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">如果用户分配了临时表空间，则数据库<strong>首先</strong>访问它</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">;</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">否则，数据库将访问默认临时表空间。数据库访问查询的临时表空间后，不会切换到其他表空间。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">用户可以为只读实例分配一个默认本地临时表空间，并为读</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">/</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">写实例分配另一个默认本地临时表空间。对于读</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">/</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">写实例，数据库为共享临时表空间提供更高的优先级。对于只读实例，数据库会为本地临时表空间提供更高的优先级。</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">访问读写实例的临时表空间：<strong>共享、本地、默认</strong>；</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">访问只读实例的临时表空间：<strong>本地、默认、共享</strong>。</span></span></p> 
<h5 id="%E8%A1%A8%E7%A9%BA%E9%97%B4%E6%A8%A1%E5%BC%8F" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><strong>表空间模式</strong></span></h5> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">表空间模式决定了表空间的可访问性。</span></span></span></p> 
<h6 id="CNCPT-GUID-274AC80E-624C-4B23-A88C-7E73C22C6040" style="margin-left:0px;text-align:left;"><strong>读/写和只读表空间</strong></h6> 
<div style="margin-left:0;text-align:left;"> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个表空间都处于写入模式，该模式指定是否可以写入。</span></span></span></p> 
 <blockquote> 
  <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">互斥模式如下：</span></span></span></p> 
  <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">读/写模式</span></span></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">用户可以读取和写入表空间。所有表空间最初都创建为读/写。<code>SYSTEM</code>和<code>SYSAUX</code>表空间和临时表空间是永久读/写的，这意味着它们不能设置为只读。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">只读模式</span></span></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">阻止对表空间中的数据文件执行写入操作。只读表空间可以驻留在只读介质（如 DVD 或 WORM 驱动器）上。</span></span></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">只读表空间消除了对数据库的大型静态部分执行备份和恢复的需要。只读表空间不会更改，因此不需要重复备份。如果在介质故障后恢复数据库，则不需要恢复只读表空间。</span></span></span></p> </li></ul> 
 </blockquote> 
 <div id="GUID-274AC80E-624C-4B23-A88C-7E73C22C6040__GUID-88244713-9B1A-4EFE-947B-8717D71744BF" style="margin-left:0px;"> 
  <h6 id="CNCPT-GUID-DBE61726-0DE6-4A85-A49B-9F5587234A87" style="margin-left:0px;text-align:left;"><strong>联机和脱机表空间</strong></h6> 
  <div style="margin-left:0;text-align:left;"> 
   <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">只要数据库处于打开状态，表空间就可以处于联机（可访问）或脱机（不可访问）。</span></span></span></p> 
   <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">表空间通常是在线的，以便用户可以使用其数据。<code>SYSTEM</code>表空间和临时表空间不能脱机。</span></span></span></p> 
   <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">表空间可以自动或手动脱机。例如，您可以使表空间脱机以进行维护或备份和恢复。当遇到某些错误时，数据库会自动使表空间脱机，例如当<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-C27AAA54-E60B-49BC-AB04-7B3848EBAFD6" rel="nofollow" title="数据库编写器 （DBW）">数据库编写器 （DBW）</a> 进程多次尝试写入数据文件时失败时。尝试访问脱机表空间中的表的用户会收到错误。</span></span></span></p> 
   <blockquote> 
    <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当表空间脱机时，数据库将执行以下操作：</span></span></span></p> 
    <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库不允许后续 DML 语句引用脱机表空间中的对象。脱机表空间不能由 Oracle以外的任何实用程序读取或编辑。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">具有引用该表空间中的数据的已完成语句的活动事务在事务级别不受影响。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库将与这些已完成语句对应的撤消数据保存在<code>SYSTEM</code>表空间的延迟撤消段中。当表空间联机时，数据库会根据需要将撤消数据应用于表空间。</span></span></span></p> </li></ul> 
   </blockquote> 
  </div> 
 </div> 
</div> 
<h5 id="CNCPT-GUID-D02B2220-E6F5-40D9-AFB5-BC69BCEF6CD4">表空间文件大小</h5> 
<p>表空间可以是<strong>大文件表空间</strong>或<strong>小文件表空间</strong>。这些表空间在执行未显式引用数据文件或临时文件的 SQL 语句方面无法区分。</p> 
<blockquote> 
 <p>区别如下：</p> 
 <ul><li> <p>小文件表空间可以包含<strong>多个数据文件或临时文件</strong>，但这些文件不能像大文件表空间中一样大。这是<strong>默认表空间类型</strong>。</p> </li><li> <p>大文件表空间包含<strong>一个非常大</strong>的数据文件或临时文件。这种类型的表空间可以执行以下操作：</p> 
   <ul><li> <p><strong>增加数据库的存储容量</strong></p> <p>数据库中数据文件的最大数量是有限的，因此增加每个数据文件的大小会增加总体存储。</p> </li><li> <p><strong>减轻管理许多数据文件和临时文件的负担</strong></p> <p>大文件表空间通过 Oracle 托管文件和自动存储管理 （Oracle ASM） 简化了文件管理，无需添加新文件和处理多个文件。</p> </li><li> <p><strong>对表空间而不是单个文件执行操作</strong></p> <p>大文件表空间使表空间成为磁盘空间管理、备份和恢复等的主要单元。</p> </li></ul><p>大文件表空间仅支持具有 <strong>ASSM</strong> 的本地管理的表空间。但是，本地管理的撤消和临时表空间可以是大文件表空间，即使手动管理段也是如此。</p> </li></ul> 
</blockquote> 
<h3 id="13%E3%80%81Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E4%BE%8B" style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">13</span><span style="color:#1a1816;">、</span><span style="color:#1a1816;">Oracle</span><span style="color:#1a1816;">数据库实例</span></span></h3> 
<h4 id="%E5%AE%9E%E4%BE%8B%E7%AE%80%E4%BB%8B" style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;">实例简介</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库<strong>实例</strong>是一组管理数据库文件的内存结构。在物理级别，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">CDB</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">（</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">Container Database</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">）</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">是由语句创建的磁盘上的一组文件，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">CDB </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">包含一个或多个用户创建的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PDB</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">（</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">Pluggable Database</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">），</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">PDB 是 整个CDB </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">的数据文件集中己的一组数据文件。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个正在运行的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> CDB 都至少与一个 Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例相关联。因为实例存在于内存中，而数据库（在最狭义的意义上）是磁盘上的一组文件，所以实例可以在没有数据库的情况下存在，数据库可以在没有实例的情况下存在。</span></span></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">启动实例时，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会分配一个称为<strong>系统全局区域</strong></span></span><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">SGA</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">的内存区域，并启动一个或多个<strong>后台进程</strong>。</span></span>SGA有多种用途，包括：</p> 
 <ul><li> <p>维护许多进程和线程同时访问的内部数据结构</p> </li><li> <p><strong>缓存从磁盘读取的数据块</strong></p> </li><li> <p>在将重做数据写入联机重做日志文件之前<strong>缓冲重做数据</strong></p> </li><li> <p><strong>存储 SQL 执行计划</strong></p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在单台计算机上运行的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">进程共享</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">进程与</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">关联的方式因操作系统而异。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库实例包括后台进程。服务器进程以及在这些进程中分配的进程内存也存在于实例中。当服务器进程终止时，实例将继续运行。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在单实例配置中，数据库和数据库实例之间存在一对一关系。在</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle RAC </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中，数据库和数据库实例之间存在一对多关系。无论是在单实例还是</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle RAC </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">配置中，数据库实例一次只与一个数据库关联。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="384" src="https://images2.imgbox.com/50/fe/ashwEsyX_o.png" width="360"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">12c</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">以后数据库实例可以存在只读实例，以前都是读写实例。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">数据库实例在使用</span><span style="background-color:#ffffff;">STARTUP</span><span style="background-color:#ffffff;">命令创建时开始，在终止时结束。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">Oracle <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-D8B36584-1666-43AB-84A4-AB6D662AA952" rel="nofollow" title="最佳灵活架构 （OFA）">最佳灵活架构 （OFA）</a> 规则是一组配置准则，旨在确保 Oracle 安装井井有条。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">基目录存储</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">产品的二进制文件：</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">u01/app/oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">主目录是</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">的软件位置</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">/u01/app/oracle/</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">product/12.1.0/dbhome_1</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">系统标识符</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">SID</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">是特定主机上</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库实例的唯一名称。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SID </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">和</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">主值来创建共享内存的密钥。</span></span></p> 
<h4 id="%E5%AE%9E%E4%BE%8B%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD" style="margin-left:0cm;"><span style="background-color:#ffffff;"><strong>实例启动和关闭</strong></span></h4> 
<p style="margin-left:0;"><span style="color:#1a1816;">数据库<strong>实例</strong>提供对数据库的用户访问权限。实例和数据库可以处于各种状态。</span></p> 
<p style="margin-left:0;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">手动启动实例，然后挂载并打开数据库，使其可供用户使用。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="196" src="https://images2.imgbox.com/fa/19/k2LpPZ7X_o.png" width="280"><img alt="" height="207" src="https://images2.imgbox.com/92/5e/9f6nA5NC_o.png" width="297"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="228" src="https://images2.imgbox.com/90/49/En96Kbsv_o.png" width="467"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="200" src="https://images2.imgbox.com/60/3a/MrvTZFVT_o.png" width="470"></p> 
<h5 id="CNCPT-GUID-189ADDB5-1E71-4924-8371-F5B2EFB5B304" style="margin-left:0px;text-align:left;"><strong>如何启动实例</strong></h5> 
<div style="margin-left:0;text-align:left;"> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当 Oracle 数据库启动实例时，它会通过各个阶段进行。</span></span></span></p> 
 <blockquote> 
  <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">阶段如下：</span></span></span></p> 
  <ol style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在特定于平台的默认位置搜索服务器参数文件，如果未找到，则搜索文本<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-96DC327C-8DBE-4B23-BEA5-9207A5CCD83E" rel="nofollow" title="初始化参数文件">初始化参数文件</a></span></span></span>（使用SPFILE或PFILE参数指定STARTUP将覆盖默认行为）</p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">读取参数文件以确定<strong>初始化参数</strong>的值</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">根据初始化参数设置<strong>分配 SGA</strong></span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">启动Oracle<strong>后台进程</strong></span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>打开警报日志和跟踪文件</strong>，并以有效的参数语法将所有显式参数设置写入<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-ACC7727F-41AE-47B1-AADB-2585EE828792" rel="nofollow" title="警报日志">警报日志</a></span></span></span></p> </li></ol> 
 </blockquote> 
</div> 
<h5 id="%E5%A6%82%E4%BD%95%E6%8C%82%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%BA%93" style="margin-left:.0001pt;text-align:justify;">如何<span style="background-color:#ffffff;"><span style="color:#1a1816;">挂载</span></span>数据库</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">挂载：实例<strong>挂载</strong>数据库以将数据库与此实例关联。在</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-FEB61320-F0D4-404D-A25B-E9C1D61E066B" rel="nofollow" title="装入的数据库中">装入的数据库中</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">，数据库是关闭的，只有数据库管理员才能访问。管理员可以在完成特定维护操作时保持数据库关闭。但是，数据库不可用于正常操作。</span></span></p> 
<h5 id="%E5%A6%82%E4%BD%95%E6%89%93%E5%BC%80%E6%95%B0%E6%8D%AE%E5%BA%93" style="margin-left:.0001pt;text-align:justify;">如何打开数据库</h5> 
<blockquote> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;">打开数据库时，Oracle 数据库将执行以下操作：</span></span></p> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">打开撤消表空间以外的表空间中的<strong>联机数据文件</strong></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">如果表空间在先前关闭数据库时处于脱机状态，则当数据库重新打开时，表空间及其相应的数据文件将处于脱机状态。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">获取<strong>撤消表空间</strong></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">如果存在多个撤消表空间，则初始化参数<code>UNDO_TABLESPACE</code>指定要使用的撤消表空间。如果未设置此参数，则选择第一个可用的撤消表空间。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">打开联机重做日志文件</span></p> </li></ul> 
</blockquote> 
<h5 id="%E5%85%B3%E9%97%AD%E6%A8%A1%E5%BC%8F" style="margin-left:.5em;text-align:left;">关闭模式</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="331" src="https://images2.imgbox.com/c1/8e/7R7VKvAU_o.png" width="998"></p> 
<blockquote> 
 <p></p> 
 <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><code>SHUTDOWN ABORT</code></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">此模式适用于<strong>紧急情况</strong>，例如没有其他形式的关机成功时。这种关机模式是<strong>最快</strong>的。但是，后续打开此数据库可能需要更长的时间，因为必须<strong>执行实例恢复</strong>才能使数据文件保持一致。</span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">由于<code>SHUTDOWN</code><code>ABORT</code>不对打开的数据文件执行检查点操作，因此必须先进行实例恢复，然后才能重新打开数据库。其他关闭模式不需要在数据库重新打开之前恢复实例。</span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><code>SHUTDOWN IMMEDIATE</code></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;">此模式通常是仅次于<code>SHUTDOWN</code><code>ABORT</code>的最快模式。Oracle 数据库会终止任何正在执行的 SQL 语句并断开用户的连接。活动事务将终止，未提交的更改将回滚。</span></p> </li><li> <p><code>SHUTDOWN TRANSACTIONAL</code></p> <p>此模式阻止用户启动新事务，但在关闭之前等待所有当前事务完成。此模式可能需要大量时间，具体取决于当前<strong>事务的性质</strong>。</p> </li><li> <p><code>SHUTDOWN NORMAL</code></p> <p>这是关机的默认模式。数据库在关闭之前等待所有连接的用户断开连接</p> </li></ul> 
</blockquote> 
<h5 id="%E5%A6%82%E4%BD%95%E5%85%B3%E9%97%AD%E6%95%B0%E6%8D%AE%E5%BA%93" style="margin-left:.0001pt;text-align:justify;">如何关闭数据库</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库关闭操作隐式在数据库关闭中，操作的性质取决于数据库关闭是正常还是异常。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#161513;">正常关闭：</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong> SGA</strong> </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中的数据写入<strong>数据文件和联机重做日志文件</strong>，数据库关闭联机数据文件和联机重做日志文件。离线表空间的所有脱机数据文件都已关闭，当数据库重新打开时，任何脱机的表空间都将<strong>保持脱机状态</strong>。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">异常关闭</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">abort</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">：打开的数据库实例将立即关闭和关闭数据库，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>不会</strong>将</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">缓冲区中的数据写入数据文件并重做日志文件。随后重新打开数据库<strong>需要实例恢复</strong>，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会自动执行实例恢复。</span></span></p> 
<p style="margin-left:0cm;"><span style="background-color:#ffffff;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">卸载数据库</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">：关闭数据库后，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将卸载数据库以将其与实例解除关联。卸载数据库后，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会关闭数据库的控制文件。此时，数据库实例仍保留在内存中。</span></span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库关闭的最后一步是<strong>关闭实例</strong>。当数据库实例关闭时，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将停止占用内存，并且后台进程将终止。</span></span></p> 
<h4 id="%E6%A3%80%E6%9F%A5%E7%82%B9" style="margin-left:0cm;"><span style="background-color:#ffffff;"><strong>检查点</strong></span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">检查点</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">通常是一致数据库关闭、实例恢复和</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作中的关键机制。</span></span></p> 
<blockquote> 
 <p>该术语具有以下相关含义：</p> 
 <ul><li> <p>指示<strong>检查点位置</strong>的数据结构，即必须开始实例恢复的重做流中的 <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-4B14A746-A8B3-4123-A02A-3FC1C293042C" rel="nofollow" title="SCN">SCN</a></p> <p>检查点位置由数据库缓冲区高速缓存中<strong>最早的脏缓冲区</strong>确定。检查点位置充当指向重做流的指针，并存储在控制文件和每个数据文件头中。</p> </li><li> <p>将数据库缓冲区高速缓存中修改的<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-7913177D-8183-4CC5-8F59-816FE66DA363" rel="nofollow" title="数据库缓冲区">数据库缓冲区</a>写入磁盘</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">检查点进程</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">CKPT</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">负责将检查点写入数据文件头和控制文件。检查点在各种情况下都会发生：线程检查点、表空间和数据文件检查点、增量检查点。</span></span></p> 
<h4 id="%E5%AE%9E%E4%BE%8B%E6%81%A2%E5%A4%8D" style="margin-left:0cm;"><span style="background-color:#ffffff;">实例恢复</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例恢复</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是将联机重做日志中的记录应用于数据文件，以重建在最近检查点之后所做的更改的过程。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例恢复可确保数据库在实例<strong>故障后处于一致状态</strong>，</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-68F9BFC2-703C-48FF-BE8C-236FE3BC8977" rel="nofollow" title="重做线程">重做线程</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">是实例生成的所有更改的记录。提交</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-212D8EA1-D704-4D7B-A72D-72001965CE45" rel="nofollow" title="事务">事务</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">时，</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E96BC851-0B78-4250-8EAB-26EBDF4FE5A6" rel="nofollow" title="日志编写器进程 LGWR">日志编写器进程 LGWR</a> <span style="background-color:#ffffff;"><span style="color:#1a1816;">会将内存中剩余的重做条目和事务</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SCN </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">写入</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-2A8BC112-AB70-4B06-9F85-FE975861CEE0" rel="nofollow" title="联机重做日志">联机重做日志</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">。但是，</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-C27AAA54-E60B-49BC-AB04-7B3848EBAFD6" rel="nofollow" title="数据库编写器 DBW">数据库编写器 DBW</a> <span style="background-color:#ffffff;"><span style="color:#1a1816;">进程会在最有效的时间将修改后的数据块写入数据文件。因此，数据文件中可能暂时存在未提交的更改，而数据文件中尚不存在已提交的更改。</span></span></p> 
<h5 id="%E5%BD%93%20Oracle%E9%9C%80%E8%A6%81%E6%89%A7%E8%A1%8C%E5%AE%9E%E4%BE%8B%E6%81%A2%E5%A4%8D%E6%97%B6" style="margin-left:.0001pt;text-align:justify;">当 Oracle需要执行实例恢复时</h5> 
<blockquote> 
 <p>是否需要实例恢复取决于重做线程的状态，Oracle 在以下情况下会自动执行实例恢复：</p> 
 <ul><li> <p>在单实例数据库或 Oracle RAC 数据库的所有实例发生故障后，数据库将首次打开。这种形式的实例恢复也称为<strong>崩溃恢复</strong>。Oracle 数据库一起恢复已终止实例的联机重做线程。</p> </li><li> <p>Oracle RAC 数据库的某些实例（但不是全部）会失败。实例恢复由配置中幸存的实例自动执行。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例恢复使用检查点来确定必须对数据文件应用哪些更改。检查点位置保证</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SCN </span></span><em><span style="background-color:#ffffff;"><span style="color:#1a1816;">低于</span></span></em><span style="background-color:#ffffff;"><span style="color:#1a1816;">检查点</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SCN </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">的每个已提交更改都保存到数据文件中。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="241" src="https://images2.imgbox.com/6c/e8/5WxXwIau_o.png" width="410"></p> 
<h5 id="CNCPT-GUID-EC07F1A7-EAB6-4B56-8065-CDDEA6969D1E">实例恢复阶段</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在实例恢复期间，数据库必须应用在检查点位置和重做线程结束之间发生的更改。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例恢复的第一阶段称为<strong>缓存恢复</strong>或<strong>前滚</strong></span></span>，将在线重做日志中记录的所有更改重新应用到数据文件。<span style="background-color:#ffffff;"><span style="color:#1a1816;">由于联机重做日志包含撤消数据，因此前滚也会重新生成相应的撤消段</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="348" src="https://images2.imgbox.com/9f/0e/JTDagHh0_o.png" width="541"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">前滚后，必须撤消任何未提交的更改。</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">使用检查点位置，这保证</span><span style="background-color:#ffffff;">SCN</span><span style="background-color:#ffffff;">低于检查点</span><span style="background-color:#ffffff;">SCN</span><span style="background-color:#ffffff;">的每个已提交更改都保存在磁盘上。</span><span style="background-color:#ffffff;">Oracle</span><span style="background-color:#ffffff;">应用撤消块来回滚数据块中未提交的更改，这些更改是在发生故障之前写入的或在缓存恢复期间引入的。此阶段称为回滚或事务恢复。</span></p> 
<h4 id="%E5%8F%82%E6%95%B0%E6%96%87%E4%BB%B6" style="margin-left:0cm;"><span style="background-color:#ffffff;">参数文件</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">要启动数据库实例，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle必须读取<strong>服务器参数文件</strong></span></span>或<strong>文本初始化参数文件</strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">，这些文件包含配置参数的列表。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">初始化</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>参数</strong>是影响实例基本操作的配置参数。实例在启动时从文件中读取初始化参数。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">初始化参数分为两组：基本和高级。</p> 
<p style="margin-left:.0001pt;text-align:justify;">文本初始化参数文件是包含初始化参数列表的文本文件。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle提供了许多初始化参数，以优化其在各种环境中的操作。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="297" src="https://images2.imgbox.com/6b/54/FczJyc57_o.png" width="380"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">包括故障诊断<strong>能力基础设施</strong>，用于预防、检测、诊断和解决数据库问题</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">可以通过调整初始化参数来修改数据库，参数有是静态的还是动态的。</p> 
<h4 id="CNCPT-GUID-E329D228-F334-4506-84C1-EC030032C228">诊断文件</h4> 
<p>Oracle有<strong>故障诊断能力基础设施</strong>，用于预防、检测、诊断和解决数据库问题。问题包括严重错误，例如代码错误、元数据损坏和客户数据损坏。</p> 
<p>多租户容器数据库 （CDB） 和非 CDB 具有体系结构差异。</p> 
<p><strong>自动诊断存储库 </strong>（ADR） 是基于文件的存储库，用于存储数据库诊断数据，例如跟踪文件、警报日志、DDL 日志和运行状况监视器报告。ADR的主要特征包括：</p> 
<blockquote> 
 <ul><li> <p>统一目录结构</p> </li><li> <p>一致的诊断数据格式</p> </li><li> <p>统一的工具集</p> </li></ul> 
</blockquote> 
<p>ADR 主动跟踪<strong>问题</strong>，即数据库中的严重错误。<strong>ADR 基础是 ADR</strong> 根目录。ADR 基可以包含多个 ADR 主目录，其中每个 <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-89658C05-F8DE-4DEC-9F79-E28B229C87CC" rel="nofollow" title="ADR 主">ADR 主</a>目录是 Oracle 产品或组件实例的所有诊断数据（跟踪、转储、警报日志等）的根目录。</p> 
<p><img alt="" height="338" src="https://images2.imgbox.com/3b/1b/uav4fACh_o.png" width="390"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个数据库都有一个<strong>警报日志</strong>，这是一个</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> XML </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">文件，其中包含按时间顺序排列的数据库消息和错误的日志。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">DDL</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">日志与警报日志具有相同的格式和基本行为，但仅包含</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">DDL</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句和详细信息。</span></span>DDL 日志存储在 ADR 主目录的子目录中<code>log/ddl。</code></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">跟踪文件</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是包含用于调查问题的诊断数据的文件。此外，跟踪文件还可以为优化应用程序或实例提供指导。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>诊断转储</strong>文件是一种特殊类型的跟踪文件，其中包含有关状态或结构的详细时间点信息。大多数转储都是由于事件而发生的。</p> 
<h3 id="14%E3%80%81%E5%86%85%E5%AD%98%E6%9E%B6%E6%9E%84" style="margin-left:0px;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">14</span><span style="color:#1a1816;">、内存架构</span></span></h3> 
<h4 id="%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E7%AE%80%E4%BB%8B" style="margin-left:0cm;"><span style="background-color:#ffffff;">内存结构简介</span></h4> 
<h5 id="CNCPT-GUID-02378E7A-865B-456B-8725-1E73D16A34BE">基本内存结构</h5> 
<p>Oracle 数据库包括多个内存区域，每个内存区域包含多个子组件。</p> 
<p>与 Oracle 数据库相关的基本内存结构包括：</p> 
<blockquote> 
 <ul><li> <p>系统全局区域 （<strong>SGA</strong>）</p> <p>SGA 是一组<strong>共享内存结构</strong>，称为 SGA 组件，其中包含一个 Oracle <strong>数据库实例的数据和控制信息</strong>。所有服务器和后台进程共享 SGA。SGA 中存储的数据示例包括缓存数据块和共享 SQL 区域。</p> </li><li> <p>计划全球区域 （<strong>PGA</strong>）</p> <p>PGA 是一个<strong>非共享内存区域</strong>，其中包含专门供 Oracle 进程使用的<strong>数据和控制信息</strong>。Oracle 数据库在 Oracle 进程启动时创建 PGA。</p> <p>每个服务器进程和后台<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E660AC1C-B704-4DC1-A35A-DB49EFB34F4A" rel="nofollow" title="进程">进程</a>都存在一个 PGA。单个 PGA 的集合是总实例 PGA 或<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-8341392A-07AD-45A0-8E71-E330584EEE74" rel="nofollow" title="实例 PGA">实例 PGA</a>。数据库初始化参数设置实例 PGA 的大小，而不是单个 PGA 的大小。</p> </li><li> <p>用户全局区域 （<strong>UGA</strong>）</p> <p>UGA 是与用户会话关联的内存。</p> </li><li> <p>软件代码区</p> <p>软件代码区是内存的一部分，用于存储正在运行或可以运行的代码。Oracle 数据库代码存储在软件区域中，该区域通常与用户程序位于不同的位置，即更独占或受保护的位置。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="521" src="https://images2.imgbox.com/81/34/YVh2JTGT_o.png" width="481"></p> 
<h4 id="%E7%94%A8%E6%88%B7%E5%85%A8%E7%90%83%E5%8C%BA%E5%9F%9FUGA" style="margin-left:0cm;"><span style="background-color:#ffffff;">用户全球区域UGA</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">UGA</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">是<strong>会话内存</strong>，是</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">在用户连接到</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">时分配给每个用户的一块内存区域，用于存储与用户连接相关的会话信息和上下文数据。</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">UGA </span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">在用户会话期间保持存在，在会话结束时释放。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">本质上，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">UGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">存储会话状态，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">UGA</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">包括：</span></span></p> 
<div style="margin-left:-18pt;"> 
 <blockquote> 
  <ol><li style="text-align:left;"><span style="color:#24292f;">用户标识（</span><span style="color:#24292f;">USER ID</span><span style="color:#24292f;">）：</span><span style="color:#24292f;">UGA </span><span style="color:#24292f;">维护了用户连接到数据库时所用的用户名。</span></li><li style="text-align:left;"><span style="color:#24292f;">会话上下文（</span><span style="color:#24292f;">Session Context</span><span style="color:#24292f;">）：</span><span style="color:#24292f;">UGA </span><span style="color:#24292f;">存储了与用户连接相关的上下文信息，如当前模式（</span><span style="color:#24292f;">Schema</span><span style="color:#24292f;">）、当前服务名（</span><span style="color:#24292f;">Service Name</span><span style="color:#24292f;">）、当前会话</span><span style="color:#24292f;"> ID </span><span style="color:#24292f;">等。</span></li><li style="text-align:left;"><span style="color:#24292f;">授权和权限信息（</span><span style="color:#24292f;">Authorization and Privileges</span><span style="color:#24292f;">）：</span><span style="color:#24292f;">UGA </span><span style="color:#24292f;">记录用户的授权和权限信息，包括用户拥有的角色、系统特权和数据库对象的权限等。</span></li><li style="text-align:left;"><span style="color:#24292f;">SQL </span><span style="color:#24292f;">语句状态（</span><span style="color:#24292f;">SQL Statement State</span><span style="color:#24292f;">）：</span><span style="color:#24292f;">UGA </span><span style="color:#24292f;">维护了当前用户正在执行或最近执行的</span><span style="color:#24292f;"> SQL </span><span style="color:#24292f;">语句的状态，如</span><span style="color:#24292f;"> SQL </span><span style="color:#24292f;">语句文本、绑定变量值、执行计划等。</span></li><li style="text-align:left;"><span style="color:#24292f;">会话连接信息（</span><span style="color:#24292f;">Session Connection Information</span><span style="color:#24292f;">）：</span><span style="color:#24292f;">UGA </span><span style="color:#24292f;">存储了与用户连接相关的连接信息，如</span><span style="color:#24292f;"> IP </span><span style="color:#24292f;">地址、网络连接参数、终端机信息等。</span></li><li style="text-align:left;"><span style="color:#24292f;">会话状态（</span><span style="color:#24292f;">Session State</span><span style="color:#24292f;">）：</span><span style="color:#24292f;">UGA </span><span style="color:#24292f;">记录了用户会话的状态信息，如当前事务状态、隔离级别、游标状态等。</span></li></ol> 
 </blockquote> 
</div> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="188" src="https://images2.imgbox.com/55/7b/HUMah1Ga_o.png" width="220"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">UGA</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">必须在会话的生存期内可用于数据库会话。因此，使用</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-E94CE0E3-CC86-4F46-B8EF-54945F026326" rel="nofollow" title="共享服务器">共享服务器</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">连接时，无法将</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> UGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">存储在</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中，因为</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">特定于单个进程。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#24292f;">通过</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;"> UGA</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">，</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">能够跟踪和维护每个用户连接的相关信息，并提供了一个隔离的环境，确保用户之间的数据和上下文分离。</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">UGA </span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">可以用于执行权限验证、资源控制、</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">SQL </span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">语句执行和上下文切换等功能。 </span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">SGA</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">和</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PGA</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">是</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库中的两个重要概念，用于管理和分配数据库内存。</span></span></p> 
<h4 id="PGA%20System%20Global%20Area" style="margin-left:0cm;"><span style="background-color:#ffffff;">PGA<span style="background-color:#ffffff;"><span style="color:#1a1816;"> System Global Area</span></span></span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">PGA</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">是每个用户进程或服务器进程（后台进程）<strong>私有的内存区域</strong>，用于存储会话相关的数据和执行查询的临时数据。每个进程都有自己的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">PGA</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">，用于处理连接到数据库的客户端的请求。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">PGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">的大小和使用由具体的进程和会话决定，动态分配和管理。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">PGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中包括了：</span></span></p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">1. SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">执行统计信息：保存</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">查询执行的统计信息，如</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> CPU </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">时间、逻辑读等。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">2. </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会话变量和临时变量：存储当前会话或查询中的临时数据。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">3. </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">排序区域（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Sort Area</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）：用于执行排序操作的临时存储区域</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">,</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">如</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;"> ORDER BY</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">、</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">GROUP BY </span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">等。</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">4. Hash </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">区域（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Hash Area</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）：用于执行哈希操作的临时存储区域。</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">连接操作和哈希聚合</span></span><span style="background-color:#ffffff;"><span style="color:#24292f;">.</span></span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">5. PGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">连接池（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">PGA Connection Pool</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）：存储数据库连接的状态和会话信息。</span></span></p> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="243" src="https://images2.imgbox.com/de/28/6OWDvdFc_o.png" width="217"><img alt="" height="127" src="https://images2.imgbox.com/80/37/sXLozh6W_o.png" width="407"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">专用</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">SQL</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">区域</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">保存有关已解析的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句的信息和其他特定于会话的信息以进行处理。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="187" src="https://images2.imgbox.com/3b/65/CbQsvkfw_o.png" width="220"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">工作区是</span><span style="background-color:#ffffff;">PGA</span><span style="background-color:#ffffff;">内存的私有分配，用于内存密集型操作<span style="color:#1a1816;">。</span></span>工作区是用于内存密集型操作的 PGA 内存的专用分配。</p> 
<h4 id="SGA%20Program%20Global%20Area" style="margin-left:0cm;"><span style="background-color:#ffffff;">SGA<span style="background-color:#ffffff;"><span style="color:#1a1816;"> Program Global Area</span></span></span></h4> 
<p style="margin-left:.0001pt;text-align:justify;">SGA 是一个读/写内存区域，它与 Oracle 后台进程一起构成一个数据库实例。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">是一个共享的内存区域，由</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例使用来存储全局的数据和管理结构。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中包含了多个组件，如缓冲池、共享池、重做日志缓冲区、数据库缓存等。这些组件用于提高数据库的性能和并发访问能力。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">的大小在数据库启动时配置，并在运行时动态调整。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">常见的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">组件包括：</span></span></p> 
<h5 id="1.%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%93%E5%86%B2%E5%8C%BA" style="margin-left:.0001pt;text-align:justify;">1.数据库缓冲区</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库缓冲池</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">用于存储磁盘数据块的副本，减少读取磁盘的次数，提高数据的访问速度。优化物理</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> I/O</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、将经常访问的块保留在缓冲区缓存中，不经常访问的块写入磁盘。</span></span></p> 
<h6 id="CNCPT-GUID-BC14C103-F8A6-4E72-A451-EECA62F13D85">缓冲状态</h6> 
<p>数据库使用内部算法来管理缓存中的缓冲区。</p> 
<p>缓冲区可以处于以下任何互斥状态：</p> 
<blockquote> 
 <ul><li> <p>闲置</p> <p>缓冲区可供使用，因为它从未使用过或当前未使用。这种类型的缓冲区是数据库最容易使用的。</p> </li><li> <p>干净</p> <p>此缓冲区之前使用过，现在包含截至某个时间点的块的读取一致性版本。该块包含数据，但“干净”，因此不需要检查点。数据库可以固定块并重复使用它。</p> </li><li> <p>脏</p> <p>缓冲区包含尚未写入磁盘的已修改数据。数据库在重用块之前必须对块执行检查点操作。</p> </li></ul> 
</blockquote> 
<h6 id="CNCPT-GUID-D1429BAA-6543-4B34-93DB-C8F33D497B53">缓冲区 I/O</h6> 
<p>逻辑 I/O（也称为缓冲区 I/O）是指缓冲区缓存中缓冲区的读取和写入。</p> 
<p>当在内存中找不到请求的缓冲区时，数据库将执行物理 I/O 以将缓冲区从闪存缓存或磁盘复制到内存中。然后，数据库执行逻辑 I/O 来读取缓存的缓冲区。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库编写器</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">DBW</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">进程定期将冷、脏的缓冲区写入磁盘。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">DBW </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">在以下情况下<strong>写入缓冲区</strong>：</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">服务器进程找不到用于将新块读入数据库缓冲区高速缓存的干净缓冲区；</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库必须推进检查点，</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-95DBDA37-4C57-444F-B660-D52B4A99D919" rel="nofollow" title="检查点">检查点</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">是重做线程中必须从实例</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-FFDBC27D-CE99-49C7-8BB9-C8C2D8D52801" rel="nofollow" title="恢复">恢复</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">开始的位置；</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">表空间将更改为只读状态或脱机。</span></span></p> 
<h6 id="%E7%BC%93%E5%86%B2%E5%8C%BA%E8%AF%BB%E5%8F%96" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#161513;">缓冲区读取</span></span></strong></h6> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当未使用的缓冲区数较少时，数据库必须从缓冲区缓存中删除缓冲区。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">算法取决于是否启用了闪存缓存：</p> 
<blockquote> 
 <ul><li> <p>闪存缓存已禁用</p> <p>数据库根据需要重用每个干净缓冲区，覆盖它。如果以后需要覆盖的缓冲区，则数据库必须从磁盘读取它。</p> </li><li> <p>已启用闪存缓存</p> <p>DBW 可以将干净缓冲区的主体写入闪存缓存，从而可以重用其内存中缓冲区。数据库将缓冲区标头保存在主存储器的 LRU 列表中，以跟踪缓冲区正文在闪存缓存中的状态和位置。如果以后需要此缓冲区，则数据库可以从闪存缓存而不是从磁盘读取它。</p> </li></ul> 
</blockquote> 
<h6 id="%E7%BC%93%E5%86%B2%E6%B1%A0" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">缓冲池</span></span></strong></h6> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">缓冲池</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是缓冲区的集合。数据库缓冲区高速缓存分为一个或多个缓冲池，它们以大致相同的方式管理块。池对于老化或缓存块没有完全不同的算法。</span></span></p> 
<h5 id="2.%E5%85%B1%E4%BA%AB%E6%B1%A0" style="text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">2.共享池</span></span></strong></h5> 
<p style="text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">共享池</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Shared Pool</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）：存储共享</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句、存储过程、会话信息等共享的数据库对象，减少解析和共享</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句的开销。有：库缓存、数据字典缓存、服务器结果缓存、预留池</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="334" src="https://images2.imgbox.com/1c/b3/JUzoXA8w_o.png" width="474"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Library cache</span></span><strong>库缓存</strong>是一种共享池内存结构，用于存储可执行的 SQL 和 PL/SQL 代码。</p> 
<p style="margin-left:.0001pt;text-align:justify;">共享 SQL 区域在共享 SQL 区域和专用 SQL 区域中运行的每个 SQL 语句。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="395" src="https://images2.imgbox.com/5a/08/S5pFZ2lD_o.png" width="465"></p> 
<p style="margin-left:.0001pt;text-align:justify;">库缓存包含PL / SQL程序和Java类的可执行形式。这些项目统称为程序单元。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据字典</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是数据库表和视图的集合，其中包含有关数据库、其结构及其用户的引用信息。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">服务器结果缓存</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是共享池中的内存池。与缓冲池不同，服务器结果缓存保存结果集而不是数据块。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>PL/SQL 函数结果缓存</strong>是存储函数结果集的服务器结果缓存的子集。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>预留池</strong>是共享池中的一个<strong>内存区域</strong>，Oracle可以使用该区域来分配大型连续内存块。</p> 
<h5 id="3.%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E7%BC%93%E5%86%B2%E5%8C%BA" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">3.重做日志缓冲区</span></span></strong></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">重做日志缓冲区</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">：存储待写入重做日志文件的数据，用于数据库恢复和故障恢复。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">重做日志缓冲区</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中的一个循环缓冲区，用于存储描述对数据库所做的更改的重做条目。数据库处理将重做条目从用户内存空间复制到</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中的重做日志缓冲区。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="301" src="https://images2.imgbox.com/4e/1f/kn4TWDGf_o.png" width="317"><img alt="" height="284" src="https://images2.imgbox.com/05/3e/4L0nSRXo_o.png" width="293"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">LGWR </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">按顺序将数据块写入磁盘，而</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DBW </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将数据块分散写入磁盘。分散写入往往比顺序写入慢得多。由于</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> LGWR </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用户能够避免等待</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DBW </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">完成其缓慢写入，因此数据库提供了更好的性能。</span></span></p> 
<h5 id="4.%20Large%20Pool" style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">4. <strong>Large Pool</strong></span></span></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">用于存储较大的共享内存区域，如排序操作和</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> I/O </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">操作的临时存储区域。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">大型池管理内存的方式与共享池不同，共享池使用</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> LRU </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">列表，以便部分内存可能会老化。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="290" src="https://images2.imgbox.com/9d/ae/3QJ9umGb_o.png" width="477"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">5. Java </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">池（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Java Pool</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）：用于存储</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Java </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">对象和</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Java </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">会话的内存区域。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">6. </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">其他内存区域，如</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">连接池、字典缓冲区等。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">SGA</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">是一个读</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">/</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">写内存区域，它与</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">后台进程一起构成一个数据库实例。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">软件代码区</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是内存的一部分，用于存储正在运行或可以运行的代码。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库代码存储在软件区域中，该区域通常比用户程序的位置更具排他性和保护性。</span></span></p> 
<h3 id="15%C2%A0%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84" style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">15 </span><span style="color:#1a1816;">进程架构</span></span></h3> 
<h4 id="%E8%BF%9B%E7%A8%8B" style="margin-left:0cm;"><span style="background-color:#ffffff;">进程</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">进程</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是操作系统中的一种机制，可以运行一系列步骤。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="502" src="https://images2.imgbox.com/ed/2d/ytpIkKGq_o.png" width="506"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">多进程</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">（也称为多用户</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）使用多个进程来运行</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">代码的不同部分，并为用户运行其他</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">进程</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> — </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个连接的用户一个进程或多个用户共享的一个或多个进程。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在以线程模式运行的数据库中，</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">PMON </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">和</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong> DBW</strong> </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">可能作为<strong>操作系统进程</strong>运行，而</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> LGWR </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">和</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> CMON </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">可能作为单个进程中的线程运行。两个前台进程和一个并行执行</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">PX</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">服务器进程可能在第二个操作系统进程中作为线程运行。第三个操作系统进程可能包含多个前台线程。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库<strong>连接</strong>是客户端进程和数据实例之间的<strong>物理</strong>通信路径。数据库</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-0F44C072-9841-4E2E-B846-FB16A2E54139" rel="nofollow" title="会话">会话</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">是数据库实例内存中的一个逻辑实体，表示当前用户登录到数据库的状态。单个数据库用户可以同时存在多个会话。如下图所示，用户可以有多个数据库连接。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="313" src="https://images2.imgbox.com/d1/68/W3LxpVQY_o.png" width="461"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="197" src="https://images2.imgbox.com/25/d5/KUxPJVdw_o.png" width="449"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在数据库监视的上下文中，<strong>数据库操作</strong>是两个时间点之间的会话活动，由最终用户或应用程序代码定义。</span></span></p> 
<h4 id="CNCPT-GUID-310F28E9-793A-4816-87CB-FDB54AB68957">服务器进程</h4> 
<p>Oracle 创建<strong>服务器进程</strong>来处理连接到实例的客户端进程的<strong>请求</strong>，客户端进程始终通过单独的服务器进程与数据库通信。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在<strong>专用服务器</strong>连接中，客户端连接与一个且仅与一个服务器进程相关联。每个客户端进程直接与其服务器进程通信。此服务器进程在会话期间专用于其客户端进程。服务器进程将<strong>特定于进程的信息和</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> UGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">存储在其</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PGA </span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>中</strong>。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在<strong>共享服务器</strong>连接中，客户端应用程序通过网络连接到<strong>调度程序</strong>进程，而不是服务器进程。与专用服务器进程一样，<strong>共享服务器进程也有自己的</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PGA</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">。但是，<strong>会话的</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> UGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">位于</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>中</strong>，以便任何共享服务器都可以访问会话数据。</span></span></p> 
<h5 id="CNCPT-GUID-13FE4098-61DF-4D76-882D-551A88E0EBB8">Oracle 数据库如何创建服务器进程</h5> 
<p>数据库以各种方式创建服务器进程，具体取决于连接方法。</p> 
<p>连接方式如下：</p> 
<blockquote> 
 <ul><li> <p>Bequeath遗赠</p> <p>SQL*Plus、OCI 客户端或其他客户端应用程序直接生成服务器进程。</p> </li><li> <p>Oracle网络侦听器</p> <p>客户端应用程序通过侦听器连接到数据库。</p> </li><li> <p>专属经纪人</p> <p>这是一个创建前台进程的数据库进程。与侦听器不同，代理驻留在数据库实例中。使用专用代理时，客户端连接到侦听器，然后侦听器将连接移交给专用代理。</p> </li></ul> 
</blockquote> 
<p>当连接不使用遗赠时，数据库将按如下方式创建服务器进程：</p> 
<blockquote> 
 <ol><li> <p>客户端应用程序从侦听器或代理请求新连接。</p> </li><li> <p>侦听器或代理启动新进程或线程的创建。</p> </li><li> <p>操作系统创建新的进程或线程。</p> </li><li> <p>Oracle 数据库初始化各种组件和通知。</p> </li><li> <p>数据库移交连接和特定于连接的代码。</p> </li></ol> 
</blockquote> 
<h4 id="%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B" style="margin-left:0cm;"><span style="background-color:#ffffff;">后台进程</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">后台进程是多进程</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用的其他进程。后台进程执行操作数据库所需的维护任务，并最大限度地提高多个用户的性能。分为强制后台进程、可选后台进程、从进程。</span></span></p> 
<h5 id="%E5%BC%BA%E5%88%B6%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B" style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">强制后台进程</span></span></h5> 
<h6 id="%E8%BF%9B%E7%A8%8B%E7%9B%91%E8%A7%86%E5%99%A8%E8%BF%9B%E7%A8%8B%20%EF%BC%88PMON%EF%BC%89%20%E7%BB%84" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;">进程监视器进程 （PMON） 组</span></h6> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">PMON </span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">组包括</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PMON</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">、清理主进程</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">CLMN</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">和清理帮助程序进程</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">CL<em>nn</em></span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">），这些进程负责监视和清理其他进程。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;">进程监视器（</span></strong><strong><span style="background-color:#ffffff;">PMON</span></strong><strong><span style="background-color:#ffffff;">）</span></strong><span style="background-color:#ffffff;">检测其他后台进程的终止。如果服务器或调度程序进程异常终止，则</span><span style="background-color:#ffffff;">PMON</span><span style="background-color:#ffffff;">组负责执行进程恢复。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">PMON </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将清理工作委派给<strong>清理主进程（</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">CLMN</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">），</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">检测异常终止的任务仍由</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">PMON</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">完成。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">CLMN 会定期清理已终止的进程、已终止的会话、事务、网络连接、空闲会话、分离的事务和已超过其空闲超时的分离网络连接。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">CLMN </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将清理工作委托给</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> CL<em>nn</em></span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">帮助程序进程，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">CL<em>nn</em> </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">进程有助于清理已终止的进程和会话。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">如果进程或会话终止，则</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PMON </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">组会将保留的资源释放到数据库。</span></span></p> 
<p><strong>进程管理器 （PMAN）</strong> 监督多个后台进程，包括共享服务器、池服务器和作业队列进程。</p> 
<p>PMAN 监视、生成和停止以下类型的进程：</p> 
<blockquote> 
 <ul><li> <p>调度程序和共享服务器进程</p> </li><li> <p>数据库驻留连接池的连接代理和共用服务器进程</p> </li><li> <p>作业队列进程</p> </li><li> <p>可重新启动的后台进程</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">侦听器注册过程</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> LREG</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">向</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">网络侦听器注册有关数据库实例和调度程序进程的信息。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">系统监视器进程</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">SMON</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">负责各种系统级清理职责。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库编写器进程</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">DBW</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">将数据库缓冲区的内容写入数据文件。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">DBW </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">进程将数据库缓冲区缓存中修改的缓冲区写入磁盘。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">日志编写器进程</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">LGWR</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">管理联机重做日志缓冲区。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">LGWR </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将缓冲区的一部分写入联机重做日志。通过将修改数据库缓冲区、将脏缓冲区分散写入磁盘和执行快速顺序重做写入磁盘的任务分开，数据库提高了性能。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用快速提交机制来提高已提交事务的性能。当用户发出语句时，将为事务分配一个<strong>系统更改编号</strong></span></span><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">SCN</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）。</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">检查点进程</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">CKPT</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">使用检查点信息更新控制文件和数据文件头，并向</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> DBW </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">发出信号以将块写入磁盘。检查点信息包括检查点位置、</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">SCN </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">和联机重做日志中用于开始恢复的位置。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="350" src="https://images2.imgbox.com/c2/c4/EmfqQVqS_o.png" width="239"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">可管理性监视器进程</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">MMON</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">执行许多与<strong>自动工作负载存储库</strong></span></span><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">AWR</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">相关的任务。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">可管理性监视器精简版进程</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">MMNL</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">将统计信息从</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中的活动会话历史记录</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">ASH</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">缓冲区写入磁盘。当</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> ASH </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">缓冲区已满时，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">MMNL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">将写入磁盘。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在分布式数据库中，<strong>恢复程序进程</strong></span></span><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">RECO</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">会自动解决分布式事务中的故障。</span></span></p> 
<h5 id="%E5%8F%AF%E9%80%89%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">可选后台进程</span></span></strong></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">可选后台进程是未定义为必需的任何后台进程。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">存档程序进程</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">ARCn</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">在发生重做日志切换后将联机重做日志文件复制到脱机存储。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">队列进程</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">通常以批处理模式运行用户作业。作业是计划运行一次或多次的用户定义任务。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">闪回数据存档过程</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">FBDA</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">将跟踪表的历史行存档到闪回数据存档中。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong> </strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>SMCO</strong> 流程协调各种空间管理相关任务的执行。</span></span></p> 
<h5 id="%E4%BB%8E%E8%BF%9B%E7%A8%8B" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">从进程</span></span></strong></h5> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">从进程</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是代表其他进程执行工作的后台进程。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">I/O </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">从进程</span></span> <span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Innn</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">模拟不支持它的系统和设备的异步</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> I/O</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在<strong>并行执行</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">PX</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">中，多个进程同时协同工作以运行单个</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="178" src="https://images2.imgbox.com/6a/50/oVOJoKgG_o.png" width="498"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">并行执行服务器分为<strong>生产者和使用者，</strong>生产者负责处理他们的数据，然后将其分发给需要它的消费者。数据库可以使用各种技术执行分发。两种常见的技术是广播和哈希。在广播中，每个生产者将行发送给所有使用者。在哈希中，数据库在一组键上计算哈希函数，并使每个使用者负责哈希值的子集。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="289" src="https://images2.imgbox.com/53/04/pQqfgBEe_o.png" width="514"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在并行执行中，表动态划分为荷载单元。每个单元称为<strong>颗粒</strong>，是访问数据时的最小工作单元。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="217" src="https://images2.imgbox.com/f7/21/JjNenwCq_o.png" width="508"></p> 
<h3 id="16%E3%80%81%E5%BA%94%E7%94%A8%E5%92%8COracle%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">16</span><span style="color:#1a1816;">、应用和</span><span style="color:#1a1816;">Oracle</span><span style="color:#1a1816;">网络服务体系结构</span></span></h3> 
<h4 id="Oracle%20%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84" style="margin-left:0cm;"><span style="background-color:#ffffff;">Oracle 应用架构</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">应用程序<strong>体系结构</strong>是指数据库应用程序连接到</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">的计算环境</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中，数据库应用程序和数据库被分离到一个<strong>客户端</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">/</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">服务器体系结构</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">中。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用多个主机处理单个任务称为<strong>分布式处理</strong></span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">, </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">前端和后端处理发生在不同的计算机上。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>分布式处理</strong>环境中的 Oracle 数据库客户端/服务器架构具有许多优势。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库可以在传统的多层或<strong>面向服务的体系结构</strong></span></span><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">SOA</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">环境中充当</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Web </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">服务提供程序。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中，网格计算是一种计算架构，可有效地将大量服务器和存储汇集到灵活的按需<strong>计算</strong>资源中。</span></span></p> 
<h4 id="Oracle%20%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84" style="margin-left:0cm;"><span style="background-color:#ffffff;">Oracle 网络服务架构</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">网络服务</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是一套网络组件，可在分布式异构计算环境中提供企业级连接解决方案。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">Oracle 网络侦听器（侦听器）是一个服务器端进程，用于侦听传入的客户端连接请求并管理到数据库的流量。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">协议接受来自</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">应用程序接口的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句，然后打包它们以传输到</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">服务名称</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是用于客户端连接的服务的逻辑表示形式。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">在 Oracle Net 中，服务注册是 LREG 进程向侦听器动态<strong>注册</strong>实例信息的功能。</p> 
<p style="margin-left:.0001pt;text-align:justify;">在专用服务器体系结构中，代表每个客户端进程创建的服务器进程称为专用服务器进程（或影子进程）。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">调度程序</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">进程使客户端进程能够共享有限数量的服务器进程。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">在共享服务器体系结构中，调度程序将多个传入的网络会话请求定向到<strong>共享服务器</strong>进程池.</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>程序接口</strong>是数据库应用程序和Oracle数据库之间的软件层。</p> 
<h3 id="17%C2%A0%E9%9D%A2%E5%90%91%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E5%91%98%E5%92%8C%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">17 </span><span style="color:#1a1816;">面向数据库管理员和开发人员</span></span></h3> 
<h4 id="%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8" style="margin-left:0cm;"><span style="background-color:#ffffff;">数据库安全</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库安全</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">涉及用户身份验证、加密、访问控制和监控</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">每个</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">都有一个有效<strong>数据库用户</strong>的列表，数据库包含多个默认帐户，包括默认管理帐户。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">用户特权</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是运行特定</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句的权限：系统权限</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">create</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">、对象极限（查询）。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>角色</strong>是一组命名的相关权限，用户可以将其授予其他用户或<strong>角色</strong>。角色有助于管理数据库应用程序或用户组的权限。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">权限分析</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">机制根据指定条件捕获数据库的权限使用情况。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在系统资源的上下文中，<strong>用户配置文件</strong>是一组命名的资源限制和密码参数，用于限制用户的数据库使用情况和数据库实例资源。配置文件可以限制用户的并发会话数、每个会话可用的</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> CPU </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">处理时间以及可用的逻辑</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> I/O </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">量。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">中，数据库<strong>身份验证</strong>是用户向数据库提供凭据的过程，通过该过程验证凭据并允许访问数据库。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">Oracle <strong>加密</strong>是使用密钥和加密算法将数据转换为不可读格式的过程。</p> 
<p style="margin-left:.0001pt;text-align:justify;">在客户端和服务器之间通过网络传输数据时对其进行加密称为<strong>网络加密</strong>。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">高级安全<strong>透明数据</strong>加密使您能够加密单个表列或表空间。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">提供了许多技术来控制对数据的访问。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库保管库</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">限制用户对应用数据的特权访问。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">虚拟专用数据库</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">VPD</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">使您能够在行和列级别实施安全性。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">数据库审计是对所选用户数据库操作的监视和记录。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">标签安全</span></span> <strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">OLS</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">使您能够使用<strong>安全标签</strong>分配数据分类和控制访问。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库提供了<strong>多种工具和技术</strong>来监控用户活动，审核是监视数据访问的主要机制。<strong>数据库审计</strong>是对所选用户数据库操作的监视和记录。</span></span></p> 
<h4 id="%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7" style="margin-left:0cm;"><span style="background-color:#ffffff;">高可用性</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">可用性是应用程序、服务或功能按需可用的程度。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当事件导致应用程序的全部或大部分停止处理或速度降低到不可用的服务级别时，就会发生<strong>站点故障</strong>。防止站点故障的最简单形式是使用</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> RMAN </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">创建数据库备份并将其存储在异地。您可以将数据库还原到另一台主机。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当保存部分或全部数据库内容的存储因已关闭或不再可访问而变得不可用时，会发生<strong>存储故障</strong>中断。存储故障的示例包括磁盘驱动器或存储阵列的故障。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当硬件、软件或网络组件导致读取或写入损坏的数据时，就会发生<strong>数据损坏</strong>。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<blockquote> 
 <p>除了 Data Guard 和 Recovery Manager 之外，Oracle 数据库还支持以下形式的数据损坏防护：</p> 
 <ul><li> <p>丢失写入问题的解决方案：使用备用数据库的写保护丢失、使用影子表空间的写保护丢失；</p> </li><li> <p>数据块损坏检测</p> </li><li> <p>数据恢复顾问</p> </li><li> <p>事务保护和应用程序连续性</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">当提交导致数据库中的数据在逻辑上损坏或不可用的无意或恶意操作，会发生<strong>人为错误中断</strong>。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据仓库</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">是用于查询和分析而不是事务处理的关系数据库。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">Oracle 在线分析处理 （OLAP） 在跨多个维度分析数据时提供本机多维存储和快速响应时间。OLAP 使分析人员能够在交互式会话期间快速获得复杂迭代查询的答案。</p> 
<blockquote> 
 <p>Oracle OLAP 具有以下主要特征：</p> 
 <ul><li> <p>Oracle OLAP 集成在数据库中，因此您可以使用标准的 SQL 管理、查询和报告工具。</p> </li><li> <p>OLAP 引擎在 Oracle 数据库的内核中运行。</p> </li><li> <p>维度对象以其本机多维格式存储在 Oracle 数据库中。</p> </li><li> <p>多维数据集和其他维度对象是 Oracle 数据字典中表示的第一类<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-D6A3934F-BA6D-464F-9612-C683E20514A4" rel="nofollow" title="数据">数据</a>对象。</p> </li><li> <p>通过向 Oracle 数据库用户和角色授予和撤销权限，以标准方式管理数据安全性。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">从源系统提取数据并将其引入仓库的过程通常称为</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> ETL</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">：提取、转换和加载。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库<strong>链接</strong>是两个物理数据库之间的连接，使客户端能够将它们作为一个逻辑数据库进行访问。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">高级队列（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">AQ</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）是一个与</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">集成的强大且功能丰富的消息队列系统。</span></span></p> 
<h3 id="18%C2%A0%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E5%91%98%E7%9A%84%E6%A6%82%E5%BF%B5" style="margin-left:0;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">18 </span><span style="color:#1a1816;">数据库管理员的概念</span></span></h3> 
<blockquote> 
 <p>Oracle DBA 负责了解 Oracle 数据库架构以及数据库的工作原理。DBA 可以期望执行以下任务：</p> 
 <ul><li> <p>安装、升级和修补 Oracle 数据库软件</p> </li><li> <p>设计数据库，包括确定需求、创建逻辑设计（概念模型）和物理数据库设计</p> </li><li> <p>创建甲骨文数据库</p> </li><li> <p>开发和测试备份和恢复战略，定期备份 Oracle 数据库，并在发生故障时恢复它们</p> </li><li> <p>配置网络环境以使客户端能够连接到数据库</p> </li><li> <p>启动和关闭数据库</p> </li><li> <p>管理数据库的存储</p> </li><li> <p>管理用户和安全性</p> </li><li> <p>管理数据库对象，如表、索引和视图</p> </li><li> <p>监视和调整数据库性能</p> </li><li> <p>调查、收集数据并向 Oracle 支持服务报告任何关键数据库错误</p> </li><li> <p>评估和测试新的数据库功能</p> </li></ul> 
</blockquote> 
<h4 id="CNCPT-GUID-DCE361D9-B486-43B4-B4FD-5722A93203F0">备份和恢复</h4> 
<p>备份和恢复是一组概念、过程和策略，用于保护数据库免受介质故障或用户错误导致的数据丢失。</p> 
<h5 id="CNCPT-GUID-71AC5772-3143-40C4-86EC-93367FB85B2A" style="margin-left:0px;text-align:left;"><strong>备份和恢复技术</strong></h5> 
<div style="margin-left:0;text-align:left;"> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">可以使用恢复管理器或用户管理的技术来备份、还原和恢复 Oracle 数据库。</span></span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">这两种方法的主要区别如下：</span></span></span></p> 
 <blockquote> 
  <ul style="margin-left:0;"><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-C93A3B47-4AE8-4AB7-A370-C8395A7B42AA" rel="nofollow" title="恢复管理器 （RMAN）">恢复管理器 （RMAN）</a></span></span></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>RMAN</strong> 是一个 Oracle 数据库<strong>实用程序</strong>，它与 Oracle 数据库集成以执行备份和恢复活动，包括在备份的每个数据库的控制文件中维护历史备份元数据的存储库。RMAN 还可以在不同的数据库中维护一个称为<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-2366988A-C3CA-4B75-B59F-69AC00678629" rel="nofollow" title="恢复目录">恢复目录</a>的集中式备份存储库。RMAN 是 Oracle 数据库的一项功能，不需要单独安装。</span></span></span></p> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">RMAN 与 Oracle 安全备份集成，后者提供可靠、集中的磁带备份管理，保护文件系统数据和 Oracle 数据库文件。Oracle 安全备份 SBT 界面使您能够使用 RMAN 在磁带和基于 Internet 的 Web 服务（如 Amazon S3）之间备份和还原数据库文件。Oracle 安全备份支持 SAN 和 SCSI 环境中的几乎所有磁带驱动器和磁带库。</span></span></span></p> </li><li> <p style="margin-left:.5em;text-align:left;"><span style="color:#1a1816;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">用户管理技术</span></span></span></p> <p style="margin-left:.5em;text-align:left;">作为恢复的替代方法，您可以使用操作系统命令，如Linux dd来备份和恢复文件，使用SQL*Plus RECOVER命令来恢复介质。Oracle完全支持用户管理的备份和恢复，但建议使用RMAN，因为它与Oracle数据库集成并简化了管理。</p> </li></ul> 
 </blockquote> 
</div> 
<p style="margin-left:.0001pt;text-align:justify;">下图显示了一个示例 RMAN 体系结构。RMAN 客户机可通过云控制访问，它使用目标数据库上的服务器会话将数据备份到磁盘或磁带。RMAN 可以使用备份元数据更新外部恢复目录。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="375" src="https://images2.imgbox.com/0c/10/uZ0mxP7p_o.png" width="428"></p> 
<h5 id="CNCPT-GUID-27DFFB35-0A8E-4435-97B1-726A48419DC6">数据库备份</h5> 
<p>数据库备份可以是物理备份，也可以是逻辑备份。</p> 
<p>物理备份是备份和恢复策略中的主要关注点，是物理数据库文件的副本。您可以使用 RMAN 或操作系统实用程序进行物理备份。</p> 
<p>相反，逻辑备份包含表、存储过程和其他逻辑数据。您可以使用 Oracle 数据库实用程序（如数据泵导出）提取逻辑数据，并将其存储在二进制文件中。逻辑备份可以补充物理备份。</p> 
<p>物理备份粒度大，可传输性有限，但速度非常快。逻辑备份具有精细粒度和完整的可传输性，但比物理备份慢。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">整个数据库</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">备份是数据库中每个数据文件以及控制文件的备份。整个数据库备份是最常见的备份类型。整个数据库备份要么是一致的，要么是不一致的。</span></span></p> 
<h6 id="CNCPT-GUID-BCE6455B-0E49-4835-B9AB-2BC70F673F88">数据修复</h6> 
<p>虽然有几个问题会停止数据库的正常运行或影响 I/O 操作，但只有一些问题需要 DBA 干预和数据修复。在以下情况下通常需要数据修复：</p> 
<blockquote> 
 <ul><li> <p>介质故障</p> <p>当数据库<strong>外部的问题</strong>阻止数据库读取或写入文件时，会发生介质故障。典型的介质故障包括物理故障（如磁盘磁头崩溃）以及覆盖、删除或损坏数据库文件。介质故障不如用户或应用程序错误常见，但必须为这些错误做好合理的备份和恢复策略。</p> </li><li> <p>用户错误</p> <p>用户或应用程序可能会对数据库进行<strong>不需要的更改</strong>，例如错误更新、删除表的内容或删除数据库对象。良好的<strong>备份和恢复策略</strong>使您能够将数据库返回到所需状态，同时将对数据库可用性的影响降至最低，并且 DBA 工作量最小。</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库提供了一组称为</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> <strong>Oracle </strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">闪回技术</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">的功能，支持查看过去的数据状态，以及及时来回缠绕数据，而无需恢复备份。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">使用数据恢复顾问诊断数据故障，为您的环境提供最佳修复选项，以及执行和验证修复。</p> 
<p style="margin-left:.0001pt;text-align:justify;">块介质恢复是一种在数据文件联机时恢复和恢复损坏的数据块的技术。</p> 
<h4 id="%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86" style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">内存管理</span></span></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">内存管理</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">涉及在数据库需求更改时维护</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">实例内存结构的最佳大小。初始化参数设置确定如何管理</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">和实例</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">内存。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">在<strong>自动内存管理</strong>中，</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">（建议）<strong>完全自动管理</strong></span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SGA </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">和实例</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> PGA </span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;"><strong>内存</strong>。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">下图显示了一个数据库，该数据库有时处理联机用户提交的作业，有时处理批处理作业。使用自动内存管理，数据库会根据正在运行的作业类型自动调整<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-D9A10657-F0EF-4D84-AB58-852CD58BF0B4" rel="nofollow" title="大型池">大型池</a>和<a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-7913177D-8183-4CC5-8F59-816FE66DA363" rel="nofollow" title="数据库缓冲区高速缓存">数据库缓冲区高速缓存</a>的大小。请注意，该图形未描述 IM 列存储或内存优化区域。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="318" src="https://images2.imgbox.com/5d/95/Ekt4ncNI_o.png" width="269"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库提供的工具可帮助您管理资源和安排任务以减少对用户的影响。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">调度程序</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Scheduler</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">）使数据库管理员和应用开发人员能够控制在数据库环境中执行各种任务的时间和位置。</span></span></p> 
<h4 id="CNCPT-GUID-045B9963-F53D-427C-87B7-04858B22D4D8">性能和调优</h4> 
<blockquote> 
 <p>作为 DBA，您负责 Oracle 数据库的性能。通常，性能问题是由不可接受的响应时间（即完成指定工作负载的时间）或吞吐量（可在指定时间内完成的工作量）引起的。典型的问题包括：</p> 
 <ul><li> <p>中央处理器瓶颈</p> </li><li> <p>内存结构过小</p> </li><li> <p>I/O 容量问题</p> </li><li> <p>低效或高负载的 SQL 语句</p> </li><li> <p>调整 SQL 语句后出现意外的性能回归</p> </li><li> <p>并发和争用问题</p> </li><li> <p>数据库配置问题</p> </li></ul> 
</blockquote> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">自我监控</span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">在数据库执行其常规操作时进行，确保数据库在出现问题时知道问题。</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库可以发送服务器生成的警报，以通知您即将发生的问题。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">自动工作负载存储库</span></span></strong><strong> </strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">（</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">AWR</span></span></strong><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">）</span></span></strong> <span style="background-color:#ffffff;"><span style="color:#1a1816;">是历史性能数据的存储库，其中包括系统、会话、单个</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">语句、分段和服务的累积统计信息。</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-19E46AF0-A587-422B-8A06-CEF094E47F6A" rel="nofollow" title="AWR 基线">AWR 基线</a><span style="background-color:#ffffff;"><span style="color:#1a1816;">是通常在系统在峰值负载下运行良好的时间段内采用的统计速率的集合。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">使用在</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> AWR</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">（自动工作负载存储库）中捕获的统计信息，</span></span><strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">ADDM </span></span></strong><span style="background-color:#ffffff;"><span style="color:#1a1816;">会自动主动诊断数据库性能，并确定如何解决已识别的问题。您也可以手动运行</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> ADDM</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">，</span></span><a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/cncpt/Chunk520365104.html#GUID-F89BDBAC-398F-4568-8041-C0D1611598E0" rel="nofollow" title="自动数据库诊断监视器 （ADDM）">自动数据库诊断监视器 （ADDM）</a> <span style="background-color:#ffffff;"><span style="color:#1a1816;">是内置于</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> Oracle </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">数据库中的自我顾问。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>活动会话历史记录 （ASH） </strong>每秒对活动数据库会话进行采样，将数据写入内存和持久存储。ASH 是数据库自我管理框架的一个组成部分，可用于诊断性能问题。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#1a1816;">Oracle</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">完全自动化了</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;"> SQL </span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">调优过程。语句等工具使您能够查看优化程序选择的执行计划</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">EXPLAIN PLAN</span></span><span style="background-color:#ffffff;"><span style="color:#1a1816;">。优化器统计信息顾问是一种诊断软件，用于分析当前收集统计信息的方式、现有统计信息收集作业的有效性以及收集的统计信息的质量。</span></span></p> 
<p>自动 SQL 优化的接口是 SQL 优化顾问，它在系统维护时段内作为维护任务自动运行。</p> 
<p>使用 SQL 访问顾问可帮助您分析 SQL 查询，并确定优化架构对象或优化查询的方法。</p> 
<p>通过使用 SQL 计划管理仅执行经过测试和验证的计划来管理 SQL 执行计划。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/32a677e89643ff43e451df0d2d3177c2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Web系列二十六】el-input内容约束的一些方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d714471c2f69b8d9c92b2afd44918793/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">水一篇看看能不能混一个1024勋章</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>