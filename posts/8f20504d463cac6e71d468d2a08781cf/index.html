<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>airtest web 自动化实操 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="airtest web 自动化实操" />
<meta property="og:description" content="一、环境搭建 airtest内置python 和selenium库，并且进行封装，所以用来做web 自动化也是非常方便的
操作原理：
airtest web 自动化测试是基于python 语言和selenium 库，通过调用chrome浏览器Devtools Protoco协议，将用户
操作解析成python 脚本
1、准备安装chrome浏览器最(新版本为89版本)
特别注意：airtest 自带chromedriver 是不支持最新的版本chrome 浏览器，需要重新下载chrome 浏览器对应chromedriver 去覆盖airtest里面的版本，否则chrome
会启动不起来
下载地址：http://chromedriver.storage.googleapis.com/index.html
2、启动airtest设置chrome 浏览器的启动文件路径
选项-&gt;设置-&gt;selenium-&gt;chromepath 设置chrome 启动路径-&gt;ok
3、在airtest 的窗口中勾选上selenium window
4、新建.air Airtest项目
1） 新建.air 项目
2）点击启动浏览器，导入相应的包和初始化代码
包的导入和初始化代码
5、windows 窗口操作
1）windows窗口连接
1、选择游戏窗口
打开正在运行chrome的窗口，然后对需要的进行框选，则该窗口会展示在窗口界面
框选浏览器
选中后，该chrome 会在设备窗口展示
2、搜索窗口
搜索选择对应的窗口和选择游戏窗口差不多
3、其他
由于Windows应用的底层实现各不相同，有些应用窗口如果使用默认的一键嵌入方法，在嵌入到AirtestIDE里之后会遇到一些问题（例如嵌入后无法用鼠标操作、无法正常嵌入、 嵌入后无法显示图像等）。
针对这些问题，我们提供了一种无嵌入连接的方案，请在AirtestIDE的设置面板中，找到Device-Windows Embed Backup Method，勾选后即可使用备用方案来连接窗口。
接下来的连接方式和常规方法一样，点击选定窗口，然后选择待测窗口程序：
二、selenium 常用的操作 1、窗口操作
Web 录制无法模拟的按键操作，可以手动通过代码来完成，比如send keys， keys.ENTER 等等。
2、元素操作
· clear（） 清楚元素输入的内容
·send_keys() 模拟键盘按键输入内容" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/8f20504d463cac6e71d468d2a08781cf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-29T01:23:10+08:00" />
<meta property="article:modified_time" content="2021-03-29T01:23:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">airtest web 自动化实操</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>一、环境搭建</h3> 
<p>airtest内置python 和selenium库，并且进行封装，所以用来做web 自动化也是非常方便的</p> 
<p><strong>操作原理：</strong></p> 
<p><strong>      </strong> airtest web 自动化测试是基于python 语言和selenium 库，通过调用chrome浏览器Devtools Protoco协议，将用户</p> 
<p>       操作解析成python 脚本</p> 
<p><img alt="" height="283" src="https://images2.imgbox.com/02/29/fcpH66JB_o.png" width="469"></p> 
<p> </p> 
<p><strong>1、准备安装chrome浏览器最(新版本为89版本)</strong></p> 
<p><span style="color:#f33b45;">      特别注意：airtest 自带chromedriver 是不支持最新的版本chrome 浏览器，需要重新下载chrome 浏览器对应chromedriver 去覆盖airtest里面的版本，否则chrome</span></p> 
<p><span style="color:#f33b45;">      会启动不起来</span></p> 
<p><span style="color:#f33b45;">      </span>下载地址：<a href="http://chromedriver.storage.googleapis.com/index.html" rel="nofollow">http://chromedriver.storage.googleapis.com/index.html</a></p> 
<p><span style="color:#f33b45;">    </span><img alt="" height="531" src="https://images2.imgbox.com/bd/bb/a2fXjast_o.png" width="905"><span style="color:#f33b45;"> </span></p> 
<p><strong>2、启动airtest设置chrome 浏览器的启动文件路径</strong></p> 
<p><strong>    </strong> 选项-&gt;设置-&gt;selenium-&gt;chromepath  设置chrome 启动路径-&gt;ok</p> 
<p>      <img alt="" height="721" src="https://images2.imgbox.com/7d/4d/C3FfTJkJ_o.png" width="953"></p> 
<p><strong>3、在airtest 的窗口中勾选上selenium window</strong></p> 
<p><img alt="" height="618" src="https://images2.imgbox.com/c6/61/5AkH5Ii7_o.png" width="829"></p> 
<p><strong>4、新建.air  Airtest项目</strong></p> 
<p><strong>       </strong>1） 新建.air 项目</p> 
<p>        2）点击启动浏览器，导入相应的包和初始化代码</p> 
<p><img alt="" height="553" src="https://images2.imgbox.com/31/0b/853baNXs_o.png" width="1034"></p> 
<p>包的导入和初始化代码</p> 
<p><img alt="" height="74" src="https://images2.imgbox.com/e7/ae/5RKCraLl_o.png" width="360"></p> 
<p><strong>5、windows 窗口操作</strong></p> 
<p>1）windows窗口连接</p> 
<p>        1、选择游戏窗口</p> 
<p>                打开正在运行chrome的窗口，然后对需要的进行框选，则该窗口会展示在窗口界面</p> 
<p>                框选浏览器</p> 
<p><img alt="" height="629" src="https://images2.imgbox.com/e6/5a/QyAOckc6_o.png" width="1097"></p> 
<p>     选中后，该chrome 会在设备窗口展示</p> 
<p><img alt="" height="569" src="https://images2.imgbox.com/1e/91/mleOxbg9_o.png" width="273"></p> 
<p>        2、搜索窗口</p> 
<p>             搜索选择对应的窗口和选择游戏窗口差不多</p> 
<p>      3、其他</p> 
<p>           由于Windows应用的底层实现各不相同，有些应用窗口如果使用默认的一键嵌入方法，在嵌入到AirtestIDE里之后会遇到一些问题（例如嵌入后无法用鼠标操作、无法正常嵌入、             嵌入后无法显示图像等）。</p> 
<p>          针对这些问题，我们提供了一种无嵌入连接的方案，请在AirtestIDE的设置面板中，找到<code>Device</code>-<code>Windows Embed Backup Method</code>，勾选后即可使用备用方案来连接窗口。</p> 
<p>            接下来的连接方式和常规方法一样，点击<strong>选定窗口</strong>，然后选择待测窗口程序：</p> 
<p><img alt="" height="287" src="https://images2.imgbox.com/0d/2a/bSu1v7jO_o.png" width="758"></p> 
<h3>二、selenium 常用的操作</h3> 
<p><strong>1、窗口操作</strong></p> 
<p><img alt="" height="510" src="https://images2.imgbox.com/e8/cd/hn28AN1i_o.png" width="664"></p> 
<p> </p> 
<p>Web 录制无法模拟的按键操作，可以手动通过代码来完成，比如send keys， keys.ENTER 等等。</p> 
<p><strong>2、元素操作</strong></p> 
<p><strong>   · </strong>clear（） 清楚元素输入的内容</p> 
<p>   <strong>·</strong>send_keys() 模拟键盘按键输入内容</p> 
<p> <strong>  ·</strong>click() 模拟鼠标对元素的点击</p> 
<p>  <strong> ·</strong>submit（）提交表单     send<em>keys(Keys.RETURN)</em>相当于回车登录, 如果需要输入中文，防止编码错误使用sendkeys(u"中文用户名")</p> 
<p> </p> 
<p><strong>3、WebElement接口可以获取常用的值:</strong></p> 
<p><strong>·size() </strong>获取元素的尺寸</p> 
<p><strong>·text()</strong>获取元素的文本</p> 
<p><strong>·get_attribute(id) </strong>获取元素的属性值</p> 
<p><strong>·location()</strong>获取元素的坐标值，先找到要获取的元素，再调用该方法</p> 
<p><strong>·page_source()</strong>返回页面的源码</p> 
<p><strong>·driver.title() </strong>返回页面的标题</p> 
<p><strong>·current_url()</strong>获取当前页面的url 地址</p> 
<p><strong>·is_displayed()</strong>设置该元素是否可见</p> 
<p><strong>·is_enabled() </strong>判断元素是否被选用</p> 
<p><strong>·is_selected()</strong>判断元素是否被选中</p> 
<p><strong>·tag_name()</strong>返回tagname 的元素</p> 
<p> </p> 
<p><strong>4、常见键盘操作</strong></p> 
<ul><li>send_keys(Keys.ENTER) 按下回车键</li><li>send_keys(Keys.TAB) 按下Tab制表键</li><li>send_keys(Keys.SPACE) 按下空格键space</li><li>send_keys(Kyes.ESCAPE) 按下回退键Esc</li><li>send<em>keys(Keys.BACK</em>SPACE) 按下删除键BackSpace</li><li>send_keys(Keys.SHIFT) 按下shift键</li><li>send_keys(Keys.CONTROL) 按下Ctrl键</li><li>send<em>keys(Keys.ARROW</em>DOWN) 按下鼠标光标向下按键</li><li>send_keys(Keys.CONTROL,'a') 组合键全选Ctrl+A</li><li>send_keys(Keys.CONTROL,'c') 组合键复制Ctrl+C</li><li>send_keys(Keys.CONTROL,'x') 组合键剪切Ctrl+X</li><li>send_keys(Keys.CONTROL,'v') 组合键粘贴Ctrl+V</li></ul> 
<p> </p> 
<p> </p> 
<p><strong>5、元素定位</strong></p> 
<p><strong> ·<em>find_element_by_id:</em></strong>确定元素的id名称，直接通过id查找可定位到元素，将返回页面查找到的第一个id元素</p> 
<p><strong>·<em>find_element_by_name:</em></strong>与id同样，当确定元素的name名称时，可直接通过name查找定位元素，同样地，selenium将会返回页面查找到的第一个name元素</p> 
<p><strong>·<em>find element by xpath:</em></strong>xpath在xml文档中可遍历节点元素和属性，是XML路径语言。xpath同时扩展了通过id/name查找元素的方式，即是说，如果当前元素是id值，xpath会自动识别成("//*[@id="top-menu"]），同时诸多类型如input、button、锚点a、iamge等都可以进行判断，比如 ("//button[@data-role='submit']") ，xpath的形式复杂多变，对于网站页面千变万化的内容而言，xpath能够很好的自适应。</p> 
<p>使用相对路径的写法以双斜线开头，绝对路径以单斜线开头从html最顶层开始遍历，如下图：</p> 
<p><img alt="" height="92" src="https://images2.imgbox.com/4f/77/ZbhMYT00_o.png" width="693"></p> 
<p>一般格式为//tagname[<em>a href="<a href="https://link.zhihu.com/?target=https%3A//testerhome.com/attribute" rel="nofollow">https://testerhome.com/attribute</a>"&gt;@attribute='value']/路径/路径，如//[@id="J_PmTaskInput"]/div/label , [*]表示包含所有</em></p> 
<p>但不推荐使用绝对路径，因为页面可能经常元素变化，稍有改动可能就会导致定位失败；相对路径定位相对而言位置关系改动的概率更低，更靠谱，这样脚本健壮性适应性更强。</p> 
<p><strong>·<em>find_elment_by_css_selector:</em></strong>通过css选择器定位元素，将返回页面第一个匹配到的元素。</p> 
<pre><code>find_element_by_css_selector("#J_Milestone &gt; div.os-milestone-check &gt; div")
find_element_by_css_selector("button.ui.teal.J_Pay")          #查找tagtype.class.class..
find_element_by_css_selector("div.ui.negative.button")    
#查找所有div标签里面class包含ui、negative、button的元素</code></pre> 
<p>常用的选择器：</p> 
<p>#表示id，查找id名称为J_Milestone的属性，以及该属性的下一级div</p> 
<p>.表示class，查找该id下一级的div的class为os-milestone-check</p> 
<p>*表示所有元素，&gt;表示下一级</p> 
<p>[]表示attribute，属性名称，[attribute=value] 指某属性值的该属性</p> 
<p>:nth-child(n) 表示该父元素的第几个子元素</p> 
<p>css selector 相较于xpath的优点就是性能比xpath好，另外就是页面排版布局位置有时候会变，但css selector相对更稳定，名称一般不会经常变更。</p> 
<p><strong>·<em>find_element_by_class_name:</em></strong>确定元素的class name，可通过class name直接查找定位元素，将会返回该页面第一个匹配的class属性的元素。</p> 
<p><strong>·<em>find_element_by_link_text:</em></strong>这是一个查找超链接非常方便的一个定位方法，当确切知道页面的某个超链接使用的标签文本名称，那可以直接通过find<em>element</em>by<em>link</em>text 查找，将会返回页面第一个匹配的锚点标签。</p> 
<p><strong><em>·find element by partial link text:</em></strong>这也是一个查找超链接的方法，跟find<em>element</em>by<em>link</em>text的区别在于，前者是精确查找，后者是模糊查找,也是相当好用的定位方法；同样地，也是会返回页面第一个匹配的锚点标签。</p> 
<p> </p> 
<p><strong>6、返回多个元素</strong></p> 
<p>find elements 查找元素的方法跟find element 是类似的，不同的是find elements会返回一个list列表。</p> 
<ul><li>find_<em>elements_</em>by_name</li><li>find_<em>elements_</em>by_xpath</li><li>find_<em>elements_</em>by_<em>link_</em>text</li><li>find_<em>elements_</em>by_<em>partial</em>link_text</li><li>find_<em>elements_</em>by_<em>tag</em>name</li><li>find_<em>elements_</em>by_<em>class</em>name</li><li>find_e<em>lements_</em>by_<em>css</em>selector</li></ul> 
<h3>三、断言</h3> 
<p>一个完整的测试脚本一定会包含对测试结果是否与预测结果一致的对比，从而判断脚本是否执行成功，Airtest提供了以下断言方法：</p> 
<ul><li>assert_exists</li><li>assert_not_exists</li><li>assert_equal</li><li>assert_not_equal</li></ul> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8cd5ddc35a7c70badf6e4c8137a3ae39/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《长安十二时辰》之学习PMP项目管理、 NPDP产品经理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2ba5581dbebb8119d9445dc6ae8469b3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JAVA 毕业设计 论文题目参考</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>