<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【JVM】五种对象引用 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【JVM】五种对象引用" />
<meta property="og:description" content="📝个人主页：五敷有你 🔥系列专栏：JVM
⛺️稳中求进，晒太阳
几种常见的对象引用 可达性算法中描述的对象引用，一般指的是强引用，即是GCRoot对象对普通对象有引用关系，只要这层关系存在，普通对象就不会被回收。除了强引用之外，Java中还设计了几种其他引用方式：
软引用弱引用虚引用终结器引用 软引用 软引用相对于强引用是一种比较弱的引用关系，如果一个对象只有软引用关联到它，当程序内存不足时，就会将软引用中的数据进行回收。在JDK 1.2版之后提供了SoftReference类来实现软引用，软引用常用于缓存中。
软引用的执行过程如下：
将对象使用软引用包装起来，new SoftReference(对象)。内存不足时，虚拟机尝试进行垃圾回收。如果垃圾回收仍不能解决内存不足的问题，回收软引用中的对象。如果依然内存不足，抛出OutOfMemory异常。 软引用中的对象如果在内存不足时回收，SoftReference对象本身也需要被回收。如何知道哪些SoftReference对象需要回收呢？
SoftReference提供了一套队列机制：
软引用创建时，通过构造器传入引用队列在软引用中包含的对象被回收时，该软引用对象会被放入引用队列通过代码遍历引用队列，将SoftReference的强引用删除 软引用也可以使用继承自SoftReference类的方式来实现，StudentRef类就是一个软引用对象。
通过构造器传入软引用包含的对象，以及引用队列。
弱引用 弱引用的整体机制和软引用基本一致，区别在于弱引用包含的对象在垃圾回收时，不管内存够不够都会直接被回收。
在JDK 1.2版之后提供了WeakReference类来实现弱引用，弱引用主要在ThreadLocal中使用。
弱引用对象本身也可以使用引用队列进行回收。
虚引用和终结器 引用这两种引用在常规开发中是不会使用的。
虚引用也叫幽灵引用/幻影引用，不能通过虚引用对象获取到包含的对象。虚引用唯一的用途是当对象被垃圾回收器回收时可以接收到对应的通知。Java中使用PhantomReference实现了虚引用，直接内存中为了及时知道直接内存对象不再使用，从而回收内存，使用了虚引用来实现。
终结器引用指的是在对象需要被回收时，终结器引用会关联对象并放置在Finalizer类中的引用队列中，在稍后由一条由FinalizerThread线程从队列中获取对象，然后执行对象的finalize方法，在对象第二次被回收时，该对象才真正的被回收。在这个过程中可以在finalize方法中再将自身对象使用强引用关联上，但是不建议这样做" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/b742a2945996bfebeb494e712ef910bb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-22T14:39:03+08:00" />
<meta property="article:modified_time" content="2024-02-22T14:39:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【JVM】五种对象引用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><img alt="" height="132" src="https://images2.imgbox.com/ae/c4/oeTVpQcW_o.png" width="124"></p> 
<p></p> 
<p style="text-align:center;"><strong><span style="color:#38d8f0;">       📝个人主页：<a href="https://blog.csdn.net/m0_62645012?" title="五敷有你">五敷有你</a>      </span></strong></p> 
<p style="text-align:center;"><strong><span style="color:#956fe7;"> 🔥系列专栏：<a href="https://blog.csdn.net/m0_62645012/category_12573051.html" title="JVM">JVM</a></span></strong></p> 
<p style="text-align:center;"><span style="color:#ff9900;"><strong>⛺️稳中求进，晒太阳</strong></span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/85/5d/OYFYyN89_o.gif"></p> 
<h3>几种常见的对象引用</h3> 
<p>可达性算法中描述的对象引用，一般指的是强引用，即是GCRoot对象对普通对象有引用关系，只要这层关系存在，普通对象就不会被回收。除了强引用之外，Java中还设计了几种其他引用方式：</p> 
<ul><li>软引用</li><li>弱引用</li><li>虚引用</li><li>终结器引用</li></ul> 
<h4>软引用</h4> 
<p>软引用相对于强引用是一种比较弱的引用关系，如果一个对象只有软引用关联到它，当程序内存不足时，就会将软引用中的数据进行回收。在JDK 1.2版之后提供了SoftReference类来实现软引用，软引用常用于缓存中。</p> 
<p><img alt="" height="297" src="https://images2.imgbox.com/82/63/9Myeks5X_o.png" width="624"></p> 
<p>软引用的执行过程如下：</p> 
<ol><li>将对象使用软引用包装起来，new SoftReference(对象)。</li><li>内存不足时，虚拟机尝试进行垃圾回收。</li><li>如果垃圾回收仍不能解决内存不足的问题，回收软引用中的对象。</li><li>如果依然内存不足，抛出OutOfMemory异常。</li></ol> 
<p><img alt="" height="69" src="https://images2.imgbox.com/f6/c1/5stuZCLm_o.png" width="639"></p> 
<p>软引用中的对象如果在内存不足时回收，SoftReference对象本身也需要被回收。如何知道哪些SoftReference对象需要回收呢？</p> 
<p>SoftReference提供了一套队列机制：</p> 
<ol><li>软引用创建时，通过构造器传入引用队列</li><li>在软引用中包含的对象被回收时，该软引用对象会被放入引用队列</li><li>通过代码遍历引用队列，将SoftReference的强引用删除</li></ol> 
<p><img alt="" height="222" src="https://images2.imgbox.com/9f/9a/eDhtcuXA_o.png" width="701"></p> 
<p>软引用也可以使用继承自SoftReference类的方式来实现，StudentRef类就是一个软引用对象。</p> 
<p>通过构造器传入软引用包含的对象，以及引用队列。</p> 
<p><img alt="" height="417" src="https://images2.imgbox.com/53/1c/lUMW3jv2_o.png" width="844"></p> 
<h4>弱引用</h4> 
<p>弱引用的整体机制和软引用基本一致，区别在于弱引用包含的对象在垃圾回收时，不管内存够不够都会直接被回收。</p> 
<p>在JDK 1.2版之后提供了WeakReference类来实现弱引用，弱引用主要在ThreadLocal中使用。</p> 
<p>弱引用对象本身也可以使用引用队列进行回收。</p> 
<p><img alt="" height="269" src="https://images2.imgbox.com/2d/0e/8ZRyUHF3_o.png" width="714"></p> 
<h4>虚引用和终结器</h4> 
<p>引用这两种引用在常规开发中是不会使用的。</p> 
<p>虚引用也叫幽灵引用/幻影引用，不能通过虚引用对象获取到包含的对象。虚引用唯一的用途是当对象被垃圾回收器回收时可以接收到对应的通知。Java中使用PhantomReference实现了虚引用，直接内存中为了及时知道直接内存对象不再使用，从而回收内存，使用了虚引用来实现。</p> 
<p>终结器引用指的是在对象需要被回收时，终结器引用会关联对象并放置在Finalizer类中的引用队列中，在稍后由一条由FinalizerThread线程从队列中获取对象，然后执行对象的finalize方法，在对象第二次被回收时，该对象才真正的被回收。在这个过程中可以在finalize方法中再将自身对象使用强引用关联上，但是不建议这样做</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3d12ec16f86e1bcb73fa69713904c583/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">嵌入式基础准备 | Linux命令（包括 文件、目录和压缩、系统操作、vi、vim、ctags、cscope）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/263957943eefbbfe08bbe68adf7869e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HarmonyOS—添加/删除Module</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>