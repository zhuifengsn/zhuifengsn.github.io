<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C语言】字符函数和内存操作函数 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【C语言】字符函数和内存操作函数" />
<meta property="og:description" content="大家好，我是苏貝，本篇博客带大家了解字符函数和内存操作函数，如果你觉得我写的还不错的话，可以给我一个赞👍吗，感谢❤️
目录 一.字符函数1.1 字符分类函数1.2 字符转换函数 二.内存操作函数2.1 memcpy2.2 memmove2.3 memset2.4 memcmp 一.字符函数 1.1 字符分类函数 下面函数的头文件都是&lt;ctype.h&gt;
函数如果他的参数符合下列条件就返回真即非0，不符合则返回0iscntrl任何控制字符isspace空白字符：空格‘ ’，换页‘\f’，换行’\n’，回车‘\r’，制表符’\t’或者垂直制表符’\v’isdigit十进制数字 0~9isxdigit十六进制数字，包括所有十进制数字，小写字母a~ f，大写字母A~ Fislower小写字母a~zisupper大写字母A~Zisalpha字母a~ z 或 A~Zisalnum字母或者数字，a~ z,A~ Z,0~9ispunct标点符号，任何不属于数字或者字母的图形字符（可打印)isgraph任何图形字符isprint任何可打印字符，包括图形字符和空白字符 其实字符分类函数很简单，下面就挑两个作为范例
范例1：
int main() { int ret1 = islower(&#39;X&#39;);//X不是小写字母，返回0 int ret2 = islower(&#39;f&#39;);//f是小写字母，返回非0的数 printf(&#34;%d %d&#34;, ret1, ret2); return 0; } 范例2：
int main() { int ret1 = isxdigit(&#39;a&#39;);//a是16进制数字 int ret2 = isxdigit(&#39;z&#39;);//z不是16进制数字，返回0 int ret3 = isxdigit(&#39;4&#39;);//4是16进制数字 printf(&#34;%d %d %d&#34;, ret1, ret2, ret3); return 0; } 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/00e4b1507205303fec2bbb726cdd098d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-09T21:49:30+08:00" />
<meta property="article:modified_time" content="2023-10-09T21:49:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C语言】字符函数和内存操作函数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>大家好，我是苏貝，本篇博客带大家了解字符函数和内存操作函数，如果你觉得我写的还不错的话，可以给我一个赞👍吗，感谢❤️<br> <img src="https://images2.imgbox.com/0b/5a/FdD9QjY0_o.jpg" alt="在这里插入图片描述"></p> 
</blockquote> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_6" rel="nofollow">一.字符函数</a></li><li><ul><li><a href="#11__7" rel="nofollow">1.1 字符分类函数</a></li><li><a href="#12__50" rel="nofollow">1.2 字符转换函数</a></li></ul> 
  </li><li><a href="#_95" rel="nofollow">二.内存操作函数</a></li><li><ul><li><a href="#21_memcpy_96" rel="nofollow">2.1 memcpy</a></li><li><a href="#22_memmove_187" rel="nofollow">2.2 memmove</a></li><li><a href="#23_memset_256" rel="nofollow">2.3 memset</a></li><li><a href="#24_memcmp_324" rel="nofollow">2.4 memcmp</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_6"></a>一.字符函数</h2> 
<h3><a id="11__7"></a>1.1 字符分类函数</h3> 
<p>下面函数的头文件都是&lt;ctype.h&gt;</p> 
<table><thead><tr><th>函数</th><th>如果他的参数符合下列条件就返回真即非0，不符合则返回0</th></tr></thead><tbody><tr><td>iscntrl</td><td>任何控制字符</td></tr><tr><td>isspace</td><td>空白字符：空格‘ ’，换页‘\f’，换行’\n’，回车‘\r’，制表符’\t’或者垂直制表符’\v’</td></tr><tr><td>isdigit</td><td>十进制数字 0~9</td></tr><tr><td>isxdigit</td><td>十六进制数字，包括所有十进制数字，小写字母a~ f，大写字母A~ F</td></tr><tr><td>islower</td><td>小写字母a~z</td></tr><tr><td>isupper</td><td>大写字母A~Z</td></tr><tr><td>isalpha</td><td>字母a~ z 或 A~Z</td></tr><tr><td>isalnum</td><td>字母或者数字，a~ z,A~ Z,0~9</td></tr><tr><td>ispunct</td><td>标点符号，任何不属于数字或者字母的图形字符（可打印)</td></tr><tr><td>isgraph</td><td>任何图形字符</td></tr><tr><td>isprint</td><td>任何可打印字符，包括图形字符和空白字符</td></tr></tbody></table> 
<p>其实字符分类函数很简单，下面就挑两个作为范例<br> <mark><font face="微软雅黑" size="3" color="#666FF">范例1：</font></mark></p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> ret1 <span class="token operator">=</span> <span class="token function">islower</span><span class="token punctuation">(</span><span class="token char">'X'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//X不是小写字母，返回0</span>
	<span class="token keyword">int</span> ret2 <span class="token operator">=</span> <span class="token function">islower</span><span class="token punctuation">(</span><span class="token char">'f'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//f是小写字母，返回非0的数</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> ret1<span class="token punctuation">,</span> ret2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/66/c1/R3RYFtWx_o.png" alt="在这里插入图片描述"></p> 
<p><mark><font face="微软雅黑" size="3" color="#666FF">范例2：</font></mark></p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> ret1 <span class="token operator">=</span> <span class="token function">isxdigit</span><span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a是16进制数字</span>
	<span class="token keyword">int</span> ret2 <span class="token operator">=</span> <span class="token function">isxdigit</span><span class="token punctuation">(</span><span class="token char">'z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//z不是16进制数字，返回0</span>
	<span class="token keyword">int</span> ret3 <span class="token operator">=</span> <span class="token function">isxdigit</span><span class="token punctuation">(</span><span class="token char">'4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4是16进制数字</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d %d"</span><span class="token punctuation">,</span> ret1<span class="token punctuation">,</span> ret2<span class="token punctuation">,</span> ret3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a9/e0/KeVnfzq4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12__50"></a>1.2 字符转换函数</h3> 
<p>字符转换函数只有两个，分别是tolower和toupper，它们的函数原型为：</p> 
<blockquote> 
 <p><strong>int tolower ( int c );</strong> //将大写字母转化为小写字母<br> <strong>int toupper ( int c );</strong>//将小写字母转化为大写字母</p> 
</blockquote> 
<p>其中，参数的类型为int，是将字符的ASCII码值传过去，返回的也是字符的ASCII码值，所有返回类型也是int</p> 
<p><mark><font face="微软雅黑" size="3" color="#666FF">范例1：</font></mark></p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token function">toupper</span><span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
	x <span class="token operator">=</span> <span class="token function">tolower</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c2/0b/dEdRWbYF_o.png" alt="在这里插入图片描述"></p> 
<p><mark><font face="微软雅黑" size="3" color="#666FF">范例2：</font></mark><br> 将数组arr中的字符全都变成小写字母</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"ABcdeFGhIjk"</span><span class="token punctuation">;</span>
	<span class="token keyword">char</span><span class="token operator">*</span> p <span class="token operator">=</span> arr<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isupper</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token function">tolower</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		p<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ac/4c/0B5NT28F_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_95"></a>二.内存操作函数</h2> 
<h3><a id="21_memcpy_96"></a>2.1 memcpy</h3> 
<p><strong>①函数介绍</strong></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token operator">*</span> <span class="token function">memcpy</span> <span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token operator">*</span> destination<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> source<span class="token punctuation">,</span> <span class="token class-name">size_t</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>memcpy函数的功能：从source的位置开始向后复制num个字节的数据到destination的内存位置。返回值：目标空间的起始位置。这与strcpy函数的功能很相似，那为什么我们已经有了strcpy函数还要设计memcpy函数呢？因为strcmp函数只能拷贝字符串，而内存空间可不是只有字符的，所有我们需要能拷贝非字符类型的函数，memcpy函数应运而生</p> 
<p>细节：destination和source的类型都为void * ：因为设计该函数的程序员不知道用户想要拷贝的类型，所有用void * 来接收所有类型的指针。source被const修饰：源内存块的内容不会被修改。num是指num个字节</p> 
<p><mark><font face="微软雅黑" size="3" color="#666FF">注意：</font></mark><br> 1.这个函数在遇到 ‘\0’ 的时候并不会停下来。<br> 2.如果source和destination有任何的重叠，复制的结果都是未定义的</p> 
<p><mark><font face="微软雅黑" size="3" color="#666FF">范例：</font></mark><br> 把arr2中的前5个整型的数据拷贝放在arr1中</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr1<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> arr2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">memcpy</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//20：5*sizeof(int)=5*4</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f5/66/VxEkIMCZ_o.png" alt="在这里插入图片描述"></p> 
<p><strong>②模拟实现</strong></p> 
<p>模拟函数的三个参数没有改变，依旧是只需要源内存块的起始地址和目标空间的起始地址以及要拷贝的字节数。先对dest和src断言，避免它们为空指针。用while循环num次，当num==0时退出循环。接下来就是将src的内容拷贝到dest中。因为src和dest指针都是void * 类型的，所有需要先强制类型转化为char * ，拷贝一次后，两指针都要指向下一个字节，因为强制类型转化是暂时的，所有完成赋值语句后，两指针还是void * 类型，所有为了指向下一个字节，我们需要再对它们强制类型转化为char * 类型，写成dest=(char*)dest + 1;那可以写成(char*)dest++;吗?不能，因为++的优先级高于强制类型转化。那可以写成++(char*)dest;吗？最好不要，有些编译器会报错</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">my_memcpy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> dest<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> src<span class="token punctuation">,</span> <span class="token class-name">size_t</span> num<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>dest <span class="token operator">&amp;&amp;</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span><span class="token operator">*</span> ret <span class="token operator">=</span> dest<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>num<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>dest <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>src<span class="token punctuation">;</span>
		dest <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>dest <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		src <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>src <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>③我们是否可以用所写的模拟函数让下面代码的数组arr从第5个元素开始往后的5个字符作为源内存块，将第3个元素开始往后的5个字符作为目标内存块，从source的位置开始向后复制num个字节的数据到destination的内存位置呢？即将数组arr变为{ 1,2,3,4,3,4,5,6,7,10}</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">my_memcpy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> dest<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> src<span class="token punctuation">,</span> <span class="token class-name">size_t</span> num<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span><span class="token operator">*</span> ret <span class="token operator">=</span> dest<span class="token punctuation">;</span>
	<span class="token function">assert</span><span class="token punctuation">(</span>dest <span class="token operator">&amp;&amp;</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>num<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>dest <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>src<span class="token punctuation">;</span>
		dest <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>dest <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		src <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>src <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">my_memcpy</span><span class="token punctuation">(</span>arr <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">,</span> arr <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>答案是不能的，因为当程序想将5赋值给元素7时，5已经被3覆盖。同理，6已经被4覆盖，7已经被3覆盖<br> <img src="https://images2.imgbox.com/41/98/OjGr9XTN_o.png" alt="在这里插入图片描述"><br> 我们注意到这次的拷贝的源内存块和目标内存块是重叠的，而我们上面写的模拟函数的源内存块和目标内存块要求是不重叠的，所以使用失败。那我们如何解决源内存块和目标内存块重叠时成功拷贝呢？别急，有一个函数可以解决，那就是memmove函数</p> 
<p>补充：其实有一些编译器的memcpy函数可以处理源内存块和目标内存块重叠的情况，但是并非所有，因此遇见两内存块重叠的情况时最好还是选择memmove函数</p> 
<hr> 
<h3><a id="22_memmove_187"></a>2.2 memmove</h3> 
<p><strong>①函数介绍</strong></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token operator">*</span> <span class="token function">memmove</span> <span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token operator">*</span> destination<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> source<span class="token punctuation">,</span> <span class="token class-name">size_t</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>1.和memcpy的差别就是memmove函数处理的源内存块和目标内存块是可以重叠的，其余都相同<br> 2.如果源空间和目标空间出现重叠，就得使用memmove函数处理</p> 
<p>你瞧，memcpy解决不了的问题memmove轻松搞定</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">memmove</span><span class="token punctuation">(</span>arr <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">,</span> arr <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/93/15/SGVpQdxr_o.png" alt="在这里插入图片描述"></p> 
<p><strong>②模拟实现</strong><br> 以上面代码的arr数组举例，如果源内存块是从元素3开始的5个元素，目标内存块是从元素5开始的5个元素，此时如果要拷贝，为避免有些重要的值事先被覆盖，我们就要从后往前拷贝，即从源内存块的最后一个字节开始拷贝<br> <img src="https://images2.imgbox.com/66/2a/rkOmEwqn_o.png" alt="在这里插入图片描述"></p> 
<p>如果源内存块是从元素3开始的5个元素，目标内存块是从元素1开始的5个元素，此时如果要拷贝我们就要从前往后拷贝<br> <img src="https://images2.imgbox.com/f6/6e/QCTovfnY_o.png" alt="在这里插入图片描述"></p> 
<p>如果源内存块和目标内存块无重叠，那么拷贝既可以从前往后也可以从后往前<br> <img src="https://images2.imgbox.com/bf/0f/DTu2dmAJ_o.png" alt="在这里插入图片描述"></p> 
<p>所以我们可以这样想：<br> 1.dest&lt;src时，从前往后拷贝<br> 2.dest&gt;src时，从后往前拷贝</p> 
<p>dest&lt;src时，与上面的memcpy模拟实现的思路相同，不再赘述。现在我们来思考如何从后往前拷贝。我们依旧用while循环，循环num次，当num==0时退出循环，while(num)。从后往前拷贝，就是将源内存块的最后一个字节拷贝到目标内存块的最后一个字节，再将源内存块的倒数第二个字节拷贝到目标内存块的倒数第二个字节……本题中，num=20，所以源内存块的最后一个字节的地址是(char*)src+19，目标内存块的最后一个字节的地址是(char*)dest+19。源内存块的倒数第二个字节的地址是(char*)src+18，目标内存块的倒数第二个字节的地址是(char*)dest+18。我们发现，第一次循环的时候19=num(20)-1，经历一次循环,num–=19；第二次循环的时候18=num(19)-1，经历一次循环,num–=18；那我们是不是在while循环的条件中写成while(num–)呢？这样的话每次循环源内存块字节的地址=(char*)src+num，所以写成如下写法</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">my_memmove</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> dest<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> src<span class="token punctuation">,</span> <span class="token class-name">size_t</span> num<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>dest <span class="token operator">&amp;&amp;</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span><span class="token operator">*</span> ret<span class="token operator">=</span>dest<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>dest <span class="token operator">&lt;</span> src<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>num<span class="token operator">--</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>dest <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>src<span class="token punctuation">;</span>
			dest <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>dest <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
			src <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>src <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>num<span class="token operator">--</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>dest <span class="token operator">+</span> num<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>src <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h3><a id="23_memset_256"></a>2.3 memset</h3> 
<p>memset是以字节为单位设置内存的。比如我可以让字符数组arr=“hello world"中从第3个元素开始的5个字符都变成字符’x’，即变成"hexxxxxorld”。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token operator">*</span> <span class="token function">memset</span> <span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token operator">*</span> ptr<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">,</span> <span class="token class-name">size_t</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><mark><font face="微软雅黑" size="3" color="#666FF">范例1：</font></mark></p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span>arr <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token char">'x'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/14/36/QnufBGzC_o.png" alt=""></p> 
<p><mark><font face="微软雅黑" size="3" color="#666FF">范例2：</font></mark><br> 下面代码的目的是用memset函数将arr数组中的元素全部改成1，可以做到吗？</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果你觉得可以的话，请看看最后的结果吧！为什么不是我们所想的全是1呢？</p> 
<p><img src="https://images2.imgbox.com/7d/0f/byNrO4Vc_o.png" alt="在这里插入图片描述"><br> 经过调试我们可以看到，调用完成memset后，数组arr的每个字节都由0变1，导致每个整型元素都变为0x01010101，所以不能用memset函数将arr数组中的元素全部改成1。所以memset更适用于字符数组<br> <img src="https://images2.imgbox.com/54/f3/mmcDyH3p_o.jpg" alt="在这里插入图片描述"></p> 
<p>但是可以将数组中的每个元素都变为0，因为将每个字节都变为0即每个整形元素都为0</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/44/37/GhbEtrG6_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="24_memcmp_324"></a>2.4 memcmp</h3> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">memcmp</span> <span class="token punctuation">(</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> ptr1<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> ptr2<span class="token punctuation">,</span><span class="token class-name">size_t</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>memcmp函数是比较从ptr1和ptr2指针开始的num个字节的大小，如果 * ptr1&gt; * ptr2，返回一个正数；如果 * ptr1== * ptr2，返回0；如果 * ptr1&lt; * ptr2，返回一个负数。依旧是比较以字节为单位进行比较</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//假如是小端存储</span>
	<span class="token comment">//01 00 00 00 02 00 00 00 03 00 00 00 04 00 00 00 05 00 00 00</span>
	<span class="token keyword">int</span> arr2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0x11223304</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//01 00 00 00 02 00 00 00 04 33 22 11</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token function">memcmp</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>用memcmp函数时，切记不要拿数组中的元素直接比较，我们要看它们各自的存储情况。本题两个数组在前8个字节都相等，看第9个字节，03&lt;04，所以前面&lt;后面，返回一个负数<br> <img src="https://images2.imgbox.com/c9/83/UmClM72K_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p><font face="微软雅黑" size="4" color="#666FF">好了，那么本篇博客就到此结束了，如果你觉得本篇博客对你有些帮助，可以给个大大的赞👍吗，感谢看到这里，我们下篇博客见❤️</font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5a498a9ba56fc17e30dc14ac8ac21fac/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言操作符详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0e68bd5550f1506cd9d3f46a9066e938/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Springboot整合shiro</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>