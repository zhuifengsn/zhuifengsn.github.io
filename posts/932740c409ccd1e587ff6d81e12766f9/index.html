<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Cisco交换机ACL的配置 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Cisco交换机ACL的配置" />
<meta property="og:description" content="访问控制列表（Access Control List ACL）的含义和作用就不讲了，自行百度
一 .ACL讲解
ACL分标准访问控制列表（Standard ACL）和拓展访问控制列表（Extended ACL），如下
① 标准ACL(访问控制列表号1—99或1300—1999)
只过滤源地址，允许或禁止整个TCP/IP协议族
一般配置在靠近流量目的地的接口
配置方法如下：
router（config）#access-list 1 permit 172.16.0.0 0.0.255.255
router（config）#access list 1 deny any //系统隐含条件（implicit deny any）
router（config）#interface F0/0
router（config-if）#ip access-group 1 in
router（config-if）#exit
router（config）#interface F0/1
router（config-if）#ip access-group 1 out
router（config-if）#no ip access-group 1 out //在端口上卸除ACL绑定
值得注意的是要改变ACL列表条件只能删除整个表：
router（config）#no access-list 1
②拓展ACL（访问控制列表标号100-199或2000-2600）
过滤源或目的地址，允许或拒绝一个具体的协议和端口号
一般放在靠近流量源头处
用到端口号时常用的英文缩写 it gt eq neq(＜、＞、＝、≠)
常见熟知端口号：
20 文件传输协议（FTP）数据通道
21 文件传输协议（FTP）控制通道
23 远程登录（Telnet）
25 简单邮件传输协议（SMTP）
53 域名服务系统（DNS）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/932740c409ccd1e587ff6d81e12766f9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-04-22T23:43:47+08:00" />
<meta property="article:modified_time" content="2015-04-22T23:43:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Cisco交换机ACL的配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:24px">访问控制列表（Access Control List   ACL）的含义和作用就不讲了，自行百度</span></p> 
<p><span style="font-size:32px; color:#ff0000"><strong>一 .ACL讲解</strong></span></p> 
<p><span style="font-size:24px">ACL分标准访问控制列表（Standard ACL）和拓展访问控制列表（Extended ACL），如下</span></p> 
<p><span style="font-size:24px"><strong><span style="color:#3333ff">① 标准ACL(访问控制列表号1—99或1300—1999)</span></strong><br> 只过滤源地址，允许或禁止整个TCP/IP协议族<br> 一般配置在靠近流量目的地的接口<br> 配置方法如下：<br> router（config）#access-list 1 permit 172.16.0.0 0.0.255.255<br> router（config）#access list 1 deny any<span style="white-space:pre"> </span>//系统隐含条件（implicit deny any）<br> router（config）#interface F0/0<br> router（config-if）#ip access-group 1 in<br> router（config-if）#exit<br> router（config）#interface F0/1<br> router（config-if）#ip access-group 1 out<br> router（config-if）#no ip access-group 1 out<span style="white-space:pre"> </span>//在端口上卸除ACL绑定</span></p> 
<p><span style="font-size:24px"><br> 值得注意的是要改变ACL列表条件只能删除整个表：<br> router（config）#no access-list 1<br> </span></p> 
<p><span style="font-size:24px"><br> </span></p> 
<p><span style="font-size:24px"><strong><span style="color:#3333ff">②拓展ACL（访问控制列表标号100-199或2000-2600）</span></strong><br> 过滤源或目的地址，允许或拒绝一个具体的协议和端口号<br> 一般放在靠近流量源头处<br> 用到端口号时常用的英文缩写   it gt eq neq(＜、＞、＝、≠)<br> 常见熟知端口号：<br> 20<span style="white-space:pre"> </span>文件传输协议（FTP）数据通道<br> 21<span style="white-space:pre"> </span>文件传输协议（FTP）控制通道<br> 23<span style="white-space:pre"> </span>远程登录（Telnet）<br> 25<span style="white-space:pre"> </span>简单邮件传输协议（SMTP）<br> 53<span style="white-space:pre"> </span>域名服务系统（DNS）<br> 69<span style="white-space:pre"> </span>普通文件传输协议（TFTP）<br> 80<span style="white-space:pre"> </span>超文本传输协议（HTTP）<br> 例1：<br> router（config）#access-list 101 deny ip 172.16.4.0 0.0.0.255 host 10.8.1.128<br> router（config）#access-list 101 permit ip 172.16.4.0 0.0.0.255 10.8.0.0 0.0.255.255<br> router（config）#access-list 101 deny ip any any<span style="white-space:pre"> </span> //系统隐含条件（implicit denyall）<br> router（config）#interface s0<br> router（config-if）#ip access-group 101 out<br> router（config）#access-list 102 deny ip 172.16.3.0 0.0.0.255 host 172.16.4.10 eq 21<br> router（config）#access-list 102 deny ip 172.16.3.0 0.0.0.255 host 172.16.4.10 eq 20<br> router（config）#interface f0/0<br> router（config-if）#ip access-group 102 out<br> <br> <br> 例2：<br> 允许192.168.10.10 ping 172.16.1.1,禁止反向测试：<br> router（config）#access-list 199 deny icmp host 192.168.10.10 host 172.16.1.1 echo<br> router（config）#access-list 199 deny icmp host 192.168.10.10 host 172.16.1.1 echo reply<br> router（config）#access-list 199 permit ip any any<br> </span></p> 
<p><span style="font-size:24px"><strong><span style="color:#3333ff">③命名IP ACL（Cisco IOS v11.2以后支持）</span></strong><br> 例：<br> router（config）#access-list standard acl_1<span style="white-space:pre"> </span>//注明standard还是extended控制列表，名字可使用大多数字符<br> router（config-std-nac）#permit 172.18.0.0 0.0.255.255 log<br> router（config-std-nac）#no permit 172.18.0.0 0.0.255.255 log<span style="white-space:pre"> </span>//no 命令移去特定语句<br> router（config）#interface f0/0<br> router（config-if）#ip access-group acl_1 out<br> <br> <br> <br> <br> <strong><span style="color:#3333ff">④查看ACL列表</span></strong><br> router（config）# show ip interface e0<span style="white-space:pre"> </span>//查看接口ACL绑定情况<br> router（config）# show accesslists<span style="white-space:pre"> </span>//监视ACL内容<br> router（config）#show access-list [acl表号]】</span><br> </p> 
<p><span style="font-size:32px; color:#ff0000"><strong>二.实例</strong></span></p> 
<p><span style="font-size:18px"><strong><br> </strong></span></p> 
<p><span style="font-size:18px"><strong>拓扑图如下（路由配置用的是RIP），其中DNS服务器中有两条记录：</strong></span></p> 
<p><span style="font-size:18px"><strong>ns.shzu.edu.cn<span style="white-space:pre"> </span>2.2.2.200</strong></span></p> 
<p><span style="font-size:18px"><strong>ftp.shzu.edu.cn<span style="white-space:pre"> </span>2.2.2.100</strong></span></p> 
<p><span style="font-size:18px"><strong><img src="https://images2.imgbox.com/f6/8e/bafquH4E_o.png" alt=""><br> </strong></span></p> 
<p><span style="font-size:18px"><strong>实验要求：</strong></span></p> 
<p><span style="font-size:18px"><strong>①1.1.1.0/24网段中的所有节点能ping通2.2.2.0/24网段中的DNS服务器，而无法ping通其他节点</strong></span></p> 
<p><span style="font-size:18px"><strong>②2.2.2.0/24网段中的节点不能访问Internet（即不能ping 通R2之后的节点）</strong></span></p> 
<p><span style="font-size:18px"><strong><br> </strong></span></p> 
<p><span style="font-size:18px; color:#000099"><strong>实验过程</strong></span></p> 
<p><span style="font-size:18px; color:#000099"><strong>①配置R1</strong></span></p> 
<p><span style="font-size:18px"><strong><img src="https://images2.imgbox.com/bd/20/j0zSBV7U_o.png" alt=""><br> </strong></span></p> 
<p><span style="font-size:18px; color:#000099"><strong style="background-color:rgb(255,255,255)">②配置R2</strong></span></p> 
<p><span style="font-size:18px"><strong><img src="https://images2.imgbox.com/8d/42/422Kp4d9_o.png" alt=""><br> </strong></span></p> 
<p><span style="font-size:18px; color:#000099"><strong style="background-color:rgb(255,255,255)">③测试</strong></span></p> 
<p><span style="font-size:18px"><strong><img src="https://images2.imgbox.com/43/5c/2cSri3O4_o.png" alt=""><br> </strong></span></p> 
<p><span style="font-size:18px"><strong><img src="https://images2.imgbox.com/c2/e0/DoE41TG9_o.png" alt=""><br> </strong></span></p> 
<p><span style="font-size:18px"><strong>至此实验结束，ACL配置过程中其他值得注意的一些地方总结如下：</strong></span></p> 
<p><span style="font-size:18px"><strong>访问控制列表的顺序决定被检验的顺序，特殊规则放在最前面（如针对某个主机）<br> 每个列表至少有一个允许语句<br> 每个接口，每个协议，每个方向上只能绑定一个ACL列表<br> </strong></span></p> 
<p><span style="font-size:18px"><strong><br> </strong></span></p> 
<p><span style="font-size:18px"><strong><br> </strong></span></p> 
<p><span style="font-size:18px"><strong><br> </strong></span></p> 
<p><span style="font-size:18px"><strong><br> </strong></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/92b400c4d9bfe43723a2fe5c313a1669/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构：C&#43;&#43;链表类及一元多项式的实现时遇到的困难</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/adb3a5c5115ac9be30849087a11c048b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ADO.NET——DataAdapter对象</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>