<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ajax请求后没有刷新,AJAX请求完成后，变量不刷新 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ajax请求后没有刷新,AJAX请求完成后，变量不刷新" />
<meta property="og:description" content="我有一个网页中的&#39;对象&#39;的网页。例如：AJAX请求完成后，变量不刷新
OBJ1，OBJ2，OBJ 3，...
每个对象都有一个选项， &#39;编辑&#39;，这将打开模态窗口(ui.dialog)和负载(.load())的模板，在哪里有一些输入，textareas等来编辑关于对象的信息。有一个按钮“完成编辑”，它通过AJAX .post()将POST请求发送到PHP文件。之后，必须编辑关于对象的信息。
PHP或MySQL没有问题，问题只出现在JS中。第一次更新后，一切似乎都没有问题，但是当我点击&#39;obj2&#39;来编辑它并按&#39;完成编辑&#39;时，我在其中编写输入值的变量来自以前的操作。
obj1。 var1 =&#39;text1&#39;; var2 =&#39;text2&#39;;
obj2。 var1 =&#39;text3&#39;; var2 =&#39;text4&#39;;
例如在&#39;obj1&#39;中，我发送了下一个数据：&#39;v1&#39;：var1，&#39;v2&#39;：var2。没关系。但在&#39;obj2&#39;中它也发送&#39;text1&#39;和&#39;text2&#39;，而不是&#39;text3&#39;和&#39;text4&#39;。
我也做了var1.val(“”)，但它没有帮助，第二次它发送的空值:)
代码：
$(&#34;.edit&#34;).click(function(){
var modal = $(&#39;
modal.dialog({
modal: true,
width: 300,
height: 300,
autoOpen: true
});
modal.find(&#34;&gt;div&#34;).load(&#39;someurl&#39;, function(){
modal.dialog(&#39;open&#39;);
modal.find(&#34;#finish-button&#34;).click(function() {
var var1 = $(&#39;#someid1&#39;).val();
var var2 = $(&#39;#someid2&#39;).val();
$.ajax({
url: &#39;someurl&#39;,
type: &#39;post&#39;,
data: {
&#39;v1&#39; : var1,
&#39;v2&#39; : var2
},
success: function(data) {
modal.dialog(&#39;close&#39;);
// here is some refresh code to refresh the edited info in the page ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/b0e3625a88ba1aee1498a2df9e31c6cc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-05T12:03:59+08:00" />
<meta property="article:modified_time" content="2021-08-05T12:03:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ajax请求后没有刷新,AJAX请求完成后，变量不刷新</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>我有一个网页中的'对象'的网页。例如：AJAX请求完成后，变量不刷新</p> 
 <p>OBJ1，OBJ2，OBJ 3，...</p> 
 <p>每个对象都有一个选项， '编辑'，这将打开模态窗口(ui.dialog)和负载(.load())的模板，在哪里有一些输入，textareas等来编辑关于对象的信息。有一个按钮“完成编辑”，它通过AJAX .post()将POST请求发送到PHP文件。之后，必须编辑关于对象的信息。</p> 
 <p>PHP或MySQL没有问题，问题只出现在JS中。第一次更新后，一切似乎都没有问题，但是当我点击'obj2'来编辑它并按'完成编辑'时，我在其中编写输入值的变量来自以前的操作。</p> 
 <p>obj1。 var1 ='text1'; var2 ='text2';</p> 
 <p>obj2。 var1 ='text3'; var2 ='text4';</p> 
 <p>例如在'obj1'中，我发送了下一个数据：'v1'：var1，'v2'：var2。没关系。但在'obj2'中它也发送'text1'和'text2'，而不是'text3'和'text4'。</p> 
 <p>我也做了var1.val(“”)，但它没有帮助，第二次它发送的空值:)</p> 
 <p>代码：</p> 
 <p>$(".edit").click(function(){<!-- --></p> 
 <p>var modal = $('</p> 
 <p>modal.dialog({<!-- --></p> 
 <p>modal: true,</p> 
 <p>width: 300,</p> 
 <p>height: 300,</p> 
 <p>autoOpen: true</p> 
 <p>});</p> 
 <p>modal.find("&gt;div").load('someurl', function(){<!-- --></p> 
 <p>modal.dialog('open');</p> 
 <p>modal.find("#finish-button").click(function() {<!-- --></p> 
 <p>var var1 = $('#someid1').val();</p> 
 <p>var var2 = $('#someid2').val();</p> 
 <p>$.ajax({<!-- --></p> 
 <p>url: 'someurl',</p> 
 <p>type: 'post',</p> 
 <p>data: {<!-- --></p> 
 <p>'v1' : var1,</p> 
 <p>'v2' : var2</p> 
 <p>},</p> 
 <p>success: function(data) {<!-- --></p> 
 <p>modal.dialog('close');</p> 
 <p>// here is some refresh code to refresh the edited info in the page ... nothing serious</p> 
 <p>}</p> 
 <p>});</p> 
 <p>});</p> 
 <p>});</p> 
 <p>});</p> 
 <p>2011-03-01</p> 
 <p>Dmitry</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e7e2ddee4acb9389b8fca195078aa88a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">自然语言处理：RNN</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/461921db058fef34522159483d5330ed/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">服务器怎么ghost备份系统,最详细的ghost备份系统图解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>