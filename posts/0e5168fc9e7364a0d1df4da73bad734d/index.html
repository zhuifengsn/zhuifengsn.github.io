<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于STM32的温湿度的OLED（4SPI）显示 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于STM32的温湿度的OLED（4SPI）显示" />
<meta property="og:description" content="文章目录 一、SPI协议简介1.SPI协议的含义2.SPI 物理层3.SPI协议层4.SPI 基本通讯过程5.通讯的起始和停止信号6.数据有效性 二、OLED显示数据1. OLED相关资料2. 下载厂家Demo程序 三、显示自己的学号和姓名1.生成中文点阵及点阵编码2.编写代码3.编译程序及生成hex文件4.电路连接5.程序烧录6.运行结果 四、显示AHT20的温度和湿度1.生成中文点阵及点阵编码2.编写代码3.编译程序及生成hex文件4.电路连接5.程序烧录6.运行结果 五、上下或左右的滑动显示长字符1.生成中文点阵及点阵编码2.编写代码3.编译及生成hex文件4.电路连接5.程序烧录6.运行结果 六、总结七、参考链接 一、SPI协议简介 1.SPI协议的含义 SPI 协议是由摩托罗拉公司提出的通讯协议(Serial Peripheral Interface)，即串行外围设备接口，是一种高速全双工的通信总线。它被广泛地使用在 ADC、LCD 等设备与 MCU 间，要求通讯速率较高的场合。
2.SPI 物理层 SPI 通讯设备之间的常用连接方式见下图：
SPI 通讯使用 3 条总线及片选线，3 条总线分别为 SCK、MOSI、MISO，片选线为 SS，它们的作用介绍如下：
(1) SS( Slave Select)：从设备选择信号线，常称为片选信号线，也称为 NSS、CS，以下用 NSS 表示。当有多个 SPI从设备与 SPI主机相连时，设备的其它信号线 SCK、MOSI及MISO同时并联到相同的 SPI总线上，即无论有多少个从设备，都共同只使用这 3条总线；而每个从设备都有独立的这一条 NSS信号线，本信号线独占主机的一个引脚，即有多少个从设备，就有多少条片选信号线。I2C 协议中通过设备地址来寻址、选中
总线上的某个设备并与其进行通讯；而 SPI 协议中没有设备地址，它使用 NSS 信号线来寻址，当主机要选择从设备时，把该从设备的 NSS 信号线设置为低电平，该从设备即被选中，即片选有效，接着主机开始与被选中的从设备进行 SPI通讯。所以 SPI通讯以 NSS 线置低电平为开始信号，以 NSS 线被拉高作为结束信号。
(2) SCK (Serial Clock)：时钟信号线，用于通讯数据同步。它由通讯主机产生，决定了通讯的速率，不同的设备支持的最高时钟频率不一样，如 STM32 的 SPI 时钟频率最大为fpclk/2，两个设备之间通讯时，通讯速率受限于低速设备。
(3) MOSI (Master Output， Slave Input)：主设备输出/从设备输入引脚。主机的数据从这条信号线输出，从机由这条信号线读入主机发送的数据，即这条线上数据的方向为主机到从机。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/0e5168fc9e7364a0d1df4da73bad734d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-04T22:45:37+08:00" />
<meta property="article:modified_time" content="2022-11-04T22:45:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于STM32的温湿度的OLED（4SPI）显示</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#SPI_1" rel="nofollow">一、SPI协议简介</a></li><li><ul><li><a href="#1SPI_2" rel="nofollow">1.SPI协议的含义</a></li><li><a href="#2SPI__4" rel="nofollow">2.SPI 物理层</a></li><li><a href="#3SPI_12" rel="nofollow">3.SPI协议层</a></li><li><a href="#4SPI__14" rel="nofollow">4.SPI 基本通讯过程</a></li><li><a href="#5_18" rel="nofollow">5.通讯的起始和停止信号</a></li><li><a href="#6_20" rel="nofollow">6.数据有效性</a></li></ul> 
  </li><li><a href="#OLED_25" rel="nofollow">二、OLED显示数据</a></li><li><ul><li><a href="#1_OLED_26" rel="nofollow">1. OLED相关资料</a></li><li><a href="#2_Demo_28" rel="nofollow">2. 下载厂家Demo程序</a></li></ul> 
  </li><li><a href="#_32" rel="nofollow">三、显示自己的学号和姓名</a></li><li><ul><li><a href="#1_33" rel="nofollow">1.生成中文点阵及点阵编码</a></li><li><a href="#2_45" rel="nofollow">2.编写代码</a></li><li><a href="#3hex_98" rel="nofollow">3.编译程序及生成hex文件</a></li><li><a href="#4_101" rel="nofollow">4.电路连接</a></li><li><a href="#5_118" rel="nofollow">5.程序烧录</a></li><li><a href="#6_126" rel="nofollow">6.运行结果</a></li></ul> 
  </li><li><a href="#AHT20_129" rel="nofollow">四、显示AHT20的温度和湿度</a></li><li><ul><li><a href="#1_130" rel="nofollow">1.生成中文点阵及点阵编码</a></li><li><a href="#2_148" rel="nofollow">2.编写代码</a></li><li><a href="#3hex_281" rel="nofollow">3.编译程序及生成hex文件</a></li><li><a href="#4_284" rel="nofollow">4.电路连接</a></li><li><a href="#5_311" rel="nofollow">5.程序烧录</a></li><li><a href="#6_319" rel="nofollow">6.运行结果</a></li></ul> 
  </li><li><a href="#_322" rel="nofollow">五、上下或左右的滑动显示长字符</a></li><li><ul><li><a href="#1_323" rel="nofollow">1.生成中文点阵及点阵编码</a></li><li><a href="#2_343" rel="nofollow">2.编写代码</a></li><li><a href="#3hex_381" rel="nofollow">3.编译及生成hex文件</a></li><li><a href="#4_384" rel="nofollow">4.电路连接</a></li><li><a href="#5_408" rel="nofollow">5.程序烧录</a></li><li><a href="#6_416" rel="nofollow">6.运行结果</a></li></ul> 
  </li><li><a href="#_419" rel="nofollow">六、总结</a></li><li><a href="#_422" rel="nofollow">七、参考链接</a></li></ul> 
</div> 
<p></p> 
<h2><a id="SPI_1"></a>一、SPI协议简介</h2> 
<h3><a id="1SPI_2"></a>1.SPI协议的含义</h3> 
<p>SPI 协议是由摩托罗拉公司提出的通讯协议(Serial Peripheral Interface)，即串行外围设备接口，是一种高速全双工的通信总线。它被广泛地使用在 ADC、LCD 等设备与 MCU 间，要求通讯速率较高的场合。</p> 
<h3><a id="2SPI__4"></a>2.SPI 物理层</h3> 
<p>SPI 通讯设备之间的常用连接方式见下图：<img src="https://images2.imgbox.com/a7/25/y0E6fO5B_o.png" alt=""><br> SPI 通讯使用 3 条总线及片选线，3 条总线分别为 SCK、MOSI、MISO，片选线为 SS，它们的作用介绍如下：<br> (1) SS( Slave Select)：从设备选择信号线，常称为片选信号线，也称为 NSS、CS，以下用 NSS 表示。当有多个 SPI从设备与 SPI主机相连时，设备的其它信号线 SCK、MOSI及MISO同时并联到相同的 SPI总线上，即无论有多少个从设备，都共同只使用这 3条总线；而每个从设备都有独立的这一条 NSS信号线，本信号线独占主机的一个引脚，即有多少个从设备，就有多少条片选信号线。I2C 协议中通过设备地址来寻址、选中<br> 总线上的某个设备并与其进行通讯；而 SPI 协议中没有设备地址，它使用 NSS 信号线来寻址，当主机要选择从设备时，把该从设备的 NSS 信号线设置为低电平，该从设备即被选中，即片选有效，接着主机开始与被选中的从设备进行 SPI通讯。所以 SPI通讯以 NSS 线置低电平为开始信号，以 NSS 线被拉高作为结束信号。<br> (2) SCK (Serial Clock)：时钟信号线，用于通讯数据同步。它由通讯主机产生，决定了通讯的速率，不同的设备支持的最高时钟频率不一样，如 STM32 的 SPI 时钟频率最大为fpclk/2，两个设备之间通讯时，通讯速率受限于低速设备。<br> (3) MOSI (Master Output， Slave Input)：主设备输出/从设备输入引脚。主机的数据从这条信号线输出，从机由这条信号线读入主机发送的数据，即这条线上数据的方向为主机到从机。<br> (4) MISO(Master Input,，Slave Output)：主设备输入/从设备输出引脚。主机从这条信号线读入数据，从机的数据由这条信号线输出到主机，即在这条线上数据的方向为从机到主机。</p> 
<h3><a id="3SPI_12"></a>3.SPI协议层</h3> 
<p>与 I2C 的类似，SPI 协议定义了通讯的起始和停止信号、数据有效性、时钟同步等环节。</p> 
<h3><a id="4SPI__14"></a>4.SPI 基本通讯过程</h3> 
<p>SPI 通讯的通讯时序如下图：<br> <img src="https://images2.imgbox.com/3c/08/OQ0BlVOr_o.png" alt=""><br> 这是一个主机的通讯时序。NSS、SCK、MOSI 信号都由主机控制产生，而 MISO 的信号由从机产生，主机通过该信号线读取从机的数据。MOSI 与 MISO 的信号只在 NSS 为低电平的时候才有效，在 SCK 的每个时钟周期 MOSI 和 MISO 传输一位数据。</p> 
<h3><a id="5_18"></a>5.通讯的起始和停止信号</h3> 
<p>在图 中的标号①处，NSS 信号线由高变低，是 SPI 通讯的起始信号。NSS 是每个从机各自独占的信号线，当从机在自己的 NSS 线检测到起始信号后，就知道自己被主机选中了，开始准备与主机通讯。在图中的标号⑥处，NSS 信号由低变高，是 SPI 通讯的停止信号，表示本次通讯结束，从机的选中状态被取消。</p> 
<h3><a id="6_20"></a>6.数据有效性</h3> 
<p>SPI 使用 MOSI 及 MISO 信号线来传输数据，使用 SCK 信号线进行数据同步。MOSI 及MISO 数据线在 SCK 的每个时钟周期传输一位数据，且数据输入输出是同时进行的。数据传输时，MSB 先行或 LSB 先行并没有作硬性规定，但要保证两个 SPI 通讯设备之间使用同样的协定，一般都会采用图 25-2 中的 MSB 先行模式。<br> 观察图中的②③④⑤标号处，MOSI 及 MISO 的数据在 SCK 的上升沿期间变化输出，在SCK 的下降沿时被采样。即在 SCK 的下降沿时刻，MOSI 及 MISO 的数据有效，高电平时表示数据“1”，为低电平时表示数据“0”。在其它时刻，数据无效，MOSI及 MISO 为下次表示数据做准备。<br> SPI 每次数据传输可以 8 位或 16 位为单位，每次传输的单位数不受限制。</p> 
<h2><a id="OLED_25"></a>二、OLED显示数据</h2> 
<h3><a id="1_OLED_26"></a>1. OLED相关资料</h3> 
<p>传送门：<a href="http://www.lcdwiki.com/zh/0.96inch_SPI_OLED_Module" rel="nofollow">http://www.lcdwiki.com/zh/0.96inch_SPI_OLED_Module</a></p> 
<h3><a id="2_Demo_28"></a>2. 下载厂家Demo程序</h3> 
<p>程序下载链接：<br> <a href="http://www.lcdwiki.com/res/Program/OLED/0.96inch/SPI_SSD1306_MSP096X_V1.0/0.96inch_SPI_OLED_Module_SSD1306_MSP096X_V1.0.zip" rel="nofollow">0.96寸SPI_OLED模块配套资料包</a><br> 打开资料包，选择与自己平台相同的实例，用keil打开Demo的工程</p> 
<h2><a id="_32"></a>三、显示自己的学号和姓名</h2> 
<h3><a id="1_33"></a>1.生成中文点阵及点阵编码</h3> 
<p><img src="https://images2.imgbox.com/63/c2/PAf2Xajh_o.png" alt=""><br> 点阵编码如下：</p> 
<pre><code class="prism language-c"><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x31</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x38</span><span class="token punctuation">,</span><span class="token number">0x92</span><span class="token punctuation">,</span>
<span class="token number">0x54</span><span class="token punctuation">,</span><span class="token number">0x92</span><span class="token punctuation">,</span><span class="token number">0x54</span><span class="token punctuation">,</span><span class="token number">0x92</span><span class="token punctuation">,</span><span class="token number">0x91</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x14</span><span class="token punctuation">,</span><span class="token number">0x42</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x94</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token comment">/*"杨",0*/</span>
<span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x21</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x85</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span><span class="token number">0x41</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x49</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span><span class="token number">0x09</span><span class="token punctuation">,</span><span class="token number">0x28</span><span class="token punctuation">,</span>
<span class="token number">0x17</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0xE2</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x28</span><span class="token punctuation">,</span><span class="token number">0x23</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x50</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token comment">/*"海",1*/</span>
<span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x17</span><span class="token punctuation">,</span><span class="token number">0xD0</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span><span class="token number">0x1C</span><span class="token punctuation">,</span><span class="token number">0x17</span><span class="token punctuation">,</span><span class="token number">0xD0</span><span class="token punctuation">,</span>
<span class="token number">0x14</span><span class="token punctuation">,</span><span class="token number">0x50</span><span class="token punctuation">,</span><span class="token number">0x34</span><span class="token punctuation">,</span><span class="token number">0x52</span><span class="token punctuation">,</span><span class="token number">0xD7</span><span class="token punctuation">,</span><span class="token number">0xD2</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x0E</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span><span class="token number">0x88</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token comment">/*"燕",2*/</span>
</code></pre> 
<h3><a id="2_45"></a>2.编写代码</h3> 
<p>（1）修改test.c中的显示函数</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">TEST_MainPage</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
	<span class="token function">GUI_ShowCHinese</span><span class="token punctuation">(</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token string">"姓名"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//中文姓名</span>
	<span class="token function">GUI_ShowString</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">,</span><span class="token string">"学号"</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//数字详细</span>
	<span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
	<span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/28/cc/WhsLQUET_o.png" alt=""><br> （2）修改main.c函数</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
	<span class="token function">delay_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	    	       <span class="token comment">//延时函数初始化	  </span>
	<span class="token function">NVIC_Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	   <span class="token comment">//设置NVIC中断分组2:2位抢占优先级，2位响应优先级 	</span>
	<span class="token function">OLED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			         <span class="token comment">//初始化OLED  </span>
	<span class="token function">OLED_Clear</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//清屏（全黑）</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x2E</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//关闭滚动</span>
  	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x27</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//水平向左或者右滚动 26/27</span>
  	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x00</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//虚拟字节</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x00</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//起始页 0</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x07</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//滚动时间间隔</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x07</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//终止页 7</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x00</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//虚拟字节</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0xFF</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//虚拟字节</span>
	<span class="token function">TEST_MainPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x2F</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//开启滚动</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
	<span class="token punctuation">{<!-- --></span>
		
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/54/bf/qOS7rwYe_o.png" alt=""><br> 若不需要实现滚动，则代码如下：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
	<span class="token function">delay_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	    	       <span class="token comment">//延时函数初始化	  </span>
	<span class="token function">OLED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			         <span class="token comment">//初始化OLED  </span>
	<span class="token function">OLED_Clear</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//清屏（全黑）</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
	<span class="token punctuation">{<!-- --></span>	
		<span class="token function">TEST_MainPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//界面显示</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3hex_98"></a>3.编译程序及生成hex文件</h3> 
<p>点击Rebuild编译程序，若没有错误即可成功创建hex文件<br> <img src="https://images2.imgbox.com/82/05/AymWzVX8_o.png" alt=""></p> 
<h3><a id="4_101"></a>4.电路连接</h3> 
<table><thead><tr><th>USB转TTL</th><th>STM32F103C8T6</th></tr></thead><tbody><tr><td>GND</td><td>GND</td></tr><tr><td>3v3</td><td>3v3</td></tr><tr><td>TXD</td><td>A10</td></tr><tr><td>RXD</td><td>A9</td></tr></tbody></table> 
<table><thead><tr><th>OLED</th><th>STM32F103C8</th></tr></thead><tbody><tr><td>VCC</td><td>3.3V/5V</td></tr><tr><td>GND</td><td>GND</td></tr><tr><td>D1</td><td>B15</td></tr><tr><td>CS</td><td>B11</td></tr><tr><td>RES</td><td>B12</td></tr><tr><td>DC</td><td>B10</td></tr><tr><td>D0</td><td>B13</td></tr></tbody></table> 
<h3><a id="5_118"></a>5.程序烧录</h3> 
<p>置BOOT0为0，BOOT1为1<br> （1）打开mcuisp，选择串口为COM5，并选择生成的hex文件<br> <img src="https://images2.imgbox.com/a9/ef/sUKyuHly_o.png" alt=""><br> （2）点击读器件信息，若显示一切正常则进行下一步<br> <img src="https://images2.imgbox.com/05/3f/eJTdkk37_o.png" alt=""><br> 3）点击开始编程，若显示一切正常则说明烧录成功<br> <img src="https://images2.imgbox.com/cf/24/h4tLjdQI_o.png" alt=""></p> 
<h3><a id="6_126"></a>6.运行结果</h3> 
<p><img src="https://images2.imgbox.com/b4/5f/f17B9KdC_o.gif" alt=""></p> 
<h2><a id="AHT20_129"></a>四、显示AHT20的温度和湿度</h2> 
<h3><a id="1_130"></a>1.生成中文点阵及点阵编码</h3> 
<p><img src="https://images2.imgbox.com/f4/bb/uWl891FE_o.png" alt=""><br> 点阵编码如下：</p> 
<pre><code class="prism language-c"><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x23</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x83</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span><span class="token number">0x42</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x42</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x13</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span>
<span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x27</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0xE4</span><span class="token punctuation">,</span><span class="token number">0xA4</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0xA4</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0xA4</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0xA4</span><span class="token punctuation">,</span><span class="token number">0x2F</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token comment">/*"温",0*/</span>
<span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span>
<span class="token number">0x23</span><span class="token punctuation">,</span><span class="token number">0xE0</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x2F</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x42</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x41</span><span class="token punctuation">,</span><span class="token number">0xC0</span><span class="token punctuation">,</span><span class="token number">0x86</span><span class="token punctuation">,</span><span class="token number">0x30</span><span class="token punctuation">,</span><span class="token number">0x38</span><span class="token punctuation">,</span><span class="token number">0x0E</span><span class="token punctuation">,</span><span class="token comment">/*"度",1*/</span>
<span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x27</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span><span class="token number">0x14</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x14</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x87</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x17</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span>
<span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x21</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0xE9</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x25</span><span class="token punctuation">,</span><span class="token number">0x28</span><span class="token punctuation">,</span><span class="token number">0x23</span><span class="token punctuation">,</span><span class="token number">0x30</span><span class="token punctuation">,</span><span class="token number">0x21</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x2F</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token comment">/*"湿",2*/</span>
<span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span>
<span class="token number">0x23</span><span class="token punctuation">,</span><span class="token number">0xE0</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x2F</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x42</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x41</span><span class="token punctuation">,</span><span class="token number">0xC0</span><span class="token punctuation">,</span><span class="token number">0x86</span><span class="token punctuation">,</span><span class="token number">0x30</span><span class="token punctuation">,</span><span class="token number">0x38</span><span class="token punctuation">,</span><span class="token number">0x0E</span><span class="token punctuation">,</span><span class="token comment">/*"度",3*/</span>
<span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span>
<span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x14</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span><span class="token number">0x14</span><span class="token punctuation">,</span><span class="token number">0x50</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token comment">/*"显",4*/</span>
<span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x21</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x41</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x81</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x05</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token comment">/*"示",5*/</span>
</code></pre> 
<h3><a id="2_148"></a>2.编写代码</h3> 
<p>温湿度的采集AHT20<br> 传送门：<a href="https://blog.csdn.net/qq_58879770/article/details/127622801?spm=1001.2014.3001.5502">https://blog.csdn.net/qq_58879770/article/details/127622801?spm=1001.2014.3001.5502</a><br> 在上述温湿度采集的基础上添加OLED显示的相关代码配置。<br> （1）在USER的目录下添加如下文件以及相关头文件：<br> <code>gui.c</code>，<code>test.c</code>，<code>oled.c</code>，<code>spi.c</code>，<code>oledfont.h</code><br> （2）修改main.c</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"delay.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"usart.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"bsp_i2c.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"sys.h"</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"oled.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"gui.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"test.h"</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
	<span class="token function">delay_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	    	       <span class="token comment">//延时函数初始化    	  </span>
	<span class="token function">uart_init</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	 
	<span class="token function">IIC_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		  
	<span class="token function">NVIC_Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	   <span class="token comment">//设置NVIC中断分组2:2位抢占优先级，2位响应优先级 	</span>
	<span class="token function">OLED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			         <span class="token comment">//初始化OLED  </span>
	<span class="token function">OLED_Clear</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//printf("温度湿度显示");</span>
		<span class="token function">read_AHT20_once</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">OLED_Clear</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>（2）修改bsp_i2c.c文件中的read_AHT20函数如下：</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">read_AHT20</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">uint8_t</span>   i<span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		readByte<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//-------------</span>
	<span class="token function">I2C_Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">I2C_WriteByte</span><span class="token punctuation">(</span><span class="token number">0x71</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ack_status <span class="token operator">=</span> <span class="token function">Receive_ACK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	readByte<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token function">I2C_ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Send_ACK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	readByte<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token function">I2C_ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Send_ACK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	readByte<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token function">I2C_ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Send_ACK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	readByte<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token function">I2C_ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Send_ACK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	readByte<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token function">I2C_ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Send_ACK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	readByte<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token function">I2C_ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SendNot_Ack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//Send_ACK();</span>

	<span class="token function">I2C_Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//--------------</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>readByte<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">0x68</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0x08</span> <span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		H1 <span class="token operator">=</span> readByte<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		H1 <span class="token operator">=</span> <span class="token punctuation">(</span>H1<span class="token operator">&lt;&lt;</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">|</span> readByte<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		H1 <span class="token operator">=</span> <span class="token punctuation">(</span>H1<span class="token operator">&lt;&lt;</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">|</span> readByte<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		H1 <span class="token operator">=</span> H1<span class="token operator">&gt;&gt;</span><span class="token number">4</span><span class="token punctuation">;</span>

		H1 <span class="token operator">=</span> <span class="token punctuation">(</span>H1<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1024</span><span class="token operator">/</span><span class="token number">1024</span><span class="token punctuation">;</span>

		T1 <span class="token operator">=</span> readByte<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		T1 <span class="token operator">=</span> T1 <span class="token operator">&amp;</span> <span class="token number">0x0000000F</span><span class="token punctuation">;</span>
		T1 <span class="token operator">=</span> <span class="token punctuation">(</span>T1<span class="token operator">&lt;&lt;</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">|</span> readByte<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		T1 <span class="token operator">=</span> <span class="token punctuation">(</span>T1<span class="token operator">&lt;&lt;</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">|</span> readByte<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		T1 <span class="token operator">=</span> <span class="token punctuation">(</span>T1<span class="token operator">*</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1024</span><span class="token operator">/</span><span class="token number">1024</span> <span class="token operator">-</span> <span class="token number">500</span><span class="token punctuation">;</span>

		AHT20_OutData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>H1<span class="token operator">&gt;&gt;</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0x000000FF</span><span class="token punctuation">;</span>
		AHT20_OutData<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> H1 <span class="token operator">&amp;</span> <span class="token number">0x000000FF</span><span class="token punctuation">;</span>

		AHT20_OutData<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>T1<span class="token operator">&gt;&gt;</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0x000000FF</span><span class="token punctuation">;</span>
		AHT20_OutData<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> T1 <span class="token operator">&amp;</span> <span class="token number">0x000000FF</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		AHT20_OutData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xFF</span><span class="token punctuation">;</span>
		AHT20_OutData<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xFF</span><span class="token punctuation">;</span>

		AHT20_OutData<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xFF</span><span class="token punctuation">;</span>
		AHT20_OutData<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xFF</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"lyy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"温度:%d%d.%d"</span><span class="token punctuation">,</span>T1<span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token punctuation">(</span>T1<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">,</span>T1<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"湿度:%d%d.%d"</span><span class="token punctuation">,</span>H1<span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token punctuation">(</span>H1<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">,</span>H1<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	t<span class="token operator">=</span>T1<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">;</span>
	t1<span class="token operator">=</span>T1<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">;</span>
	a<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span>t<span class="token operator">+</span>t1<span class="token operator">*</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	h<span class="token operator">=</span>H1<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">;</span>
	h1<span class="token operator">=</span>H1<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">;</span>
	b<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span>h<span class="token operator">+</span>h1<span class="token operator">*</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sprintf</span><span class="token punctuation">(</span>strTemp<span class="token punctuation">,</span><span class="token string">"%.1f"</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//调用Sprintf函数把DHT11的温度数据格式化到字符串数组变量strTemp中  </span>
  <span class="token function">sprintf</span><span class="token punctuation">(</span>strHumi<span class="token punctuation">,</span><span class="token string">"%.1f"</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//调用Sprintf函数把DHT11的湿度数据格式化到字符串数组变量strHumi中  </span>
	<span class="token comment">//printf(strTemp);</span>
	<span class="token comment">//printf("/r/n");</span>
	<span class="token function">GUI_ShowCHinese</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">00</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token string">"温湿度显示"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">GUI_ShowCHinese</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token string">"温度"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">GUI_ShowString</span><span class="token punctuation">(</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span>strTemp<span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">GUI_ShowCHinese</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token string">"湿度"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">GUI_ShowString</span><span class="token punctuation">(</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span>strHumi<span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
	<span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3hex_281"></a>3.编译程序及生成hex文件</h3> 
<p>点击Rebuild编译程序，若没有错误即可成功创建hex文件<br> <img src="https://images2.imgbox.com/62/ee/Z2aelzxT_o.png" alt=""></p> 
<h3><a id="4_284"></a>4.电路连接</h3> 
<table><thead><tr><th>USB转TTL</th><th>STM32F103C8T6</th></tr></thead><tbody><tr><td>GND</td><td>GND</td></tr><tr><td>3v3</td><td>3v3</td></tr><tr><td>TXD</td><td>A10</td></tr><tr><td>RXD</td><td>A9</td></tr></tbody></table> 
<p>AHT20传感器引脚示意图：<br> <img src="https://images2.imgbox.com/7d/79/SXvM0rJm_o.png" alt=""></p> 
<table><thead><tr><th>AHT20传感器</th><th>STM32F103C8T6</th></tr></thead><tbody><tr><td>VDD</td><td>5V</td></tr><tr><td>SDA</td><td>B7</td></tr><tr><td>GND</td><td>GND</td></tr><tr><td>SCL</td><td>B6</td></tr></tbody></table> 
<table><thead><tr><th>OLED</th><th>STM32F103C8</th></tr></thead><tbody><tr><td>VCC</td><td>3.3V/5V</td></tr><tr><td>GND</td><td>GND</td></tr><tr><td>D1</td><td>B15</td></tr><tr><td>CS</td><td>B11</td></tr><tr><td>RES</td><td>B12</td></tr><tr><td>DC</td><td>B10</td></tr><tr><td>D0</td><td>B13</td></tr></tbody></table> 
<h3><a id="5_311"></a>5.程序烧录</h3> 
<p>置BOOT0为0，BOOT1为1<br> （1）打开mcuisp，选择串口为COM5，并选择生成的hex文件<br> <img src="https://images2.imgbox.com/62/ec/8GVTRhxe_o.png" alt=""><br> （2）点击读器件信息，若显示一切正常则进行下一步<br> <img src="https://images2.imgbox.com/5b/c6/WXK878Mh_o.png" alt=""><br> （3）点击开始编程，若显示一切正常则说明烧录成功<br> <img src="https://images2.imgbox.com/ff/10/Ikj1Nbqe_o.png" alt=""></p> 
<h3><a id="6_319"></a>6.运行结果</h3> 
<p><img src="https://images2.imgbox.com/3b/b5/aqmwxzfe_o.gif" alt=""></p> 
<h2><a id="_322"></a>五、上下或左右的滑动显示长字符</h2> 
<h3><a id="1_323"></a>1.生成中文点阵及点阵编码</h3> 
<p><img src="https://images2.imgbox.com/d4/f1/3sSJPjpG_o.png" alt=""><br> 点阵编码如下：</p> 
<pre><code class="prism language-c"><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span>
<span class="token number">0x03</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x05</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x09</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x21</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0xC1</span><span class="token punctuation">,</span><span class="token number">0x06</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token comment">/*"未",0*/</span>
<span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span>
<span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x90</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x18</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x60</span><span class="token punctuation">,</span><span class="token number">0x7C</span><span class="token punctuation">,</span><span class="token comment">/*"觉",1*/</span>
<span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x58</span><span class="token punctuation">,</span><span class="token number">0x82</span><span class="token punctuation">,</span><span class="token number">0x68</span><span class="token punctuation">,</span><span class="token number">0x42</span><span class="token punctuation">,</span><span class="token number">0xC8</span><span class="token punctuation">,</span><span class="token number">0x53</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span><span class="token number">0x1E</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span>
<span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span><span class="token number">0xE2</span><span class="token punctuation">,</span><span class="token number">0x58</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x42</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x21</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token comment">/*"池",2*/</span>
<span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x27</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x25</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x27</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span>
<span class="token number">0x25</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x25</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x3D</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0xE5</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x49</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x09</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token comment">/*"塘",3*/</span>
<span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0xF8</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span>
<span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x2F</span><span class="token punctuation">,</span><span class="token number">0xE8</span><span class="token punctuation">,</span><span class="token number">0xC8</span><span class="token punctuation">,</span><span class="token number">0x26</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x0F</span><span class="token punctuation">,</span><span class="token number">0xE0</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x0F</span><span class="token punctuation">,</span><span class="token number">0xE0</span><span class="token punctuation">,</span><span class="token comment">/*"春",4*/</span>
<span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span>
<span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token comment">/*"草",5*/</span>
<span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x7E</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x1C</span><span class="token punctuation">,</span><span class="token number">0x70</span><span class="token punctuation">,</span><span class="token number">0x2A</span><span class="token punctuation">,</span><span class="token number">0xA8</span><span class="token punctuation">,</span><span class="token number">0xC8</span><span class="token punctuation">,</span><span class="token number">0x26</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token number">0x07</span><span class="token punctuation">,</span><span class="token number">0xF0</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x14</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x0C</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x70</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token comment">/*"梦",6*/</span>
</code></pre> 
<h3><a id="2_343"></a>2.编写代码</h3> 
<p>（1）修改test.c中的显示函数</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">TEST_MainPage</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
	<span class="token function">GUI_ShowCHinese</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token string">"未觉池塘春草梦"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//中文姓名</span>
	<span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
	<span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8d/05/oOQUBwnG_o.png" alt=""><br> （2）修改main.c函数</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
	<span class="token function">delay_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	    	       <span class="token comment">//延时函数初始化	  </span>
	<span class="token function">NVIC_Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	   <span class="token comment">//设置NVIC中断分组2:2位抢占优先级，2位响应优先级 	</span>
	<span class="token function">OLED_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			         <span class="token comment">//初始化OLED  </span>
	<span class="token function">OLED_Clear</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//清屏（全黑）</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x2E</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//关闭滚动</span>
  	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x27</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//水平向左或者右滚动 26/27</span>
  	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x00</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//虚拟字节</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x00</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//起始页 0</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x07</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//滚动时间间隔</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x07</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//终止页 7</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x00</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//虚拟字节</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0xFF</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//虚拟字节</span>
	<span class="token function">TEST_MainPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">OLED_WR_Byte</span><span class="token punctuation">(</span><span class="token number">0x2F</span><span class="token punctuation">,</span>OLED_CMD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//开启滚动</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
	<span class="token punctuation">{<!-- --></span>
		
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7e/28/uqyY5UFX_o.png" alt=""></p> 
<h3><a id="3hex_381"></a>3.编译及生成hex文件</h3> 
<p>点击Rebuild编译程序，若没有错误即可成功创建hex文件<br> <img src="https://images2.imgbox.com/fe/b4/c3CgNqUN_o.png" alt=""></p> 
<h3><a id="4_384"></a>4.电路连接</h3> 
<table><thead><tr><th>USB转TTL</th><th>STM32F103C8T6</th></tr></thead><tbody><tr><td>GND</td><td>GND</td></tr><tr><td>3v3</td><td>3v3</td></tr><tr><td>TXD</td><td>A10</td></tr><tr><td>RXD</td><td>A9</td></tr></tbody></table> 
<table><thead><tr><th>AHT20传感器</th><th>STM32F103C8T6</th></tr></thead><tbody><tr><td>VDD</td><td>5V</td></tr><tr><td>SDA</td><td>B7</td></tr><tr><td>GND</td><td>GND</td></tr><tr><td>SCL</td><td>B6</td></tr></tbody></table> 
<table><thead><tr><th>OLED</th><th>STM32F103C8</th></tr></thead><tbody><tr><td>VCC</td><td>3.3V/5V</td></tr><tr><td>GND</td><td>GND</td></tr><tr><td>D1</td><td>B15</td></tr><tr><td>CS</td><td>B11</td></tr><tr><td>RES</td><td>B12</td></tr><tr><td>DC</td><td>B10</td></tr><tr><td>D0</td><td>B13</td></tr></tbody></table> 
<h3><a id="5_408"></a>5.程序烧录</h3> 
<p>置BOOT0为0，BOOT1为1<br> （1）打开mcuisp，选择串口为COM5，并选择生成的hex文件<br> <img src="https://images2.imgbox.com/fb/7b/MkyxcVIZ_o.png" alt=""><br> （2）点击读器件信息，若显示一切正常则进行下一步<br> <img src="https://images2.imgbox.com/21/87/XlQlSoxB_o.png" alt=""><br> （3）点击开始编程，若显示一切正常则说明烧录成功<br> <img src="https://images2.imgbox.com/6b/95/83eWDAw0_o.png" alt=""></p> 
<h3><a id="6_416"></a>6.运行结果</h3> 
<p><img src="https://images2.imgbox.com/52/61/Bb3KjLE8_o.gif" alt=""></p> 
<h2><a id="_419"></a>六、总结</h2> 
<p>这次实验是在温湿度能够成功采集的基础上，为STM32配置相关引脚，将温湿度传感器的数据通过处理传输到OLED上，根据相关文字显示的要求，如中文要利用汉字点库转换才能在OLED上显示。在实验过程中，还是会遇到一些问题，比如程序编写错误、接线错误等，所以做实验最重要的还是细心。</p> 
<h2><a id="_422"></a>七、参考链接</h2> 
<p><a href="https://blog.csdn.net/qq_45659777/article/details/121411094?spm=1001.2014.3001.5502">https://blog.csdn.net/qq_45659777/article/details/121411094?spm=1001.2014.3001.5502</a><br> <a href="https://blog.csdn.net/qq_45659777/article/details/121456548?spm=1001.2014.3001.5502#_199">https://blog.csdn.net/qq_45659777/article/details/121456548?spm=1001.2014.3001.5502#_199</a><br> <a href="https://blog.csdn.net/qq_45659777/article/details/121454312?spm=1001.2014.3001.5502">https://blog.csdn.net/qq_45659777/article/details/121454312?spm=1001.2014.3001.5502</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/54284390ecd5fce65a569442356fd17d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在springboot中使用mybatis-plus的分页功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3c5f63a841f88082d8a32a98dae47116/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">stm32f103最小系统板详细介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>