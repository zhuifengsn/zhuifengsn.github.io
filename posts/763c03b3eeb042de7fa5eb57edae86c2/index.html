<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux 查看vnc服务器,windows下通过vnc访问liunx服务器 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux 查看vnc服务器,windows下通过vnc访问liunx服务器" />
<meta property="og:description" content="安装步骤
一、 windows下安装vnc-viewer
下载vnc-viewer的安装包,[安装包链接]http://www.realvnc.com/download/viewer/ ，并安装
二、 Linux下安装vnc-server1、查看linux下是否安装vnc-server
yum search vnc-server(见图1)
rpm -qa|grep vnc (见图2)
图1
图2
2、 配置Linux图形参数
运行了vncserver后，会在当前用户目录下生成.vnc目录，当前用户是root，则会有/root/.vnc/目录，运行结果如下所示
在.vnc目录修改Xstartup文件，更改图形显示参数
修改后xstartup文件内容如下
具体代码如下
!/bin/sh
Uncomment the following two lines for normal desktop: unset SESSION_MANAGER
exec /etc/X11/xinit/xinitrc
[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup
[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources
xsetroot -solid grey #vncconfig -iconic &amp;
xterm -geometry 80x24&#43;10&#43;10 -ls -title &#34;$VNCDESKTOP Desktop&#34; &amp;
twm &amp;
gnome-session &amp;
注释 ： gnome-session表示通过vnc访问Linux服务器创建桌面" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/763c03b3eeb042de7fa5eb57edae86c2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-05T14:45:38+08:00" />
<meta property="article:modified_time" content="2021-05-05T14:45:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux 查看vnc服务器,windows下通过vnc访问liunx服务器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>安装步骤</p> 
 <p>一、 windows下安装vnc-viewer</p> 
 <p>下载vnc-viewer的安装包,[安装包链接]http://www.realvnc.com/download/viewer/ ，并安装</p> 
 <p>二、 Linux下安装vnc-server1、查看linux下是否安装vnc-server</p> 
 <p>yum search vnc-server(见图1)</p> 
 <p>rpm -qa|grep vnc (见图2)</p> 
 <p>图1</p> 
 <p align="center"><img src="https://images2.imgbox.com/c9/2a/FVsp7PVP_o.png" alt="d216d69a3001a5182266804b89250d4f.png"></p> 
 <p>图2</p> 
 <p align="center"><img src="https://images2.imgbox.com/2c/cc/bXqAUexM_o.png" alt="a50e2c53dd0050289e2ff31c8216a261.png"></p> 
 <p>2、 配置Linux图形参数</p> 
 <p>运行了vncserver后，会在当前用户目录下生成.vnc目录，当前用户是root，则会有/root/.vnc/目录，运行结果如下所示</p> 
 <p align="center"><img src="https://images2.imgbox.com/d8/df/M41vlGlj_o.png" alt="d1b19f56f6852be2182de7fd613783d3.png"></p> 
 <p>在.vnc目录修改Xstartup文件，更改图形显示参数</p> 
 <p align="center"><img src="https://images2.imgbox.com/9f/64/3cvITlmJ_o.png" alt="61b6223992acf8874654634dc41d92f0.png"></p> 
 <p>修改后xstartup文件内容如下</p> 
 <p align="center"><img src="https://images2.imgbox.com/a9/a1/UoXI5I3q_o.png" alt="6fc2fff5980ef2eddacc0be13ccb79b2.png"></p> 
 <p>具体代码如下</p> 
 <p>!/bin/sh</p> 
 <p>Uncomment the following two lines for normal desktop: unset SESSION_MANAGER</p> 
 <p>exec /etc/X11/xinit/xinitrc</p> 
 <p>[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup</p> 
 <p>[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources</p> 
 <p>xsetroot -solid grey #vncconfig -iconic &amp;</p> 
 <p>xterm -geometry 80x24+10+10 -ls -title "$VNCDESKTOP Desktop" &amp;</p> 
 <p>twm &amp;</p> 
 <p>gnome-session &amp;</p> 
 <p>注释 ： gnome-session表示通过vnc访问Linux服务器创建桌面</p> 
 <p>经过以上配置，就可以通过VNC客户端软件远程管理Linux服务器了,如果是Windows系统登陆Linux系统，那么需要加上IP地址的端口号(监听地址)。</p> 
 <p>3、设置远程登陆到gnome桌面的配置</p> 
 <p align="center"><img src="https://images2.imgbox.com/7a/1f/nQmY05vP_o.png" alt="08b5217cdb8b544b5eb091c1beccf384.png"></p> 
 <p>vim /etc/sysconfig/vncservers</p> 
 <p>修改最后一行</p> 
 <p>VNCSERVERS="1:root"</p> 
 <p>行为服务配置，当前只配置了一个VNC服务，使用用户root启动</p> 
 <p>4、 查看已经打开的服务</p> 
 <p>shellvnc-server -list</p> 
 <p>关闭服务</p> 
 <p>shellvncserver -kill :1</p> 
 <p>注释：1表示用户root</p> 
 <p>5、 添加防火墙配置</p> 
 <p>vi /etc/sysconfig/iptables</p> 
 <p>注释：可以复制22端口一行，黏贴修改即可，重新启动防火墙服务</p> 
 <p>-A INPUT -m state --state NEW -m tcp -p tcp --dport 5900:5903 -j ACCEPT</p> 
 <p>5900端口是远程控制软件VNC的默认服务端口</p> 
 <p align="center"><img src="https://images2.imgbox.com/b4/f4/ze42mJSr_o.png" alt="b341d164a0e509c2779a5fdb19f2196e.png"></p> 
 <p>6、 设置登录密码</p> 
 <p>shellvncpasswd</p> 
 <p>7、 查看端口状态</p> 
 <p>shell查看端口状态：netstat -lnt | grep 590*</p> 
 <p align="center"><img src="https://images2.imgbox.com/15/04/lg362vkb_o.png" alt="5aae3e8aa60bfeddd9d15ee63a983c2d.png"></p> 
 <p>三、由windows客户端登陆服务器附录图</p> 
 <p>通过Realvnc访问服务器(操作系统是centos7)</p> 
 <p>在windows下打开vnc viewer,登录服务器</p> 
 <p align="center"><img src="https://images2.imgbox.com/7e/09/qobJCBj1_o.png" alt="9645a28a44acf7c204630cba58fbcb3e.png"></p> 
 <p>点击Connect,输入密码</p> 
 <p align="center"><img src="https://images2.imgbox.com/34/ee/lHZS9Ic7_o.png" alt="b387327354ad3e4272ddac4c3ba6b532.png"></p> 
 <p>按Enter键就可以进入centos7了</p> 
 <p align="center"><img src="https://images2.imgbox.com/82/d6/H2yxgiUq_o.png" alt="7f2b43bcda48acac27daa8f976be2ed3.png"></p> 
 <p>进入后，会发现，点击鼠标任何键都没有，root被锁住了</p> 
 <p>在centos7桌面的下方会有Unencrypted connection表示root是加密的，此时按下Enter键，会进入另外一个界面，如下</p> 
 <p align="center"><img src="https://images2.imgbox.com/73/39/Lk2JqaY1_o.png" alt="d1f1f0ac2502b0d49c8565a74c875f3e.png"></p> 
 <p>输入密码进行解锁就可以了，操作到这，基本上算是结束了</p> 
 <p align="center"><img src="https://images2.imgbox.com/90/fc/6IrT782u_o.png" alt="d1b52c9b6193b7330a7ec76f873ea623.png"></p> 
 <p>另外，centos7设置的有屏保，如果隔几分钟不操作，还会出现下面的界面</p> 
 <p align="center"><img src="https://images2.imgbox.com/43/ec/OGlCkVvL_o.png" alt="7f2b43bcda48acac27daa8f976be2ed3.png"></p> 
 <p>仍按照上面的操作就可以重新进入系统。</p> 
 <p>到此，就大功告成了！！！</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2b5f2c7797c745ffa37a599bfdd48bdc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Clock简单算法自我理解总结，超详细</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/475d208db58c71459fee60951a16d43d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">架构师成长记_第八周_11_ES- ik中文分词器与自定义中文词库</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>