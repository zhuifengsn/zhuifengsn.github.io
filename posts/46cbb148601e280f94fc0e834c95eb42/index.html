<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux：Centos8 环境搭建指南 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux：Centos8 环境搭建指南" />
<meta property="og:description" content="目录： 导入yum 换源JDK1.8（Oracle）MySQL 8.x卸载安装与万能重置密码远程连接 导入 最近总爱整些 花里胡哨 的东西，导致我的 Linux 系统有很多莫名其妙的东西，所以经常回去重新安装，说到这儿，那么问题就来了，对于不爱用 快照 的我来说，每次都要配置环境，一点儿不对，就又会有什么奇奇怪怪的错，所以现在将我在使用过程中，对于 Linux 环境配置的一些记录。
环境：
Centos 8VMware Workstation Pro 16.xXshell 7Xftp 7 yum 换源 使用命令进入：
cd /etc/yum.repos.d 为了以后有需要，会恢复原有的文件，所以将 Centos8 自带的文件先保存起来：
新建一个文件夹用来保存：
mkdir yum.repos.old 将所有文件都移动到该文件夹下：
mv *.repo yum.repos.old/ 接着，使用 wget 下载新的源：
wget http://mirrors.aliyun.com/repo/Centos-8.repo(已停止使用) wget http://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo (最新) 若需要自行选择版本，可打开http://mirrors.aliyun.com/repo进行选择
接着清除以前的 yum 缓存：
yum clean all 最后创建新的缓存：
# 创建缓存 yum makecache # 更新 yum update JDK1.8（Oracle） 首先要去 Oracle 的官网上去下载 Linux 版的 JDK:
下载页面：https://www.oracle.com/cn/java/technologies/javase/javase-jdk8-downloads.html" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/46cbb148601e280f94fc0e834c95eb42/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-27T14:25:06+08:00" />
<meta property="article:modified_time" content="2022-03-27T14:25:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux：Centos8 环境搭建指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/e0/62/CnPAm9LS_o.jpg" alt="在这里插入图片描述"><br> </p> 
<div class="toc"> 
 <h4>目录：</h4> 
 <ul><li><a href="#_3" rel="nofollow">导入</a></li><li><a href="#yum__11" rel="nofollow">yum 换源</a></li><li><a href="#JDK18Oracle_54" rel="nofollow">JDK1.8（Oracle）</a></li><li><a href="#MySQL_8x_109" rel="nofollow">MySQL 8.x</a></li><li><ul><li><a href="#_112" rel="nofollow">卸载</a></li><li><a href="#_161" rel="nofollow">安装与万能重置密码</a></li><li><a href="#_354" rel="nofollow">远程连接</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_3"></a>导入</h2> 
<p>最近总爱整些 <strong>花里胡哨</strong> 的东西，导致我的 <strong>Linux</strong> 系统有很多莫名其妙的东西，所以经常回去重新安装，说到这儿，那么问题就来了，对于不爱用 <strong>快照</strong> 的我来说，每次都要配置环境，一点儿不对，就又会有什么奇奇怪怪的错，所以现在将我在使用过程中，对于 <strong>Linux</strong> 环境配置的一些记录。</p> 
<blockquote> 
 <p><strong>环境：</strong></p> 
 <ul><li>Centos 8</li><li>VMware Workstation Pro 16.x</li><li>Xshell 7</li><li>Xftp 7</li></ul> 
</blockquote> 
<hr> 
<h2><a id="yum__11"></a>yum 换源</h2> 
<p>使用命令进入：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /etc/yum.repos.d
</code></pre> 
<p>为了以后有需要，会恢复原有的文件，所以将 <strong>Centos8</strong> 自带的文件先保存起来：</p> 
<p>新建一个文件夹用来保存：</p> 
<pre><code class="prism language-bash"><span class="token function">mkdir</span> yum.repos.old
</code></pre> 
<p>将所有文件都移动到该文件夹下：</p> 
<pre><code class="prism language-bash"><span class="token function">mv</span> *.repo yum.repos.old/
</code></pre> 
<p><img src="https://images2.imgbox.com/ea/36/4X2zPTvS_o.png" alt="在这里插入图片描述"><br> 接着，使用 <strong>wget</strong> 下载新的源：</p> 
<pre><code class="prism language-bash"><span class="token function">wget</span> http://mirrors.aliyun.com/repo/Centos-8.repo<span class="token punctuation">(</span>已停止使用<span class="token punctuation">)</span>
<span class="token function">wget</span> http://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo <span class="token punctuation">(</span>最新<span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>若需要自行选择版本，可打开<a href="http://mirrors.aliyun.com/repo" rel="nofollow">http://mirrors.aliyun.com/repo</a>进行选择</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/86/b4/QkkwTMih_o.png" alt="在这里插入图片描述"><br> 接着清除以前的 <strong>yum</strong> 缓存：</p> 
<pre><code class="prism language-bash">yum clean all
</code></pre> 
<p><img src="https://images2.imgbox.com/62/67/kTzEirxH_o.png" alt="在这里插入图片描述"><br> 最后创建新的缓存：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 创建缓存</span>
yum makecache
<span class="token comment"># 更新</span>
yum update
</code></pre> 
<p><img src="https://images2.imgbox.com/8d/53/QIdlQAJe_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="JDK18Oracle_54"></a>JDK1.8（Oracle）</h2> 
<p>首先要去 <strong>Oracle</strong> 的官网上去下载 <strong>Linux</strong> 版的 JDK:</p> 
<blockquote> 
 <p>下载页面：<a href="https://www.oracle.com/cn/java/technologies/javase/javase-jdk8-downloads.html" rel="nofollow">https://www.oracle.com/cn/java/technologies/javase/javase-jdk8-downloads.html</a><br> <img src="https://images2.imgbox.com/b2/d8/CC6bh43e_o.png" alt="在这里插入图片描述"><br> 选择一个合适的版本来下载。<br> 在 <strong>Linux</strong> 的环境中，创建一个用于安装的文件夹：</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /home/admin
<span class="token function">mkdir</span> Install
</code></pre> 
<p><img src="https://images2.imgbox.com/0c/ae/yZ2neiA4_o.png" alt="在这里插入图片描述"><br> 使用 <strong>Xftp</strong> 将下载好的压缩包上传至新建的文件夹：<br> <img src="https://images2.imgbox.com/00/ef/OiyjPE5a_o.png" alt="在这里插入图片描述"><br> 接着，在该文件夹下解压文件：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> Install
<span class="token comment"># 解压文件</span>
<span class="token function">tar</span> -zxvf jdk-8u291-linux-x64.tar.gz
</code></pre> 
<p>待解压完成，使用命令，删除原来的压缩包。</p> 
<pre><code class="prism language-bash"><span class="token function">rm</span> -rf jdk-8u291-linux-x64.tar.gz
</code></pre> 
<p><img src="https://images2.imgbox.com/d3/52/9vhEDq9o_o.png" alt="在这里插入图片描述"><br> 接着，就可以配置环境变量了：</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> /etc/profile
</code></pre> 
<p>在文件最后添加上以下内容：</p> 
<pre><code>JAVA_HOME=/home/admin/Install/jdk1.8.0_291
PATH=$PATH:$JAVA_HOME/bin
CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export JAVA_HOME PATH CLASSPATH
</code></pre> 
<p><img src="https://images2.imgbox.com/56/0b/UBgEo8W9_o.png" alt="在这里插入图片描述"><br> 运行命令让配置生效:</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<p><img src="https://images2.imgbox.com/db/fb/NVWmuhHG_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="MySQL_8x_109"></a>MySQL 8.x</h2> 
<p>在安装 <strong>MySQL</strong> 之前，需要更换 <strong>yum</strong> 源，接着使用 <strong>yum</strong> 来安装 <strong>MySQL</strong>。</p> 
<h3><a id="_112"></a>卸载</h3> 
<p>首先，确认当前是否有其他的 <strong>MySQL</strong> 的版本：</p> 
<pre><code class="prism language-bash"><span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre> 
<p><img src="https://images2.imgbox.com/f8/10/0oOFSskI_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>如果这里显示什么都没有则直接可以直接进行安装。</p> 
</blockquote> 
<p>如果有已经安装了某个版本，则需要通过命令来卸载：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 普通删除模式</span>
<span class="token function">rpm</span> -e mysql　　
<span class="token comment"># 强力删除模式，如果使用上面命令删除时，提示有依赖的其它文件，则用该命令可以对其进行强力删除</span>
<span class="token function">rpm</span> -e --nodeps mysql　　
</code></pre> 
<p><img src="https://images2.imgbox.com/20/19/RTymTYH1_o.png" alt="在这里插入图片描述"></p> 
<p><strong>但是，</strong> 当你再次运行的时候你会发现，还是会有一些残留:<br> <img src="https://images2.imgbox.com/7a/c3/AQ3BaV8R_o.png" alt="在这里插入图片描述"></p> 
<p>那么就需要使用 <strong>yum</strong> 来卸载：</p> 
<pre><code class="prism language-bash">yum remove <span class="token operator">&lt;</span>包名<span class="token operator">&gt;</span>
</code></pre> 
<blockquote> 
 <p>将所有包依次删除。</p> 
</blockquote> 
<p>或则直接一次性全删除：</p> 
<pre><code class="prism language-bash">yum remove mysql*
</code></pre> 
<p><img src="https://images2.imgbox.com/9a/1a/Pk8M9CLA_o.png" alt="在这里插入图片描述" width="600"></p> 
<p>依次将所有的 <strong>MySQL</strong> 依赖都卸载完后再次查看：<br> <img src="https://images2.imgbox.com/5d/f3/1rpmFYA8_o.png" alt="在这里插入图片描述"><br> <strong>什么也没有，就说明已经卸载完成了。</strong><br> 为了保证这之后安装 <strong>MySQL</strong> 的干净环境，还可以选择删除所有的 <strong>MySQL</strong> 文件夹：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 查找文件夹</span>
<span class="token function">find</span> / -name mysql
<span class="token comment"># 查找并删除文件及文件夹</span>
<span class="token function">find</span> / -name mysql <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf
</code></pre> 
<p><img src="https://images2.imgbox.com/d0/15/EegCMHup_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="_161"></a>安装与万能重置密码</h3> 
<p>卸载干净之后，接下来就可以开始安装了，打开以下的地址，获取 <strong>yum</strong> 下载地址：</p> 
<blockquote> 
 <p>下载地址：<strong><a href="https://dev.mysql.com/downloads/repo/yum/" rel="nofollow">https://dev.mysql.com/downloads/repo/yum/</a></strong></p> 
</blockquote> 
<p>获取到对应的具体信息:<br> <img src="https://images2.imgbox.com/56/b9/A3QfKqzX_o.png" alt="在这里插入图片描述"><br> 在 <strong>MySQL</strong> 的安装位置，进行下载：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 在详细信息的链接前加上 http://repo.mysql.com/ </span>
<span class="token function">wget</span> http://repo.mysql.com/mysql80-community-release-el8-1.noarch.rpm
</code></pre> 
<p><img src="https://images2.imgbox.com/50/19/RLS8eeKy_o.png" alt="在这里插入图片描述"><br> 接着使用 <strong>rpm</strong> 包管理安装：（当前目录）</p> 
<pre><code class="prism language-bash"><span class="token function">rpm</span> -ivh mysql80-community-release-el8-1.noarch.rpm
</code></pre> 
<p><img src="https://images2.imgbox.com/f2/fe/206iEYj4_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>查询 <strong>MySQL</strong> 相关：</p> 
 <pre><code class="prism language-bash"><span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre> 
 <p><img src="https://images2.imgbox.com/f0/3c/620LRmh5_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>安装完成后就可以将之前下载的文件删除了：</p> 
 <pre><code class="prism language-bash"><span class="token function">rm</span> -rf mysql80-community-release-el8-1.noarch.rpm
</code></pre> 
</blockquote> 
<p>接着更新 <strong>yum</strong> 源：<br> <img src="https://images2.imgbox.com/ad/49/EphUeGLo_o.png" alt="在这里插入图片描述"><br> 最后就可以开始安装 <strong>MySQL</strong> 了：</p> 
<pre><code class="prism language-bash">yum <span class="token function">install</span> mysql-server
</code></pre> 
<p><img src="https://images2.imgbox.com/94/57/lgEDzyZy_o.png" alt="在这里插入图片描述"><br> 输入 <strong>y</strong> 后开始安装：</p> 
<pre><code class="prism language-bash">Is this ok <span class="token punctuation">[</span>y/N<span class="token punctuation">]</span>: y
Downloading Packages:
<span class="token punctuation">(</span><span class="token number">1</span>/7<span class="token punctuation">)</span>: mariadb-connector-c-config-3.1.11-2.el8_3.noarch.  <span class="token number">22</span> kB/s <span class="token operator">|</span>  <span class="token number">15</span> kB     00:00    
<span class="token punctuation">(</span><span class="token number">2</span>/7<span class="token punctuation">)</span>: mecab-0.996-1.module_el8.2.0+493+63b41e36.9.x86_6 <span class="token number">387</span> kB/s <span class="token operator">|</span> <span class="token number">393</span> kB     00:01    
<span class="token punctuation">(</span><span class="token number">3</span>/7<span class="token punctuation">)</span>: mysql-common-8.0.21-1.module_el8.2.0+493+63b41e36 <span class="token number">279</span> kB/s <span class="token operator">|</span> <span class="token number">148</span> kB     00:00    
<span class="token punctuation">(</span><span class="token number">4</span>/7<span class="token punctuation">)</span>: mysql-errmsg-8.0.21-1.module_el8.2.0+493+63b41e36 <span class="token number">549</span> kB/s <span class="token operator">|</span> <span class="token number">581</span> kB     00:01    
<span class="token punctuation">(</span><span class="token number">5</span>/7<span class="token punctuation">)</span>: protobuf-lite-3.5.0-13.el8.x86_64.rpm             <span class="token number">273</span> kB/s <span class="token operator">|</span> <span class="token number">149</span> kB     00:00    
<span class="token punctuation">(</span><span class="token number">6</span>/7<span class="token punctuation">)</span>: mysql-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64 <span class="token number">1.5</span> MB/s <span class="token operator">|</span>  <span class="token number">12</span> MB     00:07    
<span class="token punctuation">(</span><span class="token number">7</span>/7<span class="token punctuation">)</span>: mysql-server-8.0.21-1.module_el8.2.0+493+63b41e36 <span class="token number">3.2</span> MB/s <span class="token operator">|</span>  <span class="token number">22</span> MB     00:06    
-----------------------------------------------------------------------------------------
Total                                                    <span class="token number">4.4</span> MB/s <span class="token operator">|</span>  <span class="token number">35</span> MB     00:08     
Running transaction check
Transaction check succeeded.
Running transaction <span class="token builtin class-name">test</span>
Transaction <span class="token builtin class-name">test</span> succeeded.
Running transaction
  Preparing        <span class="token builtin class-name">:</span>                                                                 <span class="token number">1</span>/1 
  Installing       <span class="token builtin class-name">:</span> mariadb-connector-c-config-3.1.11-2.el8_3.noarch                <span class="token number">1</span>/7 
  Installing       <span class="token builtin class-name">:</span> mysql-common-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64        <span class="token number">2</span>/7 
  Installing       <span class="token builtin class-name">:</span> mysql-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64               <span class="token number">3</span>/7 
  Installing       <span class="token builtin class-name">:</span> mysql-errmsg-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64        <span class="token number">4</span>/7 
  Installing       <span class="token builtin class-name">:</span> protobuf-lite-3.5.0-13.el8.x86_64                               <span class="token number">5</span>/7 
  Installing       <span class="token builtin class-name">:</span> mecab-0.996-1.module_el8.2.0+493+63b41e36.9.x86_64              <span class="token number">6</span>/7 
  Running scriptlet: mecab-0.996-1.module_el8.2.0+493+63b41e36.9.x86_64              <span class="token number">6</span>/7 
  Running scriptlet: mysql-server-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64        <span class="token number">7</span>/7 
  Installing       <span class="token builtin class-name">:</span> mysql-server-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64        <span class="token number">7</span>/7 
  Running scriptlet: mysql-server-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64        <span class="token number">7</span>/7 
ValueError: File context <span class="token keyword">for</span> /var/log/mysql<span class="token punctuation">(</span>/.*<span class="token punctuation">)</span>? already defined

  Verifying        <span class="token builtin class-name">:</span> mariadb-connector-c-config-3.1.11-2.el8_3.noarch                <span class="token number">1</span>/7 
  Verifying        <span class="token builtin class-name">:</span> mecab-0.996-1.module_el8.2.0+493+63b41e36.9.x86_64              <span class="token number">2</span>/7 
  Verifying        <span class="token builtin class-name">:</span> mysql-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64               <span class="token number">3</span>/7 
  Verifying        <span class="token builtin class-name">:</span> mysql-common-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64        <span class="token number">4</span>/7 
  Verifying        <span class="token builtin class-name">:</span> mysql-errmsg-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64        <span class="token number">5</span>/7 
  Verifying        <span class="token builtin class-name">:</span> mysql-server-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64        <span class="token number">6</span>/7 
  Verifying        <span class="token builtin class-name">:</span> protobuf-lite-3.5.0-13.el8.x86_64                               <span class="token number">7</span>/7 
Installed products updated.

Installed:
  mariadb-connector-c-config-3.1.11-2.el8_3.noarch                                       
  mecab-0.996-1.module_el8.2.0+493+63b41e36.9.x86_64                                     
  mysql-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64                                      
  mysql-common-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64                               
  mysql-errmsg-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64                               
  mysql-server-8.0.21-1.module_el8.2.0+493+63b41e36.x86_64                               
  protobuf-lite-3.5.0-13.el8.x86_64                                                      

Complete<span class="token operator">!</span>
</code></pre> 
<p>再次查询是否安装了 <strong>MySQL</strong> :</p> 
<pre><code class="prism language-bash"><span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre> 
<p><img src="https://images2.imgbox.com/fe/73/kDwAmtKR_o.png" alt="在这里插入图片描述"><br> 设置权限：</p> 
<pre><code class="prism language-bash"><span class="token function">chown</span> mysql:mysql -R /var/lib/mysql
</code></pre> 
<p><img src="https://images2.imgbox.com/51/7a/fyD8vbNS_o.png" alt="在这里插入图片描述"></p> 
<p>接着启动 <strong>MySQL</strong> 并查看状态：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 启动服务</span>
systemctl start mysqld
<span class="token comment"># 查看状态</span>
systemctl status mysqld
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/49/HK7HqxwV_o.png" alt="在这里插入图片描述"><br> 接着按 <strong>q</strong> 退出后打开 <strong>MySQL</strong> :</p> 
<p><img src="https://images2.imgbox.com/8b/90/63bIspSp_o.png" alt="在这里插入图片描述"><br> 当前是没有密码的，无论是那种方式都提示以下内容的话，我们还需要进行其他的操作，<br> <code>ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)</code></p> 
<p>首先，停止 <strong>MySQL</strong> 的服务：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 停止 MySQL 服务</span>
systemctl stop mysqld
<span class="token comment"># 查看状态</span>
systemctl status mysqld
</code></pre> 
<p><img src="https://images2.imgbox.com/10/1e/MUXFlm1Q_o.png" alt="在这里插入图片描述"><br> 接着使用 <strong>Linux</strong> 自带的文本编辑器修改配置文件：</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> /etc/my.cnf
</code></pre> 
<p><img src="https://images2.imgbox.com/87/a1/ubEO4ffm_o.png" alt="在这里插入图片描述"><br> 弹出以上信息后，按下 <strong>回车</strong> 继续， 接着按下 <strong>a</strong> 或 <strong>i</strong> 进入编辑模式：<br> 在 <code>[mysqld]</code> 下加上一句：<code>skip-grant-tables</code>，如果没有 <code>[mysqld]</code> 标签，则手动加入：<br> <img src="https://images2.imgbox.com/6a/d0/xoHIkQRz_o.png" alt="在这里插入图片描述"><br> 按下 <strong>Esc</strong> ，输入 <code>:wq</code> 后回车保存：<br> <img src="https://images2.imgbox.com/73/b3/K0pfWMTV_o.png" alt="在这里插入图片描述"><br> 接着再次启动 <strong>MySQL</strong> 服务：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 启动服务</span>
systemctl start mysqld
<span class="token comment"># 查看状态</span>
systemctl status mysqld
</code></pre> 
<p><img src="https://images2.imgbox.com/af/18/gvLYC9Hr_o.png" alt="在这里插入图片描述"><br> 按下 <strong>q</strong> 退出当前状态后，输入<code>mysql</code> 直接登录：</p> 
<pre><code class="prism language-bash">mysql
</code></pre> 
<p><img src="https://images2.imgbox.com/8e/14/lGxVtT7D_o.png" alt="在这里插入图片描述"><br> 再接着将密码置为空：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 切换数据库</span>
use mysql<span class="token punctuation">;</span>
<span class="token comment"># 将密码置空</span>
update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">authentication_string</span><span class="token operator">=</span><span class="token string">''</span> where <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/45/d5/ZtE6fw1n_o.png" alt="在这里插入图片描述"><br> 之后使用 <code>exit</code>退出 <strong>MySQL</strong> ，再再接着就是把之前的配置文件所加的内容删除或注释掉：</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> /etc/my.cnf
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/3d/5kk8HyKv_o.png" alt="在这里插入图片描述"><br> 同样的按下 <strong>Esc</strong> ，输入 <code>:wq</code> 后回车保存。<br> 再次使用命令重新启动 <strong>MySQL</strong>：</p> 
<pre><code class="prism language-bash">systemctl restart mysqld
</code></pre> 
<p><img src="https://images2.imgbox.com/e6/16/d4V5I2dt_o.png" alt="在这里插入图片描述"><br> 按下 <strong>q</strong> 退出当前状态后，再次登录 <strong>MySQL</strong> ：</p> 
<blockquote> 
 <p>此时没有密码，在提示输入密码时直接回车</p> 
</blockquote> 
<pre><code class="prism language-bash">mysql -u root -p
</code></pre> 
<p><img src="https://images2.imgbox.com/fd/0b/5qY6bIGs_o.png" alt="在这里插入图片描述"><br> 最后，使用命令更改密码：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 修改密码</span>
ALTER user <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'你的密码'</span><span class="token punctuation">;</span>
<span class="token comment"># 刷新 MySQL 的系统权限相关表</span>
flush privileges<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b7/55/NJ6YKM5f_o.png" alt="在这里插入图片描述"><br> 使用 <code>exit</code> 退出后，为保险起见，再次重启 <strong>MySQL</strong> 服务：<br> <img src="https://images2.imgbox.com/cf/27/EpfRS33S_o.png" alt="在这里插入图片描述"><br> 之后使用命令登录，输入你之前设置的密码后，就可以看到，登陆成功：<br> <img src="https://images2.imgbox.com/59/aa/GBENixrC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_354"></a>远程连接</h3> 
<p>要在主机上连接虚拟机中的 <strong>MySQL</strong> 就必须开启 <strong>Linux</strong> 的端口：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 永久开启 3306 端口</span>
firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp --permanent
<span class="token comment"># 重新加载防火墙</span>
firewall-cmd --reload
</code></pre> 
<p><img src="https://images2.imgbox.com/0f/92/JWpiaaoA_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>我这里的警告是因为我之前已经开过了，不影响。<br> 使用命令查看当前 <strong>Centos8</strong> 的 <strong>IP</strong> ：</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token function">ip</span> addr
</code></pre> 
<p>在 <strong>win10</strong> 的主机上使用 <strong>Navicat</strong> 工具尝试连接：<br> <img src="https://images2.imgbox.com/30/6c/MHM7igYn_o.png" alt="在这里插入图片描述"><br> 报错的意思大概是这个地址，是不允许我们连接 <strong>MySQL</strong> 服务器的，<strong>MySQL</strong> 默认不允许远程登录，所以需要开启远程访问权限:<br> 登录 <strong>MySQL</strong> ，依次输入以下的命令：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 切换数据库</span>
use mysql<span class="token punctuation">;</span>
<span class="token comment"># 可以查看以下 user 表（非必须）</span>
<span class="token keyword">select</span> user,authentication_string,host from user<span class="token punctuation">;</span>
<span class="token comment"># 修改 root 的 host</span>
update user <span class="token builtin class-name">set</span> <span class="token function">host</span> <span class="token operator">=</span> <span class="token string">'%'</span> where user <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">;</span>
<span class="token comment"># 刷新权限表</span>
flush privileges<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/c9/tCrArWYW_o.png" alt="在这里插入图片描述"><br> 再次进行连接：<br> <img src="https://images2.imgbox.com/5c/ad/hgxWqvIm_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fa4dcea5aacf06dedb76139c667483ed/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言结构体</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/359d9da354f2a244a2213b4a5395b79b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android studio jni开启debug的正确姿势</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>