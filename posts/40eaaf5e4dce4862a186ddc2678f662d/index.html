<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MongoDB从入门到实战之Docker快速安装MongoDB - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MongoDB从入门到实战之Docker快速安装MongoDB" />
<meta property="og:description" content="前言 在上一篇文章中带领带同学们快速入门MongoDB这个文档型的NoSQL数据库，让大家快速的了解了MongoDB的基本概念。这一章开始我们就开始实战篇教程，为了快速把MongoDB使用起来我将会把MongoDB在Docker容器中安装起来作为开发环境使用。然后我这边MongoDB的可视化工具用的是Navicate。废话不多说，我们先花了几分钟开始的把MongoDB环境搭建起来。
MongoDB从入门到实战的相关教程 MongoDB从入门到实战之MongoDB简介👉
MongoDB从入门到实战之MongoDB快速入门👉
MongoDB从入门到实战之Docker快速安装MongoDB👉
YyFlight.ToDoList项目源码地址 GitHub地址：GitHub - YSGStudyHards/YyFlight.ToDoList: 【.NET8 MongoDB 待办清单系统】.NET8 MongoDB从入门到实战基础教程，该项目后端使用的是.NET8、前端页面使用Blazor、使用MongoDB存储数据，更多相关内容大家可以看目录中的MongoDB从入门到实战的相关教程。该系列教程可作为.NET Core入门项目进行学习，感兴趣的小伙伴可以关注博主和我一起学习共同进步。
查看可用的MongoDB版本 访问DokcerHub中的MongoDB镜像库地址：https://hub.docker.com/_/mongo/tags
可以通过 Sort by 查看其他版本的MongoDB，查看最新版本MongoDB镜像(mongo:latest)：https://hub.docker.com/_/mongo/tags?page=1&amp;name=latest
此外，我们还可以用docker search mongo命令来查看可用版本： 拉取最新版本的MongoDB镜像 docker pull mongo:latest 注意：tag是可选的，tag表示标签，多为软件的版本，默认是latest版本（最新版）
验证MongoDB镜像是否成功拉取到本地 使用以下命令来查看MongoDB镜像是否成功拉取到本地：
docker images 创建并运行一个MongoDB容器 docker run -itd --name mongo-test -p 27017:27017 mongo --auth 参数说明：
-itd：其中，i是交互式操作，t是一个终端，d指的是在后台运行。--name mongo-test：容器名称-p 27017:27017 ：映射容器服务的 27017 端口到宿主机的 27017 端口。外部可以直接通过 宿主机 ip:27017 访问到 mongo 的服务。--auth：需要密码才能访问容器服务（注意：安全问题，MongoDB默认是不开启权限验证的，不过设置了这里就相当于修改MongoDB的配置auth=ture启用权限访问）。 进入创建的MongoDB容器 docker exec -it mongo-test mongosh MongoDB报错&#34;ongoServerError: not authorized on admin to execute command&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/40eaaf5e4dce4862a186ddc2678f662d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-05T19:54:36+08:00" />
<meta property="article:modified_time" content="2024-02-05T19:54:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MongoDB从入门到实战之Docker快速安装MongoDB</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>前言</h3> 
<p>      在上一篇文章中带领带同学们快速入门MongoDB这个文档型的NoSQL数据库，让大家快速的了解了MongoDB的基本概念。这一章开始我们就开始实战篇教程，为了快速把MongoDB使用起来我将会把MongoDB在Docker容器中安装起来作为开发环境使用。然后我这边MongoDB的可视化工具用的是Navicate。废话不多说，我们先花了几分钟开始的把MongoDB环境搭建起来。</p> 
<h3>MongoDB从入门到实战的相关教程</h3> 
<p><a href="https://www.cnblogs.com/Can-daydayup/p/16797608.html" rel="nofollow" title="MongoDB从入门到实战之MongoDB简介👉">MongoDB从入门到实战之MongoDB简介👉</a></p> 
<p><a href="https://www.cnblogs.com/Can-daydayup/p/16804415.html" rel="nofollow" title="MongoDB从入门到实战之MongoDB快速入门👉">MongoDB从入门到实战之MongoDB快速入门👉</a></p> 
<p><a href="https://www.cnblogs.com/Can-daydayup/p/16838976.html" rel="nofollow" title="MongoDB从入门到实战之Docker快速安装MongoDB👉">MongoDB从入门到实战之Docker快速安装MongoDB👉</a></p> 
<h3>YyFlight.ToDoList项目源码地址</h3> 
<blockquote> 
 <p>GitHub地址：<a href="https://github.com/YSGStudyHards/YyFlight.ToDoList" title="GitHub - YSGStudyHards/YyFlight.ToDoList: 【.NET8 MongoDB 待办清单系统】.NET8 MongoDB从入门到实战基础教程，该项目后端使用的是.NET8、前端页面使用Blazor、使用MongoDB存储数据，更多相关内容大家可以看目录中的MongoDB从入门到实战的相关教程。该系列教程可作为.NET Core入门项目进行学习，感兴趣的小伙伴可以关注博主和我一起学习共同进步。">GitHub - YSGStudyHards/YyFlight.ToDoList: 【.NET8 MongoDB 待办清单系统】.NET8 MongoDB从入门到实战基础教程，该项目后端使用的是.NET8、前端页面使用Blazor、使用MongoDB存储数据，更多相关内容大家可以看目录中的MongoDB从入门到实战的相关教程。该系列教程可作为.NET Core入门项目进行学习，感兴趣的小伙伴可以关注博主和我一起学习共同进步。</a></p> 
</blockquote> 
<h3>查看可用的MongoDB版本</h3> 
<blockquote> 
 <p id="ue0c55910">访问DokcerHub中的MongoDB镜像库地址：<a href="https://hub.docker.com/_/mongo/tags" rel="nofollow" title="https://hub.docker.com/_/mongo/tags">https://hub.docker.com/_/mongo/tags</a></p> 
 <p id="u4c85144b">可以通过 Sort by 查看其他版本的MongoDB，查看最新版本MongoDB镜像(mongo:latest<code>)：<a href="https://hub.docker.com/_/mongo/tags?page=1&amp;name=latest" rel="nofollow" title="https://hub.docker.com/_/mongo/tags?page=1&amp;name=latest">https://hub.docker.com/_/mongo/tags?page=1&amp;name=latest</a></code></p> 
</blockquote> 
<p></p> 
<p class="img-center"><img alt="" height="905" src="https://images2.imgbox.com/c4/9c/yR550VGF_o.png" width="1200"></p> 
<blockquote> 
 <p> 此外，我们还可以用<code>docker search mongo</code>命令来查看可用版本： </p> 
</blockquote> 
<p></p> 
<p class="img-center"><img alt="" height="522" src="https://images2.imgbox.com/e8/b9/0oMPGAFJ_o.png" width="1200"></p> 
<h3>拉取最新版本的MongoDB镜像</h3> 
<pre>docker pull mongo:latest</pre> 
<blockquote> 
 <p>注意：tag是可选的，tag表示标签，多为软件的版本，默认是latest版本（最新版）</p> 
</blockquote> 
<p></p> 
<p class="img-center"><img alt="" height="274" src="https://images2.imgbox.com/10/ca/RUoRWmYi_o.png" width="834"></p> 
<h3>验证MongoDB镜像是否成功拉取到本地</h3> 
<p>使用以下命令来查看MongoDB镜像是否成功拉取到本地：</p> 
<pre>docker images</pre> 
<p></p> 
<p class="img-center"><img alt="" height="179" src="https://images2.imgbox.com/21/be/lDT1mFpq_o.png" width="658"></p> 
<h3>创建并运行一个MongoDB容器</h3> 
<pre>docker run -itd --name mongo-test -p 27017:27017 mongo --auth</pre> 
<p><strong>参数说明：</strong></p> 
<ul><li><strong>-itd：</strong>其中，i是交互式操作，t是一个终端，d指的是在后台运行。</li><li><strong>--name mongo-test：</strong>容器名称</li><li><strong>-p 27017:27017</strong> ：映射容器服务的 27017 端口到宿主机的 27017 端口。外部可以直接通过 宿主机 ip:27017 访问到 mongo 的服务。</li><li><strong>--auth</strong>：需要密码才能访问容器服务（注意：安全问题，MongoDB默认是不开启权限验证的，不过设置了这里就相当于修改MongoDB的配置auth=ture启用权限访问）。</li></ul> 
<p></p> 
<p class="img-center"><img alt="" height="76" src="https://images2.imgbox.com/fe/3e/jcv1Xlh0_o.png" width="956"></p> 
<p></p> 
<p class="img-center"><img alt="" height="154" src="https://images2.imgbox.com/ec/53/K9e7fEbP_o.png" width="1200"></p> 
<h4>进入创建的MongoDB容器</h4> 
<pre>docker exec -it  mongo-test mongosh</pre> 
<p></p> 
<p class="img-center"><img alt="" height="572" src="https://images2.imgbox.com/6a/bc/Bcn7OoJw_o.png" width="1200"></p> 
<h3>MongoDB报错"ongoServerError: not authorized on admin to execute command"</h3> 
<p>MongoDB默认是不需要用户密码就可以连接的，如果使用命令报错"ongoServerError: not authorized on admin to execute command "，则表示当前登陆用户不具备相应权限。</p> 
<p></p> 
<p class="img-center"><img alt="" height="308" src="https://images2.imgbox.com/e1/5f/74f5mHNX_o.png" width="1200"></p> 
<p>解决办法：在admin数据库中通过创建一个用户，赋予用户root权限。</p> 
<pre># 进入admin数据库
use admin

# 创建一个超级用户
db.createUser(
    {
        user:"root",
        pwd:"123456",
        roles:[{role:"root",db:"admin"}]
    }
);

#授权登录
db.auth('root','123456')</pre> 
<p></p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/ea/da/8UsDhzwx_o.png" width="474"></p> 
<h3>MongoDB用户权限管理</h3> 
<h4>MongoDB添加用户命令说明</h4> 
<ul><li>user字段，为新用户的名字。</li><li>pwd字段，用户的密码。</li><li>cusomData字段，为任意内容，例如可以为用户全名介绍。</li><li>roles字段，指定用户的角色，可以用一个空数组给新用户设定空角色。在roles字段,可以指定内置角色和用户定义的角色。</li><li>超级用户的role有两种，userAdmin或者userAdminAnyDatabase(比前一种多加了对所有数据库的访问,仅仅是访问而已)。</li><li>db是指定数据库的名字，admin是管理数据库。</li><li>不能用admin数据库中的用户登录其他数据库。注：只能查看当前数据库中的用户，哪怕当前数据库admin数据库，也只能查看admin数据库中创建的用户。</li></ul> 
<h4>首先切换到admin数据库中</h4> 
<pre># 进入admin数据库
use admin</pre> 
<h4 id="item-0-3">创建admin超级管理员用户</h4> 
<blockquote> 
 <p>指定用户的角色和数据库：<br> (注意此时添加的用户都只用于admin数据库，而非你存储业务数据的数据库)<br> (在cmd中敲多行代码时，直接敲回车换行，最后以分号首尾)</p> 
</blockquote> 
<pre>db.createUser(  
  { user: "admin",  
    customData：{description:"superuser"},
    pwd: "admin",  
    roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]  
  }  
)</pre> 
<h4 id="item-0-4">创建一个不受访问限制的超级用户</h4> 
<blockquote> 
 <p>拥有所有权限，不受任何限制</p> 
</blockquote> 
<pre>db.createUser(
    {
        user:"root",
        pwd:"123456",
        roles:[{role:"root",db:"admin"}]
    }
);</pre> 
<h4 id="item-0-5">创建一个业务数据库管理员用户</h4> 
<blockquote> 
 <p>只负责某一个或几个数据库的増查改删</p> 
</blockquote> 
<pre>db.createUser({
    user:"user001",
    pwd:"123456",
    customData:{
        name:'jim',
        email:'jim@qq.com',
        age:18,
    },
    roles:[
        {role:"readWrite",db:"db001"},
        {role:"readWrite",db:"db002"},
        'read'// 对其他数据库有只读权限，对db001、db002是读写权限
    ]
})</pre> 
<h4>MongoDB数据库角色说明</h4> 
<ul><li>数据库用户角色：read、readWrite；</li><li>数据库管理角色：dbAdmin、dbOwner、userAdmin;</li><li>集群管理角色：clusterAdmin、clusterManager、4. clusterMonitor、hostManage；</li><li>备份恢复角色：backup、restore；</li><li>所有数据库角色：readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase</li><li>超级用户角色：root</li><li>内部角色：__system</li></ul> 
<h4>MongoDB中的role详解</h4> 
<ul><li>Read：允许用户读取指定数据库</li><li>readWrite：允许用户读写指定数据库</li><li>dbAdmin：允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile</li><li>userAdmin：允许用户向system.users集合写入，可以在指定数据库里创建、删除和管理用户</li><li>clusterAdmin：只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限</li><li>readAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读权限</li><li>readWriteAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读写权限</li><li>userAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限</li><li>dbAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限</li><li>root：只在admin数据库中可用。超级账号，超级权限</li></ul> 
<h3>服务器配置27017的开放端口</h3> 
<p></p> 
<p class="img-center"><img alt="" height="597" src="https://images2.imgbox.com/09/be/xjM4dNhG_o.png" width="552"></p> 
<h3>Navicat连接mongoDB并创建集合和添加数据</h3> 
<h4><strong>1.连接MongoDB点击这个位置</strong></h4> 
<p></p> 
<p class="img-center"><img alt="" height="420" src="https://images2.imgbox.com/50/db/ESqv5vMB_o.png" width="453"></p> 
<h4>2、连接参数介绍：</h4> 
<p><strong>stand alone：独立的</strong></p> 
<p><strong>shard cluster：分片集群</strong></p> 
<p><strong>replica set：复制集</strong></p> 
<p><strong>SRV record：</strong></p> 
<p>SRV记录是DNS服务器的数据库中支持的一种资源记录的类型，它记录了哪台计算机提供了哪个服务这么一个简单的信息。</p> 
<p>SRV 记录：一般是为Microsoft的活动目录设置时的应用。DNS可以独立于活动目录，但是活动目录必须有DNS的帮助才能工作。</p> 
<p>为了活动目录能够正常的工作，DNS服务器必须支持服务定位（SRV）资源记录，资源记录把服务名字映射为提供服务的服务器名字。</p> 
<p>活动目录客户和域控制器使用SRV资源记录决定域控制器的IP地址。</p> 
<p>一般情况下，我们连接只需要连接主库查数据，所以选择独立的这个连接方式就可以，填写好常规参数可以点击测试连接是否正常，即可连接！</p> 
<p></p> 
<p class="img-center"><img alt="" height="709" src="https://images2.imgbox.com/3e/66/mXjYUmIK_o.png" width="566"></p> 
<h4>3、新建MongoDB数据库（MyMondoDBTest）</h4> 
<p> </p> 
<p class="img-center"><img alt="" height="327" src="https://images2.imgbox.com/63/02/ffFAojMf_o.png" width="354"></p> 
<p></p> 
<p> </p> 
<p class="img-center"><img alt="" height="218" src="https://images2.imgbox.com/42/1f/ELPk9MHT_o.png" width="335"></p> 
<p></p> 
<p></p> 
<h4>4、新建MongoDB文档（Books）并添加数据</h4> 
<p></p> 
<p class="img-center"><img alt="" height="353" src="https://images2.imgbox.com/fe/b3/9ToRO4CS_o.png" width="343"></p> 
<p></p> 
<p> </p> 
<p class="img-center"><img alt="" height="85" src="https://images2.imgbox.com/d8/fd/i33XeIGa_o.png" width="310"></p> 
<p></p> 
<p> </p> 
<p class="img-center"><img alt="" height="915" src="https://images2.imgbox.com/b3/26/36rnVFjS_o.png" width="1200"></p> 
<p></p> 
<p class="img-center"><img alt="" height="432" src="https://images2.imgbox.com/ca/35/lNACnh3l_o.png" width="562"></p> 
<p></p> 
<p> </p> 
<p class="img-center"><img alt="" height="120" src="https://images2.imgbox.com/62/5f/e55L4AbZ_o.png" width="581"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/af726264cf6e0316bdf46f57012cd1ae/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL学习四、索引和事务</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/14573ac0afefc7b9048065330ee71d60/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在 MacOS 上虚拟化 x86Linux 的最佳方法(通过 Rosetta)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>