<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue数据更新页面却没有更新的几种情况以及解决方法 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue数据更新页面却没有更新的几种情况以及解决方法" />
<meta property="og:description" content="情况一：Vue无法检测实例被创建时不存在于data中的变量 原因：由于 Vue 会在初始化实例时对 data中的数据执行 getter/setter 转化，所以 变量必须在 data 对象上存在才能让 Vue 将它转换为响应式的。
例如： 1 2 3 4 5 new Vue({ data:{}, template: &#39;&lt;div&gt;{{message}}&lt;/div&gt;&#39; }) this .message = &#39;Hello world!&#39; // `message` 不是响应式的页面不会发生变化 解决方法：
1 2 3 4 5 6 7 new Vue({ data: { message: &#39;&#39; , }, template: &#39;&lt;div&gt;{{ message }}&lt;/div&gt;&#39; }) this .message = &#39;Hello world!&#39; 情况二：vue也不能检测到data中对象的动态添加和删除 例如：
1 2 3 4 5 6 7 8 9 10 new Vue({ data:{ obj: { id: 1 } }, template: &#39;&lt;div&gt;{{ obj." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/3e673257e73087a56b3901c5b88a75f8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-01T11:20:00+08:00" />
<meta property="article:modified_time" content="2023-11-01T11:20:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue数据更新页面却没有更新的几种情况以及解决方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html" style="font-size: 16px;"> 
 <h3 id="heading-0">情况一：Vue无法检测实例被创建时不存在于data中的变量</h3> 
 <p>原因：由于 Vue 会在初始化实例时对 data中的数据执行 getter/setter 转化，所以 变量必须在 data 对象上存在才能让 Vue 将它转换为响应式的。</p> 
 <p>例如： </p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_183015" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js keyword">new</code> 
          <code class="js plain">Vue({<!-- --></code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">data:{},</code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">template: </code> 
          <code class="js string">'&lt;div&gt;{<!-- -->{message}}&lt;/div&gt;'</code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js plain">})</code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.message = </code> 
          <code class="js string">'Hello world!'</code> 
          <code class="js comments">// `message` 不是响应式的页面不会发生变化</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p>解决方法：</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_256903" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js keyword">new</code> 
          <code class="js plain">Vue({<!-- --></code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">data: {<!-- --></code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js spaces">    </code> 
          <code class="js plain">message: </code> 
          <code class="js string">''</code> 
          <code class="js plain">,</code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">},</code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">template: </code> 
          <code class="js string">'&lt;div&gt;{<!-- -->{ message }}&lt;/div&gt;'</code> 
         </div> 
         <div class="line number6 index5 alt1"> 
          <code class="js plain">})</code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.message = </code> 
          <code class="js string">'Hello world!'</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p class="maodian"><a name="_label1" rel="noopener"></a></p> 
 <h3 id="heading-1">情况二：vue也不能检测到data中对象的动态添加和删除</h3> 
 <p>例如：</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_925966" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> 
        <div class="line number8 index7 alt1">
          8 
        </div> 
        <div class="line number9 index8 alt2">
          9 
        </div> 
        <div class="line number10 index9 alt1">
          10 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js keyword">new</code> 
          <code class="js plain">Vue({<!-- --></code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">data:{<!-- --></code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js spaces">    </code> 
          <code class="js plain">obj: {<!-- --></code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js spaces">      </code> 
          <code class="js plain">id: 1</code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js spaces">    </code> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number6 index5 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">},</code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">template: </code> 
          <code class="js string">'&lt;div&gt;{<!-- -->{ obj.message }}&lt;/div&gt;'</code> 
         </div> 
         <div class="line number8 index7 alt1"> 
          <code class="js plain">})</code> 
         </div> 
         <div class="line number9 index8 alt2"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.obj.message = </code> 
          <code class="js string">'hello'</code> 
          <code class="js comments">// 不是响应式的</code> 
         </div> 
         <div class="line number10 index9 alt1"> 
          <code class="js keyword">delete</code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.obj.id       </code> 
          <code class="js comments">// 不是响应式的</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p>解决方法：</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_294160" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> 
        <div class="line number8 index7 alt1">
          8 
        </div> 
        <div class="line number9 index8 alt2">
          9 
        </div> 
        <div class="line number10 index9 alt1">
          10 
        </div> 
        <div class="line number11 index10 alt2">
          11 
        </div> 
        <div class="line number12 index11 alt1">
          12 
        </div> 
        <div class="line number13 index12 alt2">
          13 
        </div> 
        <div class="line number14 index13 alt1">
          14 
        </div> 
        <div class="line number15 index14 alt2">
          15 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js comments">// 动态添加 - Vue.set</code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js plain">Vue.set(</code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.obj, </code> 
          <code class="js string">'id'</code> 
          <code class="js plain">, 002)</code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js comments">// 动态添加 - this.$set</code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.$set(</code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.obj, </code> 
          <code class="js string">'id'</code> 
          <code class="js plain">, 002)</code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="js comments">// 动态添加多个</code> 
         </div> 
         <div class="line number8 index7 alt1"> 
          <code class="js comments">// 代替 Object.assign(this.obj, { a: 1, b: 2 })</code> 
         </div> 
         <div class="line number9 index8 alt2"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.obj = Object.assign({}, </code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.obj, { a: 1, b: 2 })</code> 
         </div> 
         <div class="line number11 index10 alt2"> 
          <code class="js comments">// 动态移除 - Vue.delete</code> 
         </div> 
         <div class="line number12 index11 alt1"> 
          <code class="js plain">Vue.</code> 
          <code class="js keyword">delete</code> 
          <code class="js plain">(</code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.obj, </code> 
          <code class="js string">'name'</code> 
          <code class="js plain">)</code> 
         </div> 
         <div class="line number14 index13 alt1"> 
          <code class="js comments">// 动态移除 - this.$delete</code> 
         </div> 
         <div class="line number15 index14 alt2"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.$</code> 
          <code class="js keyword">delete</code> 
          <code class="js plain">(</code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.obj, </code> 
          <code class="js string">'name'</code> 
          <code class="js plain">)</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p class="maodian"><a name="_label2" rel="noopener"></a></p> 
 <h3 id="heading-2">情况三：变量为数组时</h3> 
 <p>不能通过索引直接修改或者赋值，也不能修改数组的长度</p> 
 <p>例如：</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_68948" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> 
        <div class="line number8 index7 alt1">
          8 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js keyword">new</code> 
          <code class="js plain">Vue({<!-- --></code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">data: {<!-- --></code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js spaces">    </code> 
          <code class="js plain">items: [</code> 
          <code class="js string">'a'</code> 
          <code class="js plain">, </code> 
          <code class="js string">'b'</code> 
          <code class="js plain">, </code> 
          <code class="js string">'c'</code> 
          <code class="js plain">]</code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js plain">})</code> 
         </div> 
         <div class="line number6 index5 alt1"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.items[1] = </code> 
          <code class="js string">'x'</code> 
          <code class="js comments">// 不是响应性的</code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.items[3] = </code> 
          <code class="js string">'d'</code> 
          <code class="js comments">// 不是响应性的</code> 
         </div> 
         <div class="line number8 index7 alt1"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.items.length = 2 </code> 
          <code class="js comments">// 不是响应性的</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p>解决方法：</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_883860" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> 
        <div class="line number8 index7 alt1">
          8 
        </div> 
        <div class="line number9 index8 alt2">
          9 
        </div> 
        <div class="line number10 index9 alt1">
          10 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js comments">// Vue.set</code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js plain">Vue.set(</code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.items, 4, </code> 
          <code class="js string">'d'</code> 
          <code class="js plain">)</code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js comments">// this.$set</code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.$set(</code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.items, 4, </code> 
          <code class="js string">'d)</code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="js string">// Array.prototype.splice</code> 
         </div> 
         <div class="line number8 index7 alt1"> 
          <code class="js string">this.items.splice(indexOfItem, 4, '</code> 
          <code class="js plain">d')</code> 
         </div> 
         <div class="line number9 index8 alt2"> 
          <code class="js comments">//修改长度</code> 
         </div> 
         <div class="line number10 index9 alt1"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.items.splice(3)</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p class="maodian"><a name="_label3" rel="noopener"></a></p> 
 <h3 id="heading-3">情况四：异步获取接口数据，DOM数据不发现变化</h3> 
 <p>原因：Vue 在更新 DOM 时是异步执行的。只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更。如果同一个 watcher 被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作是非常重要的。然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。Vue 在内部对异步队列尝试使用原生的 Promise.then、MutationObserver 和 setImmediate，如果执行环境不支持，则会采用 setTimeout(funcation, 0) 代替。</p> 
 <p>例如：</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_565230" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> 
        <div class="line number8 index7 alt1">
          8 
        </div> 
        <div class="line number9 index8 alt2">
          9 
        </div> 
        <div class="line number10 index9 alt1">
          10 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js plain">&lt;div id=</code> 
          <code class="js string">"example"</code> 
          <code class="js plain">&gt;{<!-- -->{message}}&lt;/div&gt;</code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js keyword">var</code> 
          <code class="js plain">vm = </code> 
          <code class="js keyword">new</code> 
          <code class="js plain">Vue({<!-- --></code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">el: </code> 
          <code class="js string">'#example'</code> 
          <code class="js plain">,</code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">data: {<!-- --></code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js spaces">    </code> 
          <code class="js plain">message: </code> 
          <code class="js string">'123'</code> 
         </div> 
         <div class="line number6 index5 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="js plain">})</code> 
         </div> 
         <div class="line number8 index7 alt1"> 
          <code class="js plain">vm.message = </code> 
          <code class="js string">'new message'</code> 
          <code class="js comments">// 更改数据</code> 
         </div> 
         <div class="line number9 index8 alt2"> 
          <code class="js plain">vm.$el.textContent === </code> 
          <code class="js string">'new message'</code> 
          <code class="js comments">// false</code> 
         </div> 
         <div class="line number10 index9 alt1"> 
          <code class="js plain">vm.$el.style.color = </code> 
          <code class="js string">'red'</code> 
          <code class="js comments">// 页面没有变化</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p>解决方法：</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_686701" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> 
        <div class="line number8 index7 alt1">
          8 
        </div> 
        <div class="line number9 index8 alt2">
          9 
        </div> 
        <div class="line number10 index9 alt1">
          10 
        </div> 
        <div class="line number11 index10 alt2">
          11 
        </div> 
        <div class="line number12 index11 alt1">
          12 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js keyword">var</code> 
          <code class="js plain">vm = </code> 
          <code class="js keyword">new</code> 
          <code class="js plain">Vue({<!-- --></code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">el: </code> 
          <code class="js string">'#example'</code> 
          <code class="js plain">,</code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">data: {<!-- --></code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js spaces">    </code> 
          <code class="js plain">message: </code> 
          <code class="js string">'123'</code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number6 index5 alt1"> 
          <code class="js plain">})</code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="js plain">vm.message = </code> 
          <code class="js string">'new message'</code> 
          <code class="js comments">// 更改数据</code> 
         </div> 
         <div class="line number8 index7 alt1"> 
          <code class="js comments">//使用 Vue.nextTick(callback) callback 将在 DOM 更新完成后被调用</code> 
         </div> 
         <div class="line number9 index8 alt2"> 
          <code class="js plain">Vue.nextTick(</code> 
          <code class="js keyword">function</code> 
          <code class="js plain">() {<!-- --></code> 
         </div> 
         <div class="line number10 index9 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">vm.$el.textContent === </code> 
          <code class="js string">'new message'</code> 
          <code class="js comments">// true</code> 
         </div> 
         <div class="line number11 index10 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">vm.$el.style.color = </code> 
          <code class="js string">'red'</code> 
          <code class="js comments">// 文字颜色变成红色</code> 
         </div> 
         <div class="line number12 index11 alt1"> 
          <code class="js plain">})</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p class="maodian"><a name="_label4" rel="noopener"></a></p> 
 <h3 id="heading-4">情况五：循环嵌套层级太深，视图不更新</h3> 
 <p>当嵌套太深时，页面也可能不更新，此时可以让页面强制刷新</p> 
 <p>this.$forceUpdate()迫使vue实例重新(rander)渲染虚拟DOM，注意并不是重新加载组件。<br>结合vue的生命周期，调用$forceUpdate后只会触发beforeUpdate和updated这两个钩子函数，不会触发其他的钩子函数。<br>它仅仅影响实例本身和插入插槽内容的子组件，而不是所有子组件。</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_251364" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js comments">//官方说如果你现在的场景需要用forceUpdate方法 ,那么99%是你的操作有问题</code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.$forceUpdate();</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p class="maodian"><a name="_label5" rel="noopener"></a></p> 
 <h3 id="heading-5">情况六：路由参数变化时，页面不更新(数据不更新)</h3> 
 <p>例如：</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_640569" class="syntaxhighlighter  xhtml"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> 
        <div class="line number8 index7 alt1">
          8 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="xhtml plain">&lt;</code> 
          <code class="xhtml keyword">div</code> 
          <code class="xhtml color1">id</code> 
          <code class="xhtml plain">=</code> 
          <code class="xhtml string">"app"</code> 
          <code class="xhtml plain">&gt;</code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="xhtml spaces">  </code> 
          <code class="xhtml plain">&lt;</code> 
          <code class="xhtml keyword">ul</code> 
          <code class="xhtml plain">&gt;</code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="xhtml spaces">    </code> 
          <code class="xhtml plain">&lt;</code> 
          <code class="xhtml keyword">li</code> 
          <code class="xhtml plain">&gt;&lt;</code> 
          <code class="xhtml keyword">router-link</code> 
          <code class="xhtml color1">to</code> 
          <code class="xhtml plain">=</code> 
          <code class="xhtml string">"/home/foo"</code> 
          <code class="xhtml plain">&gt;To Foo&lt;/</code> 
          <code class="xhtml keyword">router-link</code> 
          <code class="xhtml plain">&gt;&lt;/</code> 
          <code class="xhtml keyword">li</code> 
          <code class="xhtml plain">&gt;    </code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="xhtml spaces">    </code> 
          <code class="xhtml plain">&lt;</code> 
          <code class="xhtml keyword">li</code> 
          <code class="xhtml plain">&gt;&lt;</code> 
          <code class="xhtml keyword">router-link</code> 
          <code class="xhtml color1">to</code> 
          <code class="xhtml plain">=</code> 
          <code class="xhtml string">"/home/baz"</code> 
          <code class="xhtml plain">&gt;To Baz&lt;/</code> 
          <code class="xhtml keyword">router-link</code> 
          <code class="xhtml plain">&gt;&lt;/</code> 
          <code class="xhtml keyword">li</code> 
          <code class="xhtml plain">&gt;    </code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="xhtml spaces">    </code> 
          <code class="xhtml plain">&lt;</code> 
          <code class="xhtml keyword">li</code> 
          <code class="xhtml plain">&gt;&lt;</code> 
          <code class="xhtml keyword">router-link</code> 
          <code class="xhtml color1">to</code> 
          <code class="xhtml plain">=</code> 
          <code class="xhtml string">"/home/bar"</code> 
          <code class="xhtml plain">&gt;To Bar&lt;/</code> 
          <code class="xhtml keyword">router-link</code> 
          <code class="xhtml plain">&gt;&lt;/</code> 
          <code class="xhtml keyword">li</code> 
          <code class="xhtml plain">&gt;    </code> 
         </div> 
         <div class="line number6 index5 alt1"> 
          <code class="xhtml spaces">  </code> 
          <code class="xhtml plain">&lt;/</code> 
          <code class="xhtml keyword">ul</code> 
          <code class="xhtml plain">&gt;    </code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="xhtml spaces">  </code> 
          <code class="xhtml plain">&lt;</code> 
          <code class="xhtml keyword">router-view</code> 
          <code class="xhtml plain">&gt;&lt;/</code> 
          <code class="xhtml keyword">router-view</code> 
          <code class="xhtml plain">&gt;</code> 
         </div> 
         <div class="line number8 index7 alt1"> 
          <code class="xhtml plain">&lt;/</code> 
          <code class="xhtml keyword">div</code> 
          <code class="xhtml plain">&gt;</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_205852" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> 
        <div class="line number8 index7 alt1">
          8 
        </div> 
        <div class="line number9 index8 alt2">
          9 
        </div> 
        <div class="line number10 index9 alt1">
          10 
        </div> 
        <div class="line number11 index10 alt2">
          11 
        </div> 
        <div class="line number12 index11 alt1">
          12 
        </div> 
        <div class="line number13 index12 alt2">
          13 
        </div> 
        <div class="line number14 index13 alt1">
          14 
        </div> 
        <div class="line number15 index14 alt2">
          15 
        </div> 
        <div class="line number16 index15 alt1">
          16 
        </div> 
        <div class="line number17 index16 alt2">
          17 
        </div> 
        <div class="line number18 index17 alt1">
          18 
        </div> 
        <div class="line number19 index18 alt2">
          19 
        </div> 
        <div class="line number20 index19 alt1">
          20 
        </div> 
        <div class="line number21 index20 alt2">
          21 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js plain">const Home = {<!-- --></code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">template: `&lt;div&gt;{<!-- -->{message}}&lt;/div&gt;`,</code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">data() {<!-- --></code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js spaces">    </code> 
          <code class="js keyword">return</code> 
          <code class="js plain">{<!-- --></code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js spaces">      </code> 
          <code class="js plain">message: </code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.$route.params.name</code> 
         </div> 
         <div class="line number6 index5 alt1"> 
          <code class="js spaces">    </code> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number8 index7 alt1"> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number10 index9 alt1"> 
          <code class="js plain">const router = </code> 
          <code class="js keyword">new</code> 
          <code class="js plain">VueRouter({<!-- --></code> 
         </div> 
         <div class="line number11 index10 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">mode:</code> 
          <code class="js string">'history'</code> 
          <code class="js plain">,</code> 
         </div> 
         <div class="line number12 index11 alt1"> 
          <code class="js spaces">    </code> 
          <code class="js plain">routes: [</code> 
         </div> 
         <div class="line number13 index12 alt2"> 
          <code class="js spaces">    </code> 
          <code class="js plain">{path: </code> 
          <code class="js string">'/home'</code> 
          <code class="js plain">, component: Home },</code> 
         </div> 
         <div class="line number14 index13 alt1"> 
          <code class="js spaces">    </code> 
          <code class="js plain">{path: </code> 
          <code class="js string">'/home/:name'</code> 
          <code class="js plain">, component: Home }</code> 
         </div> 
         <div class="line number15 index14 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">]</code> 
         </div> 
         <div class="line number16 index15 alt1"> 
          <code class="js plain">})</code> 
         </div> 
         <div class="line number18 index17 alt1"> 
          <code class="js keyword">new</code> 
          <code class="js plain">Vue({<!-- --></code> 
         </div> 
         <div class="line number19 index18 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">el: </code> 
          <code class="js string">'#app'</code> 
          <code class="js plain">,</code> 
         </div> 
         <div class="line number20 index19 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">router</code> 
         </div> 
         <div class="line number21 index20 alt2"> 
          <code class="js plain">})</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p>上段代码中，我们在路由构建选项 routes 中配置了一个动态路由 '/home/:name'，它们共用一个路由组件 Home，这代表他们复用 RouterView 。</p> 
 <p>当进行路由切换时，页面只会渲染第一次路由匹配到的参数，之后再进行路由切换时，message 是没有变化的。</p> 
 <p>解决方法：</p> 
 <p>1.通过 watch 监听 $route 的变化。</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_412399" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> 
        <div class="line number5 index4 alt2">
          5 
        </div> 
        <div class="line number6 index5 alt1">
          6 
        </div> 
        <div class="line number7 index6 alt2">
          7 
        </div> 
        <div class="line number8 index7 alt1">
          8 
        </div> 
        <div class="line number9 index8 alt2">
          9 
        </div> 
        <div class="line number10 index9 alt1">
          10 
        </div> 
        <div class="line number11 index10 alt2">
          11 
        </div> 
        <div class="line number12 index11 alt1">
          12 
        </div> 
        <div class="line number13 index12 alt2">
          13 
        </div> 
        <div class="line number14 index13 alt1">
          14 
        </div> 
        <div class="line number15 index14 alt2">
          15 
        </div> 
        <div class="line number16 index15 alt1">
          16 
        </div> 
        <div class="line number17 index16 alt2">
          17 
        </div> 
        <div class="line number18 index17 alt1">
          18 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js plain">const Home = {<!-- --></code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">template: `&lt;div&gt;{<!-- -->{message}}&lt;/div&gt;`,</code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">data() {<!-- --></code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js spaces">    </code> 
          <code class="js keyword">return</code> 
          <code class="js plain">{<!-- --></code> 
         </div> 
         <div class="line number5 index4 alt2"> 
          <code class="js spaces">      </code> 
          <code class="js plain">message: </code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.$route.params.name</code> 
         </div> 
         <div class="line number6 index5 alt1"> 
          <code class="js spaces">    </code> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number7 index6 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">},</code> 
         </div> 
         <div class="line number8 index7 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">watch:{<!-- --></code> 
         </div> 
         <div class="line number9 index8 alt2"> 
          <code class="js spaces">     </code> 
          <code class="js string">'$route'</code> 
          <code class="js plain">:</code> 
          <code class="js keyword">function</code> 
          <code class="js plain">(){<!-- --></code> 
         </div> 
         <div class="line number10 index9 alt1"> 
          <code class="js spaces">        </code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.message = </code> 
          <code class="js keyword">this</code> 
          <code class="js plain">.$route.params.name</code> 
         </div> 
         <div class="line number11 index10 alt2"> 
          <code class="js spaces">     </code> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number12 index11 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number13 index12 alt2"> 
          <code class="js plain">}</code> 
         </div> 
         <div class="line number14 index13 alt1"> 
          <code class="js plain">...</code> 
         </div> 
         <div class="line number15 index14 alt2"> 
          <code class="js keyword">new</code> 
          <code class="js plain">Vue({<!-- --></code> 
         </div> 
         <div class="line number16 index15 alt1"> 
          <code class="js spaces">  </code> 
          <code class="js plain">el: </code> 
          <code class="js string">'#app'</code> 
          <code class="js plain">,</code> 
         </div> 
         <div class="line number17 index16 alt2"> 
          <code class="js spaces">  </code> 
          <code class="js plain">router</code> 
         </div> 
         <div class="line number18 index17 alt1"> 
          <code class="js plain">})</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p>2.给&lt;router-view&gt; 绑定key属性，这样 Vue 就会认为这是不同的 &lt;router-view&gt;。</p> 
 <p>弊端：如果从 /home 跳转到 /user 等其他路由下，我们是不用担心组件更新问题的，所以这个时候 key 属性是多余的。</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_626104" class="syntaxhighlighter  xhtml"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="xhtml plain">&lt;</code> 
          <code class="xhtml keyword">div</code> 
          <code class="xhtml color1">id</code> 
          <code class="xhtml plain">=</code> 
          <code class="xhtml string">"app"</code> 
          <code class="xhtml plain">&gt;</code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="xhtml spaces">   </code> 
          <code class="xhtml plain">&lt;</code> 
          <code class="xhtml keyword">router-view</code> 
          <code class="xhtml color1">:key</code> 
          <code class="xhtml plain">=</code> 
          <code class="xhtml string">"key"</code> 
          <code class="xhtml plain">&gt;&lt;/</code> 
          <code class="xhtml keyword">router-view</code> 
          <code class="xhtml plain">&gt;</code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="xhtml plain">&lt;/</code> 
          <code class="xhtml keyword">div</code> 
          <code class="xhtml plain">&gt;</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p class="maodian"><a name="_label6" rel="noopener"></a></p> 
 <h3 id="heading-6">情况七：变量通过赋值来定义的</h3> 
 <p>在 Vue 中有两种类型的变量：响应式变量和非响应式变量。</p> 
 <p>从后端获取的变量通常是响应式变量，也就是说它们会被 Vue 监测到变化并同步到页面上，如果你修改了这些响应式变量，页面会随之改变。</p> 
 <p>而通过赋值来定义的变量通常是非响应式变量，如果你修改了这些非响应式变量，Vue 并不会监测到它们的变化，所以页面不会改变。</p> 
 <p>如果你需要使一个非响应式变量变成响应式变量，可以使用 Vue.set 方法或者数组的变异方法(例如 push、splice 等)。</p> 
 <p>例1：Vue.set(对象,添加的key,属性值”)</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_791014" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> 
        <div class="line number4 index3 alt1">
          4 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js plain">Vue.set</code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js comments">//这个是直接用在Vue身上的。例如: Vue.set(对象,添加的key,属性值”)</code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js comments">//常见于: xx.js文件中</code> 
         </div> 
         <div class="line number4 index3 alt1"> 
          <code class="js comments">//注意: js文件中，需要引入vue，比如: import Vue from vue</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <p>例2：this.$set(对象,添加的key',属性值)</p> 
 <div class="jb51code"> 
  <div> 
   <div id="highlighter_296243" class="syntaxhighlighter  js"> 
    <table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="gutter"> 
        <div class="line number1 index0 alt2">
          1 
        </div> 
        <div class="line number2 index1 alt1">
          2 
        </div> 
        <div class="line number3 index2 alt2">
          3 
        </div> </td><td class="code"> 
        <div class="container"> 
         <div class="line number1 index0 alt2"> 
          <code class="js keyword">this</code> 
          <code class="js plain">.$set</code> 
         </div> 
         <div class="line number2 index1 alt1"> 
          <code class="js comments">//这个是用在vm或者vc实例身上的，比如vue文件中，this.$set(对象,添加的key',属性值)</code> 
         </div> 
         <div class="line number3 index2 alt2"> 
          <code class="js comments">//常见于: xx.vue文件中</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
 <blockquote> 
  <p>强制更新数据：this.$forceUpdate();</p> 
 </blockquote> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b9d68a94631a3d02d5d66550f2a1cb54/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java_stream流</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/24e3b43000d450cfd8e7077c5e9f8e96/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">司马阅再升级，明显领先国产AI文档同行</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>