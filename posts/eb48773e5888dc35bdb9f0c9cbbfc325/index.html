<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>cpp——引用 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="cpp——引用" />
<meta property="og:description" content="目录
引用概念
引用原则：对引用的变量不能权限放大，只能权限缩小。
使用场景
注意事项
引用和指针的区别
引用跟指针的汇编代码对比：是一样的
引用和指针的不同点：
引用概念 引用不是定义一个新变量，而是给已存在的变量取了一个别名，编译器不会为引用的变量开辟内存空间，它和它引用的变量共用同一块内存空间。
小王因经常健身每天吃八个鸡蛋，被小伙伴们调侃的取了个外号叫“八蛋”，又刚好姓王，“王八蛋”，小伙伴们每天都会问“八蛋”你今天吃八个鸡蛋了没。我们想一下，“八蛋”是不是小王，小王是不是“八蛋”。没错，引用相当于是给变量取外号，不会为这个外号另开辟内存空间来存储，而是共用一块空间。要是因给小王取了个外号就多变出一个叫“八蛋”的人那岂不荒唐了！！
俗话说的好，口说无凭。我说共用一块内存空间就共用一块内存空间吗？让我们来看看是不是真的如我所说。定义了一个变量a，给这个变量取了个别名，分别打出其地址来看看是不是同一块空间。
#include&lt;iostream&gt; using namespace std; int main() { int a = 10; int &amp;b = a;	//给a取了个别名叫b //打出两个地址 cout &lt;&lt; &#34;a的地址：&#34; &lt;&lt; &amp;a &lt;&lt; endl; cout &lt;&lt; &#34;b的地址：&#34; &lt;&lt; &amp;b &lt;&lt; endl; return 0; } 事实胜于雄辩，果然不是我在吹牛。他们确实是共用一块内存空间。
竟然是共用一块内存空间那不乏让我们联想到c语言中交换两个数的函数，需要进行传址，指针接收。如果用引用来取别名会不会更简单，更让人读懂。
//c语言的写法：指针 void swap(int*num1, int* num2) { int tmp = *num1; *num1 = *num2; *num2 = tmp; } //c&#43;&#43;的写法:引用 void swap(int &amp;num1, int &amp;num2) { int tmp = num1; num1 = num2; num2 = tmp; } 看到这里可能会惊叹到原来引用可以这么用的啊！但引用并不是可以肆意用的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/eb48773e5888dc35bdb9f0c9cbbfc325/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-29T10:58:05+08:00" />
<meta property="article:modified_time" content="2022-05-29T10:58:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">cpp——引用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%BC%95%E7%94%A8%E6%A6%82%E5%BF%B5-toc" style="margin-left:0px;"><a href="#%E5%BC%95%E7%94%A8%E6%A6%82%E5%BF%B5" rel="nofollow">引用概念</a></p> 
<p id="%E5%BC%95%E7%94%A8%E5%8E%9F%E5%88%99%EF%BC%9A%E5%AF%B9%E5%BC%95%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F%E4%B8%8D%E8%83%BD%E6%9D%83%E9%99%90%E6%94%BE%E5%A4%A7%EF%BC%8C%E5%8F%AA%E8%83%BD%E6%9D%83%E9%99%90%E7%BC%A9%E5%B0%8F%E3%80%82-toc" style="margin-left:0px;"><a href="#%E5%BC%95%E7%94%A8%E5%8E%9F%E5%88%99%EF%BC%9A%E5%AF%B9%E5%BC%95%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F%E4%B8%8D%E8%83%BD%E6%9D%83%E9%99%90%E6%94%BE%E5%A4%A7%EF%BC%8C%E5%8F%AA%E8%83%BD%E6%9D%83%E9%99%90%E7%BC%A9%E5%B0%8F%E3%80%82" rel="nofollow">引用原则：对引用的变量不能权限放大，只能权限缩小。</a></p> 
<p id="%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:0px;"><a href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow">使用场景</a></p> 
<p id="%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-toc" style="margin-left:0px;"><a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" rel="nofollow">注意事项</a></p> 
<p id="%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E5%8C%BA%E5%88%AB-toc" style="margin-left:0px;"><a href="#%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E5%8C%BA%E5%88%AB" rel="nofollow">引用和指针的区别</a></p> 
<p id="%E5%BC%95%E7%94%A8%E8%B7%9F%E6%8C%87%E9%92%88%E7%9A%84%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81%E5%AF%B9%E6%AF%94%EF%BC%9A%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84-toc" style="margin-left:40px;"><a href="#%E5%BC%95%E7%94%A8%E8%B7%9F%E6%8C%87%E9%92%88%E7%9A%84%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81%E5%AF%B9%E6%AF%94%EF%BC%9A%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84" rel="nofollow">引用跟指针的汇编代码对比：是一样的</a></p> 
<p id="%C2%A0%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E4%B8%8D%E5%90%8C%E7%82%B9%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E4%B8%8D%E5%90%8C%E7%82%B9%EF%BC%9A" rel="nofollow"> 引用和指针的不同点：</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E5%BC%95%E7%94%A8%E6%A6%82%E5%BF%B5">引用概念</h2> 
<p>        引用不是定义一个新变量，而是给已存在的变量取了一个别名，编译器不会为引用的变量开辟内存空间，它和它引用的变量共用同一块内存空间。</p> 
<p>        小王因经常健身每天吃八个鸡蛋，被小伙伴们调侃的取了个外号叫“八蛋”，又刚好姓王，“王八蛋”，小伙伴们每天都会问“八蛋”你今天吃八个鸡蛋了没。我们想一下，“八蛋”是不是小王，小王是不是“八蛋”。没错，引用相当于是给变量取外号，不会为这个外号另开辟内存空间来存储，而是共用一块空间。要是因给小王取了个外号就多变出一个叫“八蛋”的人那岂不荒唐了！！</p> 
<p>                  <img alt="" height="199" src="https://images2.imgbox.com/a8/08/QmNapRTt_o.png" width="496"></p> 
<p>        俗话说的好，口说无凭。我说共用一块内存空间就共用一块内存空间吗？让我们来看看是不是真的如我所说。定义了一个变量a，给这个变量取了个别名，分别打出其地址来看看是不是同一块空间。</p> 
<pre><code>#include&lt;iostream&gt;
using namespace std;

int main()
{
	int a = 10;
	int &amp;b = a;		//给a取了个别名叫b

	//打出两个地址
	cout &lt;&lt; "a的地址：" &lt;&lt; &amp;a &lt;&lt; endl;
	cout &lt;&lt; "b的地址：" &lt;&lt; &amp;b &lt;&lt; endl;

	return 0;
}</code></pre> 
<p>       <img alt="" height="223" src="https://images2.imgbox.com/cc/9e/xeAkbAEW_o.png" width="613"></p> 
<p>         事实胜于雄辩，果然不是我在吹牛。他们确实是共用一块内存空间。</p> 
<p>        竟然是共用一块内存空间那不乏让我们联想到c语言中交换两个数的函数，需要进行传址，指针接收。如果用引用来取别名会不会更简单，更让人读懂。</p> 
<pre><code>//c语言的写法：指针
void swap(int*num1, int* num2)
{
	int tmp = *num1;
	*num1 = *num2;
	*num2 = tmp;
}

//c++的写法:引用
void swap(int &amp;num1, int &amp;num2)
{
	int tmp = num1;
	num1 = num2;
	num2 = tmp;
}</code></pre> 
<p>        看到这里可能会惊叹到原来引用可以这么用的啊！但引用并不是可以肆意用的。</p> 
<p>        就比如下面这段代码加上const之后就出现报错了，这就需要了解一下引用原则了。</p> 
<p><img alt="" height="464" src="https://images2.imgbox.com/bd/ad/1P9nFoTO_o.png" width="756"></p> 
<h2 id="%E5%BC%95%E7%94%A8%E5%8E%9F%E5%88%99%EF%BC%9A%E5%AF%B9%E5%BC%95%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F%E4%B8%8D%E8%83%BD%E6%9D%83%E9%99%90%E6%94%BE%E5%A4%A7%EF%BC%8C%E5%8F%AA%E8%83%BD%E6%9D%83%E9%99%90%E7%BC%A9%E5%B0%8F%E3%80%82">引用原则：对引用的变量不能权限放大，只能权限缩小。</h2> 
<pre><code>#include&lt;iostream&gt;
using namespace std;

int main()
{
	const int a = 10;
	int &amp;b = a;   //错误
	const int &amp;b = a;  // 不变

	int i = 10;
	const int &amp;j = a;	//权限缩小

	return 0;
}</code></pre> 
<p>        为什么去引用经过const修饰的变量就会报错呢？其实不难理解。试想一下经过const修饰之后的变量相当于是常量了，变成只读，不可改写了。那要是去引用该常量之后利用别名去更改不就很有问题了吗，这就是权限的放大了，因此会报错。如果在引用的时候也用const修饰则不报错，权限不变。</p> 
<p>        那权限缩小呢？i 原本是一个变量，可以更改其值的，在引用它的时候加上const修饰，就不能通过它的别名 j 去更改其值，这就是权限的缩小。经过const修饰之后的引用，不可改写，是只读的状态。</p> 
<p>        比如我平时有一个很珍贵的物品，不舍得去触摸它，就看看。哪天有人对你这个东西又摸又摔的，那还了得岂不得动起手来，这就是去引用经过const修饰的变量，不能权限放大也得用const修饰 ；如果有一个东西我平时都不在意，又扔又摔的，别人借去用，就算不好好保管，你也可能不会生气，就跟一个没有用const修饰的变量一样，你去引用它不管有没有用const修饰都可以。</p> 
<h2 id="%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">使用场景</h2> 
<p>        1.做参数(输出型参数、减少拷贝，提高效率)</p> 
<pre><code>void Swap(int&amp; num1, int&amp; num2)
{
    int temp = num1;
    num1= num2;
    num2= temp;
}</code></pre> 
<p>       2.做返回值</p> 
<pre><code>int&amp; Count()
{
	static int n = 0;
		n++;

	return n;
}

int main()
{
	cout &lt;&lt; Count() &lt;&lt; endl; //1
	cout &lt;&lt; Count() &lt;&lt; endl; //2
	cout &lt;&lt; Count() &lt;&lt; endl; //3

	return 0;
}
</code></pre> 
<h2 id="%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">注意事项</h2> 
<p>        如果函数返回时，出了函数作用域，返回对象还未还给系统，则可以使用引用返回，如果已经还给系统了，则必须使用传值返回。具体看下面这段代码。</p> 
<pre><code>#include&lt;iostream&gt;
using namespace std;

int &amp; Add(int num1, int num2)
{
	int sum = num1 + num2;

	return sum;
}
int main()
{
	int&amp;ret = Add(1, 2);
	Add(5, 5);
	cout &lt;&lt; ret &lt;&lt; endl;

	return 0;
}</code></pre> 
<p>        <img alt="" height="361" src="https://images2.imgbox.com/8c/62/054xymP8_o.png" width="614"></p> 
<p>         本来应该打印的是3的啊，可为什么却打印出的是10呢。要知道函数调用是在栈帧里，执行完出了作用域就销毁。第一次执行Add函数返回sum的别名，但是出了作用域这块空间就归还给了系统，在第二次调用Add函数的时候覆盖了这块空间，sum是10。所以结果是10。</p> 
<h2 id="%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E5%8C%BA%E5%88%AB"><br> 引用和指针的区别</h2> 
<p>        在语法概念上，引用就是一个别名，没有独立空间，和引用的变脸共用一块空间。从底层看实际是有空间的，因为引用是按照指针方式来实现的。</p> 
<pre><code class="language-cpp">#include&lt;iostream&gt;
using namespace std;

int main()
{
	int a = 10;

	//从语法角度看：ra是a的别名，没有额外开空间
	//从底层角度看：引用跟指针是一样的方式实现
	int&amp; ra = a;
	ra = 20;

	//从语法角度看：p存储了a的地址，p开辟了4/8字节空间
	//从底层角度看：引用跟指针是一样的方式实现
	int *p = &amp;a;
	*p = 20;

	return 0;
}</code></pre> 
<h3 id="%E5%BC%95%E7%94%A8%E8%B7%9F%E6%8C%87%E9%92%88%E7%9A%84%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81%E5%AF%B9%E6%AF%94%EF%BC%9A%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84">引用跟指针的汇编代码对比：是一样的</h3> 
<p><img alt="" height="462" src="https://images2.imgbox.com/fe/ae/2X8rqPLA_o.png" width="808"></p> 
<h4 id="%C2%A0%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E4%B8%8D%E5%90%8C%E7%82%B9%EF%BC%9A"> 引用和指针的不同点：</h4> 
<blockquote> 
 <p>1. 引用在定义时必须初始化，指针没有要求。<br> 2. 引用在初始化时引用一个实体后，就不能再引用其他实体，而指针可以在任何时候指向任何一个同类型实体。<br> 3. 没有NULL引用，但有NULL指针。<br> 4. 在sizeof中含义不同：引用结果为引用类型的大小，但指针始终是地址空间所占字节个数(32位平台下占4个字节，64则8个字节)。<br> 5. 引用自加即引用的实体增加1，指针自加即指针向后偏移一个类型的大小。<br> 6. 有多级指针，但是没有多级引用。<br> 7. 访问实体方式不同，指针需要显式解引用，引用编译器自己处理。<br> 8. 引用比指针使用起来相对更安全。<br>  </p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a35ab7201f5f03c869dac1412adf3ae6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">软件设计师提纲&#43;复习资料整理（上午题）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0e8cb5017519283e28232b70abf57708/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mysql workbench 快捷键</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>