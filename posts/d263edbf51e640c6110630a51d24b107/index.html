<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>常用ADB命令整理已经ADB键盘输入 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="常用ADB命令整理已经ADB键盘输入" />
<meta property="og:description" content="我们在测试Android app过程中 需要经常更换安装包的操作 熟练使用ADB命令可以提升测试效率
* 查看设备
adb devices
ps这个命令是查看当前连接的设备, 连接到计算机的android设备或者模拟器将会列出显示
若有多台安卓设备，可以通过在adb后面加上 -s &lt;设备id&gt; 对指定设备进行装包、卸载等操作
*启动adb
adb start-server
*关闭adb
adb kill-server
* 安装软件
adb install &lt;apk文件路径&gt;
* 卸载软件 adb uninstall &lt;应用进程名&gt;
*卸载app但保留数据和缓存文件
adb uninstall -k&lt;package&gt;
*重新启动设别
adb reboot
*重启到bootloader，即刷机模式
adb reboot bootloader
*重启到recovery，即恢复模式
adb reboot recovery
*从电脑上发送文件到设备
adb push &lt;本地路径&gt; &lt;远程路径&gt;
ps: 用push命令可以把本机电脑上的文件或者文件夹复制到设备(手机)
*从设备上下载文件到电脑
adb pull &lt;远程路径&gt; &lt;本地路径&gt;
ps: 用pull命令可以把设备(手机)上的文件或者文件夹复制到本机电脑
*取得设备root权限
adb remount
*登录设备shell
adb shell
adb shell&lt;command命令&gt;
ps: adb shell 后面加的是linux系统操作指令，也即直接运行设备命令, 相当于执行远程命令" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/d263edbf51e640c6110630a51d24b107/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-23T13:56:08+08:00" />
<meta property="article:modified_time" content="2024-02-23T13:56:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">常用ADB命令整理已经ADB键盘输入</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p>我们在测试Android app过程中 需要经常更换安装包的操作 熟练使用ADB命令可以提升测试效率</p> 
<p>* 查看设备<br> adb devices<br> ps这个命令是查看当前连接的设备, 连接到计算机的android设备或者模拟器将会列出显示<br> 若有多台安卓设备，可以通过在adb后面加上 -s &lt;设备id&gt; 对指定设备进行装包、卸载等操作</p> 
<p>*启动adb<br> adb start-server</p> 
<p>*关闭adb<br> adb kill-server</p> 
<p>* 安装软件<br> adb install &lt;apk文件路径&gt;</p> 
<p>* 卸载软件 <br> adb uninstall &lt;应用进程名&gt;</p> 
<p>*卸载app但保留数据和缓存文件<br> adb uninstall -k&lt;package&gt;</p> 
<p>*重新启动设别<br> adb reboot</p> 
<p>*重启到bootloader，即刷机模式<br> adb reboot bootloader</p> 
<p>*重启到recovery，即恢复模式<br> adb reboot recovery</p> 
<p>*从电脑上发送文件到设备<br> adb push &lt;本地路径&gt; &lt;远程路径&gt;<br> ps: 用push命令可以把本机电脑上的文件或者文件夹复制到设备(手机)<br>  </p> 
<p>*从设备上下载文件到电脑<br> adb pull &lt;远程路径&gt; &lt;本地路径&gt;<br> ps: 用pull命令可以把设备(手机)上的文件或者文件夹复制到本机电脑</p> 
<p>*取得设备root权限<br> adb remount</p> 
<p>*登录设备shell<br> adb shell<br> adb shell&lt;command命令&gt;<br> ps: adb shell 后面加的是linux系统操作指令，也即直接运行设备命令, 相当于执行远程命令</p> 
<p>-查看手机产线版本<br> adb shell cat /sys/devices/mx_tsp/appid</p> 
<p>-查看手机运营商版本<br> adb shell cat /proc/lk_info/sw_version</p> 
<p>-查看手机是否加密<br> adb shell cat /proc/lk_info/sec(返回0则非加密。1则加密)</p> 
<p>-查看手机型号<br> adb shell getprop ro.build.product</p> 
<p>-安卓版本<br> adb shell getprop version.release</p> 
<p>-查看flyme版本<br> adb shell getprop ro.build.display.id</p> 
<p>*使用adb命令对手机进行截屏并拷贝到电脑<br> adb shell /system/bin/screencap -p /sdcard/screenshot.png（保存到手机）<br> adb pull /sdcard/screenshot.png d:/screenshot.png（拷贝到电脑）</p> 
<p>*录制设备屏幕<br> adb shell screenrecord--bugreport /sdcard/xxx.mp4</p> 
<p>*查看性能<br> adb shell dumpstate</p> 
<p>ps其输出内容主要包括以下内容</p> 
<p>a.设备基本信息<br> b.内存使用情况<br> c.CPU使用情况<br> d./proc文件夹中保存的系统各种实时信息，特别是内存使用方面的详细信息，如用procrank命令获取的按内存使用率情况排序的进程列表<br> e.内核的一些信息<br> f.进程列表<br> g.各种进程中的线程列表以及各线程的堆栈信息<br> h.各进程打开的文件<br> i.Logcat中的三个环状日志的内容，分别是系统主日志SYSTEM、事件日志EVENT和无线电日志RADIO<br> j.网络相关的信息<br> k.df命令输入的文件系统使用率信息<br> l.系统中安装的应用包信息<br> m.dumpsys命令输出的信息<br> n.正在运行的应用列表<br> o.正在运行的服务列表<br> p.正在运行的内容供应组件列表</p> 
<p>*输出当前servers信息<br> adb shell dumpsys <br> ps: 输出信息的开始部分就是所有运行的service<br> -查询到运行的system service后，就可以在dumpsys后面加上service的名字，查看指定的service信息。<br> adb shell dumpsys activity<br> adb shell dumpsys cpuinfo(CPU)<br> adb shell dumpsys batterystate(电池)<br> adb shell dumpsys window(分辨率)<br>  <br> *检测手机运行时间<br> adb shell uptime</p> 
<p>*查看logcat日志<br> adb logcat -v time-s tag &gt; xxx.log<br> ps: 其中-v time使输出的日志带时间信息，-s用于通过tag过滤日志（也可以通过管道grep过滤），&gt; 使保存到本地文件。若直接在终端查看日志，则不加。<br> adb logcat | grep &lt;正则表达式&gt;<br> ps: grep后为正则表达式<br> adb logcat | grep &lt;正则表达式&gt; | tee xxx.log<br> ps:使用 tee可以实现同时在终端输出且保存到文件</p> 
<p>*模拟系统按键<br> adb shell inputkeyevent &lt;数值&gt;</p> 
<p>具体数值对应的按键如下<br> 0 --&gt;  "KEYCODE_UNKNOWN"<br> 1 --&gt;  "KEYCODE_MENU"<br> 2 --&gt;  "KEYCODE_SOFT_RIGHT"<br> 3 --&gt;  "KEYCODE_HOME"<br> 4 --&gt;  "KEYCODE_BACK"<br> 5 --&gt;  "KEYCODE_CALL"<br> 6 --&gt;  "KEYCODE_ENDCALL"<br> 7 --&gt;  "KEYCODE_0"<br> 8 --&gt;  "KEYCODE_1"<br> 9 --&gt;  "KEYCODE_2"<br> 10 --&gt;  "KEYCODE_3"<br> 11 --&gt;  "KEYCODE_4"<br> 12 --&gt;  "KEYCODE_5"<br> 13 --&gt;  "KEYCODE_6"<br> 14 --&gt;  "KEYCODE_7"<br> 15 --&gt;  "KEYCODE_8"<br> 16 --&gt;  "KEYCODE_9"<br> 17 --&gt;  "KEYCODE_STAR"<br> 18 --&gt;  "KEYCODE_POUND"<br> 19 --&gt;  "KEYCODE_DPAD_UP"<br> 20 --&gt;  "KEYCODE_DPAD_DOWN"<br> 21 --&gt;  "KEYCODE_DPAD_LEFT"<br> 22 --&gt;  "KEYCODE_DPAD_RIGHT"<br> 23 --&gt;  "KEYCODE_DPAD_CENTER"<br> 24 --&gt;  "KEYCODE_VOLUME_UP"<br> 25 --&gt;  "KEYCODE_VOLUME_DOWN"<br> 26 --&gt;  "KEYCODE_POWER"<br> 27 --&gt;  "KEYCODE_CAMERA"<br> 28 --&gt;  "KEYCODE_CLEAR"<br> 29 --&gt;  "KEYCODE_A"<br> 30 --&gt;  "KEYCODE_B"<br> 31 --&gt;  "KEYCODE_C"<br> 32 --&gt;  "KEYCODE_D"<br> 33 --&gt;  "KEYCODE_E"<br> 34 --&gt;  "KEYCODE_F"<br> 35 --&gt;  "KEYCODE_G"<br> 36 --&gt;  "KEYCODE_H"<br> 37 --&gt;  "KEYCODE_I"<br> 38 --&gt;  "KEYCODE_J"<br> 39 --&gt;  "KEYCODE_K"<br> 40 --&gt;  "KEYCODE_L"<br> 41 --&gt;  "KEYCODE_M"<br> 42 --&gt;  "KEYCODE_N"<br> 43 --&gt;  "KEYCODE_O"<br> 44 --&gt;  "KEYCODE_P"<br> 45 --&gt;  "KEYCODE_Q"<br> 46 --&gt;  "KEYCODE_R"<br> 47 --&gt;  "KEYCODE_S"<br> 48 --&gt;  "KEYCODE_T"<br> 49 --&gt;  "KEYCODE_U"<br> 50 --&gt;  "KEYCODE_V"<br> 51 --&gt;  "KEYCODE_W"<br> 52 --&gt;  "KEYCODE_X"<br> 53 --&gt;  "KEYCODE_Y"<br> 54 --&gt;  "KEYCODE_Z"<br> 55 --&gt;  "KEYCODE_COMMA"<br> 56 --&gt;  "KEYCODE_PERIOD"<br> 57 --&gt;  "KEYCODE_ALT_LEFT"<br> 58 --&gt;  "KEYCODE_ALT_RIGHT"<br> 59 --&gt;  "KEYCODE_SHIFT_LEFT"<br> 60 --&gt;  "KEYCODE_SHIFT_RIGHT"<br> 61 --&gt;  "KEYCODE_TAB"<br> 62 --&gt;  "KEYCODE_SPACE"<br> 63 --&gt;  "KEYCODE_SYM"<br> 64 --&gt;  "KEYCODE_EXPLORER"<br> 65 --&gt;  "KEYCODE_ENVELOPE"<br> 66 --&gt;  "KEYCODE_ENTER"<br> 67 --&gt;  "KEYCODE_DEL"<br> 68 --&gt;  "KEYCODE_GRAVE"<br> 69 --&gt;  "KEYCODE_MINUS"<br> 70 --&gt;  "KEYCODE_EQUALS"<br> 71 --&gt;  "KEYCODE_LEFT_BRACKET"<br> 72 --&gt;  "KEYCODE_RIGHT_BRACKET"<br> 73 --&gt;  "KEYCODE_BACKSLASH"<br> 74 --&gt;  "KEYCODE_SEMICOLON"<br> 75 --&gt;  "KEYCODE_APOSTROPHE"<br> 76 --&gt;  "KEYCODE_SLASH"<br> 77 --&gt;  "KEYCODE_AT"<br> 78 --&gt;  "KEYCODE_NUM"<br> 79 --&gt;  "KEYCODE_HEADSETHOOK"<br> 80 --&gt;  "KEYCODE_FOCUS"<br> 81 --&gt;  "KEYCODE_PLUS"<br> 82 --&gt;  "KEYCODE_MENU"<br> 83 --&gt;  "KEYCODE_NOTIFICATION"<br> 84 --&gt;  "KEYCODE_SEARCH"<br> 85 --&gt;  "TAG_LAST_KEYCODE"<br> 所以，adb shell input keyevent 4 为返回系统主页，adb shell input keyevent 24 为增加音量</p> 
<p>*强制杀死进程<br> adb shell amforce-stop &lt;进程名&gt;</p> 
<p>*启动指定Activity<br> adb shell am start-n &lt;进程名&gt; /&lt;Acitvity&gt;</p> 
<p>*开关wifi<br> adb shell svc wifienable #打开wifi<br> adb shell svc wifidisable #关闭wifi</p> 
<p>*查看wifi密码<br> adb shell cat /data/misc/wifi/*.conf</p> 
<p>*获取序列号<br> adb get-serialno</p> 
<p>*查看设备cpu和内存占用情况<br> adb shell top</p> 
<p>*查看占用内存前6的app<br> adb shell top -m 6</p> 
<p>*刷新一次内存信息，然后返回<br> adb shell top -n 1</p> 
<p>*查询各进程内存使用情况<br> adb shell procrank</p> 
<p>*杀死一个进程<br> adb shell kill[pid]</p> 
<p>*查看进程列表<br> adb shell ps</p> 
<p>*查看指定进程状态<br> adb shell ps -x[PID]</p> 
<p>*查看后台services信息<br> adb shell servicelist</p> 
<p>*查看当前内存占用<br> adb shell cat /proc/meminfo</p> 
<p>*查看IO内存分区<br> adb shell cat /proc/iomem</p> 
<p>*重命名文件<br> adb shell rename &lt;原文件名&gt; &lt;修改后文件名&gt;</p> 
<p>*删除system/avi.apk<br> adb shell rm/system/avi.apk</p> 
<p>*删除文件夹及其下面所有文件<br> adb shell rm -r&lt;文件夹&gt;</p> 
<p>*移动文件<br> adb shell mv &lt;原文件路径&gt; &lt;移动后文件路径&gt;</p> 
<p>*设置文件权限<br> adb shell chmod 777 &lt;文件&gt;</p> 
<p>*新建文件夹<br> adb shell mkdir path/foldelname</p> 
<p>*查看文件内容<br> adb shell cat &lt;file&gt;</p> 
<p>*清除log缓存<br> adb logcat -c</p> 
<p>*查看bug报告<br> adb bugreport</p> 
<p>*获取设备名称<br> adb shell cat /system/build.prop</p> 
<p>*查看ADB帮助<br> adb help</p> 
<p>*跑monkey<br> adb shell monkey -v-p &lt;进程名&gt; &lt;次数&gt;</p> 
<p>*当adb 显示端口被占用，拒绝访问时的处理办法：<br> adb nodaemon server//查看哪个端口被占用</p> 
<p>netstat -ano |findstr "&lt;端口号&gt;" //提示占用该端口的进程（非0地址）<br> （下面步骤可省略，可通过任务管理器杀死）<br> tasklist /fi “PIDeq &lt;进程号&gt;”//通过pid查看所有进程<br> taskkill /pid &lt;进程号&gt; /f//杀死进程</p> 
<p><br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6f941e4c46de3f8638e3286338eb5777/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【TEE论文】硬件辅助安全全面调查：从边缘到云（综述）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9a83df9b2ed1f69f4e142fadf9ff5cb0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">adb-monkey命令</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>