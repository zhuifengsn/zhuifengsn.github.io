<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux内核配置和编译 - 追风少年的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux内核配置和编译" />
<meta property="og:description" content="一、引言： 本文档的内容大部份内容都是从网上收集而来，然后配合一些新的截 图（内核版本：V2.4.19）。在每一配置项后会有一个选择指南的部份，用来指导大家怎么样 根据自己的情况来做相应的选择；还有在每一个大项和文档的最后会有一个经验谈，它是一些高手们在应对问题和处理特有硬件时的一些经验（这个还得靠各位）。 文档最后会发到网上，到时会根据网友们的回复随时进行更新。 我们的目的是让我们有一个全面的、简单明了内核编译帮手。
#make mrproper -----删除不必要的文件和目录. #make config（基于文本的最为传统的配置界面，不推荐使用） #make menuconfig（基于文本选单的 配置界面，字符终端下推荐使用） #make xconfig（基于图形窗口模式的配置界面，Xwindow下推荐使用） #make oldconfig（如果只想在原来内核配置的基础上修改一些小地方，会省去不少麻 烦） 目的都是生成一个.config文件,这三个命令中，make xconfig的界面最为友好，如果你可以使用Xwindow，你就用这个好了，这个比较方便，也好设置。如果你不能使用Xwindow，那么就使用make menuconfig好了。界面虽然比上面一个差点，总比make config的要好多了。 选择相应的配置时，有三种选择，它们分别代表的含义如下： Y－-将该功能编译进内核 N－-不将该功能编译进内核 M－-将该功能编译成可以在需要时动态插入到内核中的模块 [注：] 请大家能够发表自己的经验和想法，使本文能够不断充实！但是最好 不要发一些从网cp过来的 没有经过自己实践的文章！ 二、配置内核
有了要编译配置的内核，先来介绍怎么样配置内核。具体的步骤分为一下几 步：
1.在开始配置内核之前，首先需要通过下面的命令清除所有的临时文件、中间件和配置文件。对于一个刚从网 上下载的内核来说，它肯定是干净的，这么做只会多此一举。但是这是一个良好习惯，而且不会有坏结果。
#make mrproper
2. 然后 要了解自己系统的硬件配置情况，比如CPU的类型、主办芯片、显卡和声卡的型号等。
3. 配置 内核选项，用到的命令是：
#make &lt;config_opt&gt;
用到的配置工具有：
◆ config 基于交互式的文本配置界面。每个问题以线形格式出现,并被一个一个地回答,而且一旦作出了回答就不能再修改 了。
◆ oldconfig 同config相似，但是使用原有的配置文件， 而且只会提问有关新内核特性的问题，对于内核升级很方便。
◆ menuconfig 一个文本模式、选单驱动的配置界面。
◆ xconfig 基于Tcl/Tk的X图形配置界面。
现在开始配置内核，使用的工具为menuconfig。在命令行模式下执行下面的命 令：
#make menuconfig
在闪过几行字之后就出现内核配置界面。
使用方向键在各选项间移动；使用“Enter”键进入下一层选单；每个选项上的 高亮字母是键盘快捷方式，使用它可以快速地到达想要设置的选单项。在括号中按“y”将这个项目编译进内核中，按“m”编译为模块，按“n”为不选择（按空格键也可在编译进 内核、编译为模块和不编译三者间进行切换），按“h”将显示这个选项的帮助信息，按“Esc”键将返回到上层选单。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhuifengsn.github.io/posts/d8f9bd1a9125b211f323aaf574c4ddd1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-02-03T09:04:51+08:00" />
<meta property="article:modified_time" content="2016-02-03T09:04:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="追风少年的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">追风少年的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux内核配置和编译</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p align="left" style="color:rgb(102,102,102)"><strong>一、引言：</strong> <br> 本文档的内容大部份内容都是从网上收集而来，然后配合一些新的截 图（内核版本：V2.4.19）。在每一配置项后会有一个选择指南的部份，用来指导大家怎么样 根据自己的情况来做相应的选择；还有在每一个大项和文档的最后会有一个经验谈，它是一些高手们在应对问题和处理特有硬件时的一些经验（这个还得靠各位）。 文档最后会发到网上，到时会根据网友们的回复随时进行更新。 <br> 我们的目的是让我们有一个全面的、简单明了内核编译帮手。</p> 
<p align="left" style="color:rgb(102,102,102)">#make mrproper -----删除不必要的文件和目录. <br> #make config（基于文本的最为传统的配置界面，不推荐使用） <br> #make menuconfig（基于文本选单的 配置界面，字符终端下推荐使用） <br> #make xconfig（基于图形窗口模式的配置界面，Xwindow下推荐使用） <br> #make oldconfig（如果只想在原来内核配置的基础上修改一些小地方，会省去不少麻 烦） <br> 目的都是生成一个.config文件,这三个命令中，make xconfig的界面最为友好，如果你可以使用Xwindow，你就用这个好了，这个比较方便，也好设置。如果你不能使用Xwindow，那么就使用make menuconfig好了。界面虽然比上面一个差点，总比make config的要好多了。 选择相应的配置时，有三种选择，它们分别代表的含义如下： <br> Y－-将该功能编译进内核 N－-不将该功能编译进内核 M－-将该功能编译成可以在需要时动态插入到内核中的模块 <br> <br> [注：] <br> 请大家能够发表自己的经验和想法，使本文能够不断充实！但是最好 不要发一些从网cp过来的 没有经过自己实践的文章！ <br> <br> <strong>二、配置内核</strong><br> <span style="color:black">有了要编译配置的内核，先来介绍怎么样配置内核。具体的步骤分为一下几 步：</span><span style="color:black"><br> 1.</span><span style="color:black">在开始配置内核之前，首先需要通过下面的命令清除所有的临时文件、中间件和配置文件。对于一个刚从网 上下载的内核来说，它肯定是干净的，这么做只会多此一举。但是这是一个良好习惯，而且不会有坏结果。</span></p> 
<div align="center" style="color:rgb(102,102,102)"> 
 <table width="400" border="1" cellpadding="0" cellspacing="0"><tbody><tr><td> <p align="left">#make mrproper</p> </td></tr></tbody></table> 
</div> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"><br> 2. </span><span style="color:black">然后 要了解自己系统的硬件配置情况，比如</span><span style="color:black">CPU</span><span style="color:black">的类型、主办芯片、显卡和声卡的型号等。</span><span style="color:black"><br> 3. </span><span style="color:black">配置 内核选项，用到的命令是：</span></p> 
<div align="center" style="color:rgb(102,102,102)"> 
 <table width="400" border="1" cellpadding="0" cellspacing="0"><tbody><tr><td> <p align="left">#make &lt;config_opt&gt;</p> </td></tr></tbody></table> 
</div> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black">用到的配置工具有：</span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"> config </span><span style="color:black">基于交互式的文本配置界面。每个问题以线形格式出现</span><span style="color:black">,</span><span style="color:black">并被一个一个地回答</span><span style="color:black">,</span><span style="color:black">而且一旦作出了回答就不能再修改 了。</span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"> oldconfig </span><span style="color:black">同</span><span style="color:black">config</span><span style="color:black">相似，但是使用原有的配置文件， 而且只会提问有关新内核特性的问题，对于内核升级很方便。</span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"> menuconfig </span><span style="color:black">一个文本模式、选单驱动的配置界面。</span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"> xconfig </span><span style="color:black">基于</span><span style="color:black">Tcl/Tk</span><span style="color:black">的</span><span style="color:black">X</span><span style="color:black">图形配置界面。</span><span style="color:black"><br> </span><span style="color:black">现在开始配置内核，使用的工具为</span><span style="color:black">menuconfig</span><span style="color:black">。在命令行模式下执行下面的命 令：</span></p> 
<div align="center" style="color:rgb(102,102,102)"> 
 <table width="400" border="1" cellpadding="0" cellspacing="0"><tbody><tr><td> <p align="left">#make menuconfig</p> </td></tr></tbody></table> 
</div> 
<p style="color:rgb(102,102,102)"><span style="color:black">在闪过几行字之后就出现</span><span style="color:black">内核配置界面</span><span style="color:black">。</span><br> <span style="color:black">使用方向键在各选项间移动；使用</span><span style="color:black">“Enter”</span><span style="color:black">键进入下一层选单；每个选项上的 高亮字母是键盘快捷方式，使用它可以快速地到达想要设置的选单项。在括号中按</span><span style="color:black">“y”</span><span style="color:black">将这个项目编译进内核中，按</span><span style="color:black">“m”</span><span style="color:black">编译为模块，按</span><span style="color:black">“n”</span><span style="color:black">为不选择（按空格键也可在编译进 内核、编译为模块和不编译三者间进行切换），按</span><span style="color:black">“h”</span><span style="color:black">将显示这个选项的帮助信息，按</span><span style="color:black">“Esc”</span><span style="color:black">键将返回到上层选单。</span><span style="color:black"><br>     </span><span style="color:black">注 意，如果</span><span style="color:black">“make menuconfig”</span><span style="color:black">命令失败，很可能是</span><span style="color:black">ncurses</span><span style="color:black">库没有安装。</span><br> 1.Code maturity level options：代码成熟等级。 <br> 1.1.prompt for development and/or incomplete code/drivers. <br> 如 果要试验现在仍处于实验阶段的功能，比如khttpd、IPv6等，就必须把该项选择为Y了；否则可以把它选择为N。在linux的世界里，每天都有许多人为它发展支持的driver和加强它的核心。但是有些driver还没进入稳定的阶段。但其作者很欢迎其他人去测试这些driver并提出一些 bugs。这个问题是说，有一些drive还在做测试中，问您是否要选择这些drive或支持的程序码。如果键入Y，往后将会出现一些还在测试中的东西给您做选择。（像Java的程序码和PCI bridge），否则就键入N。 <br> <br> 经验谈： <br> <br> 2.Loadable module support：对模 块的支持。 <br> 预 备知识： <br> 模 块就像你特意插入核心中的某些东西，如果办公室有一个小网络并且有时想用一下(但并不经常)，也许你想把网卡编译成一个模块。使用这个模块，机器必运行和存取/libs下的模块，意思是驱动程序(IDE,SCSI等但必须是NFS支持的网卡)，文件系统(通常是ext2但也可以是nfs)和核心类型(最好是elf)必须编译在内核并且不能是模块，模块只有核心引导时才起作用，驱 动程序(来网络)的存取，和文件系统安装。这些文件必须编译在核心内否则将能安装启 动分区。如果安装启动分区和网络，你需要网络系统文件，和己经编译的网卡。为什么要使用模块? 模块化使核心变的更简捷，它减少核心释放大量的受保护的空间。模块 的安装和卸载使用的空间是可重复分配利用的。如果你打开机器有90%以上的时间用到一个模块，编译它。运用这类模块是浪费内存的，原因是一旦你编译了模块它们同样将占用大量的内存， 核心需要一些代码来挂上模块。记住，核心在保护空间运行，但模块并不是。这么说，并不经常使用我的设备，把它编译成只支持ext2,ide和elf。而一直使用的网卡，把其它的编译成模块：如a.out, java, floppy, iso9960, msdos, minix, vfat,smb,nfs,smcultra(ethernetcard),serial,printer,sound,ppp,等等。它们许多只是在这或那用上那么几分钟。严格的说,这样做会使核心增大许多而降低它的执行速度。这时我们就可以把这些 可能会用的驱动程序编译成一个—个的模 块，在需要用的时候才用insmod这 个指令加入核心，不用的时候也能rmmod把 它从核心移除，或是用lsmod察 看目前所载入的模块。 <br> 2.1.Enable loadable module support. <br> 除非准备把所有需要的内容都编译到内核里面，否则该项应该是必选 的。 <br> 2.2.Set version information on all module symbols. <br> 通常，我们更新核心版本之后，模块耍重新的编译。这个选项使您不 必更新编译模块而能使用以前的模块。可以不选它。但如果您选y，则按照它的说明，您必须有genksyms这个程序（可用whereis指令查看有无此程序）。 <br> 2.3.Kernel module loader. <br> 让内核在启动时有自己装入必需模块的能力，建议选上。注意：在开 机就会 mount 上来的 partition 的 FS 、device driver 记得要 compiler 进kernel，不能把它弄成 modules。请不要夸张到为了完全模组化而忘了把ext2fs和IDE dirver compiler 进 kernel 里。 <br> <br> 经验谈： <br> a.可加载模块是指内核代码（kernel code）的一些片断，比如驱动程序，当编译内核的时候它们也被单独编 译。因此，这些代码不是内核的一部分，但是当你需要它的时候，它可以被加载并使用。通常的建议是如果可能，将内核代码编译成可加载模块，因为这样可以使内 核更小，而且更稳定。 警告！千万不要将文件系统（File System）部分的代码编译为可加载模块，如果你犯了这个错误，将文件系统 （File System）部分的代码编译为可加 载模块，结果将是内核无法读取它自己的文件系统。然后内核无法加载它自己的配置文件——一些很明显是在正常启动linux时所必需的东西。我很少使用可加载模块：我喜欢我的内核能够直接和硬件对话，但这只是我自己的偏好。 <br> <br> <br> 3.Processor type and features： 处理器类型和特色。 <br> <br> 3.1.Processor family. <br> 它会对每种CPU做最佳化，让它跑得快又好。一般来说，没有选择正确的CPU并不会有重大的影响（特别是选择386 ，这样编译出来的核心也许会比较小但它的速度可能就会变慢了）。 所以，最好要知道您的CPU是哪 一种。不过，如果您的gCC编译 器是2.7.0版以前的。那么只能选择386或是486。通常"/dev/cpu"选项更高级，多数用户并不需要选择它。 <br> 3.2.High Memory Support. <br> 只有当你的计算机有超过1GB内 存（不是磁盘空间）时才是必须的。 多数计算机的内存从64到512MB（并且拥有8到60GB硬盘空间），因此"High Memory Support"通常并不使用。 <br> 3.3.Math emulation. <br> 这项询 问是否需L1nux核 心模拟数学浮点运算器。如果有486Dx、AMD以及Pentium机器的话，这个选项就不必选了，因为它们都有内建的浮点运算器。 协处理器是在386时代 的宠儿，现在早已不用了。不过，对于有内建浮点运算器的人来说，选了这个选项并不会因此让内建的浮点运算器失效。但它会增大核心约45KB。 <br> 3.4.MTTR （memory type range register）support. <br> 这项允许在PCI或者AGP总线众进行更快速的通讯。 由于现在所有系统都将它们的显卡接在PCI或AGP总线上，你通常需要选择"MTRR"：无论如何，打开这个选项通常都是安全的——即使你的机器没有使用PCI或AGP总线的显卡 <br> 3.5.Symmetric multi-processing support. <br> 选项保证内核能够以最佳方式加载多处理器。除非有多个CPU，否则就不用选了。 <br> 3.6.Mutiquad NUMA system. <br> 通 常也需要多处理器，但它通常是关闭的。 <br> <br> 经验谈： <br> <br> 4.General setup：常规内核选项。 <br> 4.1. Networking support. <br> 通常每个人都会选择"Networking support"，因为你通常需要它，比如Internel。 linux有很重的Internet偏向，而且它在没有联网的情况下无法充分发挥优势。另外，许多其他的操作也网络支持——即使它们看上去跟网络没多大关系。内核在没有网络支持选项的情况 下甚至无法编译。简而言之：一定要打开"Networking support"选项。 <br> 4.2. PCI support. <br> 现在的所有系统都使用PCI总线，所以你应该选择相关选项。 <br> 4.3. PCI access mode. <br> PCI存取模式。可供选择的有BIOS、Direct和Any，选Any吧。 <br> 4.4. Support for hot-pluggabel devices. <br> 热插拔设备支持。支持的不是太好，可不选。 <br> 4.5. PCMCIA/CardBus support------&gt;PCMCIA/CardBus support. <br> 有PCMCIA就必选了。 <br> 4.6. System V IPC. <br> 如 果将来想编译dosemu（DOS模拟器），则这个选项一定要选，它是一个让各个程序（process）同步且能彼此交换数据的函数库和一些系统的调用，没它，很多的 程序将会无法执行。 <br> 4.7. BSD Process Accounting. <br> 4.8. Sysctl support. <br> 除非你的内存少的可怜，否则你应该启动这个功能，启用该选项后内 核会大8K，但能让你直接改变内核的参数而不必重新开机。以上三项是有关进 程处理/IPC调用的，主要就是System V和BSD两种风格。如果你不是使用BSD，就按照缺省吧。 <br> 4.9. Kernel core (/proc/kcore/) format. <br> 现在的linux发行版以ELF格式作为它们的"内核核心格式"。 <br> 4.10. Kernel support for A.OUT binaries. <br> a． out的执行文件是比较古老的可执行码，用在比较早期的UNIX系统上。linux最初也是使用这种码来执行程序，一直到ELF格式的可执行码出来后，有愈来俞多的程序码随着ELF格式的优点而变成了ELF的可执码。将来势必完全取代a．out格式的可执行码。但目前由于沿有许多的程序还没有取代过来，所以只 好选择Y，等将来有一天，全部的程序都变成了ELF的天下时，那时再disable掉。 <br> 4.11. Power Management support. <br> 电源管理支持。 <br> 4.12. Advanced Power Management BIOS support. <br> 高 级电源管理BIOS支 持。这通常是用在笔记本电脑上的东西，如果您有APM的BIOS， 支持省电的设备的（有电池的那种），那么您可以选上这项，一般人这一项是选n，以避免一些可能会发生的问题。后有8个选项。ATX主板需要这两个选项来自动关闭计算机（turn off the computer，包括关闭电源）。 <br> <br> 经验谈： <br> <br> <br> 5.Memory Technology Devices (MTD)：配置存储设备。 <br> 5.1. Memory Technology Devices (MTD) support. <br> 你 需要这个选项来使linux可 以读取闪存卡（Flash Card）之类的存储器。 闪存卡通常用于数码相机。通过这个选项，Linux可以读取闪存卡（从特殊的设备中，比如读卡机），并且将图片保存 为.jpg格式。除非你确定你需要它，否则不必打开它：如果你发现自己需 要，你可以在以后加上。 <br> 6.Parallel port support：配置并口。 <br> 6.1. Parallel port support. <br> 如果不打算使用，就别选了。 <br> <br> 7.Plug and Play configuration：即插即用支持。 <br> 7.1. Plug and Playsupport. <br> 几乎所有人都有即插即用设备，因此需要这个选项的支持。 打开这个选项使内核能够自动配置即插即用设备并且使它们在系统中能 够使用。 有时需要在BIOS中打开"Plug &amp; Play OS"，否则linux（当然Windows也一样）无法配置即插即用设备。 <br> 7.2. ISA Plug &amp; Play support. <br> 选项需要以即插即用模式运行的ISA卡（ISA Card）。 例如AWE64声卡。ISA总线（ISA bus）从来都没有即插即用标准，这增加了配置这些板卡的难度。在2.4.x内核之前的早些时候，linux用户在启动时必须呼叫（call）"isapnp"程序（isapnptools包，使用rpm qil isapnptools查看包含的所有 文件）。 "isapnp"读取"/etc/isapnp.conf"文件。这个文件包含不同板卡使用的所有端口，地址和中断。如果/etc/isapnp.conf中的信息不正确，或者"isapnp"没有被激活，即插即用设备就无法使用，甚至网卡、modem、声卡也无法工作。 打开"ISA Plug &amp; Play support"选项来代 替以前的工序：不再需要/etc/isapnp.conf文件。检测和配置工作都自动进行。 在SuSE 7.1中，在编译2.4.x内 核后我必须重命名/etc/isapnp.conf为"/etc/isapnp.conf.old"之类的名称。因为内核和 "isapnp"使用相同的资源，造成很惨的后果。 问题在于SuSE 7.1（以及更老的版本）在启动时自动激活"isapnp"，即使内核已经包括了对即插即用的必要支持。这只是对于老Linux系统而言，新的系统默认不使用"isapnp"。 <br> <br> 8.Block devices：块设备支持。 <br> 8.1. Normal PC floppy disk support. <br> 普通PC软盘支持。每个人都要使用软盘（floppy），所以这个选项要打开（或者，象我这样，作为一个可加载模块）。倘若 /etc/modules.conf或 者/etc/conf.modules文件在你的linux发行版中已经被适当配置了，当需要访问软盘的时候，内核会自动加 载必须的模块。其他的选项在你使用并口链接IDE存储设备的时候是必需的，但是它们通常是关闭的。"loopback device support"选项可能例外。在Linux下，刻录（burn）光盘之前你通常需要制作一个光盘镜像，在查看镜像文件的内容时 需要"loopback device"。 我选择了这个选项作为可加载模块。 <br> 8.2. XT hard disk support. <br> 支持XT的古董 硬盘，这是IBM电脑 时代的东西，如果您还有这种很旧很旧的硬盘。那么，您可以把它编进核心或是编成一个模块。大部分的人这个选项都是选择N的。 <br> 8.3. Loopback device support. <br> 这个选项的意思是说，可以将一个文件挂成一个文件系统。如果要烧光盘片的，那么您很有可能在把一个文件烧进去之前， 看看这个文件是否符合IS09660的文件系统的内容，是否符合您的需求。而且，可以对这个文件系统加以保护。不过，如果您想做到这点的话，您必须有最新的mount程序，版本是在2.5X版以上的。而且如果您希望对这个文件系统加上保护，则您必须有des.1.tar.gz 这个程序。注意：此处与网络无关。 <br> <br> 9.Multiple devices driver support：多设备驱动支持。 <br> 9.1. Multiple devices driver support. <br> 普通linux用户通常不需要RAID（廉价冗余磁盘阵列）或者LVM支持。 "RAID"的意思是系统使用两块或两块以上硬盘存储并行信息。当一块磁盘出 现问题的时候另一块可以继续工作，系统不停顿。 LVM让使用增加一块硬盘来扩展一个分区成为可能。。在实际应用中，这意味着你不必重新分区或将一个小的分区复制到一个大 分区中。 路径名也不会改变。 这可能会十分方便，但是普通用户并不需要它。 <br> <br> 10.Networking options：网络选项。 <br> 10.1. Packet Socket. <br> 选 择"Y"，你需要这个选项来与网卡进行通信而不需要在内核中实现网络协 议。 在这里我可以简捷一些：一般情况下，打开这个选项。 大多数选项是关闭的，除非你需要特殊的支持。 <br> 10.2. TCP/IP networking. <br> 选择"Y"，内 核将支持TCP/IP协 议。这个选项无论如何请您选择Y，即使没 有网络卡，或是没有连到网络上的设备，在linux上仍有所谓的 lookback设备而且有些程序需要这个选项。在说明文件中提到，如果您没有打开这个设定，则X－window system可能会有问题（回为它也需要 TCP／IP）。 <br> 10.3. IP：multicasting. <br> 所谓的 multicasting是群组广播，它是用在视频会议上的协议，如果想送一个网络封包 （网络的数据），同样的一份数据将送往十部机器上。您可以连续送十次给十台机器（点对点的传送），也可以同时送一次，然后让十台机器同时接收到。当然后者 比前者好，由于视频会议要求是最好每个人都能同时收到同一份信息，所以如果您有类似的需要，这个选项就要打开。同时您还必须去找相关的软件。 <br> <br> 经验谈： <br> a. 我选择了"Network packet filtering （replaces ipchains）"，因为我使用了SuSE的标准防火墙（Standard Firewall）。 防火墙可以保护你的机器不受来自外部Internet的攻击——至少当你正确配置了防火墙的时候是如此。内核级的防火墙保护显然是 十分优越的。为了使防火墙能够正常工作，SuSE linux需要对ipchains的兼容支持（Backwards Support）。 因此，我为我的SuSE Linux打开了这个选项。 如果你也在其他发行版中使用了防火墙，请参考它们的手册。你需要"Unix domain sockets"来进行网络链接，但也 可以使用其他的东西： XWindow要自动使用Unix sockets，所以如果没有打开这个选项，XWindow将无法启动。 通常这个选项是打开的。 "TCP/IP networking"选项包括了Internet和内部网络所需要的协议。 通常你会希望激活TCP/IP支 持。如果你不确定是否应该打开一个选项，参考一下帮助文档。 如果你还是不知道是否应该打开它，一般来说，就把它打开，然后通过试用来决定是否保留。将某些特定的选项编译为模块也是一个很好的办法。 <br> <br> 11.Telephony Support：电话支持。 <br> 11.1.linux Telephony Support. <br> 这个选项只有当你在计算机中使用电话卡的时候才有用，比如在Internet上打电话。 大多数普通用户没有电话卡，因此不需要这个选项。 <br> <br> <br> 12.ATA/IDE/MFM/RLL support：配置对ATA，IDE，MFM和RLL的支持。 <br> 12.1. ATA/IDE/MFM/RLL support. <br> 几乎每个人都需要这些协议，除非你的机器只有SCSI硬盘而没有其他任何类型的硬盘。 因此，大多数用户都应该把它打开。 点击它下面的那一栏将会出现一个有更详细配置选项的菜单。仔细填写 它们：它们极为重要！ <br> 12.2.Enhanced IDE/MFM/RLL disk/cdrom/tape/floppy support. <br> 选项是每个使用IDE/ATAPI界面的人都需要的。 包括硬盘，磁带机，ZIP盘，光驱（CDROM）和刻录机（CD-R（W））。 基本上现在的所有计算机（译者注：这里指的是PC）都使用IDE/ATAPI界面，因此这个选项必须打开。 <br> 12.3. Include IDE/ATA-2 DISK support. <br> 选项在支持硬盘的时候需要。 因此这个选项也必须打开，除非你的机器是一个纯粹的SCSI系统。 <br> 其它的就使用缺省的选项吧，如果你使用了比较特殊的设备，比如PCMCIA等，就到里面自己找相应的选项吧。 <br> <br> 经验谈： <br> a. 如果你有ATAPI CDROM的话，应该打开"include IDE/ATAPI CDROM support"选项。 ATAPI的CD-R（W）需要仿真为SCSI的才能被访问。SCSI仿真可以用来访问CDROM和CD-R（W）。如果你使用仿真SCSI的方式来访问CDROM，你将会遇到问题，比如当你挂载（mount）CD的时候出现错误信息（Error Message），或者使用CDROM播放CD唱片（Audio CD） 最好的办法是象图这样，将"include IDE/ATAPI CDROM support"和"SCSI emulation support"选项都打开。需要SCSI仿真的设备通常是CD-R（W），可以在/etc/lilo.conf中加入"append="hdd=ide-scsi":"行进行定义，这将在"配置lilo"中进行讨论。 因为我有一个使用ATAPI界面的内置ZIP驱动器，所以我把"include IDE/ATAPI FLOPPY support"选项打开。 如果你有软盘类的驱 动器（译者注：包括ZIP盘、LS-120等大容软驱，但不包括MO磁光盘）。大部分主板使用"PCI IDE"（译者注：就是指通过占用PCI总线带宽进行通信的IDE接口）对硬盘、CDROM和软驱进行访问，因此这个选项必须打开。同样的有两种开启DMA的可能性。 DMA使你的硬件直接访问内存，而不需要处理器的干预。 因此，正如你所希望的，IDE磁盘的访问速度会加快。 "sharing PCI IDE interrupts support"是关闭的，因为你通常不需要它。的确，某些IDE控制器允许和其他设备共享中断，比如网卡。不幸的是，共享IDE中断会使磁盘性能下降，因此通常你不需要共享中断，除非这是解决 硬件问题的唯一办法。 <br> <br> <br> 我的主板有一颗Pentium II CPU，而且使用的是Intel的芯片组，因此我希望能够对该芯片组提供特殊支持。 当你选择你自己的内核选项时，你应该看看图没有显示的其他芯片组。 <br> <br> 13.SCSI support：SCSI设备的支持。 <br> 13.1. SCSI support. <br> 如果你有 一块SCSI卡，你当然需要打开相关选项。这张截图只显示了当你为你的CD-R（W）选择"SCSI emulation support" <br> <br> 13.2. SCSI disk support. <br> 指硬盘而言，如果有SCSI硬盘，那么就要选这个选项。 <br> 13.3. SCSI tape support. <br> 指 磁带机而言，如果您有SCSI的 磁带机，那么就要选这个选项。 <br> 13.4. SCSI CDROM support. <br> 指CDROM，如果您有SCSI光驱，这一项一定要选。 <br> 13.5. SCSI generic support. <br> 指其他有关SCSI的 东西，也许您有一台SCSI的 扫描器或是烧录机，或是其他有关SCSI的 配备，您就要选这一项。而且，除此之外，您还必须准备关于这些配备的软件。 <br> 13.6. Probe a11 LUNs on each SCSI device. <br> 通常这个选 项大部分的人都不会选。我们举个例子来说，如果您的SCSI光驱是那种多片装的，就是一台光驱，但可以一次放好几片光盘片的那种。这种我们叫做Lun。I2O Device Support：配置I2O设备支持。 <br> 13.7. Verbose SCSI error reporting（kernel size+=12K）. <br> 如果认为您的SCSI硬件配备有些问题，想了解一下它出现的错误信息。那么您可以把这个选项选y，linux核心会告诉您有关于您的SCSI配备的问题（如果有的话）。不过，它会增加核心约 12KB左右。 <br> 13.8. SCSI low—level drivers. <br> 下面总共有接近30张的SCSI卡，您可以依需求做选择SCSI卡牌子。 <br> <br> 14.I2O Device Support：I20设备支持。 <br> 14.1. I2O Device Support. <br> 如果你有I2O界 面，你必须选择这个选项。大多数人没有，如果你也没有的话，可以直接将它关闭。 <br> 15.Network Device Support：网络设备支持。 <br> 15.1. Network Device Support. <br> 网络设备支持。上面选好协议了，现在该选设备了，可想而知，内容肯定多得很。还好还好，里面大概分类了，有ARCnet设备、Ethernet（10 or 100 Mbit）、Ethernet（1000Mbit）、Wireless LAN（non-hamradio）、Token Ring device、Wan interfaces、PCMCIA network device support几大类。 我用的是10/100M的以太网，看来只需要选则这个了。还是10/100M的以太网设备熟悉，内容虽然多，一眼就可以看到我所用的RealTeck RTL-8139 PCI Fast Ethernet Adapter support，为了免得麻烦，编译到内核里面好了，不选M了，选Y。耐心点，一般说来你都能找到自己用的网卡。如果没有，你只好自己 到厂商那里去要驱动了。 <br> 15.2. Dummy net driver support. <br> 如果有SLIP或PPP的传输协议，那么要把这一项打开。因为一来它不会让您的linux核心增大。二来，对某些应用程序来说，它可以让我们模拟出来的TCP／IP环境更像TCP／IP环境。如果您没有SLIP或PPP 协议，就不用打开了。#EQL（serial line load balancing） support------如果有两个MODEM，两条电话线而且用SLIP或PPP协议，可以用这个Driver以便让您的MODEM有两倍的速度。当然，在网络的另一端也要有同样的设备。 <br> 15.3. PPP（point－to－point）support. <br> 点对点协议，近年来，PPP协议已经慢慢的取代SLIP的规定了，原因是PPP协议可以获取相同的IP地址，而SLIP则一直在改变IP地址，在许多的方面，PPP都胜过SLIP协议。 <br> 15.4. SLIP（serial line） support. <br> 这是MODEM族常用的一种通讯协议，必须通过一台Server（叫ISP）获取一个IP地址，然后利用这个IP地址，可以模拟以太网络，使用有关TCP／IP的程序。 <br> 15.5.1. Ethernet（10 or 100Mbit）. <br> 如果您使用网络卡，那么这个选项一定要选y，否则以下对网络卡的选择将不会出现。或是您有网络卡，这时您同样 的也要选y。之后， 下面会列出许多网络卡让您选择。像我们平常用的都是NE2000相容卡。 <br> 15.5.2. EISA， VLB， PCI and on board controllers. <br> 选择网络卡，包括直接附在主机板上的那种。如果选择y，则底下会列出其他的网络卡让您做选择，这些卡对于一般人来说很少 会去用到。所以大部分的人这项是选N的。 <br> 15.5.3. Pocket and portable adaptors. <br> 通常用在可携式的电脑上，这类型的网络卡（口袋型的），由于体积很小在安装和取下方面很方便，因此笔记本相关电脑上 便常常采用这种网络卡。 <br> 15.5.4. Token Ring driver support. <br> Token Ring是 IBM电脑上的网络。它叫令牌环网络，和以太网络是很类似的东西。如果 您希望使用的Token Ring网络卡以便连接到这种网络，那么选Y，一般人都选N。 <br> 15.5.5. ARCnet support. <br> 这也是一种网络卡，通常一般人用不到，所以选n。如果您有这样的网络卡，请看Documentation／networking／arcnet．txt的说明。 <br> <br> 经验谈：这一般是新手难办的一个地方。 <br> a. 我从来都没有在没有网卡支持的情况下将linux内核编译成功过。 因此，你应该打开这个选项。 你还应该打开虚拟驱动（Dummy Driver），作为内核的一部分或者一个可加载模块。 当没有物理网卡的时候，Linux需要一块虚拟网卡（Dummy Network）。即使已经有了物理网卡，Linux仍然经常使用虚拟网卡。 在图所示的菜单中，你可以选择网络类型和网卡。注意，如果你想要通 过modem来访问Internet的话，你需要进行更多的设置： 你必须打开"PPP support for async serial ports"（用于COM端 口）或者"PPP support for sync tty ports"（用于通过诸如SyncLink adapter进行的高速连接）选项以 提供PPP支持。 如果你没有打开它们，内核将会告诉你PPP模块（PPP Module）不存在——即使你已经编译了，错误信息（Error Message）对于查找真正问题的所在几乎没有作用。你可以将它们都选上，这 样可以避免一些问题：如果内核需要它们，就会使用它们，如果不需要，就不用。 <br> 我的以太网卡是一块使用 3c509/3c529芯片的3COM百兆网卡。因为我并不需要与网络进行物理连接（我有网卡，但是我并不通过modem来访问网络），因此我将这个趋同编译成一个可加载模块，以便万一 要需要网卡的时候可以使用。 你当然需要选择与你机器的情况相符的网络类型和网卡。另外，你必 须使用诸如SuSE linux下的"yast2"之类的配置程序配置网络链接。 <br> <br> 16.Amateur Radio support：配置业余广播支持。 <br> 16.1. Amateur Radio support. <br> 如果你希望使用业余广播支持，应该打开这个选项，并且打开相应的驱动。 多数人不需要这个选项。 <br> <br> 17.IrDA（infrared）support：配置红外线（无线）通讯支持。 <br> 17.1. IrDA（infrared）support. <br> 如果你有无线设备，比如无线鼠标或无线键盘，你应该打开这个选 项。 多数桌面机器不需要这个选项。 <br> <br> 18.ISDN subsystem：配置ISDN。 <br> 18.1. ISDN support. <br> 如果使用ISDN上网，这个就必不可少了。ISDN（Integrated Services Digital Network），它的中文名称是综合数字服务网络，是一个利用电话线，把声音，影片信息以数字的方式传送的数字网络，它需要电话交换机设备有支持 ISDN，这通常需要电信局来做安装，对于在家工作的人来说，ISDN可能是最舒适最便宜的一种方式，因此有愈来愈多的人使用它。不 过，除非是公司，不然一般人很少会使用到ISDN的，所以这部分的选项大都选N。如果您选择Y，则下面会出现一些有关ISDN的 问题。如果需要用到ISDN， 可以去看看杂志的介绍。只要是有关网络的杂志应该都会有介绍。还需要启用Support synchronous PPP选项（参考PPP over ISDN）。 <br> <br> 19.Old CD-ROM drivers（not SCSI、not IDE）：配置老CDROM。 <br> 在486和386机器中，CDROM并不是通过硬盘IDE（ATAPI）控制器连接的，而是通过声卡或一块特殊的板卡。 使用这些老CDROM需要选择对应的驱动。 这个选项在现在的系统中显得多余。 <br> <br> 20.Input Core Support： <br> 这个选项提供了2.4.x内核中最重要的特性之一的USB支持。 Input core support是处于内核与一些USB设备之间的层（Layer）。如果你拥有其中一种USB设备，你必须打开"input core support"选项。 现在所有的主板都有USB接口，所以，原则上你应该打开它。 <br> <br> 21.Character devices：字符设备。 <br> 21.1. Virtual terminal. <br> 选择"y"，内 核将支持虚拟终端。 <br> 21.2. Support for console on virtual terminal. <br> 选择"y"，内核可将一个虚拟终端用作系统控制台。 <br> 21.3. Standard/generic (dumb) serial support. <br> 选择"y"，内核将支持串行口。标准序列接口的选定。如果您是用serial的鼠标（大部分的人都是用这个），或是MODEM的话，则这一项一定要选。大部分的人这一项都选y。 <br> 21.4. Support for console on serial port. <br> 选择"y"，内 核可将一个串行口用作系统控制台。 <br> 21.5. I2C support. <br> I2C是Philips极力推动的微控制应用中使用的低速串行总线协议。如果你要选择下面的Video For linux，该项必选。 <br> 21.6. Mice. <br> 鼠标。现在可以支 持总线、串口、PS/2、C&amp;T 82C710 mouse port、PC110 digitizer pad------根据需要选择。非 串行的鼠标，支持象PS/2。 看一看你鼠标的键。许多双键鼠标是PS/2， 即使它们的连接看起来象串行的。 <br> 21.6.1. PS/2 mouse (aka "auxiliary device") support. <br> 如果用户使用的是PS/2鼠标，则该选项应该选择"y"。 <br> 21.7. Joysticks. <br> 手柄。 即使在linux下把手柄驱动起来意义也不是太大，游戏太少了。 <br> 21.8. Watchdog Cards. <br> 虽然称为Cards， 这个可以用纯软件来实现，当然也有硬件的。如果你把这个选中，那么就会在你的/dev下创建一个名为watchdog的文件，它可以记录你的系统的运行情况，一直到系统重新启动的1分钟左右。有了这个文件，你就可以恢复系统到重启前的状态了。 <br> <br> 经验谈： <br> a. <br> 最上面的选项（"virtual terminal"）允许在XWindow中打开xterm和使用字符界面登录。 通常这个选项是打开的。第二个选项（"support for console on virtual terminal"）告诉内核将诸如模块错误、内核错误启动信息之类的警告信息发送到什么地方，在XWindow下，通常设置一个专门的窗口来接收内核信息，但是在字符界面下， 这些信息通常被发送到第一个虚拟终端（Virtual Terminal）（CTRL+ALT+F1）。 将这个选项打开。 你还可以选择将信息发送到串口（Serial Port）设备，比如打印机或其他的终端（第四个选项）。 如果将信息发送到打印机，你还必须使用选项三激活串口。同样，如果 你使用串口鼠标（Serial Mouse），你也必须激活串口。 再说一遍，选项三（"standard/generic (8250/16550 and compatible UARTs) serial support"）通常是打开的。在我 的系统中，我将它编译为一个可加载模块。原因是在启动的时候SuSE老抱怨"serial support"丢失，而如果确定模块的确存在，将其编译为可加载模块是避免上述抱 怨的的好办法。 配置字符型设备是极为重要的工作。如果你的配置不正确，你有可能 得到一个根本不能工作的系统。 <br> 如 果你想使用远程使用自己机器上的xterm， 比如通过telnet或 者ssh，你必须打开"unix98 PTY support"选项。 桌面系统看上去似乎不需要这个选项，但是许多后台进程需要使用这个 选项。因此，无论如何，将它打开是个好主意，至少可以避免启动时显示错误信息（至少SuSE是这样）。 所有拥有并口打印机的人当然需要"Parallel printer support"。 不过，并不是所有人都需要并口：USB打印机就不需要。 内核信息可以通过打开"Support for console on line printer"选项传送到并口：通常，你并不需要它。 如果你有某些设备 需要占用并口，你需要"support for user-space parallel port device drivers"选项，但是通常不必。 同样，你通常不需要"I2C support"选项：这是视频处理卡所需要的，但是如果你发现你需要它，你通常 可以在以后加入到内核中——只要你 觉得内核运行得好。如果你使用鼠标和游戏杆，你需要打开相应的支持，但是并不是所有鼠标都使用这个驱动。 现在的CD-R（W）使需要"QIC-02 Tape support"的磁带机（Tape Drives）大量闲置，因此这个选项通常是关闭的。 <br> <br> 如果你使用串口鼠标，你根本不需要这个选项的任何项目，但是所有 其他类型的鼠标则需要在这里进行参数配置。 如果你使用最初的总 线鼠标（ORIGINAL Bus Mouse）你需要打开最上面的选项。 现在的许多计算机使用另外一种鼠标，通常（而且是错误的）称作"busmouse"或者"PS/2鼠标"。这些鼠标通常连接到/dev/aux，并且插在一个与键盘相同的小接口中。 通常，这种鼠标通过键盘来连接到计算机。要让这些鼠标正常工作，你 必须打开如图29所示的 选项，"mouse support (not serial and bus mice)"和"PS/2 mouse (aka "auxiliary device" support)"。这些是上面没有讨论的内核选项。它们通常是关闭的。 "Ftape, the floppy tape device driver"选项需要对连接到软驱控制器的磁带机的支持。甚至即使你有一个那样的磁带机，这个选项都不是必须的，至少不是首要 的。 其他选项需要3D显卡。 如果你有一块连接到AGP总线（AGP Bus）的显卡，你需要打开AGP支持，还需要相应的驱动（在/dev/agpgart（AGP支持））。注意，你可以编译一个不包含这些选项，但是能够正常工 作的内核，但那没必要！ 如果没有这些选项，XWindow 4.0或者更高版本（被现在的多数发行版使用）将无法工作。 我的机器有一块AGP显卡，nVidia TNT2，但是内核的相应模块并不支持这块显卡（nVidia拒绝透露开发驱动所必须的技术细节）。 很不幸，打开AGP支持对于我来说没有多大意义。虽然有这个问题，我仍然可以在不需 要内核驱动的情况下使用XWindow 4.0。 "Direct rendering support"是为XWindow 4.0提供的图形加速选项。 要想使用这个选项，你的显卡必须能够被支持，而且你必须使用XFree86 4.0及以上版本。 另外，你还需要打开"AGP support"选项。 你可以编译一个不包含这些选项的内核，它照样可以正常工作。 <br> <br> 22.Multimedia Devices：配置多媒体设备。 <br> 如果你有一块视频处理卡或者广播卡，需要打开这个选项。 跟前面一样，这个选项不是必需的。 <br> <br> 23.File System：配置文件系统。 <br> 23.1. Kernel automounter support. <br> 选择"y"，内核将提供对automounter的支持，使系统在启动时自动 mount远程文件系统。 <br> 23.2. DOS FAT fs. <br> DOS FAT文件格式的支持，可以支持FAT16、FAT32。这个选项是DOS的文件系统，如果您没有选y，则下面的MSDOS，VFAT，umsdos将不会出现。 <br> 23.3. MSDOS fs support. <br> 如果你想要在 linux 下使用你硬盘中的 MS-DOS 分割区，或是想将用 MS-DOS 格式化的磁盘挂进来的话，回答y 。 <br> 23.4. FAT（Windows95） fs support. <br> windows95所支持的文件系统，是我们常说的vfat文件系统，如果您的系统中装有windows95，那么选择这个文件系统将对以让您看到windows95的长文件名。 <br> 23.5. umsdos： UNIX like fs on top of std MSDOS FAT fs. <br> 如果把linux装进DOS的一个目录下那么您则要选择这一项。不建议这样做，因为如此一来，就不能看到长文件名了。而且效率上不是很好。 <br> 23.6. Quota support. <br> Quota可以限制每个用户可以使用的硬盘空间的上限，在多用户共同使用一台主机的情况中十分有效。 <br> 23.7. /proc file system support. <br> 这是最 slick 的文件系统之一。它不是你硬盘分割区里的任何东西，不占用硬盘的空间，而是核心与程序之间的文件系统介面，它表示的 只是内存里头的状况和各个程序执行的情形，它也记录了您硬件上配备。。许多程序工具（像″ps ″）都会用到它。如果已经将它安装好了，有空不妨试试看″cat /proc/meminfo ″或者是″ cat /proc/devices ″。有些 shells ，像是 rc ，会用 proc/self/fd（在其它系统上为 /dev/fd ）来处理输出入。几乎可以确定你在这里得要回答y ，有许多重要的 linux标准工具是靠它来运作的，否则有些指令会出问题。 <br> 23.8. ISO 9660 CD-ROM file system support. <br> 光盘使用的就是ISO 9660的文件格式。 <br> 23.9. NTFS file system support. <br> ntfs是NT使用的文件格式。 <br> 23.10. UFS filesystem support. <br> 这是BSD，SunoS，FreeBSD，NetBSD或Nextstep所使用的文件系统。如果您在电脑上有这些操作系统的话，那么可以 选这一项。否则一般人都选n。 <br> <br> 23.11. Network File Systems：网络文件系统。 <br> 23.11.1. NFS file system support. <br> 如果你在网络环境下而且想要分享档案，回答 y 。如果希望挂上别的电脑的文件系统，那么这个选项一定要选进去。 它可以让您利用网络把别人的硬盘当成自己的来使用（把它变成一个目录）。对于一般人来说，这个选项是选y。 <br> 23.11.2. SMB filesystem support. <br> 这个文件系 统让您可以挂上windows95或windowsNT的文件系统，也就是您也可以抓到在windows下，网上邻居上的电脑。 <br> 23.12. Partition Types. <br> 分区类型，该选项支持一些不太常用的分区类型，用户如果需要，在 相应的选项上选择"y"即 可。 <br> 23.13. Native Language Support：本地语言支持。 <br> <br> 经验谈： <br> a. <br> 在这里，你可以指定linux能够访问的文件系统。或许你希望制作一个能够访问Windows分区和Windows软盘的内核，但是你必须保证内核可以访问Linux自己的ext2文件系统，或者是更新的 ReiserFS文件系统。如果你没有这样做，Linux会无法启动，因为内核无法读取它自己的启动盘。要想访问DOS/Windows软盘和分区，你需要打开"DOS FAT support"选项：但是要想访问Windows NT/2000的分区，你需要另外一个 只读（Read-only）驱动，这将在后面进行选择。要想读写DOS/Windows分区和软盘，你需要打开"MSDOS fs support"选项（注意，"DOS FAT support"并不提供读写功能）。 事实上，每个人都希望这样，因此通常这个选项是开着的。 "VFAT"需要Windows95/98的长文件名支持。我的机器是一个可以通过lilo启动Windows 98和Linux的双重启动系统（dual boot system）。 因此，我需要激活"VFAT"。 你需要加入对ISO 9660的支持来读取标准格式的光盘（CD）。 "Joliet extensions"选项允许在ISO 9660标准中使用长文件名。多数人都希望能够读取现在的光盘，因此这些 选项通常也是打开的。 图详细讲述了一些附加选项，其中包括包括Linux的ext2文件系统。 <br> <br> /proc 目录中的文件包含了关于系统状态的许多重要信息，比如那些中断正 在使用。 一般来说，你应该把这个选项（"/proc file system support"）打 开。。 "Second extended fs support"选项针对linux的标准文件系统（Ext2 FS）你必须打开这个选项，并且编译进内核（不是作为可加载模块）！图32和33没有显示"ReiserFS"选项，它也可以在这里打开：Ext2文件系统的继承者，ReiserFS能够更好的对付由于断电或者类似情况而带来的对文件系统的破坏。 目前ReiserFS仍然处于开发阶段，因此被标志为试验代码。即使是这样，多数发行 版现在都已经支持ReiserFS，但是，虽然ReiserFS被认为会在将来取代Ext2， 我现在并不推荐将它作为所有分区的文件系统。 如果你（在Windows下）使用一个叫"packetCD"的将光盘虚拟成低速磁盘的软件，你需要打开"UDF file system support"选项 这对在与其他PC交换数据时十分方便。在Linux下通过将这些被封包的光盘挂载（mount）为UDF文件系统也可以进行读取，比如使用命令"mount -t udf /dev/scd0 /cdrom"。 这一部分还包括"Network file systems"、"partition types"和"Native language support"选 项。 你不必选择"Network file systems"，除非你的计算机处于 一个需要使用"Network file systems"选项的大型网络之中，"SMB file support"选项也是一样，对于普通的单机（Standalone Computer）来说，并不需要这些 选项。 "Partition Types"选 项是一个很高级但对于有效的使用Linux内 核来说并不必要的选项。 最好是关闭它。 <br> b.不知道需要那些文件系统怎末办? <br> 键入″ mount ″它看起来会像这样： <br> sunlyy% mount <br> /dev/hda1 on / type ext2 (defaults) <br> /dev/hda3 on /usr type ext2 (defaults) <br> none on /proc type proc (defaults) <br> /dev/fd0 on /mnt type msdos (defaults) <br> 仔细看看每一行；在" type "后面的那个字就是文件系统的格式。在这个例子中，我的 / 和 /usr 分割区是 second extended 格式，我使用 /proc ，而且挂有一张以msdos (bleah) 为文件系统格式的磁片。如果你有使用 /proc ，可以试试″cat /proc/filesystems ″。 它会给你一份目前使用的核心所支援的文件系统列表。 <br> <br> 24.Console drivers：配置控制台驱动。 <br> 24.1. VGA text console. <br> 选 项在VGA模式下启动字符模式。 多数人都需要它，因此这个玄学爱你跟通常是开着的。 只有一些386计算机没有VGA兼容显卡，选择这个选项对于现在的多数计算机来说都没有问题。 <br> 24.2. video mode selection support. <br> 使启动的时候能够使用字符模式的分辨率。 如果你希望一行能够有更多的字的话，这通常会给你提供方便，不过通常你不必打开它们。 下面两个选项是试验性质的，我建议你关闭它们。 <br> 25.Sound sound：声卡驱动。 <br> 在这部分，你可以配置声卡。 如果你的linux发行版使用ALSA的声卡驱动（比如SuSE 6.3及以上版本），将"sound card support"作为可加载模块就足够 了。 ALSA驱动将会在待会儿被编译并连 接进来（见"SuSE和ALSA声卡驱动"）。如果你的发行版使用的是内核的标准声卡驱动，你必须正确选择你 使用的声卡。 事实上，这里列出了所有牌子的声卡，因此，理论上选择声卡不成问 题。如果你的声卡在你的发行版的标准内核下工作的很正常，你也可以使用配置程序（比如SuSE的"yast2"）来找出你的声卡使用什么驱动。请放心，声卡并不是十分关键的：如 果某些地方出错，你将会失去音效，但是内核仍然可以正常工作。 <br> 26.USB support：配置USB支持。 <br> 27.kernel hacking：配置"kernel hacking"选项.这很简单：不要打开！</p> 
<p align="left" style="color:rgb(102,102,102)"><strong><span style="color:black">三、</span><span style="color:black">编译内核</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span></strong><span style="color:black"><br> </span><span style="color:black"><span style="font-family:Times New Roman">    </span></span><span style="color:black">编译内核的软件环境是</span><span style="color:black"><span style="font-family:Times New Roman">kbuild</span></span><span style="color:black">系统，它泛指构建一个完整并能够运行的</span><span style="color:black"><span style="font-family:Times New Roman">Linux</span></span><span style="color:black">内核所需要的一切资源。这些资源包括构建程序、脚本、中间件、配置文件和</span><span style="color:black"><span style="font-family:Times New Roman">Makefile</span></span><span style="color:black">。现在就讲解内核的编译过程，具体步骤如下：</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="font-family:Times New Roman"><span style="color:black">    </span><span style="color:black">1.“make dep”</span></span><span style="color:black">或</span><span style="color:black"><span style="font-family:Times New Roman">“make depend” </span></span><span style="color:black"><br> </span><span style="font-family:Times New Roman"><span style="color:black">   </span><span style="color:black">kbuild</span></span><span style="color:black">调用中间件</span><span style="color:black"><span style="font-family:Times New Roman">scripts/mkdep</span></span><span style="color:black">来生成描述与相关核心文件形成依赖关系的</span><span style="color:black"><span style="font-family:Times New Roman">.h</span></span><span style="color:black">文件（绝大多数）列表。这个列表保存在</span><span style="color:black"><span style="font-family:Times New Roman">.depend</span></span><span style="color:black">中。用户即使不执行这一步，</span><span style="color:black"><span style="font-family:Times New Roman">kbuild</span></span><span style="color:black">也会自动执行的。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="font-family:Times New Roman"><span style="color:black">    </span><span style="color:black">2. </span></span><span style="color:black">构建内核镜像的命令是：</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> <br> <br> </span></p> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"> </span></p> 
<div align="center" style="color:rgb(102,102,102)"> 
 <table width="400" border="1" cellpadding="0" cellspacing="0"><tbody><tr><td> <p align="left">#make &lt;boot_opt&gt;</p> </td></tr></tbody></table> 
</div> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"><br> </span><span style="color:black">其参数如下：</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> zImage </span></span><span style="color:black">构建小内核镜像。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> compressed </span></span><span style="color:black">同</span><span style="color:black"><span style="font-family:Times New Roman">zImage</span></span><span style="color:black">。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> bzImage </span></span><span style="color:black">构建大内核镜像。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> zdisk </span></span><span style="color:black">使用</span><span style="color:black"><span style="font-family:Times New Roman">zImage</span></span><span style="color:black">生成一张引导软盘。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> bzdisk </span></span><span style="color:black">使用</span><span style="color:black"><span style="font-family:Times New Roman">bzImage</span></span><span style="color:black">生成一张引导软盘。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> zlilo </span></span><span style="color:black">使用</span><span style="color:black"><span style="font-family:Times New Roman">lilo</span></span><span style="color:black">作为</span><span style="color:black"><span style="font-family:Times New Roman">zImage</span></span><span style="color:black">的引导器。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> bzlilo </span></span><span style="color:black">使用</span><span style="color:black"><span style="font-family:Times New Roman">lilo</span></span><span style="color:black">作为</span><span style="color:black"><span style="font-family:Times New Roman">bzImage</span></span><span style="color:black">的引导器。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">根据实际情况选择内核境象类型， 大多数情况下选择</span><span style="color:black"><span style="font-family:Times New Roman">“make bzImage”</span></span><span style="color:black">。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black"><span style="font-family:Times New Roman">2.6.0</span></span><span style="color:black">内核的</span><span style="color:black"><span style="font-family:Times New Roman">kbuild</span></span><span style="color:black">系统与</span><span style="color:black"><span style="font-family:Times New Roman">2.4.23</span></span><span style="color:black">比起来有一定的差异，但是绝大多 数功能都是相似的。只是构建内核镜像的命令参数增加了一下几项：</span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> fdimage </span></span><span style="color:black">制作一张</span><span style="color:black"><span style="font-family:Times New Roman">1.44M</span></span><span style="color:black">的引导软盘</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> fdimage144 </span></span><span style="color:black">同</span><span style="color:black"><span style="font-family:Times New Roman">fdimage </span></span><span style="color:black"><br> </span><span style="color:black">◆</span><span style="color:black"><span style="font-family:Times New Roman"> fdimage288 </span></span><span style="color:black">制作一张</span><span style="color:black"><span style="font-family:Times New Roman">2.88M</span></span><span style="color:black">的引导软盘</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black"><span style="font-family:Times New Roman">3.</span></span><span style="color:black">通过下面的命令安装内核：</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> <br> <br> </span></p> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"> </span></p> 
<div align="center" style="color:rgb(102,102,102)"> 
 <table width="400" border="1" cellpadding="0" cellspacing="0"><tbody><tr><td> <p align="left">#make install</p> </td></tr></tbody></table> 
</div> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"><br> </span><span style="color:black">如果用户使用</span><span style="color:black"><span style="font-family:Times New Roman">LILO</span></span><span style="color:black">，它会把内核镜像放到正确的位置并且修改</span><span style="color:black"><span style="font-family:Times New Roman">LILO</span></span><span style="color:black">的配置，那么用户可以免去手动操 作。如果使用别的引导器（例如</span><span style="color:black"><span style="font-family:Times New Roman">GRUB</span></span><span style="color:black">），那么不使用这个命令。因为修改</span><span style="color:black"><span style="font-family:Times New Roman">grub.conf</span></span><span style="color:black">需要交互式的手动编辑，自动修改可能会带来一些不可预计的错误，所以编译完毕后用户需要进行一些手动 操作（见下面第</span><span style="color:black"><span style="font-family:Times New Roman">6</span></span><span style="color:black">步）。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">在</span><span style="color:black"><span style="font-family:Times New Roman">2.6.0</span></span><span style="color:black">中</span><span style="color:black"><span style="font-family:Times New Roman">“make install”</span></span><span style="color:black">更加智能，它会依此将</span><span style="color:black"><span style="font-family:Times New Roman">arch/i386/boot/bzImage</span></span><span style="color:black">、</span><span style="color:black"><span style="font-family:Times New Roman">System.map</span></span><span style="color:black">复制为</span><span style="color:black"><span style="font-family:Times New Roman">/boot/vmlinuz-2.6.0</span></span><span style="color:black">，</span><span style="color:black"><span style="font-family:Times New Roman">/boot/System.map-2.6.0</span></span><span style="color:black">，并创建</span><span style="color:black"><span style="font-family:Times New Roman">vmlinuz-2.6.0</span></span><span style="color:black">的软链接</span><span style="color:black"><span style="font-family:Times New Roman">vmlinuz</span></span><span style="color:black">和</span><span style="color:black"><span style="font-family:Times New Roman">System.map-2.6.0</span></span><span style="color:black">的软链接</span><span style="color:black"><span style="font-family:Times New Roman">System.map</span></span><span style="color:black">。</span><span style="color:black"><span style="font-family:Times New Roman">kbuild</span></span><span style="color:black">还会自动创建</span><span style="color:black"><span style="font-family:Times New Roman">/boot/initrd-2.6.0.img</span></span><span style="color:black">，并且修改</span><span style="color:black"><span style="font-family:Times New Roman">grub.conf</span></span><span style="color:black">，以前这一切都要手动才能完成。引用别人的话来说：</span><span style="color:black"><span style="font-family:Times New Roman">“2.4.x</span></span><span style="color:black">还是半自动的，而</span><span style="color:black"><span style="font-family:Times New Roman">2.6.x</span></span><span style="color:black">是全自动的。</span><span style="color:black"><span style="font-family:Times New Roman">” </span></span><span style="color:black"><br> </span><span style="color:black"><span style="font-family:Times New Roman">4. </span></span><span style="color:black">用下条命令编译所有被配置为模块 的内核组件：</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> <br> <br> </span></p> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"> </span></p> 
<div align="center" style="color:rgb(102,102,102)"> 
 <table width="400" border="1" cellpadding="0" cellspacing="0"><tbody><tr><td> <p align="left">#make modules</p> </td></tr></tbody></table> 
</div> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"><br> </span><span style="color:black"><span style="font-family:Times New Roman">5. </span></span><span style="color:black">把所有编译好的内核模块按照功能拷贝到</span><span style="color:black"><span style="font-family:Times New Roman">/lib/modules/2.4.23/</span></span><span style="color:black">目录下，使用下面命令：</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> <br> <br> </span></p> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"> </span></p> 
<div align="center" style="color:rgb(102,102,102)"> 
 <table width="400" border="1" cellpadding="0" cellspacing="0"><tbody><tr><td> <p align="left">#make modules_install</p> </td></tr></tbody></table> 
</div> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"><br> </span><span style="color:black"><span style="font-family:Times New Roman">6. </span></span><span style="color:black">手动操作将内核境像文件（</span><span style="color:black"><span style="font-family:Times New Roman">/linux/arch/i386/boot/bzImage</span></span><span style="color:black">）拷贝到</span><span style="color:black"><span style="font-family:Times New Roman">/boot</span></span><span style="color:black">分区，然后修改</span><span style="color:black"><span style="font-family:Times New Roman">LILO</span></span><span style="color:black">或</span><span style="color:black"><span style="font-family:Times New Roman">GRUB</span></span><span style="color:black">的相关设置。这里以</span><span style="color:black"><span style="font-family:Times New Roman">grub.conf</span></span><span style="color:black">为例：</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> <br> <br> </span></p> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"> </span></p> 
<div align="center" style="color:rgb(102,102,102)"> 
 <table width="400" border="1" cellpadding="0" cellspacing="0"><tbody><tr><td> <p align="left">default=0</p> <p align="left"> </p> <p align="left">timeout=10</p> <p align="left"> </p> <p align="left">splashimage=(hd0,1)/grub/image/37.xpm.gz</p> <p align="left"> </p> <p align="left">title kernel-2.4.22</p> <p align="left"> </p> <p align="left">               root (hd0,1)</p> <p align="left"> </p> <p align="left">               kernel/vmlinuz-2.4.22 ro root=oot=LABEL=/</p> <p align="left"> </p> <p align="left">        initrd /initrd-2.4.22.img</p> <p align="left"> </p> <p align="left">title kernel-2.4.23</p> <p align="left"> </p> <p align="left">        root (hd0,1)</p> <p align="left"> </p> <p align="left">        kernel /vmlinuz-2.4.23 ro root=/dev/hda1</p> <p align="left"> </p> <p align="left">        initrd /initrd-2.4.23.img</p> <p align="left"> </p> <p align="left">title kernel-2.6.0</p> <p align="left"> </p> <p align="left">        root (hd0,1)</p> <p align="left"> </p> <p align="left">        kernel /vmlinuz-2.6.0 ro root=/dev/hda1</p> <p align="left"> </p> <p align="left">        initrd /initrd-2.6.0.img  </p> <p align="left"> </p> </td></tr></tbody></table> 
</div> 
<p align="left" style="color:rgb(102,102,102)"><span style="color:black"><br> </span><span style="color:black">注意，在</span><span style="color:black"><span style="font-family:Times New Roman">2.4.23</span></span><span style="color:black">之前的内核，通常制定</span><span style="color:black"><span style="font-family:Times New Roman">LABEL</span></span><span style="color:black">参数，但是对于</span><span style="color:black"><span style="font-family:Times New Roman">2.4.23</span></span><span style="color:black">和</span><span style="color:black"><span style="font-family:Times New Roman">2.6.0</span></span><span style="color:black">内核，这个参数已经被废弃了，使用</span><span style="color:black"><span style="font-family:Times New Roman">root</span></span><span style="color:black">参数指定根文件系统的位置。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">如果重新启动后出现</span><span style="color:black"><span style="font-family:Times New Roman">“kernel panic”</span></span><span style="color:black">错误或显示应该修改</span><span style="color:black"><span style="font-family:Times New Roman">“init”</span></span><span style="color:black">信息，则基本都是以上</span><span style="color:black"><span style="font-family:Times New Roman">kernel</span></span><span style="color:black">语句错误。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black">根据发行版的不同，通常</span><span style="color:black"><span style="font-family:Times New Roman">GRUB</span></span><span style="color:black">配置文件会在</span><span style="color:black"><span style="font-family:Times New Roman">/etc/grub.conf</span></span><span style="color:black">、</span><span style="color:black"><span style="font-family:Times New Roman">/boot/grub/menu.lst</span></span><span style="color:black">或</span><span style="color:black"><span style="font-family:Times New Roman">/boot/grub/grub.conf</span></span><span style="color:black">三个地方。</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span><span style="color:black"><span style="font-family:Times New Roman">7.</span></span><span style="color:black">最后将在编译过程中的垃圾文件进行清理，命令如下：</span><span style="color:black"><span style="font-family:Times New Roman"> </span></span><span style="color:black"><br> </span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/931b6c25573903776e41be6028733a48/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">WPF中修改DataGrid单元格值并保存</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4663ff2b84a89fff4e90d418fc82534e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【按键】短按，长按，按键释放，三种模式的按键扫描程序（软件消抖动）--- 矩阵键盘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 追风少年的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>